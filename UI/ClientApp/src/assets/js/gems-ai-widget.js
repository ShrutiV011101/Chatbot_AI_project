/******/ (() => { // webpackBootstrap
// This entry need to be wrapped in an IIFE because it need to be isolated against other entry modules.
(() => {
(()=>{"use strict";var e,_={},i={};function n(e){var a=i[e];if(void 0!==a)return a.exports;var r=i[e]={exports:{}};return _[e].call(r.exports,r,r.exports,n),r.exports}n.m=_,e=[],n.O=(a,r,u,t)=>{if(!r){var o=1/0;for(l=0;l<e.length;l++){for(var[r,u,t]=e[l],s=!0,f=0;f<r.length;f++)(!1&t||o>=t)&&Object.keys(n.O).every(d=>n.O[d](r[f]))?r.splice(f--,1):(s=!1,t<o&&(o=t));if(s){e.splice(l--,1);var c=u();void 0!==c&&(a=c)}}return a}t=t||0;for(var l=e.length;l>0&&e[l-1][2]>t;l--)e[l]=e[l-1];e[l]=[r,u,t]},n.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return n.d(a,{a}),a},n.d=(e,a)=>{for(var r in a)n.o(a,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})},n.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={121:0};n.O.j=u=>0===e[u];var a=(u,t)=>{var f,c,[l,o,s]=t,v=0;if(l.some(b=>0!==e[b])){for(f in o)n.o(o,f)&&(n.m[f]=o[f]);if(s)var p=s(n)}for(u&&u(t);v<l.length;v++)n.o(e,c=l[v])&&e[c]&&e[c][0](),e[c]=0;return n.O(p)},r=self.webpackChunkClientAPP=self.webpackChunkClientAPP||[];r.forEach(a.bind(null,0)),r.push=a.bind(null,r.push.bind(r))})()})();
})();

// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
(self.webpackChunkClientAPP=self.webpackChunkClientAPP||[]).push([[461],{50:(te,Q,ve)=>{ve(935)},935:()=>{const te=globalThis;function Q(e){return(te.__Zone_symbol_prefix||"__zone_symbol__")+e}const Te=Object.getOwnPropertyDescriptor,Le=Object.defineProperty,Ie=Object.getPrototypeOf,_t=Object.create,Et=Array.prototype.slice,Me="addEventListener",Ze="removeEventListener",Ae=Q(Me),je=Q(Ze),ae="true",le="false",Pe=Q("");function He(e,r){return Zone.current.wrap(e,r)}function xe(e,r,c,t,i){return Zone.current.scheduleMacroTask(e,r,c,t,i)}const j=Q,Ce=typeof window<"u",ge=Ce?window:void 0,$=Ce&&ge||globalThis,Tt="removeAttribute";function Ve(e,r){for(let c=e.length-1;c>=0;c--)"function"==typeof e[c]&&(e[c]=He(e[c],r+"_"+c));return e}function We(e){return!e||!1!==e.writable&&!("function"==typeof e.get&&typeof e.set>"u")}const qe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,De=!("nw"in $)&&typeof $.process<"u"&&"[object process]"===$.process.toString(),Ge=!De&&!qe&&!(!Ce||!ge.HTMLElement),Xe=typeof $.process<"u"&&"[object process]"===$.process.toString()&&!qe&&!(!Ce||!ge.HTMLElement),Se={},yt=j("enable_beforeunload"),Ye=function(e){if(!(e=e||$.event))return;let r=Se[e.type];r||(r=Se[e.type]=j("ON_PROPERTY"+e.type));const c=this||e.target||$,t=c[r];let i;return Ge&&c===ge&&"error"===e.type?(i=t&&t.call(this,e.message,e.filename,e.lineno,e.colno,e.error),!0===i&&e.preventDefault()):(i=t&&t.apply(this,arguments),"beforeunload"===e.type&&$[yt]&&"string"==typeof i?e.returnValue=i:null!=i&&!i&&e.preventDefault()),i};function $e(e,r,c){let t=Te(e,r);if(!t&&c&&Te(c,r)&&(t={enumerable:!0,configurable:!0}),!t||!t.configurable)return;const i=j("on"+r+"patched");if(e.hasOwnProperty(i)&&e[i])return;delete t.writable,delete t.value;const u=t.get,E=t.set,T=r.slice(2);let m=Se[T];m||(m=Se[T]=j("ON_PROPERTY"+T)),t.set=function(D){let d=this;!d&&e===$&&(d=$),d&&("function"==typeof d[m]&&d.removeEventListener(T,Ye),E&&E.call(d,null),d[m]=D,"function"==typeof D&&d.addEventListener(T,Ye,!1))},t.get=function(){let D=this;if(!D&&e===$&&(D=$),!D)return null;const d=D[m];if(d)return d;if(u){let w=u.call(this);if(w)return t.set.call(this,w),"function"==typeof D[Tt]&&D.removeAttribute(r),w}return null},Le(e,r,t),e[i]=!0}function Ke(e,r,c){if(r)for(let t=0;t<r.length;t++)$e(e,"on"+r[t],c);else{const t=[];for(const i in e)"on"==i.slice(0,2)&&t.push(i);for(let i=0;i<t.length;i++)$e(e,t[i],c)}}const re=j("originalInstance");function we(e){const r=$[e];if(!r)return;$[j(e)]=r,$[e]=function(){const i=Ve(arguments,e);switch(i.length){case 0:this[re]=new r;break;case 1:this[re]=new r(i[0]);break;case 2:this[re]=new r(i[0],i[1]);break;case 3:this[re]=new r(i[0],i[1],i[2]);break;case 4:this[re]=new r(i[0],i[1],i[2],i[3]);break;default:throw new Error("Arg list too long.")}},fe($[e],r);const c=new r(function(){});let t;for(t in c)"XMLHttpRequest"===e&&"responseBlob"===t||function(i){"function"==typeof c[i]?$[e].prototype[i]=function(){return this[re][i].apply(this[re],arguments)}:Le($[e].prototype,i,{set:function(u){"function"==typeof u?(this[re][i]=He(u,e+"."+i),fe(this[re][i],u)):this[re][i]=u},get:function(){return this[re][i]}})}(t);for(t in r)"prototype"!==t&&r.hasOwnProperty(t)&&($[e][t]=r[t])}function ue(e,r,c){let t=e;for(;t&&!t.hasOwnProperty(r);)t=Ie(t);!t&&e[r]&&(t=e);const i=j(r);let u=null;if(t&&(!(u=t[i])||!t.hasOwnProperty(i))&&(u=t[i]=t[r],We(t&&Te(t,r)))){const T=c(u,i,r);t[r]=function(){return T(this,arguments)},fe(t[r],u)}return u}function mt(e,r,c){let t=null;function i(u){const E=u.data;return E.args[E.cbIdx]=function(){u.invoke.apply(this,arguments)},t.apply(E.target,E.args),u}t=ue(e,r,u=>function(E,T){const m=c(E,T);return m.cbIdx>=0&&"function"==typeof T[m.cbIdx]?xe(m.name,T[m.cbIdx],m,i):u.apply(E,T)})}function fe(e,r){e[j("OriginalDelegate")]=r}let Je=!1,Be=!1;function kt(){if(Je)return Be;Je=!0;try{const e=ge.navigator.userAgent;(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/")||-1!==e.indexOf("Edge/"))&&(Be=!0)}catch{}return Be}function Qe(e){return"function"==typeof e}function et(e){return"number"==typeof e}let ye=!1;if(typeof window<"u")try{const e=Object.defineProperty({},"passive",{get:function(){ye=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch{ye=!1}const vt={useG:!0},ne={},tt={},nt=new RegExp("^"+Pe+"(\\w+)(true|false)$"),rt=j("propagationStopped");function ot(e,r){const c=(r?r(e):e)+le,t=(r?r(e):e)+ae,i=Pe+c,u=Pe+t;ne[e]={},ne[e][le]=i,ne[e][ae]=u}function bt(e,r,c,t){const i=t&&t.add||Me,u=t&&t.rm||Ze,E=t&&t.listeners||"eventListeners",T=t&&t.rmAll||"removeAllListeners",m=j(i),D="."+i+":",d="prependListener",w="."+d+":",Z=function(k,h,H){if(k.isRemoved)return;const V=k.callback;let Y;"object"==typeof V&&V.handleEvent&&(k.callback=g=>V.handleEvent(g),k.originalDelegate=V);try{k.invoke(k,h,[H])}catch(g){Y=g}const G=k.options;return G&&"object"==typeof G&&G.once&&h[u].call(h,H.type,k.originalDelegate?k.originalDelegate:k.callback,G),Y};function x(k,h,H){if(!(h=h||e.event))return;const V=k||h.target||e,Y=V[ne[h.type][H?ae:le]];if(Y){const G=[];if(1===Y.length){const g=Z(Y[0],V,h);g&&G.push(g)}else{const g=Y.slice();for(let z=0;z<g.length&&(!h||!0!==h[rt]);z++){const O=Z(g[z],V,h);O&&G.push(O)}}if(1===G.length)throw G[0];for(let g=0;g<G.length;g++){const z=G[g];r.nativeScheduleMicroTask(()=>{throw z})}}}const U=function(k){return x(this,k,!1)},K=function(k){return x(this,k,!0)};function J(k,h){if(!k)return!1;let H=!0;h&&void 0!==h.useG&&(H=h.useG);const V=h&&h.vh;let Y=!0;h&&void 0!==h.chkDup&&(Y=h.chkDup);let G=!1;h&&void 0!==h.rt&&(G=h.rt);let g=k;for(;g&&!g.hasOwnProperty(i);)g=Ie(g);if(!g&&k[i]&&(g=k),!g||g[m])return!1;const z=h&&h.eventNameToString,O={},R=g[m]=g[i],b=g[j(u)]=g[u],S=g[j(E)]=g[E],ee=g[j(T)]=g[T];let W;h&&h.prepend&&(W=g[j(h.prepend)]=g[h.prepend]);const q=H?function(s){if(!O.isExisting)return R.call(O.target,O.eventName,O.capture?K:U,O.options)}:function(s){return R.call(O.target,O.eventName,s.invoke,O.options)},A=H?function(s){if(!s.isRemoved){const l=ne[s.eventName];let v;l&&(v=l[s.capture?ae:le]);const C=v&&s.target[v];if(C)for(let y=0;y<C.length;y++)if(C[y]===s){C.splice(y,1),s.isRemoved=!0,s.removeAbortListener&&(s.removeAbortListener(),s.removeAbortListener=null),0===C.length&&(s.allRemoved=!0,s.target[v]=null);break}}if(s.allRemoved)return b.call(s.target,s.eventName,s.capture?K:U,s.options)}:function(s){return b.call(s.target,s.eventName,s.invoke,s.options)},he=h&&h.diff?h.diff:function(s,l){const v=typeof l;return"function"===v&&s.callback===l||"object"===v&&s.originalDelegate===l},de=Zone[j("UNPATCHED_EVENTS")],oe=e[j("PASSIVE_EVENTS")],a=function(s,l,v,C,y=!1,L=!1){return function(){const I=this||e;let M=arguments[0];h&&h.transferEventName&&(M=h.transferEventName(M));let B=arguments[1];if(!B)return s.apply(this,arguments);if(De&&"uncaughtException"===M)return s.apply(this,arguments);let F=!1;if("function"!=typeof B){if(!B.handleEvent)return s.apply(this,arguments);F=!0}if(V&&!V(s,B,I,arguments))return;const Ee=ye&&!!oe&&-1!==oe.indexOf(M),ie=function f(s){if("object"==typeof s&&null!==s){const l={...s};return s.signal&&(l.signal=s.signal),l}return s}(function N(s,l){return!ye&&"object"==typeof s&&s?!!s.capture:ye&&l?"boolean"==typeof s?{capture:s,passive:!0}:s?"object"==typeof s&&!1!==s.passive?{...s,passive:!0}:s:{passive:!0}:s}(arguments[2],Ee)),pe=ie?.signal;if(pe?.aborted)return;if(de)for(let ce=0;ce<de.length;ce++)if(M===de[ce])return Ee?s.call(I,M,B,ie):s.apply(this,arguments);const Ue=!!ie&&("boolean"==typeof ie||ie.capture),lt=!(!ie||"object"!=typeof ie)&&ie.once,At=Zone.current;let ze=ne[M];ze||(ot(M,z),ze=ne[M]);const ut=ze[Ue?ae:le];let Ne,ke=I[ut],ft=!1;if(ke){if(ft=!0,Y)for(let ce=0;ce<ke.length;ce++)if(he(ke[ce],B))return}else ke=I[ut]=[];const ht=I.constructor.name,dt=tt[ht];dt&&(Ne=dt[M]),Ne||(Ne=ht+l+(z?z(M):M)),O.options=ie,lt&&(O.options.once=!1),O.target=I,O.capture=Ue,O.eventName=M,O.isExisting=ft;const Re=H?vt:void 0;Re&&(Re.taskData=O),pe&&(O.options.signal=void 0);const se=At.scheduleEventTask(Ne,B,Re,v,C);if(pe){O.options.signal=pe;const ce=()=>se.zone.cancelTask(se);s.call(pe,"abort",ce,{once:!0}),se.removeAbortListener=()=>pe.removeEventListener("abort",ce)}return O.target=null,Re&&(Re.taskData=null),lt&&(O.options.once=!0),!ye&&"boolean"==typeof se.options||(se.options=ie),se.target=I,se.capture=Ue,se.eventName=M,F&&(se.originalDelegate=B),L?ke.unshift(se):ke.push(se),y?I:void 0}};return g[i]=a(R,D,q,A,G),W&&(g[d]=a(W,w,function(s){return W.call(O.target,O.eventName,s.invoke,O.options)},A,G,!0)),g[u]=function(){const s=this||e;let l=arguments[0];h&&h.transferEventName&&(l=h.transferEventName(l));const v=arguments[2],C=!!v&&("boolean"==typeof v||v.capture),y=arguments[1];if(!y)return b.apply(this,arguments);if(V&&!V(b,y,s,arguments))return;const L=ne[l];let I;L&&(I=L[C?ae:le]);const M=I&&s[I];if(M)for(let B=0;B<M.length;B++){const F=M[B];if(he(F,y))return M.splice(B,1),F.isRemoved=!0,0!==M.length||(F.allRemoved=!0,s[I]=null,C||"string"!=typeof l)||(s[Pe+"ON_PROPERTY"+l]=null),F.zone.cancelTask(F),G?s:void 0}return b.apply(this,arguments)},g[E]=function(){const s=this||e;let l=arguments[0];h&&h.transferEventName&&(l=h.transferEventName(l));const v=[],C=st(s,z?z(l):l);for(let y=0;y<C.length;y++){const L=C[y];v.push(L.originalDelegate?L.originalDelegate:L.callback)}return v},g[T]=function(){const s=this||e;let l=arguments[0];if(l){h&&h.transferEventName&&(l=h.transferEventName(l));const v=ne[l];if(v){const L=s[v[le]],I=s[v[ae]];if(L){const M=L.slice();for(let B=0;B<M.length;B++){const F=M[B];this[u].call(this,l,F.originalDelegate?F.originalDelegate:F.callback,F.options)}}if(I){const M=I.slice();for(let B=0;B<M.length;B++){const F=M[B];this[u].call(this,l,F.originalDelegate?F.originalDelegate:F.callback,F.options)}}}}else{const v=Object.keys(s);for(let C=0;C<v.length;C++){const L=nt.exec(v[C]);let I=L&&L[1];I&&"removeListener"!==I&&this[T].call(this,I)}this[T].call(this,"removeListener")}if(G)return this},fe(g[i],R),fe(g[u],b),ee&&fe(g[T],ee),S&&fe(g[E],S),!0}let X=[];for(let k=0;k<c.length;k++)X[k]=J(c[k],t);return X}function st(e,r){if(!r){const u=[];for(let E in e){const T=nt.exec(E);let m=T&&T[1];if(m&&(!r||m===r)){const D=e[E];if(D)for(let d=0;d<D.length;d++)u.push(D[d])}}return u}let c=ne[r];c||(ot(r),c=ne[r]);const t=e[c[le]],i=e[c[ae]];return t?i?t.concat(i):t.slice():i?i.slice():[]}function Pt(e,r){const c=e.Event;c&&c.prototype&&r.patchMethod(c.prototype,"stopImmediatePropagation",t=>function(i,u){i[rt]=!0,t&&t.apply(i,u)})}const Oe=j("zoneTask");function me(e,r,c,t){let i=null,u=null;c+=t;const E={};function T(D){const d=D.data;d.args[0]=function(){return D.invoke.apply(this,arguments)};const w=i.apply(e,d.args);return et(w)?d.handleId=w:(d.handle=w,d.isRefreshable=Qe(w.refresh)),D}function m(D){const{handle:d,handleId:w}=D.data;return u.call(e,d??w)}i=ue(e,r+=t,D=>function(d,w){if(Qe(w[0])){const Z={isRefreshable:!1,isPeriodic:"Interval"===t,delay:"Timeout"===t||"Interval"===t?w[1]||0:void 0,args:w},x=w[0];w[0]=function(){try{return x.apply(this,arguments)}finally{const{handle:H,handleId:V,isPeriodic:Y,isRefreshable:G}=Z;!Y&&!G&&(V?delete E[V]:H&&(H[Oe]=null))}};const U=xe(r,w[0],Z,T,m);if(!U)return U;const{handleId:K,handle:J,isRefreshable:X,isPeriodic:k}=U.data;if(K)E[K]=U;else if(J&&(J[Oe]=U,X&&!k)){const h=J.refresh;J.refresh=function(){const{zone:H,state:V}=U;return"notScheduled"===V?(U._state="scheduled",H._updateTaskCount(U,1)):"running"===V&&(U._state="scheduling"),h.call(this)}}return J??K??U}return D.apply(e,w)}),u=ue(e,c,D=>function(d,w){const Z=w[0];let x;et(Z)?(x=E[Z],delete E[Z]):(x=Z?.[Oe],x?Z[Oe]=null:x=Z),x?.type?x.cancelFn&&x.zone.cancelTask(x):D.apply(e,w)})}function it(e,r,c){if(!c||0===c.length)return r;const t=c.filter(u=>u.target===e);if(!t||0===t.length)return r;const i=t[0].ignoreProperties;return r.filter(u=>-1===i.indexOf(u))}function ct(e,r,c,t){e&&Ke(e,it(e,r,c),t)}function Fe(e){return Object.getOwnPropertyNames(e).filter(r=>r.startsWith("on")&&r.length>2).map(r=>r.substring(2))}function It(e,r,c,t,i){const u=Zone.__symbol__(t);if(r[u])return;const E=r[u]=r[t];r[t]=function(T,m,D){return m&&m.prototype&&i.forEach(function(d){const w=`${c}.${t}::`+d,Z=m.prototype;try{if(Z.hasOwnProperty(d)){const x=e.ObjectGetOwnPropertyDescriptor(Z,d);x&&x.value?(x.value=e.wrapWithCurrentZone(x.value,w),e._redefineProperty(m.prototype,d,x)):Z[d]&&(Z[d]=e.wrapWithCurrentZone(Z[d],w))}else Z[d]&&(Z[d]=e.wrapWithCurrentZone(Z[d],w))}catch{}}),E.call(r,T,m,D)},e.attachOriginToPatched(r[t],E)}const at=function be(){const e=globalThis,r=!0===e[Q("forceDuplicateZoneCheck")];if(e.Zone&&(r||"function"!=typeof e.Zone.__symbol__))throw new Error("Zone already loaded.");return e.Zone??=function ve(){const e=te.performance;function r(N){e&&e.mark&&e.mark(N)}function c(N,_){e&&e.measure&&e.measure(N,_)}r("Zone");let t=(()=>{class N{static{this.__symbol__=Q}static assertZonePatched(){if(te.Promise!==O.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let n=N.current;for(;n.parent;)n=n.parent;return n}static get current(){return b.zone}static get currentTask(){return S}static __load_patch(n,o,p=!1){if(O.hasOwnProperty(n)){const P=!0===te[Q("forceDuplicateZoneCheck")];if(!p&&P)throw Error("Already loaded patch: "+n)}else if(!te["__Zone_disable_"+n]){const P="Zone:"+n;r(P),O[n]=o(te,N,R),c(P,P)}}get parent(){return this._parent}get name(){return this._name}constructor(n,o){this._parent=n,this._name=o?o.name||"unnamed":"<root>",this._properties=o&&o.properties||{},this._zoneDelegate=new u(this,this._parent&&this._parent._zoneDelegate,o)}get(n){const o=this.getZoneWith(n);if(o)return o._properties[n]}getZoneWith(n){let o=this;for(;o;){if(o._properties.hasOwnProperty(n))return o;o=o._parent}return null}fork(n){if(!n)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,n)}wrap(n,o){if("function"!=typeof n)throw new Error("Expecting function got: "+n);const p=this._zoneDelegate.intercept(this,n,o),P=this;return function(){return P.runGuarded(p,this,arguments,o)}}run(n,o,p,P){b={parent:b,zone:this};try{return this._zoneDelegate.invoke(this,n,o,p,P)}finally{b=b.parent}}runGuarded(n,o=null,p,P){b={parent:b,zone:this};try{try{return this._zoneDelegate.invoke(this,n,o,p,P)}catch(q){if(this._zoneDelegate.handleError(this,q))throw q}}finally{b=b.parent}}runTask(n,o,p){if(n.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(n.zone||J).name+"; Execution: "+this.name+")");const P=n,{type:q,data:{isPeriodic:A=!1,isRefreshable:_e=!1}={}}=n;if(n.state===X&&(q===z||q===g))return;const he=n.state!=H;he&&P._transitionTo(H,h);const de=S;S=P,b={parent:b,zone:this};try{q==g&&n.data&&!A&&!_e&&(n.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,P,o,p)}catch(oe){if(this._zoneDelegate.handleError(this,oe))throw oe}}finally{const oe=n.state;if(oe!==X&&oe!==Y)if(q==z||A||_e&&oe===k)he&&P._transitionTo(h,H,k);else{const f=P._zoneDelegates;this._updateTaskCount(P,-1),he&&P._transitionTo(X,H,X),_e&&(P._zoneDelegates=f)}b=b.parent,S=de}}scheduleTask(n){if(n.zone&&n.zone!==this){let p=this;for(;p;){if(p===n.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${n.zone.name}`);p=p.parent}}n._transitionTo(k,X);const o=[];n._zoneDelegates=o,n._zone=this;try{n=this._zoneDelegate.scheduleTask(this,n)}catch(p){throw n._transitionTo(Y,k,X),this._zoneDelegate.handleError(this,p),p}return n._zoneDelegates===o&&this._updateTaskCount(n,1),n.state==k&&n._transitionTo(h,k),n}scheduleMicroTask(n,o,p,P){return this.scheduleTask(new E(G,n,o,p,P,void 0))}scheduleMacroTask(n,o,p,P,q){return this.scheduleTask(new E(g,n,o,p,P,q))}scheduleEventTask(n,o,p,P,q){return this.scheduleTask(new E(z,n,o,p,P,q))}cancelTask(n){if(n.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(n.zone||J).name+"; Execution: "+this.name+")");if(n.state===h||n.state===H){n._transitionTo(V,h,H);try{this._zoneDelegate.cancelTask(this,n)}catch(o){throw n._transitionTo(Y,V),this._zoneDelegate.handleError(this,o),o}return this._updateTaskCount(n,-1),n._transitionTo(X,V),n.runCount=-1,n}}_updateTaskCount(n,o){const p=n._zoneDelegates;-1==o&&(n._zoneDelegates=null);for(let P=0;P<p.length;P++)p[P]._updateTaskCount(n.type,o)}}return N})();const i={name:"",onHasTask:(N,_,n,o)=>N.hasTask(n,o),onScheduleTask:(N,_,n,o)=>N.scheduleTask(n,o),onInvokeTask:(N,_,n,o,p,P)=>N.invokeTask(n,o,p,P),onCancelTask:(N,_,n,o)=>N.cancelTask(n,o)};class u{get zone(){return this._zone}constructor(_,n,o){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this._zone=_,this._parentDelegate=n,this._forkZS=o&&(o&&o.onFork?o:n._forkZS),this._forkDlgt=o&&(o.onFork?n:n._forkDlgt),this._forkCurrZone=o&&(o.onFork?this._zone:n._forkCurrZone),this._interceptZS=o&&(o.onIntercept?o:n._interceptZS),this._interceptDlgt=o&&(o.onIntercept?n:n._interceptDlgt),this._interceptCurrZone=o&&(o.onIntercept?this._zone:n._interceptCurrZone),this._invokeZS=o&&(o.onInvoke?o:n._invokeZS),this._invokeDlgt=o&&(o.onInvoke?n:n._invokeDlgt),this._invokeCurrZone=o&&(o.onInvoke?this._zone:n._invokeCurrZone),this._handleErrorZS=o&&(o.onHandleError?o:n._handleErrorZS),this._handleErrorDlgt=o&&(o.onHandleError?n:n._handleErrorDlgt),this._handleErrorCurrZone=o&&(o.onHandleError?this._zone:n._handleErrorCurrZone),this._scheduleTaskZS=o&&(o.onScheduleTask?o:n._scheduleTaskZS),this._scheduleTaskDlgt=o&&(o.onScheduleTask?n:n._scheduleTaskDlgt),this._scheduleTaskCurrZone=o&&(o.onScheduleTask?this._zone:n._scheduleTaskCurrZone),this._invokeTaskZS=o&&(o.onInvokeTask?o:n._invokeTaskZS),this._invokeTaskDlgt=o&&(o.onInvokeTask?n:n._invokeTaskDlgt),this._invokeTaskCurrZone=o&&(o.onInvokeTask?this._zone:n._invokeTaskCurrZone),this._cancelTaskZS=o&&(o.onCancelTask?o:n._cancelTaskZS),this._cancelTaskDlgt=o&&(o.onCancelTask?n:n._cancelTaskDlgt),this._cancelTaskCurrZone=o&&(o.onCancelTask?this._zone:n._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const p=o&&o.onHasTask;(p||n&&n._hasTaskZS)&&(this._hasTaskZS=p?o:i,this._hasTaskDlgt=n,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,o.onScheduleTask||(this._scheduleTaskZS=i,this._scheduleTaskDlgt=n,this._scheduleTaskCurrZone=this._zone),o.onInvokeTask||(this._invokeTaskZS=i,this._invokeTaskDlgt=n,this._invokeTaskCurrZone=this._zone),o.onCancelTask||(this._cancelTaskZS=i,this._cancelTaskDlgt=n,this._cancelTaskCurrZone=this._zone))}fork(_,n){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,_,n):new t(_,n)}intercept(_,n,o){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,_,n,o):n}invoke(_,n,o,p,P){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,_,n,o,p,P):n.apply(o,p)}handleError(_,n){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,_,n)}scheduleTask(_,n){let o=n;if(this._scheduleTaskZS)this._hasTaskZS&&o._zoneDelegates.push(this._hasTaskDlgtOwner),o=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,_,n),o||(o=n);else if(n.scheduleFn)n.scheduleFn(n);else{if(n.type!=G)throw new Error("Task is missing scheduleFn.");U(n)}return o}invokeTask(_,n,o,p){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,_,n,o,p):n.callback.apply(o,p)}cancelTask(_,n){let o;if(this._cancelTaskZS)o=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,_,n);else{if(!n.cancelFn)throw Error("Task is not cancelable");o=n.cancelFn(n)}return o}hasTask(_,n){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,_,n)}catch(o){this.handleError(_,o)}}_updateTaskCount(_,n){const o=this._taskCounts,p=o[_],P=o[_]=p+n;if(P<0)throw new Error("More tasks executed then were scheduled.");0!=p&&0!=P||this.hasTask(this._zone,{microTask:o.microTask>0,macroTask:o.macroTask>0,eventTask:o.eventTask>0,change:_})}}class E{constructor(_,n,o,p,P,q){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=_,this.source=n,this.data=p,this.scheduleFn=P,this.cancelFn=q,!o)throw new Error("callback is not defined");this.callback=o;const A=this;this.invoke=_===z&&p&&p.useG?E.invokeTask:function(){return E.invokeTask.call(te,A,this,arguments)}}static invokeTask(_,n,o){_||(_=this),ee++;try{return _.runCount++,_.zone.runTask(_,n,o)}finally{1==ee&&K(),ee--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(X,k)}_transitionTo(_,n,o){if(this._state!==n&&this._state!==o)throw new Error(`${this.type} '${this.source}': can not transition to '${_}', expecting state '${n}'${o?" or '"+o+"'":""}, was '${this._state}'.`);this._state=_,_==X&&(this._zoneDelegates=null)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const T=Q("setTimeout"),m=Q("Promise"),D=Q("then");let Z,d=[],w=!1;function x(N){if(Z||te[m]&&(Z=te[m].resolve(0)),Z){let _=Z[D];_||(_=Z.then),_.call(Z,N)}else te[T](N,0)}function U(N){0===ee&&0===d.length&&x(K),N&&d.push(N)}function K(){if(!w){for(w=!0;d.length;){const N=d;d=[];for(let _=0;_<N.length;_++){const n=N[_];try{n.zone.runTask(n,null,null)}catch(o){R.onUnhandledError(o)}}}R.microtaskDrainDone(),w=!1}}const J={name:"NO ZONE"},X="notScheduled",k="scheduling",h="scheduled",H="running",V="canceling",Y="unknown",G="microTask",g="macroTask",z="eventTask",O={},R={symbol:Q,currentZoneFrame:()=>b,onUnhandledError:W,microtaskDrainDone:W,scheduleMicroTask:U,showUncaughtError:()=>!t[Q("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:W,patchMethod:()=>W,bindArguments:()=>[],patchThen:()=>W,patchMacroTask:()=>W,patchEventPrototype:()=>W,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>W,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>W,wrapWithCurrentZone:()=>W,filterProperties:()=>[],attachOriginToPatched:()=>W,_redefineProperty:()=>W,patchCallbacks:()=>W,nativeScheduleMicroTask:x};let b={parent:null,zone:new t(null,null)},S=null,ee=0;function W(){}return c("Zone","Zone"),t}(),e.Zone}();(function Zt(e){(function Nt(e){e.__load_patch("ZoneAwarePromise",(r,c,t)=>{const i=Object.getOwnPropertyDescriptor,u=Object.defineProperty,T=t.symbol,m=[],D=!1!==r[T("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],d=T("Promise"),w=T("then"),Z="__creationTrace__";t.onUnhandledError=f=>{if(t.showUncaughtError()){const a=f&&f.rejection;a?console.error("Unhandled Promise rejection:",a instanceof Error?a.message:a,"; Zone:",f.zone.name,"; Task:",f.task&&f.task.source,"; Value:",a,a instanceof Error?a.stack:void 0):console.error(f)}},t.microtaskDrainDone=()=>{for(;m.length;){const f=m.shift();try{f.zone.runGuarded(()=>{throw f.throwOriginal?f.rejection:f})}catch(a){U(a)}}};const x=T("unhandledPromiseRejectionHandler");function U(f){t.onUnhandledError(f);try{const a=c[x];"function"==typeof a&&a.call(this,f)}catch{}}function K(f){return f&&f.then}function J(f){return f}function X(f){return A.reject(f)}const k=T("state"),h=T("value"),H=T("finally"),V=T("parentPromiseValue"),Y=T("parentPromiseState"),G="Promise.then",g=null,z=!0,O=!1,R=0;function b(f,a){return s=>{try{N(f,a,s)}catch(l){N(f,!1,l)}}}const S=function(){let f=!1;return function(s){return function(){f||(f=!0,s.apply(null,arguments))}}},ee="Promise resolved with itself",W=T("currentTaskTrace");function N(f,a,s){const l=S();if(f===s)throw new TypeError(ee);if(f[k]===g){let v=null;try{("object"==typeof s||"function"==typeof s)&&(v=s&&s.then)}catch(C){return l(()=>{N(f,!1,C)})(),f}if(a!==O&&s instanceof A&&s.hasOwnProperty(k)&&s.hasOwnProperty(h)&&s[k]!==g)n(s),N(f,s[k],s[h]);else if(a!==O&&"function"==typeof v)try{v.call(s,l(b(f,a)),l(b(f,!1)))}catch(C){l(()=>{N(f,!1,C)})()}else{f[k]=a;const C=f[h];if(f[h]=s,f[H]===H&&a===z&&(f[k]=f[Y],f[h]=f[V]),a===O&&s instanceof Error){const y=c.currentTask&&c.currentTask.data&&c.currentTask.data[Z];y&&u(s,W,{configurable:!0,enumerable:!1,writable:!0,value:y})}for(let y=0;y<C.length;)o(f,C[y++],C[y++],C[y++],C[y++]);if(0==C.length&&a==O){f[k]=R;let y=s;try{throw new Error("Uncaught (in promise): "+function E(f){return f&&f.toString===Object.prototype.toString?(f.constructor&&f.constructor.name||"")+": "+JSON.stringify(f):f?f.toString():Object.prototype.toString.call(f)}(s)+(s&&s.stack?"\n"+s.stack:""))}catch(L){y=L}D&&(y.throwOriginal=!0),y.rejection=s,y.promise=f,y.zone=c.current,y.task=c.currentTask,m.push(y),t.scheduleMicroTask()}}}return f}const _=T("rejectionHandledHandler");function n(f){if(f[k]===R){try{const a=c[_];a&&"function"==typeof a&&a.call(this,{rejection:f[h],promise:f})}catch{}f[k]=O;for(let a=0;a<m.length;a++)f===m[a].promise&&m.splice(a,1)}}function o(f,a,s,l,v){n(f);const C=f[k],y=C?"function"==typeof l?l:J:"function"==typeof v?v:X;a.scheduleMicroTask(G,()=>{try{const L=f[h],I=!!s&&H===s[H];I&&(s[V]=L,s[Y]=C);const M=a.run(y,void 0,I&&y!==X&&y!==J?[]:[L]);N(s,!0,M)}catch(L){N(s,!1,L)}},s)}const P=function(){},q=r.AggregateError;class A{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(a){return a instanceof A?a:N(new this(null),z,a)}static reject(a){return N(new this(null),O,a)}static withResolvers(){const a={};return a.promise=new A((s,l)=>{a.resolve=s,a.reject=l}),a}static any(a){if(!a||"function"!=typeof a[Symbol.iterator])return Promise.reject(new q([],"All promises were rejected"));const s=[];let l=0;try{for(let y of a)l++,s.push(A.resolve(y))}catch{return Promise.reject(new q([],"All promises were rejected"))}if(0===l)return Promise.reject(new q([],"All promises were rejected"));let v=!1;const C=[];return new A((y,L)=>{for(let I=0;I<s.length;I++)s[I].then(M=>{v||(v=!0,y(M))},M=>{C.push(M),l--,0===l&&(v=!0,L(new q(C,"All promises were rejected")))})})}static race(a){let s,l,v=new this((L,I)=>{s=L,l=I});function C(L){s(L)}function y(L){l(L)}for(let L of a)K(L)||(L=this.resolve(L)),L.then(C,y);return v}static all(a){return A.allWithCallback(a)}static allSettled(a){return(this&&this.prototype instanceof A?this:A).allWithCallback(a,{thenCallback:l=>({status:"fulfilled",value:l}),errorCallback:l=>({status:"rejected",reason:l})})}static allWithCallback(a,s){let l,v,C=new this((M,B)=>{l=M,v=B}),y=2,L=0;const I=[];for(let M of a){K(M)||(M=this.resolve(M));const B=L;try{M.then(F=>{I[B]=s?s.thenCallback(F):F,y--,0===y&&l(I)},F=>{s?(I[B]=s.errorCallback(F),y--,0===y&&l(I)):v(F)})}catch(F){v(F)}y++,L++}return y-=2,0===y&&l(I),C}constructor(a){const s=this;if(!(s instanceof A))throw new Error("Must be an instanceof Promise.");s[k]=g,s[h]=[];try{const l=S();a&&a(l(b(s,z)),l(b(s,O)))}catch(l){N(s,!1,l)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return A}then(a,s){let l=this.constructor?.[Symbol.species];(!l||"function"!=typeof l)&&(l=this.constructor||A);const v=new l(P),C=c.current;return this[k]==g?this[h].push(C,v,a,s):o(this,C,v,a,s),v}catch(a){return this.then(null,a)}finally(a){let s=this.constructor?.[Symbol.species];(!s||"function"!=typeof s)&&(s=A);const l=new s(P);l[H]=H;const v=c.current;return this[k]==g?this[h].push(v,l,a,a):o(this,v,l,a,a),l}}A.resolve=A.resolve,A.reject=A.reject,A.race=A.race,A.all=A.all;const _e=r[d]=r.Promise;r.Promise=A;const he=T("thenPatched");function de(f){const a=f.prototype,s=i(a,"then");if(s&&(!1===s.writable||!s.configurable))return;const l=a.then;a[w]=l,f.prototype.then=function(v,C){return new A((L,I)=>{l.call(this,L,I)}).then(v,C)},f[he]=!0}return t.patchThen=de,_e&&(de(_e),ue(r,"fetch",f=>function oe(f){return function(a,s){let l=f.apply(a,s);if(l instanceof A)return l;let v=l.constructor;return v[he]||de(v),l}}(f))),Promise[c.__symbol__("uncaughtPromiseErrors")]=m,A})})(e),function Lt(e){e.__load_patch("toString",r=>{const c=Function.prototype.toString,t=j("OriginalDelegate"),i=j("Promise"),u=j("Error"),E=function(){if("function"==typeof this){const d=this[t];if(d)return"function"==typeof d?c.call(d):Object.prototype.toString.call(d);if(this===Promise){const w=r[i];if(w)return c.call(w)}if(this===Error){const w=r[u];if(w)return c.call(w)}}return c.call(this)};E[t]=c,Function.prototype.toString=E;const T=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":T.call(this)}})}(e),function Mt(e){e.__load_patch("util",(r,c,t)=>{const i=Fe(r);t.patchOnProperties=Ke,t.patchMethod=ue,t.bindArguments=Ve,t.patchMacroTask=mt;const u=c.__symbol__("BLACK_LISTED_EVENTS"),E=c.__symbol__("UNPATCHED_EVENTS");r[E]&&(r[u]=r[E]),r[u]&&(c[u]=c[E]=r[u]),t.patchEventPrototype=Pt,t.patchEventTarget=bt,t.isIEOrEdge=kt,t.ObjectDefineProperty=Le,t.ObjectGetOwnPropertyDescriptor=Te,t.ObjectCreate=_t,t.ArraySlice=Et,t.patchClass=we,t.wrapWithCurrentZone=He,t.filterProperties=it,t.attachOriginToPatched=fe,t._redefineProperty=Object.defineProperty,t.patchCallbacks=It,t.getGlobalObjects=()=>({globalSources:tt,zoneSymbolEventNames:ne,eventNames:i,isBrowser:Ge,isMix:Xe,isNode:De,TRUE_STR:ae,FALSE_STR:le,ZONE_SYMBOL_PREFIX:Pe,ADD_EVENT_LISTENER_STR:Me,REMOVE_EVENT_LISTENER_STR:Ze})})}(e)})(at),function Ot(e){e.__load_patch("legacy",r=>{const c=r[e.__symbol__("legacyPatch")];c&&c()}),e.__load_patch("timers",r=>{const c="set",t="clear";me(r,c,t,"Timeout"),me(r,c,t,"Interval"),me(r,c,t,"Immediate")}),e.__load_patch("requestAnimationFrame",r=>{me(r,"request","cancel","AnimationFrame"),me(r,"mozRequest","mozCancel","AnimationFrame"),me(r,"webkitRequest","webkitCancel","AnimationFrame")}),e.__load_patch("blocking",(r,c)=>{const t=["alert","prompt","confirm"];for(let i=0;i<t.length;i++)ue(r,t[i],(E,T,m)=>function(D,d){return c.current.run(E,r,d,m)})}),e.__load_patch("EventTarget",(r,c,t)=>{(function Dt(e,r){r.patchEventPrototype(e,r)})(r,t),function Ct(e,r){if(Zone[r.symbol("patchEventTarget")])return;const{eventNames:c,zoneSymbolEventNames:t,TRUE_STR:i,FALSE_STR:u,ZONE_SYMBOL_PREFIX:E}=r.getGlobalObjects();for(let m=0;m<c.length;m++){const D=c[m],Z=E+(D+u),x=E+(D+i);t[D]={},t[D][u]=Z,t[D][i]=x}const T=e.EventTarget;T&&T.prototype&&r.patchEventTarget(e,r,[T&&T.prototype])}(r,t);const i=r.XMLHttpRequestEventTarget;i&&i.prototype&&t.patchEventTarget(r,t,[i.prototype])}),e.__load_patch("MutationObserver",(r,c,t)=>{we("MutationObserver"),we("WebKitMutationObserver")}),e.__load_patch("IntersectionObserver",(r,c,t)=>{we("IntersectionObserver")}),e.__load_patch("FileReader",(r,c,t)=>{we("FileReader")}),e.__load_patch("on_property",(r,c,t)=>{!function St(e,r){if(De&&!Xe||Zone[e.symbol("patchEvents")])return;const c=r.__Zone_ignore_on_properties;let t=[];if(Ge){const i=window;t=t.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);const u=function pt(){try{const e=ge.navigator.userAgent;if(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/"))return!0}catch{}return!1}()?[{target:i,ignoreProperties:["error"]}]:[];ct(i,Fe(i),c&&c.concat(u),Ie(i))}t=t.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let i=0;i<t.length;i++){const u=r[t[i]];u&&u.prototype&&ct(u.prototype,Fe(u.prototype),c)}}(t,r)}),e.__load_patch("customElements",(r,c,t)=>{!function Rt(e,r){const{isBrowser:c,isMix:t}=r.getGlobalObjects();(c||t)&&e.customElements&&"customElements"in e&&r.patchCallbacks(r,e.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"])}(r,t)}),e.__load_patch("XHR",(r,c)=>{!function D(d){const w=d.XMLHttpRequest;if(!w)return;const Z=w.prototype;let U=Z[Ae],K=Z[je];if(!U){const R=d.XMLHttpRequestEventTarget;if(R){const b=R.prototype;U=b[Ae],K=b[je]}}const J="readystatechange",X="scheduled";function k(R){const b=R.data,S=b.target;S[E]=!1,S[m]=!1;const ee=S[u];U||(U=S[Ae],K=S[je]),ee&&K.call(S,J,ee);const W=S[u]=()=>{if(S.readyState===S.DONE)if(!b.aborted&&S[E]&&R.state===X){const _=S[c.__symbol__("loadfalse")];if(0!==S.status&&_&&_.length>0){const n=R.invoke;R.invoke=function(){const o=S[c.__symbol__("loadfalse")];for(let p=0;p<o.length;p++)o[p]===R&&o.splice(p,1);!b.aborted&&R.state===X&&n.call(R)},_.push(R)}else R.invoke()}else!b.aborted&&!1===S[E]&&(S[m]=!0)};return U.call(S,J,W),S[t]||(S[t]=R),z.apply(S,b.args),S[E]=!0,R}function h(){}function H(R){const b=R.data;return b.aborted=!0,O.apply(b.target,b.args)}const V=ue(Z,"open",()=>function(R,b){return R[i]=0==b[2],R[T]=b[1],V.apply(R,b)}),G=j("fetchTaskAborting"),g=j("fetchTaskScheduling"),z=ue(Z,"send",()=>function(R,b){if(!0===c.current[g]||R[i])return z.apply(R,b);{const S={target:R,url:R[T],isPeriodic:!1,args:b,aborted:!1},ee=xe("XMLHttpRequest.send",h,S,k,H);R&&!0===R[m]&&!S.aborted&&ee.state===X&&ee.invoke()}}),O=ue(Z,"abort",()=>function(R,b){const S=function x(R){return R[t]}(R);if(S&&"string"==typeof S.type){if(null==S.cancelFn||S.data&&S.data.aborted)return;S.zone.cancelTask(S)}else if(!0===c.current[G])return O.apply(R,b)})}(r);const t=j("xhrTask"),i=j("xhrSync"),u=j("xhrListener"),E=j("xhrScheduled"),T=j("xhrURL"),m=j("xhrErrorBeforeScheduled")}),e.__load_patch("geolocation",r=>{r.navigator&&r.navigator.geolocation&&function gt(e,r){const c=e.constructor.name;for(let t=0;t<r.length;t++){const i=r[t],u=e[i];if(u){if(!We(Te(e,i)))continue;e[i]=(T=>{const m=function(){return T.apply(this,Ve(arguments,c+"."+i))};return fe(m,T),m})(u)}}}(r.navigator.geolocation,["getCurrentPosition","watchPosition"])}),e.__load_patch("PromiseRejectionEvent",(r,c)=>{function t(i){return function(u){st(r,i).forEach(T=>{const m=r.PromiseRejectionEvent;if(m){const D=new m(i,{promise:u.promise,reason:u.rejection});T.invoke(D)}})}}r.PromiseRejectionEvent&&(c[j("unhandledPromiseRejectionHandler")]=t("unhandledrejection"),c[j("rejectionHandledHandler")]=t("rejectionhandled"))}),e.__load_patch("queueMicrotask",(r,c,t)=>{!function wt(e,r){r.patchMethod(e,"queueMicrotask",c=>function(t,i){Zone.current.scheduleMicroTask("queueMicrotask",i[0])})}(r,t)})}(at)}},te=>{te(te.s=50)}]);
})();

// This entry need to be wrapped in an IIFE because it need to be isolated against other entry modules.
(() => {
(self.webpackChunkClientAPP=self.webpackChunkClientAPP||[]).push([[792],{564:(Ic,ah,Mg)=>{"use strict";function po(n,e,t,i,s,r,o){try{var a=n[r](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,s)}function cn(n){return function(){var e=this,t=arguments;return new Promise(function(i,s){var r=n.apply(e,t);function o(l){po(r,i,s,o,a,"next",l)}function a(l){po(r,i,s,o,a,"throw",l)}o(void 0)})}}let tt=null,il=!1,oa=1;const ei=Symbol("SIGNAL");function de(n){const e=tt;return tt=n,e}const go={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function uh(n){if(il)throw new Error("");if(null===tt)return;tt.consumerOnSignalRead(n);const e=tt.nextProducerIndex++;la(tt),e<tt.producerNode.length&&tt.producerNode[e]!==n&&aa(tt)&&xc(tt.producerNode[e],tt.producerIndexOfThis[e]),tt.producerNode[e]!==n&&(tt.producerNode[e]=n,tt.producerIndexOfThis[e]=aa(tt)?Vi(n,tt,e):0),tt.producerLastReadVersion[e]=n.version}function dh(n){if((!aa(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==oa)){if(!n.producerMustRecompute(n)&&!rl(n))return n.dirty=!1,void(n.lastCleanEpoch=oa);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=oa}}function Ng(n){if(void 0===n.liveConsumerNode)return;const e=il;il=!0;try{for(const t of n.liveConsumerNode)t.dirty||_n(t)}finally{il=e}}function St(){return!1!==tt?.consumerAllowSignalWrites}function _n(n){n.dirty=!0,Ng(n),n.consumerMarkedDirty?.(n)}function rl(n){la(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(dh(t),i!==t.version))return!0}return!1}function Vi(n,e,t){if(ca(n),la(n),0===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=Vi(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function xc(n,e){if(ca(n),la(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)xc(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],s=n.liveConsumerNode[e];la(s),s.producerIndexOfThis[i]=e}}function aa(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function la(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function ca(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}let bD=function Vw(){throw new Error};function CD(){bD()}let $w=null;function SD(n,e){St()||CD(),n.equal(n.value,e)||(n.value=e,function n4(n){n.version++,function Lw(){oa++}(),Ng(n),$w?.()}(n))}const t4={...go,equal:function lh(n,e){return Object.is(n,e)},value:void 0};function at(n){return"function"==typeof n}function jw(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Hw=jw(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,s)=>`${s+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Pg(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class wn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const r of t)r.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(at(i))try{i()}catch(r){e=r instanceof Hw?r.errors:[r]}const{_finalizers:s}=this;if(s){this._finalizers=null;for(const r of s)try{TD(r)}catch(o){e=e??[],o instanceof Hw?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Hw(e)}}add(e){var t;if(e&&e!==this)if(this.closed)TD(e);else{if(e instanceof wn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Pg(t,e)}remove(e){const{_finalizers:t}=this;t&&Pg(t,e),e instanceof wn&&e._removeParent(this)}}wn.EMPTY=(()=>{const n=new wn;return n.closed=!0,n})();const ID=wn.EMPTY;function xD(n){return n instanceof wn||n&&"closed"in n&&at(n.remove)&&at(n.add)&&at(n.unsubscribe)}function TD(n){at(n)?n():n.unsubscribe()}const ol={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Og={setTimeout(n,e,...t){const{delegate:i}=Og;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Og;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function DD(n){Og.setTimeout(()=>{const{onUnhandledError:e}=ol;if(!e)throw n;e(n)})}function zw(){}const r4=qw("C",void 0,void 0);function qw(n,e,t){return{kind:n,value:e,error:t}}let al=null;function Fg(n){if(ol.useDeprecatedSynchronousErrorHandling){const e=!al;if(e&&(al={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=al;if(al=null,t)throw i}}else n()}class Gw extends wn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,xD(e)&&e.add(this)):this.destination=h4}static create(e,t,i){return new Dc(e,t,i)}next(e){this.isStopped?Qw(function a4(n){return qw("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Qw(function o4(n){return qw("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Qw(r4,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const c4=Function.prototype.bind;function Ww(n,e){return c4.call(n,e)}class u4{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Lg(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Lg(i)}else Lg(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Lg(t)}}}class Dc extends Gw{constructor(e,t,i){let s;if(super(),at(e)||!e)s={next:e??void 0,error:t??void 0,complete:i??void 0};else{let r;this&&ol.useDeprecatedNextContext?(r=Object.create(e),r.unsubscribe=()=>this.unsubscribe(),s={next:e.next&&Ww(e.next,r),error:e.error&&Ww(e.error,r),complete:e.complete&&Ww(e.complete,r)}):s=e}this.destination=new u4(s)}}function Lg(n){ol.useDeprecatedSynchronousErrorHandling?function l4(n){ol.useDeprecatedSynchronousErrorHandling&&al&&(al.errorThrown=!0,al.error=n)}(n):DD(n)}function Qw(n,e){const{onStoppedNotification:t}=ol;t&&Og.setTimeout(()=>t(n,e))}const h4={closed:!0,next:zw,error:function d4(n){throw n},complete:zw},Yw="function"==typeof Symbol&&Symbol.observable||"@@observable";function ua(n){return n}function AD(n){return 0===n.length?ua:1===n.length?n[0]:function(t){return n.reduce((i,s)=>s(i),t)}}let Ut=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,s){const r=function g4(n){return n&&n instanceof Gw||function p4(n){return n&&at(n.next)&&at(n.error)&&at(n.complete)}(n)&&xD(n)}(t)?t:new Dc(t,i,s);return Fg(()=>{const{operator:o,source:a}=this;r.add(o?o.call(r,a):a?this._subscribe(r):this._trySubscribe(r))}),r}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=kD(i))((s,r)=>{const o=new Dc({next:a=>{try{t(a)}catch(l){r(l),o.unsubscribe()}},error:r,complete:s});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Yw](){return this}pipe(...t){return AD(t)(this)}toPromise(t){return new(t=kD(t))((i,s)=>{let r;this.subscribe(o=>r=o,o=>s(o),()=>i(r))})}}return n.create=e=>new n(e),n})();function kD(n){var e;return null!==(e=n??ol.Promise)&&void 0!==e?e:Promise}const m4=jw(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ye=(()=>{class n extends Ut{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new MD(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new m4}next(t){Fg(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Fg(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Fg(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:s,observers:r}=this;return i||s?ID:(this.currentObservers=null,r.push(t),new wn(()=>{this.currentObservers=null,Pg(r,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:s,isStopped:r}=this;i?t.error(s):r&&t.complete()}asObservable(){const t=new Ut;return t.source=this,t}}return n.create=(e,t)=>new MD(e,t),n})();class MD extends ye{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:ID}}class is extends ye{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function ND(n){return at(n?.lift)}function Jt(n){return e=>{if(ND(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ht(n,e,t,i,s){return new v4(n,e,t,i,s)}class v4 extends Gw{constructor(e,t,i,s,r,o){super(e),this.onFinalize=r,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=s?function(a){try{s(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ve(n,e){return Jt((t,i)=>{let s=0;t.subscribe(Ht(i,r=>{i.next(n.call(e,r,s++))}))})}const RD="https://g.co/ng/security#xss";class R extends Error{constructor(e,t){super(function Ac(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function vo(n){return{toString:n}.toString()}const Mc="__parameters__";function Rc(n,e,t){return vo(()=>{const i=function Xw(n){return function(...t){if(n){const i=n(...t);for(const s in i)this[s]=i[s]}}}(e);function s(...r){if(this instanceof s)return i.apply(this,r),this;const o=new s(...r);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(Mc)?l[Mc]:Object.defineProperty(l,Mc,{value:[]})[Mc];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(s.prototype=Object.create(t.prototype)),s.prototype.ngMetadataName=n,s.annotationCls=s,s})}const mt=globalThis;function yt(n){for(let e in n)if(n[e]===yt)return e;throw Error("Could not find renamed property on target object.")}function y4(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function En(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(En).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Zw(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const _4=yt({__forward_ref__:yt});function At(n){return n.__forward_ref__=At,n.toString=function(){return En(this())},n}function Ee(n){return Vg(n)?n():n}function Vg(n){return"function"==typeof n&&n.hasOwnProperty(_4)&&n.__forward_ref__===At}function G(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Yt(n){return{providers:n.providers||[],imports:n.imports||[]}}function $g(n){return LD(n,jg)||LD(n,BD)}function LD(n,e){return n.hasOwnProperty(e)?n[e]:null}function Ug(n){return n&&(n.hasOwnProperty(Kw)||n.hasOwnProperty(I4))?n[Kw]:null}const jg=yt({\u0275prov:yt}),Kw=yt({\u0275inj:yt}),BD=yt({ngInjectableDef:yt}),I4=yt({ngInjectorDef:yt});class q{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=G({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function iE(n){return n&&!!n.\u0275providers}const hh=yt({\u0275cmp:yt}),sE=yt({\u0275dir:yt}),rE=yt({\u0275pipe:yt}),$D=yt({\u0275mod:yt}),yo=yt({\u0275fac:yt}),fh=yt({__NG_ELEMENT_ID__:yt}),UD=yt({__NG_ENV_ID__:yt});function ke(n){return"string"==typeof n?n:null==n?"":String(n)}function oE(n,e){throw new R(-201,!1)}var Ze=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ze||{});let aE;function jD(){return aE}function $i(n){const e=aE;return aE=n,e}function HD(n,e,t){const i=$g(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Ze.Optional?null:void 0!==e?e:void oE()}const ph={},lE="__NG_DI_FLAG__",Hg="ngTempTokenPath",M4=/\n/gm,zD="__source";let Pc;function ha(n){const e=Pc;return Pc=n,e}function P4(n,e=Ze.Default){if(void 0===Pc)throw new R(-203,!1);return null===Pc?HD(n,void 0,e):Pc.get(n,e&Ze.Optional?null:void 0,e)}function P(n,e=Ze.Default){return(jD()||P4)(Ee(n),e)}function H(n,e=Ze.Default){return P(n,zg(e))}function zg(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function cE(n){const e=[];for(let t=0;t<n.length;t++){const i=Ee(n[t]);if(Array.isArray(i)){if(0===i.length)throw new R(900,!1);let s,r=Ze.Default;for(let o=0;o<i.length;o++){const a=i[o],l=O4(a);"number"==typeof l?-1===l?s=a.token:r|=l:s=a}e.push(P(s,r))}else e.push(P(i))}return e}function gh(n,e){return n[lE]=e,n.prototype[lE]=e,n}function O4(n){return n[lE]}const uE=gh(Rc("Optional"),8),dE=gh(Rc("SkipSelf"),4);function ll(n,e){return n.hasOwnProperty(yo)?n[yo]:null}function Oc(n,e){n.forEach(t=>Array.isArray(t)?Oc(t,e):e(t))}function GD(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function qg(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function os(n,e,t){let i=Fc(n,e);return i>=0?n[1|i]=t:(i=~i,function WD(n,e,t,i){let s=n.length;if(s==e)n.push(t,i);else if(1===s)n.push(i,n[0]),n[0]=t;else{for(s--,n.push(n[s-1],n[s]);s>e;)n[s]=n[s-2],s--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function fE(n,e){const t=Fc(n,e);if(t>=0)return n[1|t]}function Fc(n,e){return function QD(n,e,t){let i=0,s=n.length>>t;for(;s!==i;){const r=i+(s-i>>1),o=n[r<<t];if(e===o)return r<<t;o>e?s=r:i=r+1}return~(s<<t)}(n,e,1)}const br={},nt=[],cl=new q(""),YD=new q("",-1),pE=new q("");class Wg{get(e,t=ph){if(t===ph){const i=new Error(`NullInjectorError: No provider for ${En(e)}!`);throw i.name="NullInjectorError",i}return t}}var Qg=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Qg||{}),Qs=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Qs||{}),_t=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(_t||{});function j4(n,e,t){let i=n.length;for(;;){const s=n.indexOf(e,t);if(-1===s)return s;if(0===s||n.charCodeAt(s-1)<=32){const r=e.length;if(s+r===i||n.charCodeAt(s+r)<=32)return s}t=s+1}}function gE(n,e,t){let i=0;for(;i<t.length;){const s=t[i];if("number"==typeof s){if(0!==s)break;i++;const r=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,r)}else{const r=s,o=t[++i];ZD(r)?n.setProperty(e,r,o):n.setAttribute(e,r,o),i++}}return i}function XD(n){return 3===n||4===n||6===n}function ZD(n){return 64===n.charCodeAt(0)}function mh(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const s=e[i];"number"==typeof s?t=s:0===t||KD(n,t,s,null,-1===t||2===t?e[++i]:null)}}return n}function KD(n,e,t,i,s){let r=0,o=n.length;if(-1===e)o=-1;else for(;r<n.length;){const a=n[r++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=r-1;break}}}for(;r<n.length;){const a=n[r];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==s&&(n[r+1]=s));if(i===n[r+1])return void(n[r+2]=s)}r++,null!==i&&r++,null!==s&&r++}-1!==o&&(n.splice(o,0,e),r=o+1),n.splice(r++,0,t),null!==i&&n.splice(r++,0,i),null!==s&&n.splice(r++,0,s)}const JD="ng-template";function H4(n,e,t,i){let s=0;if(i){for(;s<e.length&&"string"==typeof e[s];s+=2)if("class"===e[s]&&-1!==j4(e[s+1].toLowerCase(),t,0))return!0}else if(mE(n))return!1;if(s=e.indexOf(1,s),s>-1){let r;for(;++s<e.length&&"string"==typeof(r=e[s]);)if(r.toLowerCase()===t)return!0}return!1}function mE(n){return 4===n.type&&n.value!==JD}function z4(n,e,t){return e===(4!==n.type||t?n.value:JD)}function q4(n,e,t){let i=4;const s=n.attrs,r=null!==s?function Q4(n){for(let e=0;e<n.length;e++)if(XD(n[e]))return e;return n.length}(s):0;let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!z4(n,l,t)||""===l&&1===e.length){if(Ys(i))return!1;o=!0}}else if(8&i){if(null===s||!H4(n,s,l,t)){if(Ys(i))return!1;o=!0}}else{const c=e[++a],u=G4(l,s,mE(n),t);if(-1===u){if(Ys(i))return!1;o=!0;continue}if(""!==c){let d;if(d=u>r?"":s[u+1].toLowerCase(),2&i&&c!==d){if(Ys(i))return!1;o=!0}}}}else{if(!o&&!Ys(i)&&!Ys(l))return!1;if(o&&Ys(l))continue;o=!1,i=l|1&i}}return Ys(i)||o}function Ys(n){return!(1&n)}function G4(n,e,t,i){if(null===e)return-1;let s=0;if(i||!t){let r=!1;for(;s<e.length;){const o=e[s];if(o===n)return s;if(3===o||6===o)r=!0;else{if(1===o||2===o){let a=e[++s];for(;"string"==typeof a;)a=e[++s];continue}if(4===o)break;if(0===o){s+=4;continue}}s+=r?1:2}return-1}return function Y4(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function eA(n,e,t=!1){for(let i=0;i<e.length;i++)if(q4(n,e[i],t))return!0;return!1}function X4(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let s=0;s<n.length;s++)if(n[s]!==i[s])continue e;return!0}}return!1}function tA(n,e){return n?":not("+e.trim()+")":e}function Z4(n){let e=n[0],t=1,i=2,s="",r=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];s+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?s+="."+o:4&i&&(s+=" "+o);else""!==s&&!Ys(o)&&(e+=tA(r,s),s=""),i=o,r=r||!Ys(i);t++}return""!==s&&(e+=tA(r,s)),e}function _i(n){return vo(()=>{const e=iA(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Qg.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Qs.Emulated,styles:n.styles||nt,_:null,schemas:n.schemas||null,tView:null,id:""};sA(t);const i=n.dependencies;return t.directiveDefs=Yg(i,!1),t.pipeDefs=Yg(i,!0),t.id=function s5(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const s of t)e=Math.imul(31,e)+s.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function e5(n){return ze(n)||bn(n)}function t5(n){return null!==n}function en(n){return vo(()=>({type:n.type,bootstrap:n.bootstrap||nt,declarations:n.declarations||nt,imports:n.imports||nt,exports:n.exports||nt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function nA(n,e){if(null==n)return br;const t={};for(const i in n)if(n.hasOwnProperty(i)){const s=n[i];let r,o,a=_t.None;Array.isArray(s)?(a=s[0],r=s[1],o=s[2]??r):(r=s,o=s),e?(t[r]=a!==_t.None?[i,a]:i,e[r]=o):t[r]=i}return t}function ge(n){return vo(()=>{const e=iA(n);return sA(e),e})}function jn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function ze(n){return n[hh]||null}function bn(n){return n[sE]||null}function Hn(n){return n[rE]||null}function ti(n,e){const t=n[$D]||null;if(!t&&!0===e)throw new Error(`Type ${En(n)} does not have '\u0275mod' property.`);return t}function iA(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||br,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||nt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:nA(n.inputs,e),outputs:nA(n.outputs),debugInfo:null}}function sA(n){n.features?.forEach(e=>e(n))}function Yg(n,e){if(!n)return null;const t=e?Hn:e5;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(t5)}function Lc(n){return{\u0275providers:n}}function rA(...n){return{\u0275providers:vE(0,n),\u0275fromNgModule:!0}}function vE(n,...e){const t=[],i=new Set;let s;const r=o=>{t.push(o)};return Oc(e,o=>{const a=o;Xg(a,r,[],i)&&(s||=[],s.push(a))}),void 0!==s&&oA(s,r),t}function oA(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:s}=n[t];yE(s,r=>{e(r,i)})}}function Xg(n,e,t,i){if(!(n=Ee(n)))return!1;let s=null,r=Ug(n);const o=!r&&ze(n);if(r||o){if(o&&!o.standalone)return!1;s=n}else{const l=n.ngModule;if(r=Ug(l),!r)return!1;s=l}const a=i.has(s);if(o){if(a)return!1;if(i.add(s),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)Xg(c,e,t,i)}}else{if(!r)return!1;{if(null!=r.imports&&!a){let c;i.add(s);try{Oc(r.imports,u=>{Xg(u,e,t,i)&&(c||=[],c.push(u))})}finally{}void 0!==c&&oA(c,e)}if(!a){const c=ll(s)||(()=>new s);e({provide:s,useFactory:c,deps:nt},s),e({provide:pE,useValue:s,multi:!0},s),e({provide:cl,useValue:()=>P(s),multi:!0},s)}const l=r.providers;if(null!=l&&!a){const c=n;yE(l,u=>{e(u,c)})}}}return s!==n&&void 0!==n.providers}function yE(n,e){for(let t of n)iE(t)&&(t=t.\u0275providers),Array.isArray(t)?yE(t,e):e(t)}const r5=yt({provide:String,useValue:yt});function _E(n){return null!==n&&"object"==typeof n&&r5 in n}function ul(n){return"function"==typeof n}const wE=new q(""),Zg={},a5={};let EE;function Kg(){return void 0===EE&&(EE=new Wg),EE}class as{}class Bc extends as{get destroyed(){return this._destroyed}constructor(e,t,i,s){super(),this.parent=t,this.source=i,this.scopes=s,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,CE(e,o=>this.processProvider(o)),this.records.set(YD,Vc(void 0,this)),s.has("environment")&&this.records.set(as,Vc(void 0,this));const r=this.records.get(wE);null!=r&&"string"==typeof r.value&&this.scopes.add(r.value),this.injectorDefTypes=new Set(this.get(pE,nt,Ze.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=de(null);try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),de(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=ha(this),i=$i(void 0);try{return e()}finally{ha(t),$i(i)}}get(e,t=ph,i=Ze.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(UD))return e[UD](this);i=zg(i);const r=ha(this),o=$i(void 0);try{if(!(i&Ze.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function h5(n){return"function"==typeof n||"object"==typeof n&&n instanceof q}(e)&&$g(e);l=c&&this.injectableDefInScope(c)?Vc(bE(e),Zg):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(i&Ze.Self?Kg():this.parent).get(e,t=i&Ze.Optional&&t===ph?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Hg]=a[Hg]||[]).unshift(En(e)),r)throw a;return function F4(n,e,t,i){const s=n[Hg];throw e[zD]&&s.unshift(e[zD]),n.message=function L4(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let s=En(e);if(Array.isArray(e))s=e.map(En).join(" -> ");else if("object"==typeof e){let r=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];r.push(o+":"+("string"==typeof a?JSON.stringify(a):En(a)))}s=`{${r.join(", ")}}`}return`${t}${i?"("+i+")":""}[${s}]: ${n.replace(M4,"\n  ")}`}("\n"+n.message,s,t,i),n.ngTokenPath=s,n[Hg]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{$i(o),ha(r)}}resolveInjectorInitializers(){const e=de(null),t=ha(this),i=$i(void 0);try{const r=this.get(cl,nt,Ze.Self);for(const o of r)o()}finally{ha(t),$i(i),de(e)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(En(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new R(205,!1)}processProvider(e){let t=ul(e=Ee(e))?e:Ee(e&&e.provide);const i=function c5(n){return _E(n)?Vc(void 0,n.useValue):Vc(cA(n),Zg)}(e);if(!ul(e)&&!0===e.multi){let s=this.records.get(t);s||(s=Vc(void 0,Zg,!0),s.factory=()=>cE(s.multi),this.records.set(t,s)),t=e,s.multi.push(e)}this.records.set(t,i)}hydrate(e,t){const i=de(null);try{return t.value===Zg&&(t.value=a5,t.value=t.factory()),"object"==typeof t.value&&t.value&&function d5(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{de(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ee(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function bE(n){const e=$g(n),t=null!==e?e.factory:ll(n);if(null!==t)return t;if(n instanceof q)throw new R(204,!1);if(n instanceof Function)return function l5(n){if(n.length>0)throw new R(204,!1);const t=function S4(n){return n&&(n[jg]||n[BD])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new R(204,!1)}function cA(n,e,t){let i;if(ul(n)){const s=Ee(n);return ll(s)||bE(s)}if(_E(n))i=()=>Ee(n.useValue);else if(function lA(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...cE(n.deps||[]));else if(function aA(n){return!(!n||!n.useExisting)}(n))i=()=>P(Ee(n.useExisting));else{const s=Ee(n&&(n.useClass||n.provide));if(!function u5(n){return!!n.deps}(n))return ll(s)||bE(s);i=()=>new s(...cE(n.deps))}return i}function Vc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function CE(n,e){for(const t of n)Array.isArray(t)?CE(t,e):t&&iE(t)?CE(t.\u0275providers,e):e(t)}function _o(n,e){n instanceof Bc&&n.assertNotDestroyed();const i=ha(n),s=$i(void 0);try{return e()}finally{ha(i),$i(s)}}const zt=0,W=1,he=2,nn=3,Xs=4,ni=5,ls=6,Uc=7,kt=8,un=9,Zs=10,Se=11,yh=12,hA=13,jc=14,Xt=15,_h=16,Hc=17,wo=18,wh=19,fA=20,pa=21,tm=22,dl=23,Me=25,IE=1,Cr=7,zc=9,sn=10;var xE=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(xE||{});function ii(n){return Array.isArray(n)&&"object"==typeof n[IE]}function si(n){return Array.isArray(n)&&!0===n[IE]}function TE(n){return!!(4&n.flags)}function hl(n){return n.componentOffset>-1}function im(n){return!(1&~n.flags)}function Ks(n){return!!n.template}function DE(n){return!!(512&n[he])}class vA{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function yA(n,e,t,i){null!==e?e.applyValueToInputSignal(e,i):n[t]=i}function ri(){return _A}function _A(n){return n.type.prototype.ngOnChanges&&(n.setInput=x5),I5}function I5(){const n=EA(this),e=n?.current;if(e){const t=n.previous;if(t===br)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function x5(n,e,t,i,s){const r=this.declaredInputs[i],o=EA(n)||function T5(n,e){return n[wA]=e}(n,{previous:br,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[r];a[r]=new vA(c&&c.currentValue,t,l===br),yA(n,e,s,t)}ri.ngInherit=!0;const wA="__ngSimpleChanges__";function EA(n){return n[wA]||null}const Sr=function(n,e,t){},bA="svg";let SA=!1;function It(n){for(;Array.isArray(n);)n=n[zt];return n}function bh(n,e){return It(e[n])}function wi(n,e){return It(e[n.index])}function Ch(n,e){return n.data[e]}function qc(n,e){return n[e]}function cs(n,e){const t=e[n];return ii(t)?t:t[zt]}function RE(n){return!(128&~n[he])}function Ir(n,e){return null==e?null:n[e]}function IA(n){n[Hc]=0}function R5(n){1024&n[he]||(n[he]|=1024,RE(n)&&Sh(n))}function PE(n){return!!(9216&n[he]||n[dl]?.dirty)}function OE(n){n[Zs].changeDetectionScheduler?.notify(1),PE(n)?Sh(n):64&n[he]&&(function A5(){return SA}()?(n[he]|=1024,Sh(n)):n[Zs].changeDetectionScheduler?.notify())}function Sh(n){n[Zs].changeDetectionScheduler?.notify();let e=fl(n);for(;null!==e&&!(8192&e[he])&&(e[he]|=8192,RE(e));)e=fl(e)}function sm(n,e){if(!(256&~n[he]))throw new R(911,!1);null===n[pa]&&(n[pa]=[]),n[pa].push(e)}function fl(n){const e=n[nn];return si(e)?e[nn]:e}const Ie={lFrame:OA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function DA(){return Ie.bindingsEnabled}function Gc(){return null!==Ie.skipHydrationRootTNode}function F(){return Ie.lFrame.lView}function Ge(){return Ie.lFrame.tView}function be(n){return Ie.lFrame.contextLView=n,n[kt]}function Ce(n){return Ie.lFrame.contextLView=null,n}function wt(){let n=AA();for(;null!==n&&64===n.type;)n=n.parent;return n}function AA(){return Ie.lFrame.currentTNode}function xr(n,e){const t=Ie.lFrame;t.currentTNode=n,t.isParent=e}function LE(){return Ie.lFrame.isParent}function BE(){Ie.lFrame.isParent=!1}function Ei(){const n=Ie.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Js(){return Ie.lFrame.bindingIndex++}function bo(n){const e=Ie.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function z5(n,e){const t=Ie.lFrame;t.bindingIndex=t.bindingRootIndex=n,VE(e)}function VE(n){Ie.lFrame.currentDirectiveIndex=n}function $E(n){const e=Ie.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function UE(){return Ie.lFrame.currentQueryIndex}function rm(n){Ie.lFrame.currentQueryIndex=n}function G5(n){const e=n[W];return 2===e.type?e.declTNode:1===e.type?n[ni]:null}function RA(n,e,t){if(t&Ze.SkipSelf){let s=e,r=n;for(;!(s=s.parent,null!==s||t&Ze.Host||(s=G5(r),null===s||(r=r[jc],10&s.type))););if(null===s)return!1;e=s,n=r}const i=Ie.lFrame=PA();return i.currentTNode=e,i.lView=n,!0}function jE(n){const e=PA(),t=n[W];Ie.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function PA(){const n=Ie.lFrame,e=null===n?null:n.child;return null===e?OA(n):e}function OA(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function FA(){const n=Ie.lFrame;return Ie.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const LA=FA;function HE(){const n=FA();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function oi(){return Ie.lFrame.selectedIndex}function pl(n){Ie.lFrame.selectedIndex=n}function Mt(){const n=Ie.lFrame;return Ch(n.tView,n.selectedIndex)}function zE(){Ie.lFrame.currentNamespace=bA}function qE(){!function Y5(){Ie.lFrame.currentNamespace=null}()}let VA=!0;function xh(){return VA}function Tr(n){VA=n}function om(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const r=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=r;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),null!=u&&(n.destroyHooks??=[]).push(t,u)}}function am(n,e,t){$A(n,e,3,t)}function lm(n,e,t,i){(3&n[he])===t&&$A(n,e,t,i)}function GE(n,e){let t=n[he];(3&t)===e&&(t&=16383,t+=1,n[he]=t)}function $A(n,e,t,i){const r=i??-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[Hc]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[Hc]+=65536),(a<r||-1==r)&&(Z5(n,t,e,l),n[Hc]=(4294901760&n[Hc])+l+2),l++}function UA(n,e){Sr(4,n,e);const t=de(null);try{e.call(n)}finally{de(t),Sr(5,n,e)}}function Z5(n,e,t,i){const s=t[i]<0,r=t[i+1],a=n[s?-t[i]:t[i]];s?n[he]>>14<n[Hc]>>16&&(3&n[he])===e&&(n[he]+=16384,UA(a,r)):UA(a,r)}const Wc=-1;class Th{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function QE(n){return n!==Wc}function Dh(n){return 32767&n}function Ah(n,e){let t=function nz(n){return n>>16}(n),i=e;for(;t>0;)i=i[jc],t--;return i}let YE=!0;function cm(n){const e=YE;return YE=n,e}const jA=255,HA=5;let iz=0;const Dr={};function um(n,e){const t=zA(n,e);if(-1!==t)return t;const i=e[W];i.firstCreatePass&&(n.injectorIndex=e.length,XE(i.data,n),XE(e,null),XE(i.blueprint,null));const s=dm(n,e),r=n.injectorIndex;if(QE(s)){const o=Dh(s),a=Ah(s,e),l=a[W].data;for(let c=0;c<8;c++)e[r+c]=a[o+c]|l[o+c]}return e[r+8]=s,r}function XE(n,e){n.push(0,0,0,0,0,0,0,0,e)}function zA(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function dm(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,s=e;for(;null!==s;){if(i=ZA(s),null===i)return Wc;if(t++,s=s[jc],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return Wc}function ZE(n,e,t){!function sz(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(fh)&&(i=t[fh]),null==i&&(i=t[fh]=iz++);const s=i&jA;e.data[n+(s>>HA)]|=1<<s}(n,e,t)}function qA(n,e,t){if(t&Ze.Optional||void 0!==n)return n;oE()}function GA(n,e,t,i){if(t&Ze.Optional&&void 0===i&&(i=null),!(t&(Ze.Self|Ze.Host))){const s=n[un],r=$i(void 0);try{return s?s.get(e,i,t&Ze.Optional):HD(e,i,t&Ze.Optional)}finally{$i(r)}}return qA(i,0,t)}function WA(n,e,t,i=Ze.Default,s){if(null!==n){if(2048&e[he]&&!(i&Ze.Self)){const o=function cz(n,e,t,i,s){let r=n,o=e;for(;null!==r&&null!==o&&2048&o[he]&&!(512&o[he]);){const a=QA(r,o,t,i|Ze.Self,Dr);if(a!==Dr)return a;let l=r.parent;if(!l){const c=o[fA];if(c){const u=c.get(t,Dr,i);if(u!==Dr)return u}l=ZA(o),o=o[jc]}r=l}return s}(n,e,t,i,Dr);if(o!==Dr)return o}const r=QA(n,e,t,i,Dr);if(r!==Dr)return r}return GA(e,t,i,s)}function QA(n,e,t,i,s){const r=function az(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(fh)?n[fh]:void 0;return"number"==typeof e?e>=0?e&jA:lz:e}(t);if("function"==typeof r){if(!RA(e,n,i))return i&Ze.Host?qA(s,0,i):GA(e,t,i,s);try{let o;if(o=r(i),null!=o||i&Ze.Optional)return o;oE()}finally{LA()}}else if("number"==typeof r){let o=null,a=zA(n,e),l=Wc,c=i&Ze.Host?e[Xt][ni]:null;for((-1===a||i&Ze.SkipSelf)&&(l=-1===a?dm(n,e):e[a+8],l!==Wc&&XA(i,!1)?(o=e[W],a=Dh(l),e=Ah(l,e)):a=-1);-1!==a;){const u=e[W];if(YA(r,a,u.data)){const d=oz(a,e,t,o,i,c);if(d!==Dr)return d}l=e[a+8],l!==Wc&&XA(i,e[W].data[a+8]===c)&&YA(r,a,e)?(o=u,a=Dh(l),e=Ah(l,e)):a=-1}}return s}function oz(n,e,t,i,s,r){const o=e[W],a=o.data[n+8],u=hm(a,o,t,null==i?hl(a)&&YE:i!=o&&!!(3&a.type),s&Ze.Host&&r===a);return null!==u?gl(e,o,u,a):Dr}function hm(n,e,t,i,s){const r=n.providerIndexes,o=e.data,a=1048575&r,l=n.directiveStart,u=r>>20,h=s?a+u:n.directiveEnd;for(let f=i?a:a+u;f<h;f++){const p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(s){const f=o[l];if(f&&Ks(f)&&f.type===t)return l}return null}function gl(n,e,t,i){let s=n[t];const r=e.data;if(function K5(n){return n instanceof Th}(s)){const o=s;o.resolving&&function D4(n,e){throw e&&e.join(" > "),new R(-200,n)}(function dt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ke(n)}(r[t]));const a=cm(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?$i(o.injectImpl):null;RA(n,i,Ze.Default);try{s=n[t]=o.factory(void 0,r,n,i),e.firstCreatePass&&t>=i.directiveStart&&function X5(n,e,t){const{ngOnChanges:i,ngOnInit:s,ngDoCheck:r}=e.type.prototype;if(i){const o=_A(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}s&&(t.preOrderHooks??=[]).push(0-n,s),r&&((t.preOrderHooks??=[]).push(n,r),(t.preOrderCheckHooks??=[]).push(n,r))}(t,r[t],e)}finally{null!==c&&$i(c),cm(a),o.resolving=!1,LA()}}return s}function YA(n,e,t){return!!(t[e+(n>>HA)]&1<<n)}function XA(n,e){return!(n&Ze.Self||n&Ze.Host&&e)}class Sn{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return WA(this._tNode,this._lView,e,zg(i),t)}}function lz(){return new Sn(wt(),F())}function dn(n){return vo(()=>{const e=n.prototype.constructor,t=e[yo]||KE(e),i=Object.prototype;let s=Object.getPrototypeOf(n.prototype).constructor;for(;s&&s!==i;){const r=s[yo]||KE(s);if(r&&r!==t)return r;s=Object.getPrototypeOf(s)}return r=>new r})}function KE(n){return Vg(n)?()=>{const e=KE(Ee(n));return e&&e()}:ll(n)}function ZA(n){const e=n[W],t=e.type;return 2===t?e.declTNode:1===t?n[ni]:null}function n1(n,e=null,t=null,i){const s=s1(n,e,t,i);return s.resolveInjectorInitializers(),s}function s1(n,e=null,t=null,i,s=new Set){const r=[t||nt,rA(n)];return i=i||("object"==typeof n?void 0:En(n)),new Bc(r,e||Kg(),i||null,s)}let Zt=(()=>{class n{static{this.THROW_IF_NOT_FOUND=ph}static{this.NULL=new Wg}static create(t,i){if(Array.isArray(t))return n1({name:""},i,t,"");{const s=t.name??"";return n1({name:s},t.parent,t.providers,s)}}static{this.\u0275prov=G({token:n,providedIn:"any",factory:()=>P(YD)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();function eb(n){return n.ngOriginalError}class Ar{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&eb(e);for(;t&&eb(t);)t=eb(t);return t||null}}const o1=new q("",{providedIn:"root",factory:()=>H(Ar).handleError.bind(void 0)});let Xc=(()=>{class n{static{this.__NG_ELEMENT_ID__=yz}static{this.__NG_ENV_ID__=t=>t}}return n})();class vz extends Xc{constructor(e){super(),this._lView=e}onDestroy(e){return sm(this._lView,e),()=>function FE(n,e){if(null===n[pa])return;const t=n[pa].indexOf(e);-1!==t&&n[pa].splice(t,1)}(this._lView,e)}}function yz(){return new vz(F())}function _z(){return Zc(wt(),F())}function Zc(n,e){return new tn(wi(n,e))}let tn=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=_z}}return n})();function l1(n){return n instanceof tn?n.nativeElement:n}function tb(n){return e=>{setTimeout(n,void 0,e)}}const Et=class wz extends ye{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,function uA(){return void 0!==jD()||null!=function R4(){return Pc}()}()&&(this.destroyRef=H(Xc,{optional:!0})??void 0)}emit(e){const t=de(null);try{super.next(e)}finally{de(t)}}subscribe(e,t,i){let s=e,r=t||(()=>null),o=i;if(e&&"object"==typeof e){const l=e;s=l.next?.bind(l),r=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(r=tb(r),s&&(s=tb(s)),o&&(o=tb(o)));const a=super.subscribe({next:s,error:r,complete:o});return e instanceof wn&&e.add(a),a}};function Ez(){return this._results[Symbol.iterator]()}class Mh{get changes(){return this._changes??=new Et}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const t=Mh.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=Ez)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const i=function Ui(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function U4(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let s=n[i],r=e[i];if(t&&(s=t(s),r=t(r)),r!==s)return!1}return!0}(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function pm(n){return!(128&~n.flags)}const nb=new Map;let Cz=0;const sb="__ngContext__";function ai(n,e){ii(e)?(n[sb]=e[wh],function Iz(n){nb.set(n[wh],n)}(e)):n[sb]=e}function y1(n){return w1(n[yh])}function _1(n){return w1(n[Xs])}function w1(n){for(;null!==n&&!si(n);)n=n[Xs];return n}let rb;function ga(){if(void 0!==rb)return rb;if(typeof document<"u")return document;throw new R(210,!1)}const vm=new q("",{providedIn:"root",factory:()=>Hz}),Hz="ng",D1=new q(""),Co=new q("",{providedIn:"platform",factory:()=>"unknown"}),Ph=new q(""),ob=new q("",{providedIn:"root",factory:()=>ga().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let A1=()=>null;function pb(n,e,t=!1){return A1(n,e,t)}const P1=new q("",{providedIn:"root",factory:()=>!1});let Sm,Im;function eu(n){return function yb(){if(void 0===Sm&&(Sm=null,mt.trustedTypes))try{Sm=mt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Sm}()?.createHTML(n)||n}function F1(n){return function _b(){if(void 0===Im&&(Im=null,mt.trustedTypes))try{Im=mt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Im}()?.createHTML(n)||n}class ml{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${RD})`}}class iq extends ml{getTypeName(){return"HTML"}}class sq extends ml{getTypeName(){return"Style"}}class rq extends ml{getTypeName(){return"Script"}}class oq extends ml{getTypeName(){return"URL"}}class aq extends ml{getTypeName(){return"ResourceURL"}}function us(n){return n instanceof ml?n.changingThisBreaksApplicationSecurity:n}function kr(n,e){const t=function lq(n){return n instanceof ml&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${RD})`)}return t===e}class pq{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(eu(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class gq{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=eu(e),t}}const vq=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function xm(n){return(n=String(n)).match(vq)?n:"unsafe:"+n}function So(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Vh(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const $1=So("area,br,col,hr,img,wbr"),U1=So("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),j1=So("rp,rt"),wb=Vh($1,Vh(U1,So("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Vh(j1,So("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Vh(j1,U1)),Eb=So("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),H1=Vh(Eb,So("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),So("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),yq=So("script,style,template");class _q{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0,s=[];for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)s.push(t),t=bq(t);else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=Eq(t);if(r){t=r;break}t=s.pop()}return this.buf.join("")}startElement(e){const t=z1(e).toLowerCase();if(!wb.hasOwnProperty(t))return this.sanitizedSomething=!0,!yq.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let s=0;s<i.length;s++){const r=i.item(s),o=r.name,a=o.toLowerCase();if(!H1.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=r.value;Eb[a]&&(l=xm(l)),this.buf.push(" ",o,'="',G1(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=z1(e).toLowerCase();wb.hasOwnProperty(t)&&!$1.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(G1(e))}}function Eq(n){const e=n.nextSibling;if(e&&n!==e.previousSibling)throw q1(e);return e}function bq(n){const e=n.firstChild;if(e&&function wq(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(n,e))throw q1(e);return e}function z1(n){const e=n.nodeName;return"string"==typeof e?e:"FORM"}function q1(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}const Cq=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Sq=/([^\#-~ |!])/g;function G1(n){return n.replace(/&/g,"&amp;").replace(Cq,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Sq,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Tm;function W1(n,e){let t=null;try{Tm=Tm||function V1(n){const e=new gq(n);return function mq(){try{return!!(new window.DOMParser).parseFromString(eu(""),"text/html")}catch{return!1}}()?new pq(e):e}(n);let i=e?String(e):"";t=Tm.getInertBodyElement(i);let s=5,r=i;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,i=r,r=t.innerHTML,t=Tm.getInertBodyElement(i)}while(i!==r);return eu((new _q).sanitizeChildren(bb(t)||t))}finally{if(t){const i=bb(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function bb(n){return"content"in n&&function Iq(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Hi=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Hi||{});function vl(n){const e=$h();return e?F1(e.sanitize(Hi.HTML,n)||""):kr(n,"HTML")?F1(us(n)):W1(ga(),ke(n))}function yl(n){const e=$h();return e?e.sanitize(Hi.URL,n)||"":kr(n,"URL")?us(n):xm(ke(n))}function $h(){const n=F();return n&&n[Zs].sanitizer}const Mq=/^>|^->|<!--|-->|--!>|<!-$/g,Nq=/(<|>)/g,Rq="\u200b$1\u200b";function J1(n){return n.ownerDocument}function ds(n){return n instanceof Function?n():n}var ma=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ma||{});let xb;function Tb(n,e){return xb(n,e)}function nu(n,e,t,i,s){if(null!=i){let r,o=!1;si(i)?r=i:ii(i)&&(o=!0,i=i[zt]);const a=It(i);0===n&&null!==t?null==s?lk(e,t,a):_l(e,t,a,s||null,!0):1===n&&null!==t?_l(e,t,a,s||null,!0):2===n?function Hh(n,e,t){const i=Nm(n,e);i&&function Zq(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=r&&function e6(n,e,t,i,s){const r=t[Cr];r!==It(t)&&nu(e,n,i,r,s);for(let a=sn;a<t.length;a++){const l=t[a];Pm(l[W],l,n,e,i,r)}}(e,n,r,t,s)}}function Ab(n,e){return n.createComment(function X1(n){return n.replace(Mq,e=>e.replace(Nq,Rq))}(e))}function km(n,e,t){return n.createElement(e,t)}function rk(n,e){e[Zs].changeDetectionScheduler?.notify(1),Pm(n,e,e[Se],2,null,null)}function ok(n,e){const t=n[zc],i=t.indexOf(e);t.splice(i,1)}function Uh(n,e){if(n.length<=sn)return;const t=sn+e,i=n[t];if(i){const s=i[_h];null!==s&&s!==n&&ok(s,i),e>0&&(n[t-1][Xs]=i[Xs]);const r=qg(n,sn+e);!function zq(n,e){rk(n,e),e[zt]=null,e[ni]=null}(i[W],i);const o=r[wo];null!==o&&o.detachView(r[W]),i[nn]=null,i[Xs]=null,i[he]&=-129}return i}function Mm(n,e){if(!(256&e[he])){const t=e[Se];t.destroyNode&&Pm(n,e,t,3,null,null),function Gq(n){let e=n[yh];if(!e)return kb(n[W],n);for(;e;){let t=null;if(ii(e))t=e[yh];else{const i=e[sn];i&&(t=i)}if(!t){for(;e&&!e[Xs]&&e!==n;)ii(e)&&kb(e[W],e),e=e[nn];null===e&&(e=n),ii(e)&&kb(e[W],e),t=e&&e[Xs]}e=t}}(e)}}function kb(n,e){if(256&e[he])return;const t=de(null);try{e[he]&=-129,e[he]|=256,e[dl]&&function mo(n){if(la(n),aa(n))for(let e=0;e<n.producerNode.length;e++)xc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}(e[dl]),function Xq(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const s=e[t[i]];if(!(s instanceof Th)){const r=t[i+1];if(Array.isArray(r))for(let o=0;o<r.length;o+=2){const a=s[r[o]],l=r[o+1];Sr(4,a,l);try{l.call(a)}finally{Sr(5,a,l)}}else{Sr(4,s,r);try{r.call(s)}finally{Sr(5,s,r)}}}}}(n,e),function Yq(n,e){const t=n.cleanup,i=e[Uc];if(null!==t)for(let r=0;r<t.length-1;r+=2)if("string"==typeof t[r]){const o=t[r+3];o>=0?i[o]():i[-o].unsubscribe(),r+=2}else t[r].call(i[t[r+1]]);null!==i&&(e[Uc]=null);const s=e[pa];if(null!==s){e[pa]=null;for(let r=0;r<s.length;r++)(0,s[r])()}}(n,e),1===e[W].type&&e[Se].destroy();const i=e[_h];if(null!==i&&si(e[nn])){i!==e[nn]&&ok(i,e);const s=e[wo];null!==s&&s.detachView(n)}!function xz(n){nb.delete(n[wh])}(e)}finally{de(t)}}function Mb(n,e,t){return function ak(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[zt];{const{componentOffset:s}=i;if(s>-1){const{encapsulation:r}=n.data[i.directiveStart+s];if(r===Qs.None||r===Qs.Emulated)return null}return wi(i,t)}}(n,e.parent,t)}function _l(n,e,t,i,s){n.insertBefore(e,t,i,s)}function lk(n,e,t){n.appendChild(e,t)}function ck(n,e,t,i,s){null!==i?_l(n,e,t,i,s):lk(n,e,t)}function Nm(n,e){return n.parentNode(e)}function uk(n,e,t){return hk(n,e,t)}let Nb,hk=function dk(n,e,t){return 40&n.type?wi(n,t):null};function Rm(n,e,t,i){const s=Mb(n,i,e),r=e[Se],a=uk(i.parent||e[ni],i,e);if(null!=s)if(Array.isArray(t))for(let l=0;l<t.length;l++)ck(r,s,t[l],a,!1);else ck(r,s,t,a,!1);void 0!==Nb&&Nb(r,i,e,t,s)}function jh(n,e){if(null!==e){const t=e.type;if(3&t)return wi(e,n);if(4&t)return Rb(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return jh(n,i);{const s=n[e.index];return si(s)?Rb(-1,s):It(s)}}if(32&t)return Tb(e,n)()||It(n[e.index]);{const i=pk(n,e);return null!==i?Array.isArray(i)?i[0]:jh(fl(n[Xt]),i):jh(n,e.next)}}return null}function pk(n,e){return null!==e?n[Xt][ni].projection[e.projection]:null}function Rb(n,e){const t=sn+n+1;if(t<e.length){const i=e[t],s=i[W].firstChild;if(null!==s)return jh(i,s)}return e[Cr]}function Pb(n,e,t,i,s,r,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&ai(It(a),i),t.flags|=2),32&~t.flags)if(8&l)Pb(n,e,t.child,i,s,r,!1),nu(e,n,s,a,r);else if(32&l){const c=Tb(t,i);let u;for(;u=c();)nu(e,n,s,u,r);nu(e,n,s,a,r)}else 16&l?mk(n,e,i,t,s,r):nu(e,n,s,a,r);t=o?t.projectionNext:t.next}}function Pm(n,e,t,i,s,r){Pb(t,i,n.firstChild,e,s,r,!1)}function mk(n,e,t,i,s,r){const o=t[Xt],l=o[ni].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)nu(e,n,s,l[c],r);else{let c=l;const u=o[nn];pm(i)&&(c.flags|=128),Pb(n,e,c,u,s,r,!0)}}function vk(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function yk(n,e,t){const{mergedAttrs:i,classes:s,styles:r}=t;null!==i&&gE(n,e,i),null!==s&&vk(n,e,s),null!==r&&function n6(n,e,t){n.setAttribute(e,"style",t)}(n,e,r)}const Ne={};function A(n=1){_k(Ge(),F(),oi()+n,!1)}function _k(n,e,t,i){if(!i)if(3&~e[he]){const r=n.preOrderHooks;null!==r&&lm(e,r,0,t)}else{const r=n.preOrderCheckHooks;null!==r&&am(e,r,t)}pl(t)}function k(n,e=Ze.Default){const t=F();return null===t?P(n,e):WA(wt(),t,Ee(n),e)}function wk(n,e,t,i,s,r){const o=de(null);try{let a=null;s&_t.SignalBased&&(a=e[i][ei]),null!==a&&void 0!==a.transformFn&&(r=a.transformFn(r)),s&_t.HasDecoratorInputTransform&&(r=n.inputTransforms[i].call(e,r)),null!==n.setInput?n.setInput(e,a,r,t,i):yA(e,a,i,r)}finally{de(o)}}function Om(n,e,t,i,s,r,o,a,l,c,u){const d=e.blueprint.slice();return d[zt]=s,d[he]=204|i,(null!==c||n&&2048&n[he])&&(d[he]|=2048),IA(d),d[nn]=d[jc]=n,d[kt]=t,d[Zs]=o||n&&n[Zs],d[Se]=a||n&&n[Se],d[un]=l||n&&n[un]||null,d[ni]=r,d[wh]=function Sz(){return Cz++}(),d[ls]=u,d[fA]=c,d[Xt]=2==e.type?n[Xt]:d,d}function iu(n,e,t,i,s){let r=n.data[e];if(null===r)r=function Ob(n,e,t,i,s){const r=AA(),o=LE(),l=n.data[e]=function d6(n,e,t,i,s,r){let o=e?e.injectorIndex:-1,a=0;return Gc()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:s,attrs:r,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?r:r&&r.parent,t,e,i,s);return null===n.firstChild&&(n.firstChild=l),null!==r&&(o?null==r.child&&null!==l.parent&&(r.child=l):null===r.next&&(r.next=l,l.prev=r)),l}(n,e,t,i,s),function H5(){return Ie.lFrame.inI18n}()&&(r.flags|=32);else if(64&r.type){r.type=t,r.value=i,r.attrs=s;const o=function Ih(){const n=Ie.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();r.injectorIndex=null===o?-1:o.injectorIndex}return xr(r,!0),r}function zh(n,e,t,i){if(0===t)return-1;const s=e.length;for(let r=0;r<t;r++)e.push(i),n.blueprint.push(i),n.data.push(null);return s}function Ek(n,e,t,i,s){const r=oi(),o=2&i;try{pl(-1),o&&e.length>Me&&_k(n,e,Me,!1),Sr(o?2:0,s),t(i,s)}finally{pl(r),Sr(o?3:1,s)}}function Fb(n,e,t){if(TE(e)){const i=de(null);try{const r=e.directiveEnd;for(let o=e.directiveStart;o<r;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{de(i)}}}function Lb(n,e,t){DA()&&(function y6(n,e,t,i){const s=t.directiveStart,r=t.directiveEnd;hl(t)&&function I6(n,e,t){const i=wi(e,n),s=bk(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=Fm(n,Om(n,s,null,o,i,e,null,n[Zs].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=a}(e,t,n.data[s+t.componentOffset]),n.firstCreatePass||um(t,e),ai(i,e);const o=t.initialInputs;for(let a=s;a<r;a++){const l=n.data[a],c=gl(e,n,a,t);ai(c,e),null!==o&&x6(0,a-s,c,l,0,o),Ks(l)&&(cs(t.index,e)[kt]=gl(e,n,a,t))}}(n,e,t,wi(t,e)),!(64&~t.flags)&&Tk(n,e,t))}function Bb(n,e,t=wi){const i=e.localNames;if(null!==i){let s=e.index+1;for(let r=0;r<i.length;r+=2){const o=i[r+1],a=-1===o?t(e,n):n[o];n[s++]=a}}}function bk(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Vb(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Vb(n,e,t,i,s,r,o,a,l,c,u){const d=Me+i,h=d+s,f=function r6(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:Ne);return t}(d,h),p="function"==typeof c?c():c;return f[W]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof r?r():r,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}let Ck=()=>null;function Sk(n,e,t,i,s){for(let r in e){if(!e.hasOwnProperty(r))continue;const o=e[r];if(void 0===o)continue;i??={};let a,l=_t.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=r;if(null!==s){if(!s.hasOwnProperty(r))continue;c=s[r]}0===n?Ik(i,t,c,a,l):Ik(i,t,c,a)}return i}function Ik(n,e,t,i,s){let r;n.hasOwnProperty(t)?(r=n[t]).push(e,i):r=n[t]=[e,i],void 0!==s&&r.push(s)}function zi(n,e,t,i,s,r,o,a){const l=wi(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[i])?(zb(n,t,u,i,s),hl(e)&&function p6(n,e){const t=cs(e,n);16&t[he]||(t[he]|=64)}(t,e.index)):3&e.type&&(i=function f6(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),s=null!=o?o(s,e.value||"",i):s,r.setProperty(l,i,s))}function $b(n,e,t,i){if(DA()){const s=null===i?null:{"":-1},r=function w6(n,e){const t=n.directiveRegistry;let i=null,s=null;if(t)for(let r=0;r<t.length;r++){const o=t[r];if(eA(e,o.selectors,!1))if(i||(i=[]),Ks(o))if(null!==o.findHostDirectiveDefs){const a=[];s=s||new Map,o.findHostDirectiveDefs(o,a,s),i.unshift(...a,o),Ub(n,e,a.length)}else i.unshift(o),Ub(n,e,0);else s=s||new Map,o.findHostDirectiveDefs?.(o,i,s),i.push(o)}return null===i?null:[i,s]}(n,t);let o,a;null===r?o=a=null:[o,a]=r,null!==o&&xk(n,e,t,o,s,a),s&&function E6(n,e,t){if(e){const i=n.localNames=[];for(let s=0;s<e.length;s+=2){const r=t[e[s+1]];if(null==r)throw new R(-301,!1);i.push(e[s],r)}}}(t,i,s)}t.mergedAttrs=mh(t.mergedAttrs,t.attrs)}function xk(n,e,t,i,s,r){for(let c=0;c<i.length;c++)ZE(um(t,e),n,i[c].type);!function C6(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let c=0;c<i.length;c++){const u=i[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=zh(n,e,i.length,null);for(let c=0;c<i.length;c++){const u=i[c];t.mergedAttrs=mh(t.mergedAttrs,u.hostAttrs),S6(n,t,e,l,u),b6(l,u,s),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function h6(n,e,t){const s=e.directiveEnd,r=n.data,o=e.attrs,a=[];let l=null,c=null;for(let u=e.directiveStart;u<s;u++){const d=r[u],h=t?t.get(d):null,p=h?h.outputs:null;l=Sk(0,d.inputs,u,l,h?h.inputs:null),c=Sk(1,d.outputs,u,c,p);const g=null===l||null===o||mE(e)?null:T6(l,u,o);a.push(g)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,r)}function Tk(n,e,t){const i=t.directiveStart,s=t.directiveEnd,r=t.index,o=function q5(){return Ie.lFrame.currentDirectiveIndex}();try{pl(r);for(let a=i;a<s;a++){const l=n.data[a],c=e[a];VE(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&_6(l,c)}}finally{pl(-1),VE(o)}}function _6(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Ub(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function b6(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Ks(e)&&(t[""]=n)}}function S6(n,e,t,i,s){n.data[i]=s;const r=s.factory||(s.factory=ll(s.type)),o=new Th(r,Ks(s),k);n.blueprint[i]=o,t[i]=o,function m6(n,e,t,i,s){const r=s.hostBindings;if(r){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function v6(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,i,r)}}(n,e,i,zh(n,t,s.hostVars,Ne),s)}function Mr(n,e,t,i,s,r){const o=wi(n,e);!function jb(n,e,t,i,s,r,o){if(null==r)n.removeAttribute(e,s,t);else{const a=null==o?ke(r):o(r,i||"",s);n.setAttribute(e,s,a,t)}}(e[Se],o,r,n.value,t,i,s)}function x6(n,e,t,i,s,r){const o=r[e];if(null!==o)for(let a=0;a<o.length;)wk(i,t,o[a++],o[a++],o[a++],o[a++])}function T6(n,e,t){let i=null,s=0;for(;s<t.length;){const r=t[s];if(0!==r)if(5!==r){if("number"==typeof r)break;if(n.hasOwnProperty(r)){null===i&&(i=[]);const o=n[r];for(let a=0;a<o.length;a+=3)if(o[a]===e){i.push(r,o[a+1],o[a+2],t[s+1]);break}}s+=2}else s+=2;else s+=4}return i}function Dk(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function Ak(n,e){const t=n.contentQueries;if(null!==t){const i=de(null);try{for(let s=0;s<t.length;s+=2){const o=t[s+1];if(-1!==o){const a=n.data[o];rm(t[s]),a.contentQueries(2,e[o],o)}}}finally{de(i)}}}function Fm(n,e){return n[yh]?n[hA][Xs]=e:n[yh]=e,n[hA]=e,e}function Hb(n,e,t){rm(0);const i=de(null);try{e(n,t)}finally{de(i)}}function kk(n){return n[Uc]||(n[Uc]=[])}function Mk(n){return n.cleanup||(n.cleanup=[])}function Nk(n,e,t){return(null===n||Ks(n))&&(t=function NE(n){for(;Array.isArray(n);){if("object"==typeof n[IE])return n;n=n[zt]}return null}(t[e.index])),t[Se]}function Lm(n,e){const t=n[un],i=t?t.get(Ar,null):null;i&&i.handleError(e)}function zb(n,e,t,i,s){for(let r=0;r<t.length;){const o=t[r++],a=t[r++],l=t[r++];wk(n.data[o],e[o],i,a,l,s)}}function D6(n,e){const t=cs(e,n),i=t[W];!function A6(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const s=t[zt];null!==s&&null===t[ls]&&(t[ls]=pb(s,t[un])),qb(i,t,t[kt])}function qb(n,e,t){jE(e);try{const i=n.viewQuery;null!==i&&Hb(1,i,t);const s=n.template;null!==s&&Ek(n,e,s,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[wo]?.finishViewCreation(n),n.staticContentQueries&&Ak(n,e),n.staticViewQueries&&Hb(2,n.viewQuery,t);const r=n.components;null!==r&&function k6(n,e){for(let t=0;t<e.length;t++)D6(n,e[t])}(e,r)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[he]&=-5,HE()}}function su(n,e){return!e||null===e.firstChild||pm(n)}function Gh(n,e,t,i=!0){const s=e[W];if(function Wq(n,e,t,i){const s=sn+i,r=t.length;i>0&&(t[s-1][Xs]=e),i<r-sn?(e[Xs]=t[s],GD(t,sn+i,e)):(t.push(e),e[Xs]=null),e[nn]=t;const o=e[_h];null!==o&&t!==o&&function Qq(n,e){const t=n[zc];e[Xt]!==e[nn][nn][Xt]&&(n[he]|=xE.HasTransplantedViews),null===t?n[zc]=[e]:t.push(e)}(o,e);const a=e[wo];null!==a&&a.insertView(n),OE(e),e[he]|=128}(s,e,n,t),i){const o=Rb(t,n),a=e[Se],l=Nm(a,n[Cr]);null!==l&&function qq(n,e,t,i,s,r){i[zt]=s,i[ni]=e,Pm(n,i,t,1,s,r)}(s,n[ni],a,e,l,o)}const r=e[ls];null!==r&&null!==r.firstChild&&(r.firstChild=null)}function Wh(n,e,t,i,s=!1){for(;null!==t;){const r=e[t.index];null!==r&&i.push(It(r)),si(r)&&Pk(r,i);const o=t.type;if(8&o)Wh(n,e,t.child,i);else if(32&o){const a=Tb(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=pk(e,t);if(Array.isArray(a))i.push(...a);else{const l=fl(e[Xt]);Wh(l[W],l,a,i,!0)}}t=s?t.projectionNext:t.next}return i}function Pk(n,e){for(let t=sn;t<n.length;t++){const i=n[t],s=i[W].firstChild;null!==s&&Wh(i[W],i,s,e)}n[Cr]!==n[zt]&&e.push(n[Cr])}let Ok=[];const P6={...go,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Sh(n.lView)},consumerOnSignalRead(){this.lView[dl]=this}},Fk=100;function Bm(n,e=!0,t=0){const i=n[Zs],s=i.rendererFactory;s.begin?.();try{!function O6(n,e){Wb(n,e);let t=0;for(;PE(n);){if(t===Fk)throw new R(103,!1);t++,Wb(n,1)}}(n,t)}catch(o){throw e&&Lm(n,o),o}finally{s.end?.(),i.inlineEffectRunner?.flush()}}function F6(n,e,t,i){const s=e[he];if(!(256&~s))return;e[Zs].inlineEffectRunner?.flush(),jE(e);let o=null,a=null;(function L6(n){return 2!==n.type})(n)&&(a=function M6(n){return n[dl]??function N6(n){const e=Ok.pop()??Object.create(P6);return e.lView=n,e}(n)}(e),o=function Be(n){return n&&(n.nextProducerIndex=0),de(n)}(a));try{IA(e),function MA(n){return Ie.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Ek(n,e,t,2,i);const l=!(3&~s);if(l){const d=n.preOrderCheckHooks;null!==d&&am(e,d,null)}else{const d=n.preOrderHooks;null!==d&&lm(e,d,0,null),GE(e,0)}if(function B6(n){for(let e=y1(n);null!==e;e=_1(e)){if(!(e[he]&xE.HasTransplantedViews))continue;const t=e[zc];for(let i=0;i<t.length;i++){R5(t[i])}}}(e),Lk(e,0),null!==n.contentQueries&&Ak(n,e),l){const d=n.contentCheckHooks;null!==d&&am(e,d)}else{const d=n.contentHooks;null!==d&&lm(e,d,1),GE(e,1)}!function s6(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)pl(~s);else{const r=s,o=t[++i],a=t[++i];z5(o,r),a(2,e[r])}}}finally{pl(-1)}}(n,e);const c=n.components;null!==c&&Vk(e,c,0);const u=n.viewQuery;if(null!==u&&Hb(2,u,i),l){const d=n.viewCheckHooks;null!==d&&am(e,d)}else{const d=n.viewHooks;null!==d&&lm(e,d,2),GE(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[tm]){for(const d of e[tm])d();e[tm]=null}e[he]&=-73}catch(l){throw Sh(e),l}finally{null!==a&&(function sl(n,e){if(de(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(aa(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)xc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}(a,o),function R6(n){n.lView[dl]!==n&&(n.lView=null,Ok.push(n))}(a)),HE()}}function Lk(n,e){for(let t=y1(n);null!==t;t=_1(t))for(let i=sn;i<t.length;i++)Bk(t[i],e)}function V6(n,e,t){Bk(cs(e,n),t)}function Bk(n,e){RE(n)&&Wb(n,e)}function Wb(n,e){const i=n[W],s=n[he],r=n[dl];let o=!!(0===e&&16&s);if(o||=!!(64&s&&0===e),o||=!!(1024&s),o||=!(!r?.dirty||!rl(r)),r&&(r.dirty=!1),n[he]&=-9217,o)F6(i,n,i.template,n[kt]);else if(8192&s){Lk(n,1);const a=i.components;null!==a&&Vk(n,a,1)}}function Vk(n,e,t){for(let i=0;i<e.length;i++)V6(n,e[i],t)}function Qh(n){for(n[Zs].changeDetectionScheduler?.notify();n;){n[he]|=64;const e=fl(n);if(DE(n)&&!e)return n;n=e}return null}class Yh{get rootNodes(){const e=this._lView,t=e[W];return Wh(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[kt]}set context(e){this._lView[kt]=e}get destroyed(){return!(256&~this._lView[he])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[nn];if(si(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(Uh(e,i),qg(t,i))}this._attachedToViewContainer=!1}Mm(this._lView[W],this._lView)}onDestroy(e){sm(this._lView,e)}markForCheck(){Qh(this._cdRefInjectingView||this._lView)}detach(){this._lView[he]&=-129}reattach(){OE(this._lView),this._lView[he]|=128}detectChanges(){this._lView[he]|=1024,Bm(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new R(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,rk(this._lView[W],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new R(902,!1);this._appRef=e,OE(this._lView)}}let Nr=(()=>{class n{static{this.__NG_ELEMENT_ID__=j6}}return n})();const $6=Nr,U6=class extends $6{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const s=function qh(n,e,t,i){const s=de(null);try{const r=e.tView,l=Om(n,r,t,4096&n[he]?4096:16,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null);l[_h]=n[e.index];const u=n[wo];return null!==u&&(l[wo]=u.createEmbeddedView(r)),qb(r,l,t),l}finally{de(s)}}(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new Yh(s)}};function j6(){return Vm(wt(),F())}function Vm(n,e){return 4&n.type?new U6(e,n,Zc(n,e)):null}class zm{}class h9{}class Gk{}class p9{resolveComponentFactory(e){throw function f9(n){const e=Error(`No component factory found for ${En(n)}.`);return e.ngComponent=n,e}(e)}}let xo=(()=>{class n{static{this.NULL=new p9}}return n})();class Jb{}let To=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function g9(){const n=F(),t=cs(wt().index,n);return(ii(t)?t:n)[Se]}()}}return n})(),m9=(()=>{class n{static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>null})}}return n})();const eC={},Qk=new Set;function Rr(n){Qk.has(n)||(Qk.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Yk(...n){}class Ae{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Et(!1),this.onMicrotaskEmpty=new Et(!1),this.onStable=new Et(!1),this.onError=new Et(!1),typeof Zone>"u")throw new R(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&t,s.shouldCoalesceRunChangeDetection=i,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=function v9(){const n="function"==typeof mt.requestAnimationFrame;let e=mt[n?"requestAnimationFrame":"setTimeout"],t=mt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const s=t[Zone.__symbol__("OriginalDelegate")];s&&(t=s)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function w9(n){const e=()=>{!function _9(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(mt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,nC(n),n.isCheckStableRunning=!0,tC(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),nC(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,s,r,o,a)=>{if(function E9(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(s,r,o,a);try{return Xk(n),t.invokeTask(s,r,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===r.type||n.shouldCoalesceRunChangeDetection)&&e(),Zk(n)}},onInvoke:(t,i,s,r,o,a,l)=>{try{return Xk(n),t.invoke(s,r,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),Zk(n)}},onHasTask:(t,i,s,r)=>{t.hasTask(s,r),i===s&&("microTask"==r.change?(n._hasPendingMicrotasks=r.microTask,nC(n),tC(n)):"macroTask"==r.change&&(n.hasPendingMacrotasks=r.macroTask))},onHandleError:(t,i,s,r)=>(t.handleError(s,r),n.runOutsideAngular(()=>n.onError.emit(r)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ae.isInAngularZone())throw new R(909,!1)}static assertNotInAngularZone(){if(Ae.isInAngularZone())throw new R(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,s){const r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+s,e,y9,Yk,Yk);try{return r.runTask(o,t,i)}finally{r.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const y9={};function tC(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function nC(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Xk(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Zk(n){n._nesting--,tC(n)}class Kk{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Et,this.onMicrotaskEmpty=new Et,this.onStable=new Et,this.onError=new Et}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,s){return e.apply(t,i)}}let ef=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const i of t)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Gm(n,e,t){let i=t?n.styles:null,s=t?n.classes:null,r=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?r=a:1==r?s=Zw(s,a):2==r&&(i=Zw(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=s:n.classesWithoutHost=s}class sM extends xo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=ze(e);return new sf(t,this.ngModule)}}function rM(n){const e=[];for(const t in n){if(!n.hasOwnProperty(t))continue;const i=n[t];void 0!==i&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:t})}return e}class Wm{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=zg(i);const s=this.injector.get(e,eC,i);return s!==eC||t===eC?s:this.parentInjector.get(e,t,i)}}class sf extends Gk{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=rM(e.inputs);if(null!==t)for(const s of i)t.hasOwnProperty(s.propName)&&(s.transform=t[s.propName]);return i}get outputs(){return rM(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function K4(n){return n.map(Z4).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,s){const r=de(null);try{let o=(s=s||this.ngModule)instanceof as?s:s?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new Wm(e,o):e,l=a.get(Jb,null);if(null===l)throw new R(407,!1);const c=a.get(m9,null),h={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:a.get(ef,null),changeDetectionScheduler:a.get(zm,null)},f=l.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",g=i?function o6(n,e,t,i){const r=i.get(P1,!1)||t===Qs.ShadowDom,o=n.selectRootElement(e,r);return function a6(n){Ck(n)}(o),o}(f,i,this.componentDef.encapsulation,a):km(f,p,function T9(n){const e=n.toLowerCase();return"svg"===e?bA:"math"===e?"math":null}(p));let v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let _=null;null!==g&&(_=pb(g,a,!0));const E=Vb(0,null,null,1,0,null,null,null,null,null,null),b=Om(null,E,null,v,null,null,h,f,a,null,_);let T,V;jE(b);try{const N=this.componentDef;let M,D=null;N.findHostDirectiveDefs?(M=[],D=new Map,N.findHostDirectiveDefs(N,M,D),M.push(N)):M=[N];const L=function A9(n,e){const t=n[W],i=Me;return n[i]=e,iu(t,i,2,"#host",null)}(b,g),ne=function k9(n,e,t,i,s,r,o){const a=s[W];!function M9(n,e,t,i){for(const s of n)e.mergedAttrs=mh(e.mergedAttrs,s.hostAttrs);null!==e.mergedAttrs&&(Gm(e,e.mergedAttrs,!0),null!==t&&yk(i,t,e))}(i,n,e,o);let l=null;null!==e&&(l=pb(e,s[un]));const c=r.rendererFactory.createRenderer(e,t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const d=Om(s,bk(t),null,u,s[n.index],n,r,c,null,null,l);return a.firstCreatePass&&Ub(a,n,i.length-1),Fm(s,d),s[n.index]=d}(L,g,N,M,b,h,f);V=Ch(E,Me),g&&function R9(n,e,t,i){if(i)gE(n,t,["ng-version","17.3.12"]);else{const{attrs:s,classes:r}=function J4(n){const e=[],t=[];let i=1,s=2;for(;i<n.length;){let r=n[i];if("string"==typeof r)2===s?""!==r&&e.push(r,n[++i]):8===s&&t.push(r);else{if(!Ys(s))break;s=r}i++}return{attrs:e,classes:t}}(e.selectors[0]);s&&gE(n,t,s),r&&r.length>0&&vk(n,t,r.join(" "))}}(f,N,g,i),void 0!==t&&function P9(n,e,t){const i=n.projection=[];for(let s=0;s<e.length;s++){const r=t[s];i.push(null!=r?Array.from(r):null)}}(V,this.ngContentSelectors,t),T=function N9(n,e,t,i,s,r){const o=wt(),a=s[W],l=wi(o,s);xk(a,s,o,t,null,i);for(let u=0;u<t.length;u++)ai(gl(s,a,o.directiveStart+u,o),s);Tk(a,s,o),l&&ai(l,s);const c=gl(s,a,o.directiveStart+o.componentOffset,o);if(n[kt]=s[kt]=c,null!==r)for(const u of r)u(c,e);return Fb(a,o,s),c}(ne,N,M,D,b,[O9]),qb(E,b,null)}finally{HE()}return new D9(this.componentType,T,Zc(V,b),b,V)}finally{de(r)}}}class D9 extends h9{constructor(e,t,i,s,r){super(),this.location=i,this._rootLView=s,this._tNode=r,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Yh(s,void 0,!1),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let s;if(null!==i&&(s=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const r=this._rootLView;zb(r[W],r,s,e,t),this.previousInputValues.set(e,t),Qh(cs(this._tNode.index,r))}}get injector(){return new Sn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function O9(){const n=wt();om(F()[W],n)}let qi=(()=>{class n{static{this.__NG_ELEMENT_ID__=F9}}return n})();function F9(){return lM(wt(),F())}const L9=qi,oM=class extends L9{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Zc(this._hostTNode,this._hostLView)}get injector(){return new Sn(this._hostTNode,this._hostLView)}get parentInjector(){const e=dm(this._hostTNode,this._hostLView);if(QE(e)){const t=Ah(e,this._hostLView),i=Dh(e);return new Sn(t[W].data[i+8],t)}return new Sn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=aM(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-sn}createEmbeddedView(e,t,i){let s,r;"number"==typeof i?s=i:null!=i&&(s=i.index,r=i.injector);const a=e.createEmbeddedViewImpl(t||{},r,null);return this.insertImpl(a,s,su(this._hostTNode,null)),a}createComponent(e,t,i,s,r){const o=e&&!function vh(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const p=t||{};a=p.index,i=p.injector,s=p.projectableNodes,r=p.environmentInjector||p.ngModuleRef}const l=o?e:new sf(ze(e)),c=i||this.parentInjector;if(!r&&null==l.ngModule){const g=(o?c:this.parentInjector).get(as,null);g&&(r=g)}ze(l.componentType??{});const f=l.create(c,s,null,r);return this.insertImpl(f.hostView,a,su(this._hostTNode,null)),f}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){const s=e._lView;if(function N5(n){return si(n[nn])}(s)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const l=s[nn],c=new oM(l,l[ni],l[nn]);c.detach(c.indexOf(e))}}const r=this._adjustIndex(t),o=this._lContainer;return Gh(o,s,r,i),e.attachToViewContainerRef(),GD(oC(o),r,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=aM(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=Uh(this._lContainer,t);i&&(qg(oC(this._lContainer),t),Mm(i[W],i))}detach(e){const t=this._adjustIndex(e,-1),i=Uh(this._lContainer,t);return i&&null!=qg(oC(this._lContainer),t)?new Yh(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function aM(n){return n[8]}function oC(n){return n[8]||(n[8]=[])}function lM(n,e){let t;const i=e[n.index];return si(i)?t=i:(t=Dk(i,e,null,n),e[n.index]=t,Fm(e,t)),cM(t,e,n,i),new oM(t,n,e)}let cM=function dM(n,e,t,i){if(n[Cr])return;let s;s=8&t.type?It(i):function B9(n,e){const t=n[Se],i=t.createComment(""),s=wi(e,n);return _l(t,Nm(t,s),i,function Kq(n,e){return n.nextSibling(e)}(t,s),!1),i}(e,t),n[Cr]=s},aC=()=>!1;class lC{constructor(e){this.queryList=e,this.matches=null}clone(){return new lC(this.queryList)}setDirty(){this.queryList.setDirty()}}class cC{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,s=[];for(let r=0;r<i;r++){const o=t.getByIndex(r);s.push(this.queries[o.indexInDeclarationView].clone())}return new cC(s)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==pC(e,t).matches&&this.queries[t].setDirty()}}class hM{constructor(e,t,i=null){this.flags=t,this.read=i,this.predicate="string"==typeof e?function G9(n){return n.split(",").map(e=>e.trim())}(e):e}}class uC{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const s=null!==t?t.length:0,r=this.getByIndex(i).embeddedTView(e,s);r&&(r.indexInDeclarationView=i,null!==t?t.push(r):t=[r])}return null!==t?new uC(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class dC{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new dC(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let s=0;s<i.length;s++){const r=i[s];this.matchTNodeWithReadOption(e,t,j9(t,r)),this.matchTNodeWithReadOption(e,t,hm(t,e,r,!1,!1))}else i===Nr?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,hm(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const s=this.metadata.read;if(null!==s)if(s===tn||s===qi||s===Nr&&4&t.type)this.addMatch(t.index,-2);else{const r=hm(t,e,s,!1,!1);null!==r&&this.addMatch(t.index,r)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function j9(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function z9(n,e,t,i){return-1===t?function H9(n,e){return 11&n.type?Zc(n,e):4&n.type?Vm(n,e):null}(e,n):-2===t?function q9(n,e,t){return t===tn?Zc(e,n):t===Nr?Vm(e,n):t===qi?lM(e,n):void 0}(n,e,i):gl(n,n[W],t,e)}function fM(n,e,t,i){const s=e[wo].queries[i];if(null===s.matches){const r=n.data,o=t.matches,a=[];for(let l=0;null!==o&&l<o.length;l+=2){const c=o[l];a.push(c<0?null:z9(e,r[c],o[l+1],t.metadata.read))}s.matches=a}return s.matches}function hC(n,e,t,i){const s=n.queries.getByIndex(t),r=s.matches;if(null!==r){const o=fM(n,e,s,t);for(let a=0;a<r.length;a+=2){const l=r[a];if(l>0)i.push(o[a/2]);else{const c=r[a+1],u=e[-l];for(let d=sn;d<u.length;d++){const h=u[d];h[_h]===h[nn]&&hC(h[W],h,c,i)}if(null!==u[zc]){const d=u[zc];for(let h=0;h<d.length;h++){const f=d[h];hC(f[W],f,c,i)}}}}}return i}function gM(n,e,t){const i=Ge();return i.firstCreatePass&&(function vM(n,e,t){null===n.queries&&(n.queries=new uC),n.queries.track(new dC(e,t))}(i,new hM(n,e,t),-1),!(2&~e)&&(i.staticViewQueries=!0)),function pM(n,e,t){const i=new Mh(!(4&~t));return function u6(n,e,t,i){const s=kk(e);s.push(t),n.firstCreatePass&&Mk(n).push(i,s.length-1)}(n,e,i,i.destroy),(e[wo]??=new cC).queries.push(new lC(i))-1}(i,F(),e)}function pC(n,e){return n.queries.getByIndex(e)}function yM(n,e){const t=n[W],i=pC(t,e);return i.crossesNgTemplate?hC(t,n,e,[]):fM(t,n,i,e)}function rf(n,e){Rr("NgSignals");const t=function JH(n){const e=Object.create(t4);e.value=n;const t=()=>(uh(e),e.value);return t[ei]=e,t}(n),i=t[ei];return e?.equal&&(i.equal=e.equal),t.set=s=>SD(i,s),t.update=s=>function e4(n,e){St()||CD(),SD(n,e(n.value))}(i,s),t.asReadonly=_M.bind(t),t}function _M(){const n=this[ei];if(void 0===n.readonlyFn){const e=()=>this();e[ei]=n,n.readonlyFn=e}return n.readonlyFn}function wM(n){return function Qm(n){return"function"==typeof n&&void 0!==n[ei]}(n)&&"function"==typeof n.set}function Je(n){let e=function MM(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let s;if(Ks(n))s=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new R(903,!1);s=e.\u0275dir}if(s){if(t){i.push(s);const o=n;o.inputs=Xm(n.inputs),o.inputTransforms=Xm(n.inputTransforms),o.declaredInputs=Xm(n.declaredInputs),o.outputs=Xm(n.outputs);const a=s.hostBindings;a&&aG(n,a);const l=s.viewQuery,c=s.contentQueries;if(l&&rG(n,l),c&&oG(n,c),iG(n,s),y4(n.outputs,s.outputs),Ks(s)&&s.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(s.data.animation)}}const r=s.features;if(r)for(let o=0;o<r.length;o++){const a=r[o];a&&a.ngInherit&&a(n),a===Je&&(t=!1)}}e=Object.getPrototypeOf(e)}!function sG(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const s=n[i];s.hostVars=e+=s.hostVars,s.hostAttrs=mh(s.hostAttrs,t=mh(t,s.hostAttrs))}}(i)}function iG(n,e){for(const t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;const i=e.inputs[t];if(void 0!==i&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t],null!==e.inputTransforms)){const s=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(s))continue;n.inputTransforms??={},n.inputTransforms[s]=e.inputTransforms[s]}}}function Xm(n){return n===br?{}:n===nt?[]:n}function rG(n,e){const t=n.viewQuery;n.viewQuery=t?(i,s)=>{e(i,s),t(i,s)}:e}function oG(n,e){const t=n.contentQueries;n.contentQueries=t?(i,s,r)=>{e(i,s,r),t(i,s,r)}:e}function aG(n,e){const t=n.hostBindings;n.hostBindings=t?(i,s)=>{e(i,s),t(i,s)}:e}class El{}class FM{}class mC extends El{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new sM(this);const s=ti(e);this._bootstrapComponents=ds(s.bootstrap),this._r3Injector=s1(e,t,[{provide:El,useValue:this},{provide:xo,useValue:this.componentFactoryResolver},...i],En(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class vC extends FM{constructor(e){super(),this.moduleType=e}create(e){return new mC(this.moduleType,e,[])}}class LM extends El{constructor(e){super(),this.componentFactoryResolver=new sM(this),this.instance=null;const t=new Bc([...e.providers,{provide:El,useValue:this},{provide:xo,useValue:this.componentFactoryResolver}],e.parent||Kg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function yC(n,e,t=null){return new LM({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let _a=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new is(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Km(n){return!!function _C(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Pr(n,e,t){return n[e]=t}function rn(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Jm(n,e,t,i,s){const r=function bl(n,e,t,i){const s=rn(n,e,t);return rn(n,e+1,i)||s}(n,e,t,i);return rn(n,e+2,s)||r}function se(n,e,t,i,s,r,o,a){const l=F(),c=Ge(),u=n+Me,d=c.firstCreatePass?function wG(n,e,t,i,s,r,o,a,l){const c=e.consts,u=iu(e,n,4,o||null,Ir(c,a));$b(e,t,u,Ir(c,l)),om(e,u);const d=u.tView=Vb(2,u,i,s,r,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,i,s,r,o):c.data[u];xr(d,!1);const h=BM(c,l,d,n);xh()&&Rm(c,l,h,d),ai(h,l);const f=Dk(h,l,h,d);return l[u]=f,Fm(l,f),function uM(n,e,t){return aC(n,e,t)}(f,d,l),im(d)&&Lb(c,l,d),null!=o&&Bb(l,d,a),se}let BM=function VM(n,e,t,i){return Tr(!0),e[Se].createComment("")};function zn(n,e,t,i){const s=F();return rn(s,Js(),e)&&(Ge(),Mr(Mt(),s,n,e,t,i)),zn}function rv(n,e){return n<<17|e<<2}function Ea(n){return n>>17&32767}function AC(n){return 2|n}function Sl(n){return(131068&n)>>2}function kC(n,e){return-131069&n|e<<2}function MC(n){return 1|n}function mN(n,e,t,i){const s=n[t+1],r=null===e;let o=i?Ea(s):Sl(s),a=!1;for(;0!==o&&(!1===a||r);){const c=n[o+1];o7(n[o],e)&&(a=!0,n[o+1]=i?MC(c):AC(c)),o=i?Ea(c):Sl(c)}a&&(n[t+1]=i?AC(s):MC(s))}function o7(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Fc(n,e)>=0}const In={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function vN(n){return n.substring(In.key,In.keyEnd)}function yN(n,e){const t=In.textEnd;return t===e?-1:(e=In.keyEnd=function u7(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,In.key=e,t),bu(n,e,t))}function bu(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function B(n,e,t){const i=F();return rn(i,Js(),e)&&zi(Ge(),Mt(),i,n,e,i[Se],t,!1),B}function NC(n,e,t,i,s){const o=s?"class":"style";zb(n,t,e.inputs[o],o,i)}function Il(n,e,t){return tr(n,e,t,!1),Il}function qn(n,e){return tr(n,e,null,!0),qn}function Fr(n){!function nr(n,e,t,i){const s=Ge(),r=bo(2);s.firstUpdatePass&&SN(s,null,r,i);const o=F();if(t!==Ne&&rn(o,r,t)){const a=s.data[oi()];if(DN(a,i)&&!CN(s,r)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=Zw(l,t||"")),NC(s,a,o,t,i)}else!function w7(n,e,t,i,s,r,o,a){s===Ne&&(s=nt);let l=0,c=0,u=0<s.length?s[0]:null,d=0<r.length?r[0]:null;for(;null!==u||null!==d;){const h=l<s.length?s[l+1]:void 0,f=c<r.length?r[c+1]:void 0;let g,p=null;u===d?(l+=2,c+=2,h!==f&&(p=d,g=f)):null===d||null!==u&&u<d?(l+=2,p=u):(c+=2,p=d,g=f),null!==p&&xN(n,e,t,i,p,g,o,a),u=l<s.length?s[l]:null,d=c<r.length?r[c]:null}}(s,a,o,o[Se],o[r+1],o[r+1]=function y7(n,e,t){if(null==t||""===t)return nt;const i=[],s=us(t);if(Array.isArray(s))for(let r=0;r<s.length;r++)n(i,s[r],!0);else if("object"==typeof s)for(const r in s)s.hasOwnProperty(r)&&n(i,r,s[r]);else"string"==typeof s&&e(i,s);return i}(n,e,t),i,r)}}(_7,Lr,n,!0)}function Lr(n,e){for(let t=function l7(n){return function wN(n){In.key=0,In.keyEnd=0,In.value=0,In.valueEnd=0,In.textEnd=n.length}(n),yN(n,bu(n,0,In.textEnd))}(e);t>=0;t=yN(e,t))os(n,vN(e),!0)}function tr(n,e,t,i){const s=F(),r=Ge(),o=bo(2);r.firstUpdatePass&&SN(r,n,o,i),e!==Ne&&rn(s,o,e)&&xN(r,r.data[oi()],s,s[Se],n,s[o+1]=function E7(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=En(us(n)))),n}(e,t),i,o)}function CN(n,e){return e>=n.expandoStartIndex}function SN(n,e,t,i){const s=n.data;if(null===s[t+1]){const r=s[oi()],o=CN(n,t);DN(r,i)&&null===e&&!o&&(e=!1),e=function p7(n,e,t,i){const s=$E(n);let r=i?e.residualClasses:e.residualStyles;if(null===s)0===(i?e.classBindings:e.styleBindings)&&(t=ff(t=RC(null,n,e,t,i),e.attrs,i),r=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==s)if(t=RC(s,n,e,t,i),null===r){let l=function g7(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Sl(i))return n[Ea(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=RC(null,n,e,l[1],i),l=ff(l,e.attrs,i),function m7(n,e,t,i){n[Ea(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else r=function v7(n,e,t){let i;const s=e.directiveEnd;for(let r=1+e.directiveStylingLast;r<s;r++)i=ff(i,n[r].hostAttrs,t);return ff(i,e.attrs,t)}(n,e,i)}return void 0!==r&&(i?e.residualClasses=r:e.residualStyles=r),t}(s,r,e,i),function s7(n,e,t,i,s,r){let o=r?e.classBindings:e.styleBindings,a=Ea(o),l=Sl(o);n[i]=t;let u,c=!1;if(Array.isArray(t)?(u=t[1],(null===u||Fc(t,u)>0)&&(c=!0)):u=t,s)if(0!==l){const h=Ea(n[a+1]);n[i+1]=rv(h,a),0!==h&&(n[h+1]=kC(n[h+1],i)),n[a+1]=function n7(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=rv(a,0),0!==a&&(n[a+1]=kC(n[a+1],i)),a=i;else n[i+1]=rv(l,0),0===a?a=i:n[l+1]=kC(n[l+1],i),l=i;c&&(n[i+1]=AC(n[i+1])),mN(n,u,i,!0),mN(n,u,i,!1),function r7(n,e,t,i,s){const r=s?n.residualClasses:n.residualStyles;null!=r&&"string"==typeof e&&Fc(r,e)>=0&&(t[i+1]=MC(t[i+1]))}(e,u,n,i,r),o=rv(a,l),r?e.classBindings=o:e.styleBindings=o}(s,r,e,t,o,i)}}function RC(n,e,t,i,s){let r=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(r=e[a],i=ff(i,r.hostAttrs,s),r!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function ff(n,e,t){const i=t?1:2;let s=-1;if(null!==e)for(let r=0;r<e.length;r++){const o=e[r];"number"==typeof o?s=o:s===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),os(n,o,!!t||e[++r]))}return void 0===n?null:n}function _7(n,e,t){const i=String(e);""!==i&&!i.includes(" ")&&os(n,i,t)}function xN(n,e,t,i,s,r,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],u=function i7(n){return!(1&~n)}(c)?TN(l,e,t,s,Sl(c),o):void 0;ov(u)||(ov(r)||function t7(n){return!(2&~n)}(c)&&(r=TN(l,null,t,s,a,o)),function t6(n,e,t,i,s){if(e)s?n.addClass(t,i):n.removeClass(t,i);else{let r=-1===i.indexOf("-")?void 0:ma.DashCase;null==s?n.removeStyle(t,i,r):("string"==typeof s&&s.endsWith("!important")&&(s=s.slice(0,-10),r|=ma.Important),n.setStyle(t,i,s,r))}}(i,o,bh(oi(),t),s,r))}function TN(n,e,t,i,s,r){const o=null===e;let a;for(;s>0;){const l=n[s],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[s+1];h===Ne&&(h=d?nt:void 0);let f=d?fE(h,i):u===i?h:void 0;if(c&&!ov(f)&&(f=fE(l,i)),ov(f)&&(a=f,o))return a;const p=n[s+1];s=o?Ea(p):Sl(p)}if(null!==e){let l=r?e.residualClasses:e.residualStyles;null!=l&&(a=fE(l,i))}return a}function ov(n){return void 0!==n}function DN(n,e){return!!(n.flags&(e?8:16))}function S(n,e,t,i){const s=F(),r=Ge(),o=Me+n,a=s[Se],l=r.firstCreatePass?function z7(n,e,t,i,s,r){const o=e.consts,l=iu(e,n,2,i,Ir(o,s));return $b(e,t,l,Ir(o,r)),null!==l.attrs&&Gm(l,l.attrs,!1),null!==l.mergedAttrs&&Gm(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,r,s,e,t,i):r.data[o],c=NN(r,s,l,a,e,n);s[o]=c;const u=im(l);return xr(l,!0),yk(a,c,l),!function cf(n){return!(32&~n.flags)}(l)&&xh()&&Rm(r,s,c,l),0===function P5(){return Ie.lFrame.elementDepthCount}()&&ai(c,s),function O5(){Ie.lFrame.elementDepthCount++}(),u&&(Lb(r,s,l),Fb(r,l,s)),null!==i&&Bb(s,l),S}function x(){let n=wt();LE()?BE():(n=n.parent,xr(n,!1));const e=n;(function L5(n){return Ie.skipHydrationRootTNode===n})(e)&&function U5(){Ie.skipHydrationRootTNode=null}(),function F5(){Ie.lFrame.elementDepthCount--}();const t=Ge();return t.firstCreatePass&&(om(t,n),TE(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function ez(n){return!!(8&n.flags)}(e)&&NC(t,e,F(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function tz(n){return!!(16&n.flags)}(e)&&NC(t,e,F(),e.stylesWithoutHost,!1),x}function ve(n,e,t,i){return S(n,e,t,i),x(),ve}let NN=(n,e,t,i,s,r)=>(Tr(!0),km(i,s,function BA(){return Ie.lFrame.currentNamespace}()));function Gn(n,e,t){const i=F(),s=Ge(),r=n+Me,o=s.firstCreatePass?function W7(n,e,t,i,s){const r=e.consts,o=Ir(r,i),a=iu(e,n,8,"ng-container",o);return null!==o&&Gm(a,o,!0),$b(e,t,a,Ir(r,s)),null!==e.queries&&e.queries.elementStart(e,a),a}(r,s,i,e,t):s.data[r];xr(o,!0);const a=PN(s,i,o,n);return i[r]=a,xh()&&Rm(s,i,a,o),ai(a,i),im(o)&&(Lb(s,i,o),Fb(s,o,i)),null!=t&&Bb(i,o),Gn}function Wn(){let n=wt();const e=Ge();return LE()?BE():(n=n.parent,xr(n,!1)),e.firstCreatePass&&(om(e,n),TE(n)&&e.queries.elementEnd(n)),Wn}let PN=(n,e,t,i)=>(Tr(!0),Ab(e[Se],""));function ht(){return F()}function av(n,e,t){const i=F();return rn(i,Js(),e)&&zi(Ge(),Mt(),i,n,e,i[Se],t,!0),av}function BC(n,e,t){const i=F();if(rn(i,Js(),e)){const r=Ge(),o=Mt();zi(r,o,i,n,e,Nk($E(r.data),o,i),t,!0)}return BC}const Su="en-US";let LN=Su;function ce(n,e,t,i){const s=F(),r=Ge(),o=wt();return UC(r,s,s[Se],o,n,e,i),ce}function UC(n,e,t,i,s,r,o){const a=im(i),c=n.firstCreatePass&&Mk(n),u=e[kt],d=kk(e);let h=!0;if(3&i.type||o){const g=wi(i,e),v=o?o(g):g,_=d.length,E=o?T=>o(It(T[i.index])):i.index;let b=null;if(!o&&a&&(b=function QW(n,e,t,i){const s=n.cleanup;if(null!=s)for(let r=0;r<s.length-1;r+=2){const o=s[r];if(o===t&&s[r+1]===i){const a=e[Uc],l=s[r+2];return a.length>l?a[l]:null}"string"==typeof o&&(r+=2)}return null}(n,e,s,i.index)),null!==b)(b.__ngLastListenerFn__||b).__ngNextListenerFn__=r,b.__ngLastListenerFn__=r,h=!1;else{r=dR(i,e,u,r,!1);const T=t.listen(v,s,r);d.push(r,T),c&&c.push(s,E,_,_+1)}}else r=dR(i,e,u,r,!1);const f=i.outputs;let p;if(h&&null!==f&&(p=f[s])){const g=p.length;if(g)for(let v=0;v<g;v+=2){const V=e[p[v]][p[v+1]].subscribe(r),N=d.length;d.push(r,V),c&&c.push(s,i.index,N,-(N+1))}}}function uR(n,e,t,i){const s=de(null);try{return Sr(6,e,t),!1!==t(i)}catch(r){return Lm(n,r),!1}finally{Sr(7,e,t),de(s)}}function dR(n,e,t,i,s){return function r(o){if(o===Function)return i;Qh(n.componentOffset>-1?cs(n.index,e):e);let l=uR(e,t,i,o),c=r.__ngNextListenerFn__;for(;c;)l=uR(e,t,c,o)&&l,c=c.__ngNextListenerFn__;return s&&!1===l&&o.preventDefault(),l}}function O(n=1){return function W5(n){return(Ie.lFrame.contextLView=function xA(n,e){for(;n>0;)e=e[jc],n--;return e}(n,Ie.lFrame.contextLView))[kt]}(n)}function YW(n,e){let t=null;const i=function W4(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let s=0;s<e.length;s++){const r=e[s];if("*"!==r){if(null===i?eA(n,r,!0):X4(i,r))return s}else t=s}return t}function hv(n,e,t){gM(n,e,t)}function wf(n){const e=F(),t=Ge(),i=UE();rm(i+1);const s=pC(t,i);if(n.dirty&&function M5(n){return!(4&~n[he])}(e)===!(2&~s.metadata.flags)){if(null===s.matches)n.reset([]);else{const r=yM(e,i);n.reset(r,l1),n.notifyOnChanges()}return!0}return!1}function Ef(){return function fC(n,e){return n[wo].queries[e].queryList}(F(),UE())}function Iu(n){return qc(function j5(){return Ie.lFrame.contextLView}(),Me+n)}function $(n,e=""){const t=F(),i=Ge(),s=n+Me,r=i.firstCreatePass?iu(i,s,1,e,null):i.data[s],o=RR(i,t,r,e,n);t[s]=o,xh()&&Rm(i,t,o,r),xr(r,!1)}let RR=(n,e,t,i,s)=>(Tr(!0),function Db(n,e){return n.createText(e)}(e[Se],i));function bt(n){return Ci("",n,""),bt}function Ci(n,e,t){const i=F(),s=function pu(n,e,t,i){return rn(n,Js(),t)?e+ke(t)+i:Ne}(i,n,e,t);return s!==Ne&&function Io(n,e,t){const i=bh(e,n);!function sk(n,e,t){n.setValue(e,t)}(n[Se],i,t)}(i,oi(),s),Ci}function Tl(n,e,t){wM(e)&&(e=e());const i=F();return rn(i,Js(),e)&&zi(Ge(),Mt(),i,n,e,i[Se],t,!1),Tl}function xu(n,e){const t=wM(n);return t&&n.set(e),t}function Dl(n,e){const t=F(),i=Ge(),s=wt();return UC(i,t,t[Se],s,n,e),Dl}function HC(n,e,t,i,s){if(n=Ee(n),Array.isArray(n))for(let r=0;r<n.length;r++)HC(n[r],e,t,i,s);else{const r=Ge(),o=F(),a=wt();let l=ul(n)?n:Ee(n.provide);const c=cA(n),u=1048575&a.providerIndexes,d=a.directiveStart,h=a.providerIndexes>>20;if(ul(n)||!n.multi){const f=new Th(c,s,k),p=qC(l,e,s?u:u+h,d);-1===p?(ZE(um(a,o),r,l),zC(r,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=qC(l,e,u+h,d),p=qC(l,e,u,u+h),v=p>=0&&t[p];if(s&&!v||!s&&!(f>=0&&t[f])){ZE(um(a,o),r,l);const _=function pQ(n,e,t,i,s){const r=new Th(n,t,k);return r.multi=[],r.index=e,r.componentProviders=0,jR(r,s,i&&!t),r}(s?fQ:hQ,t.length,s,i,c);!s&&v&&(t[p].providerFactory=_),zC(r,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),t.push(_),o.push(_)}else zC(r,n,f>-1?f:p,jR(t[s?p:f],c,!s&&i));!s&&i&&v&&t[p].componentProviders++}}}function zC(n,e,t,i){const s=ul(e),r=function o5(n){return!!n.useClass}(e);if(s||r){const l=(r?Ee(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!s&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function jR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function qC(n,e,t,i){for(let s=t;s<i;s++)if(e[s]===n)return s;return-1}function hQ(n,e,t,i){return GC(this.multi,[])}function fQ(n,e,t,i){const s=this.multi;let r;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=gl(t,t[W],this.providerFactory.index,i);r=a.slice(0,o),GC(s,r);for(let l=o;l<a.length;l++)r.push(a[l])}else r=[],GC(s,r);return r}function GC(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function qt(n,e=[]){return t=>{t.providersResolver=(i,s)=>function dQ(n,e,t){const i=Ge();if(i.firstCreatePass){const s=Ks(n);HC(t,i.data,i.blueprint,s,!0),HC(e,i.data,i.blueprint,s,!1)}}(i,s?s(n):n,e)}}let gQ=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=vE(0,t.type),s=i.length>0?yC([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,s)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=G({token:n,providedIn:"environment",factory:()=>new n(P(as))})}}return n})();function ba(n){Rr("NgStandalone"),n.getStandaloneInjector=e=>e.get(gQ).getOrCreateStandaloneInjector(n)}function WC(n,e,t,i){return zR(F(),Ei(),n,e,t,i)}function bf(n,e){const t=n[e];return t===Ne?void 0:t}function zR(n,e,t,i,s,r){const o=e+t;return rn(n,o,s)?Pr(n,o+1,r?i.call(r,s):i(s)):bf(n,o+1)}function Tu(n,e){const t=Ge();let i;const s=n+Me;t.firstCreatePass?(i=function TQ(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[s]=i,i.onDestroy&&(t.destroyHooks??=[]).push(s,i.onDestroy)):i=t.data[s];const r=i.factory||(i.factory=ll(i.type)),a=$i(k);try{const l=cm(!1),c=r();return cm(l),function JW(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,F(),s,c),c}finally{$i(a)}}function Cf(n,e,t){const i=n+Me,s=F(),r=qc(s,i);return Sf(s,i)?zR(s,Ei(),e,r.transform,t,r):r.transform(t)}function YR(n,e,t,i,s){const r=n+Me,o=F(),a=qc(o,r);return Sf(o,r)?function GR(n,e,t,i,s,r,o,a){const l=e+t;return Jm(n,l,s,r,o)?Pr(n,l+3,a?i.call(a,s,r,o):i(s,r,o)):bf(n,l+3)}(o,Ei(),e,a.transform,t,i,s,a):a.transform(t,i,s)}function Sf(n,e){return n[W].data[e].pure}function If(n,e){return Vm(n,e)}let dP=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const mP=new q(""),mv=new q("");let tS,JC=(()=>{class n{constructor(t,i,s){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,tS||(function CY(n){tS=n}(s),s.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ae.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,s){let r=-1;i&&i>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==r),t()},i)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:s})}whenStable(t,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,s){return[]}static{this.\u0275fac=function(i){return new(i||n)(P(Ae),P(eS),P(mv))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),eS=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return tS?.findTestabilityInTree(this,t,i)??null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function Df(n){return!!n&&"function"==typeof n.then}function vP(n){return!!n&&"function"==typeof n.subscribe}const SY=new q("");let nS=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=H(SY,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const s of this.appInits){const r=s();if(Df(r))t.push(r);else if(vP(r)){const o=new Promise((a,l)=>{r.subscribe({complete:a,error:l})});t.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(s=>{this.reject(s)}),0===t.length&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const yP=new q("");function EP(n,e){return Array.isArray(e)?e.reduce(EP,n):{...n,...e}}let ir=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=H(o1),this.afterRenderEffectManager=H(ef),this.externalTestViews=new Set,this.beforeRender=new ye,this.afterTick=new ye,this.componentTypes=[],this.components=[],this.isStable=H(_a).hasPendingTasks.pipe(Ve(t=>!t)),this._injector=H(as)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const s=t instanceof Gk;if(!this._injector.get(nS).done)throw!s&&function fa(n){const e=ze(n)||bn(n)||Hn(n);return null!==e&&e.standalone}(t),new R(405,!1);let o;o=s?t:this._injector.get(xo).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function IY(n){return n.isBoundToModule}(o)?void 0:this._injector.get(El),c=o.create(Zt.NULL,[],i||o.selector,a),u=c.location.nativeElement,d=c.injector.get(mP,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),vv(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new R(101,!1);const i=de(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,de(i)}}detectChangesInAttachedViews(t){let i=0;const s=this.afterRenderEffectManager;for(;;){if(i===Fk)throw new R(103,!1);if(t){const r=0===i;this.beforeRender.next(r);for(let{_lView:o,notifyErrorHandler:a}of this._views)TY(o,r,a)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:r})=>iS(r))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:r})=>iS(r))))break}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;vv(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(yP,[]);[...this._bootstrapListeners,...i].forEach(s=>s(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>vv(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new R(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function vv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function TY(n,e,t){!e&&!iS(n)||function DY(n,e,t){let i;t?(i=0,n[he]|=1024):i=64&n[he]?0:1,Bm(n,e,i)}(n,t,e)}function iS(n){return PE(n)}class AY{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let kY=(()=>{class n{compileModuleSync(t){return new vC(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),r=ds(ti(t).declarations).reduce((o,a)=>{const l=ze(a);return l&&o.push(new sf(l)),o},[]);return new AY(i,r)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),RY=(()=>{class n{constructor(){this.zone=H(Ae),this.applicationRef=H(ir)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function PY(){const n=H(Ae),e=H(Ar);return t=>n.runOutsideAngular(()=>e.handleError(t))}let FY=(()=>{class n{constructor(){this.subscription=new wn,this.initialized=!1,this.zone=H(Ae),this.pendingTasks=H(_a)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ae.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ae.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Br=new q("",{providedIn:"root",factory:()=>H(Br,Ze.Optional|Ze.SkipSelf)||function LY(){return typeof $localize<"u"&&$localize.locale||Su}()}),sS=new q("");let IP=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const s=function b9(n="zone.js",e){return"noop"===n?new Kk:"zone.js"===n?new Ae(e):n}(i?.ngZone,function SP(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return s.run(()=>{const r=function pG(n,e,t){return new mC(n,e,t)}(t.moduleType,this.injector,function CP(n){return[{provide:Ae,useFactory:n},{provide:cl,multi:!0,useFactory:()=>{const e=H(RY,{optional:!0});return()=>e.initialize()}},{provide:cl,multi:!0,useFactory:()=>{const e=H(FY);return()=>{e.initialize()}}},{provide:o1,useFactory:PY}]}(()=>s)),o=r.injector.get(Ar,null);return s.runOutsideAngular(()=>{const a=s.onError.subscribe({next:l=>{o.handleError(l)}});r.onDestroy(()=>{vv(this._modules,r),a.unsubscribe()})}),function wP(n,e,t){try{const i=t();return Df(i)?i.catch(s=>{throw e.runOutsideAngular(()=>n.handleError(s)),s}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(o,s,()=>{const a=r.injector.get(nS);return a.runInitializers(),a.donePromise.then(()=>(function BN(n){"string"==typeof n&&(LN=n.toLowerCase().replace(/_/g,"-"))}(r.injector.get(Br,Su)||Su),this._moduleDoBootstrap(r),r))})})}bootstrapModule(t,i=[]){const s=EP({},i);return function NY(n,e,t){const i=new vC(t);return Promise.resolve(i)}(0,0,t).then(r=>this.bootstrapModuleFactory(r,s))}_moduleDoBootstrap(t){const i=t.injector.get(ir);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(s=>i.bootstrap(s));else{if(!t.instance.ngDoBootstrap)throw new R(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new R(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(sS,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(i){return new(i||n)(P(Zt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Sa=null;const xP=new q("");function TP(n,e,t=[]){const i=`Platform: ${e}`,s=new q(i);return(r=[])=>{let o=rS();if(!o||o.injector.get(xP,!1)){const a=[...t,...r,{provide:s,useValue:!0}];n?n(a):function $Y(n){if(Sa&&!Sa.get(xP,!1))throw new R(400,!1);(function _P(){!function KH(n){bD=n}(()=>{throw new R(600,!1)})})(),Sa=n;const e=n.get(IP);(function AP(n){n.get(D1,null)?.forEach(t=>t())})(n)}(function DP(n=[],e){return Zt.create({name:e,providers:[{provide:wE,useValue:"platform"},{provide:sS,useValue:new Set([()=>Sa=null])},...n]})}(a,i))}return function UY(n){const e=rS();if(!e)throw new R(401,!1);return e}()}}function rS(){return Sa?.get(IP)??null}let Do=(()=>{class n{static{this.__NG_ELEMENT_ID__=HY}}return n})();function HY(n){return function zY(n,e,t){if(hl(n)&&!t){const i=cs(n.index,e);return new Yh(i,i)}return 47&n.type?new Yh(e[Xt],e):null}(wt(),F(),!(16&~n))}class PP{constructor(){}supports(e){return Km(e)}create(e){return new YY(e)}}const QY=(n,e)=>e;class YY{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||QY}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,s=0,r=null;for(;t||i;){const o=!i||t&&t.currentIndex<FP(i,s,r)?t:i,a=FP(o,s,r),l=o.currentIndex;if(o===i)s--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)s++;else{r||(r=[]);const c=a-s,u=l-s;if(c!=u){for(let h=0;h<c;h++){const f=h<r.length?r[h]:r[h]=0,p=f+h;u<=p&&p<c&&(r[h]=f+1)}r[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Km(e))throw new R(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let s,r,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)r=e[a],o=this._trackByFn(a,r),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,r,o,a)),Object.is(t.item,r)||this._addIdentityChange(t,r)):(t=this._mismatch(t,r,o,a),i=!0),t=t._next}else s=0,function yG(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(s,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,s)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,s),i=!0),t=t._next,s++}),this.length=s;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,s){let r;return null===e?r=this._itTail:(r=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,r,s)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,s))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,r,s)):e=this._addAfter(new XY(t,i),r,s),e}_verifyReinsertion(e,t,i,s){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==r?e=this._reinsertAfter(r,e._prev,s):e.currentIndex!=s&&(e.currentIndex=s,this._addToMoves(e,s)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const s=e._prevRemoved,r=e._nextRemoved;return null===s?this._removalsHead=r:s._nextRemoved=r,null===r?this._removalsTail=s:r._prevRemoved=s,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const s=null===t?this._itHead:t._next;return e._next=s,e._prev=t,null===s?this._itTail=e:s._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new OP),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new OP),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class XY{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ZY{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class OP{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new ZY,this.map.set(t,i)),i.add(e)}get(e,t){const s=this.map.get(e);return s?s.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function FP(n,e,t){const i=n.previousIndex;if(null===i)return i;let s=0;return t&&i<t.length&&(s=t[i]),i+e+s}function BP(){return new uS([new PP])}let uS=(()=>{class n{static{this.\u0275prov=G({token:n,providedIn:"root",factory:BP})}constructor(t){this.factories=t}static create(t,i){if(null!=i){const s=i.factories.slice();t=t.concat(s)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||BP()),deps:[[n,new dE,new uE]]}}find(t){const i=this.factories.find(s=>s.supports(t));if(null!=i)return i;throw new R(901,!1)}}return n})();const nX=TP(null,"core",[]);let iX=(()=>{class n{constructor(t){}static{this.\u0275fac=function(i){return new(i||n)(P(ir))}}static{this.\u0275mod=en({type:n})}static{this.\u0275inj=Yt({})}}return n})();function l2(n){const e=de(null);try{return n()}finally{de(e)}}let u2=null;function Ia(){return u2}class BX{}const it=new q("");let d2=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>H(VX),providedIn:"platform"})}}return n})(),VX=(()=>{class n extends d2{constructor(){super(),this._doc=H(it),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ia().getBaseHref(this._doc)}onPopState(t){const i=Ia().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Ia().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,s){this._history.pushState(t,i,s)}replaceState(t,i,s){this._history.replaceState(t,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function h2(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function f2(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function kl(n){return n&&"?"!==n[0]?"?"+n:n}let Tv=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>H(UX),providedIn:"root"})}}return n})();const $X=new q("");let UX=(()=>{class n extends Tv{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??H(it).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return h2(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+kl(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${i}${s}`:i}pushState(t,i,s,r){const o=this.prepareExternalUrl(s+kl(r));this._platformLocation.pushState(t,i,o)}replaceState(t,i,s,r){const o=this.prepareExternalUrl(s+kl(r));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)(P(d2),P($X,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ml=(()=>{class n{constructor(t){this._subject=new Et,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function zX(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(f2(p2(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+kl(i))}normalize(t){return n.stripTrailingSlash(function HX(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,p2(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",s=null){this._locationStrategy.pushState(s,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+kl(i)),s)}replaceState(t,i="",s=null){this._locationStrategy.replaceState(s,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+kl(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(s=>s(t,i))}subscribe(t,i,s){return this._subject.subscribe({next:t,error:i,complete:s})}static{this.normalizeQueryParams=kl}static{this.joinWithSlash=h2}static{this.stripTrailingSlash=f2}static{this.\u0275fac=function(i){return new(i||n)(P(Tv))}}static{this.\u0275prov=G({token:n,factory:()=>function jX(){return new Ml(P(Tv))}(),providedIn:"root"})}}return n})();function p2(n){return n.replace(/\/index.html$/,"")}function C2(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[s,r]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(s.trim()===e)return decodeURIComponent(r)}return null}const bS=/\s+/,S2=[];let I2=(()=>{class n{constructor(t,i){this._ngEl=t,this._renderer=i,this.initialClasses=S2,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(bS):S2}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(bS):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){const s=this.stateMap.get(t);void 0!==s?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],s=t[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(bS).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}static{this.\u0275fac=function(i){return new(i||n)(k(tn),k(To))}}static{this.\u0275dir=ge({type:n,selectors:[["","ngClass",""]],inputs:{klass:[_t.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();class AZ{constructor(e,t,i,s){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Vv=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,s){this._viewContainer=t,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((s,r,o)=>{if(null==s.previousIndex)i.createEmbeddedView(this._template,new AZ(s.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===r?void 0:r);else if(null!==r){const a=i.get(r);i.move(a,o),T2(a,s)}});for(let s=0,r=i.length;s<r;s++){const a=i.get(s).context;a.index=s,a.count=r,a.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{T2(i.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(k(qi),k(Nr),k(uS))}}static{this.\u0275dir=ge({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function T2(n,e){n.context.$implicit=e.item}let xa=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new kZ,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){D2("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){D2("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(k(qi),k(Nr))}}static{this.\u0275dir=ge({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class kZ{constructor(){this.$implicit=null,this.ngIf=null}}function D2(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${En(e)}'.`)}function rr(n,e){return new R(2100,!1)}class PZ{createSubscription(e,t){return l2(()=>e.subscribe({next:t,error:i=>{throw i}}))}dispose(e){l2(()=>e.unsubscribe())}}class OZ{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const FZ=new OZ,LZ=new PZ;let k2=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(Df(t))return FZ;if(vP(t))return LZ;throw rr()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(i){return new(i||n)(k(Do,16))}}static{this.\u0275pipe=jn({name:"async",type:n,pure:!1,standalone:!0})}}return n})(),M2=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275pipe=jn({name:"json",type:n,pure:!1,standalone:!0})}}return n})(),R2=(()=>{class n{transform(t,i,s){if(null==t)return null;if(!this.supports(t))throw rr();return t.slice(i,s)}supports(t){return"string"==typeof t||Array.isArray(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275pipe=jn({name:"slice",type:n,pure:!1,standalone:!0})}}return n})(),P2=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=en({type:n})}static{this.\u0275inj=Yt({})}}return n})();const O2="browser";function Nl(n){return n===O2}function F2(n){return"server"===n}class L2{}class MK extends BX{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class DS extends MK{static makeCurrent(){!function LX(n){u2??=n}(new DS)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function NK(){return Pf=Pf||document.querySelector("base"),Pf?Pf.getAttribute("href"):null}();return null==t?null:function RK(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){Pf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return C2(document.cookie,e)}}let Pf=null,OK=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();const AS=new q("");let G2=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,s){return this._findPluginFor(i).addEventListener(t,i,s)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(r=>r.supports(t)),!i)throw new R(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)(P(AS),P(Ae))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();class W2{constructor(e){this._doc=e}}const kS="ng-app-id";let Q2=(()=>{class n{constructor(t,i,s,r={}){this.doc=t,this.appId=i,this.nonce=s,this.platformId=r,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=F2(r),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(s=>s.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${kS}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(s=>{null!=s.textContent&&i.set(s.textContent,s)}),i}return null}changeUsageCount(t,i){const s=this.styleRef;if(s.has(t)){const r=s.get(t);return r.usage+=i,r.usage}return s.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const s=this.styleNodesInDOM,r=s?.get(i);if(r?.parentNode===t)return s.delete(i),r.removeAttribute(kS),r;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(kS,this.appId),t.appendChild(o),o}}addStyleToHost(t,i){const s=this.getStyleElement(t,i),r=this.styleRef,o=r.get(i)?.elements;o?o.push(s):r.set(i,{elements:[s],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(P(it),P(vm),P(ob,8),P(Co))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();const MS={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},NS=/%COMP%/g,VK=new q("",{providedIn:"root",factory:()=>!0});function X2(n,e){return e.map(t=>t.replace(NS,n))}let RS=(()=>{class n{constructor(t,i,s,r,o,a,l,c=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=r,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=F2(a),this.defaultRenderer=new PS(t,o,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Qs.ShadowDom&&(i={...i,encapsulation:Qs.Emulated});const s=this.getOrCreateRenderer(t,i);return s instanceof K2?s.applyToHost(t):s instanceof OS&&s.applyStyles(),s}getOrCreateRenderer(t,i){const s=this.rendererByCompId;let r=s.get(i.id);if(!r){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case Qs.Emulated:r=new K2(l,c,i,this.appId,u,o,a,d);break;case Qs.ShadowDom:return new HK(l,c,t,i,o,a,this.nonce,d);default:r=new OS(l,c,i,u,o,a,d)}s.set(i.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(P(G2),P(Q2),P(vm),P(VK),P(it),P(Co),P(Ae),P(ob))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();class PS{constructor(e,t,i,s){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=s,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(MS[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Z2(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(Z2(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new R(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,s){if(s){t=s+":"+t;const r=MS[s];r?e.setAttributeNS(r,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const s=MS[i];s?e.removeAttributeNS(s,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,s){s&(ma.DashCase|ma.Important)?e.style.setProperty(t,i,s&ma.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&ma.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){null!=e&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=Ia().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Z2(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class HK extends PS{constructor(e,t,i,s,r,o,a,l){super(e,r,o,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=X2(s.id,s.styles);for(const u of c){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class OS extends PS{constructor(e,t,i,s,r,o,a,l){super(e,r,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=s,this.styles=l?X2(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class K2 extends OS{constructor(e,t,i,s,r,o,a,l){const c=s+"-"+i.id;super(e,t,i,r,o,a,l,c),this.contentAttr=function $K(n){return"_ngcontent-%COMP%".replace(NS,n)}(c),this.hostAttr=function UK(n){return"_nghost-%COMP%".replace(NS,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let zK=(()=>{class n extends W2{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,s){return t.addEventListener(i,s,!1),()=>this.removeEventListener(t,i,s)}removeEventListener(t,i,s){return t.removeEventListener(i,s)}static{this.\u0275fac=function(i){return new(i||n)(P(it))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();const J2=["alt","control","meta","shift"],qK={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},GK={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let WK=(()=>{class n extends W2{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,s){const r=n.parseEventName(i),o=n.eventCallback(r.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ia().onAndCancel(t,r.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),s=i.shift();if(0===i.length||"keydown"!==s&&"keyup"!==s)return null;const r=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),J2.forEach(c=>{const u=i.indexOf(c);u>-1&&(i.splice(u,1),o+=c+".")}),o+=r,0!=i.length||0===r.length)return null;const l={};return l.domEventName=s,l.fullKey=o,l}static matchEventFullKeyCode(t,i){let s=qK[t.key]||t.key,r="";return i.indexOf("code.")>-1&&(s=t.code,r="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),J2.forEach(o=>{o!==s&&(0,GK[o])(t)&&(r+=o+".")}),r+=s,r===i)}static eventCallback(t,i,s){return r=>{n.matchEventFullKeyCode(r,t)&&s.runGuarded(()=>i(r))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(i){return new(i||n)(P(it))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();const ZK=TP(nX,"browser",[{provide:Co,useValue:O2},{provide:D1,useValue:function QK(){DS.makeCurrent()},multi:!0},{provide:it,useFactory:function XK(){return function jz(n){rb=n}(document),document},deps:[]}]),KK=new q(""),nO=[{provide:mv,useClass:class PK{addToWindow(e){mt.getAngularTestability=(i,s=!0)=>{const r=e.findTestabilityInTree(i,s);if(null==r)throw new R(5103,!1);return r},mt.getAllAngularTestabilities=()=>e.getAllTestabilities(),mt.getAllAngularRootElements=()=>e.getAllRootElements(),mt.frameworkStabilizers||(mt.frameworkStabilizers=[]),mt.frameworkStabilizers.push(i=>{const s=mt.getAllAngularTestabilities();let r=s.length;const o=function(){r--,0==r&&i()};s.forEach(a=>{a.whenStable(o)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Ia().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:mP,useClass:JC,deps:[Ae,eS,mv]},{provide:JC,useClass:JC,deps:[Ae,eS,mv]}],iO=[{provide:wE,useValue:"root"},{provide:Ar,useFactory:function YK(){return new Ar},deps:[]},{provide:AS,useClass:zK,multi:!0,deps:[it,Ae,Co]},{provide:AS,useClass:WK,multi:!0,deps:[it]},RS,Q2,G2,{provide:Jb,useExisting:RS},{provide:L2,useClass:OK,deps:[]},[]];let sO=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:vm,useValue:t.appId}]}}static{this.\u0275fac=function(i){return new(i||n)(P(KK,12))}}static{this.\u0275mod=en({type:n})}static{this.\u0275inj=Yt({providers:[...iO,...nO],imports:[P2,iX]})}}return n})(),JK=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||n)(P(it))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Of=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:function(i){let s=null;return s=i?new(i||n):P(iJ),s},providedIn:"root"})}}return n})(),iJ=(()=>{class n extends Of{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case Hi.NONE:return i;case Hi.HTML:return kr(i,"HTML")?us(i):W1(this._doc,String(i)).toString();case Hi.STYLE:return kr(i,"Style")?us(i):i;case Hi.SCRIPT:if(kr(i,"Script"))return us(i);throw new R(5200,!1);case Hi.URL:return kr(i,"URL")?us(i):xm(String(i));case Hi.RESOURCE_URL:if(kr(i,"ResourceURL"))return us(i);throw new R(5201,!1);default:throw new R(5202,!1)}}bypassSecurityTrustHtml(t){return function cq(n){return new iq(n)}(t)}bypassSecurityTrustStyle(t){return function uq(n){return new sq(n)}(t)}bypassSecurityTrustScript(t){return function dq(n){return new rq(n)}(t)}bypassSecurityTrustUrl(t){return function hq(n){return new oq(n)}(t)}bypassSecurityTrustResourceUrl(t){return function fq(n){return new aq(n)}(t)}static{this.\u0275fac=function(i){return new(i||n)(P(it))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ta(n){return this instanceof Ta?(this.v=n,this):new Ta(n)}function dO(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function VS(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=n[r]&&function(o){return new Promise(function(a,l){!function s(r,o,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},o)}(a,l,(o=n[r](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const $S=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function hO(n){return at(n?.then)}function fO(n){return at(n[Yw])}function pO(n){return Symbol.asyncIterator&&at(n?.[Symbol.asyncIterator])}function gO(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const mO=function IJ(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function vO(n){return at(n?.[mO])}function yO(n){return function uO(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,i=t.apply(n,e||[]),r=[];return s={},a("next"),a("throw"),a("return",function o(f){return function(p){return Promise.resolve(p).then(f,d)}}),s[Symbol.asyncIterator]=function(){return this},s;function a(f,p){i[f]&&(s[f]=function(g){return new Promise(function(v,_){r.push([f,g,v,_])>1||l(f,g)})},p&&(s[f]=p(s[f])))}function l(f,p){try{!function c(f){f.value instanceof Ta?Promise.resolve(f.value.v).then(u,d):h(r[0][2],f)}(i[f](p))}catch(g){h(r[0][3],g)}}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,p){f(p),r.shift(),r.length&&l(r[0][0],r[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:s}=yield Ta(t.read());if(s)return yield Ta(void 0);yield yield Ta(i)}}finally{t.releaseLock()}})}function _O(n){return at(n?.getReader)}function xi(n){if(n instanceof Ut)return n;if(null!=n){if(fO(n))return function xJ(n){return new Ut(e=>{const t=n[Yw]();if(at(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if($S(n))return function TJ(n){return new Ut(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(hO(n))return function DJ(n){return new Ut(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,DD)})}(n);if(pO(n))return wO(n);if(vO(n))return function AJ(n){return new Ut(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(_O(n))return function kJ(n){return wO(yO(n))}(n)}throw gO(n)}function wO(n){return new Ut(e=>{(function MJ(n,e){var t,i,s,r;return function lO(n,e,t,i){return new(t||(t=Promise))(function(r,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):function s(r){return r instanceof t?r:new t(function(o){o(r)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=dO(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){s={error:o}}finally{try{i&&!i.done&&(r=t.return)&&(yield r.call(t))}finally{if(s)throw s.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Mo(n,e,t,i=0,s=!1){const r=e.schedule(function(){t(),s?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(r),!s)return r}function EO(n,e=0){return Jt((t,i)=>{t.subscribe(Ht(i,s=>Mo(i,n,()=>i.next(s),e),()=>Mo(i,n,()=>i.complete(),e),s=>Mo(i,n,()=>i.error(s),e)))})}function bO(n,e=0){return Jt((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function CO(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ut(t=>{Mo(t,e,()=>{const i=n[Symbol.asyncIterator]();Mo(t,e,()=>{i.next().then(s=>{s.done?t.complete():t.next(s.value)})},0,!0)})})}function On(n,e){return e?function LJ(n,e){if(null!=n){if(fO(n))return function NJ(n,e){return xi(n).pipe(bO(e),EO(e))}(n,e);if($S(n))return function PJ(n,e){return new Ut(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(hO(n))return function RJ(n,e){return xi(n).pipe(bO(e),EO(e))}(n,e);if(pO(n))return CO(n,e);if(vO(n))return function OJ(n,e){return new Ut(t=>{let i;return Mo(t,e,()=>{i=n[mO](),Mo(t,e,()=>{let s,r;try{({value:s,done:r}=i.next())}catch(o){return void t.error(o)}r?t.complete():t.next(s)},0,!0)}),()=>at(i?.return)&&i.return()})}(n,e);if(_O(n))return function FJ(n,e){return CO(yO(n),e)}(n,e)}throw gO(n)}(n,e):xi(n)}const{isArray:BJ}=Array,{getPrototypeOf:VJ,prototype:$J,keys:UJ}=Object;function SO(n){if(1===n.length){const e=n[0];if(BJ(e))return{args:e,keys:null};if(function jJ(n){return n&&"object"==typeof n&&VJ(n)===$J}(e)){const t=UJ(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function IO(n){return n&&at(n.schedule)}function US(n){return n[n.length-1]}function xO(n){return at(US(n))?n.pop():void 0}function Lf(n){return IO(US(n))?n.pop():void 0}const{isArray:zJ}=Array;function jS(n){return Ve(e=>function qJ(n,e){return zJ(e)?n(...e):n(e)}(n,e))}function TO(n,e){return n.reduce((t,i,s)=>(t[i]=e[s],t),{})}let DO=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(k(To),k(tn))}}static{this.\u0275dir=ge({type:n})}}return n})(),Rl=(()=>{class n extends DO{static{this.\u0275fac=(()=>{let t;return function(s){return(t||(t=dn(n)))(s||n)}})()}static{this.\u0275dir=ge({type:n,features:[Je]})}}return n})();const Vr=new q(""),QJ={provide:Vr,useExisting:At(()=>Hv),multi:!0},XJ=new q("");let Hv=(()=>{class n extends DO{constructor(t,i,s){super(t,i),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function YJ(){const n=Ia()?Ia().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(k(To),k(tn),k(XJ,8))}}static{this.\u0275dir=ge({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){1&i&&ce("input",function(o){return s._handleInput(o.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(o){return s._compositionEnd(o.target.value)})},features:[qt([QJ]),Je]})}}return n})();const li=new q(""),Aa=new q("");function VO(n){return null!=n}function $O(n){return Df(n)?On(n):n}function UO(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function jO(n,e){return e.map(t=>t(n))}function HO(n){return n.map(e=>function KJ(n){return!n.validate}(e)?e:t=>e.validate(t))}function HS(n){return null!=n?function zO(n){if(!n)return null;const e=n.filter(VO);return 0==e.length?null:function(t){return UO(jO(t,e))}}(HO(n)):null}function zS(n){return null!=n?function qO(n){if(!n)return null;const e=n.filter(VO);return 0==e.length?null:function(t){return function GJ(...n){const e=xO(n),{args:t,keys:i}=SO(n),s=new Ut(r=>{const{length:o}=t;if(!o)return void r.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;xi(t[u]).subscribe(Ht(r,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||r.next(i?TO(i,a):a),r.complete())}))}});return e?s.pipe(jS(e)):s}(jO(t,e).map($O)).pipe(Ve(UO))}}(HO(n)):null}function GO(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function qS(n){return n?Array.isArray(n)?n:[n]:[]}function qv(n,e){return Array.isArray(n)?n.includes(e):n===e}function YO(n,e){const t=qS(e);return qS(n).forEach(s=>{qv(t,s)||t.push(s)}),t}function XO(n,e){return qS(e).filter(t=>!qv(n,t))}class ZO{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=HS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=zS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ti extends ZO{get formDirective(){return null}get path(){return null}}class ka extends ZO{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class KO{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let JO=(()=>{class n extends KO{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(k(ka,2))}}static{this.\u0275dir=ge({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){2&i&&qn("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Je]})}}return n})();const Bf="VALID",Wv="INVALID",Ru="PENDING",Vf="DISABLED";function Qv(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class XS{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Bf}get invalid(){return this.status===Wv}get pending(){return this.status==Ru}get disabled(){return this.status===Vf}get enabled(){return this.status!==Vf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(YO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(YO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(XO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(XO(e,this._rawAsyncValidators))}hasValidator(e){return qv(this._rawValidators,e)}hasAsyncValidator(e){return qv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ru,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Vf,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Bf,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Bf||this.status===Ru)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vf:Bf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ru,this._hasOwnPendingAsyncValidator=!0;const t=$O(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,s)=>i&&i._find(s),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Et,this.statusChanges=new Et}_calculateStatus(){return this._allControlsDisabled()?Vf:this.errors?Wv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ru)?Ru:this._anyControlsHaveStatus(Wv)?Wv:Bf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Qv(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function iee(n){return Array.isArray(n)?HS(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function see(n){return Array.isArray(n)?zS(n):n||null}(this._rawAsyncValidators)}}const Pu=new q("CallSetDisabledState",{providedIn:"root",factory:()=>Yv}),Yv="always";function $f(n,e,t=Yv){(function KS(n,e){const t=function WO(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(GO(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function QO(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(GO(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const s=()=>n.updateValueAndValidity();Kv(e._rawValidators,s),Kv(e._rawAsyncValidators,s)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function aee(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&iF(n,e)})}(n,e),function cee(n,e){const t=(i,s)=>{e.valueAccessor.writeValue(i),s&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function lee(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&iF(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function oee(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Kv(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function iF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function oF(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function aF(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}Promise.resolve();const lF=class extends XS{constructor(e=null,t,i){super(function QS(n){return(Qv(n)?n.validators:n)||null}(t),function YS(n,e){return(Qv(e)?e.asyncValidators:n)||null}(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Qv(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=aF(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){oF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){oF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){aF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},vee={provide:ka,useExisting:At(()=>s0)},dF=Promise.resolve();let s0=(()=>{class n extends ka{constructor(t,i,s,r,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new lF,this._registered=!1,this.name="",this.update=new Et,this._parent=t,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=function t0(n,e){if(!e)return null;let t,i,s;return Array.isArray(e),e.forEach(r=>{r.constructor===Hv?t=r:function hee(n){return Object.getPrototypeOf(n.constructor)===Rl}(r)?i=r:s=r}),s||i||t||null}(0,r)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function e0(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){$f(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){dF.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,s=0!==i&&function Mu(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}(i);dF.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Xv(n,e){return[...e.path,n]}(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||n)(k(Ti,9),k(li,10),k(Aa,10),k(Vr,10),k(Do,8),k(Pu,8))}}static{this.\u0275dir=ge({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[_t.None,"disabled","isDisabled"],model:[_t.None,"ngModel","model"],options:[_t.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[qt([vee]),Je,ri]})}}return n})();const wee={provide:Vr,useExisting:At(()=>r0),multi:!0};let Eee=(()=>{class n{constructor(){this._accessors=[]}add(t,i){this._accessors.push([t,i])}remove(t){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===t)return void this._accessors.splice(i,1)}select(t){this._accessors.forEach(i=>{this._isSameGroup(i,t)&&i[1]!==t&&i[1].fireUncheck(t.value)})}_isSameGroup(t,i){return!!t[0].control&&t[0]._parent===i._control._parent&&t[1].name===i.name}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),r0=(()=>{class n extends Rl{constructor(t,i,s,r){super(t,i),this._registry=s,this._injector=r,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=H(Pu,{optional:!0})??Yv}ngOnInit(){this._control=this._injector.get(ka),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}static{this.\u0275fac=function(i){return new(i||n)(k(To),k(tn),k(Eee),k(Zt))}}static{this.\u0275dir=ge({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,s){1&i&&ce("change",function(){return s.onChange()})("blur",function(){return s.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[qt([wee]),Je]})}}return n})(),jee=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=en({type:n})}static{this.\u0275inj=Yt({})}}return n})(),zee=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Pu,useValue:t.callSetDisabledState??Yv}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=en({type:n})}static{this.\u0275inj=Yt({imports:[jee]})}}return n})();function we(...n){return On(n,Lf(n))}function ci(n,e,t=1/0){return at(e)?ci((i,s)=>Ve((r,o)=>e(i,r,s,o))(xi(n(i,s))),t):("number"==typeof e&&(t=e),Jt((i,s)=>function qee(n,e,t,i,s,r,o,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=g=>c<i?p(g):l.push(g),p=g=>{r&&e.next(g),c++;let v=!1;xi(t(g,u++)).subscribe(Ht(e,_=>{s?.(_),r?f(_):e.next(_)},()=>{v=!0},void 0,()=>{if(v)try{for(c--;l.length&&c<i;){const _=l.shift();o?Mo(e,o,()=>p(_)):p(_)}h()}catch(_){e.error(_)}}))};return n.subscribe(Ht(e,f,()=>{d=!0,h()})),()=>{a?.()}}(i,s,n,t)))}function jf(n,e){return at(e)?ci(n,e,1):ci(n,1)}function Fn(n,e){return Jt((t,i)=>{let s=0;t.subscribe(Ht(i,r=>n.call(e,r,s++)&&i.next(r)))})}function Ou(n){return Jt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ps(n,e){return Jt((t,i)=>{let s=null,r=0,o=!1;const a=()=>o&&!s&&i.complete();t.subscribe(Ht(i,l=>{s?.unsubscribe();let c=0;const u=r++;xi(n(l,u)).subscribe(s=Ht(i,d=>i.next(e?e(l,d,u,c++):d),()=>{s=null,a()}))},()=>{o=!0,a()}))})}class ey{}class ty{}class Kt{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const s=t.slice(0,i),r=s.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(s,r),this.headers.has(r)?this.headers.get(r).push(o):this.headers.set(r,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Kt?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Kt;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Kt?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...i),this.headers.set(t,s);break;case"d":const r=e.value;if(r){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===r.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const i=(Array.isArray(t)?t:[t]).map(r=>r.toString()),s=e.toLowerCase();this.headers.set(s,i),this.maybeSetNormalizedName(e,s)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Gee{encodeKey(e){return AF(e)}encodeValue(e){return AF(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Qee=/%(\d[a-f0-9])/gi,Yee={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function AF(n){return encodeURIComponent(n).replace(Qee,(e,t)=>Yee[t]??e)}function ny(n){return`${n}`}class Ma{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Gee,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Wee(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const r=s.indexOf("="),[o,a]=-1==r?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,r)),e.decodeValue(s.slice(r+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],s=Array.isArray(i)?i.map(ny):[ny(i)];this.map.set(t,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const s=e[i];Array.isArray(s)?s.forEach(r=>{t.push({param:i,value:r,op:"a"})}):t.push({param:i,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ma({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(ny(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const s=i.indexOf(ny(e.value));-1!==s&&i.splice(s,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Xee{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function kF(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function MF(n){return typeof Blob<"u"&&n instanceof Blob}function NF(n){return typeof FormData<"u"&&n instanceof FormData}class Hf{constructor(e,t,i,s){let r;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Zee(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==i?i:null,r=s):r=i,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params),this.transferCache=r.transferCache),this.headers??=new Kt,this.context??=new Xee,this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Ma,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||kF(this.body)||MF(this.body)||NF(this.body)||function Kee(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Ma?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||NF(this.body)?null:MF(this.body)?this.body.type||null:kF(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ma?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,s=e.responseType||this.responseType,r=e.transferCache??this.transferCache,o=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),u)),new Hf(t,i,o,{params:u,headers:c,context:d,reportProgress:l,responseType:s,withCredentials:a,transferCache:r})}}var $r=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}($r||{});class h0{constructor(e,t=zf.Ok,i="OK"){this.headers=e.headers||new Kt,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class iy extends h0{constructor(e={}){super(e),this.type=$r.ResponseHeader}clone(e={}){return new iy({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Na extends h0{constructor(e={}){super(e),this.type=$r.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Na({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Fu extends h0{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}var zf=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(zf||{});function f0(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let p0=(()=>{class n{constructor(t){this.handler=t}request(t,i,s={}){let r;if(t instanceof Hf)r=t;else{let l,c;l=s.headers instanceof Kt?s.headers:new Kt(s.headers),s.params&&(c=s.params instanceof Ma?s.params:new Ma({fromObject:s.params})),r=new Hf(t,i,void 0!==s.body?s.body:null,{headers:l,context:s.context,params:c,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}const o=we(r).pipe(jf(l=>this.handler.handle(l)));if(t instanceof Hf||"events"===s.observe)return o;const a=o.pipe(Fn(l=>l instanceof Na));switch(s.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return a.pipe(Ve(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Ve(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Ve(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Ve(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Ma).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,s={}){return this.request("PATCH",t,f0(s,i))}post(t,i,s={}){return this.request("POST",t,f0(s,i))}put(t,i,s={}){return this.request("PUT",t,f0(s,i))}static{this.\u0275fac=function(i){return new(i||n)(P(ey))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function PF(n,e){return e(n)}function ite(n,e){return(t,i)=>e.intercept(t,{handle:s=>n(s,i)})}const rte=new q(""),qf=new q(""),OF=new q(""),FF=new q("");function ote(){let n=null;return(e,t)=>{null===n&&(n=(H(rte,{optional:!0})??[]).reduceRight(ite,PF));const i=H(_a),s=i.add();return n(e,t).pipe(Ou(()=>i.remove(s)))}}let LF=(()=>{class n extends ey{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=H(_a);const s=H(FF,{optional:!0});this.backend=s??t}handle(t){if(null===this.chain){const s=Array.from(new Set([...this.injector.get(qf),...this.injector.get(OF,[])]));this.chain=s.reduceRight((r,o)=>function ste(n,e,t){return(i,s)=>_o(t,()=>e(i,r=>n(r,s)))}(r,o,this.injector),PF)}const i=this.pendingTasks.add();return this.chain(t,s=>this.backend.handle(s)).pipe(Ou(()=>this.pendingTasks.remove(i)))}static{this.\u0275fac=function(i){return new(i||n)(P(ty),P(as))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();const dte=/^\)\]\}',?\n/;let VF=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new R(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?On(i.\u0275loadImpl()):we(null)).pipe(ps(()=>new Ut(r=>{const o=i.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((g,v)=>o.setRequestHeader(g,v.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const g=t.detectContentTypeHeader();null!==g&&o.setRequestHeader("Content-Type",g)}if(t.responseType){const g=t.responseType.toLowerCase();o.responseType="json"!==g?g:"text"}const a=t.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const g=o.statusText||"OK",v=new Kt(o.getAllResponseHeaders()),_=function hte(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return l=new iy({headers:v,status:o.status,statusText:g,url:_}),l},u=()=>{let{headers:g,status:v,statusText:_,url:E}=c(),b=null;v!==zf.NoContent&&(b=typeof o.response>"u"?o.responseText:o.response),0===v&&(v=b?zf.Ok:0);let T=v>=200&&v<300;if("json"===t.responseType&&"string"==typeof b){const V=b;b=b.replace(dte,"");try{b=""!==b?JSON.parse(b):null}catch(N){b=V,T&&(T=!1,b={error:N,text:b})}}T?(r.next(new Na({body:b,headers:g,status:v,statusText:_,url:E||void 0})),r.complete()):r.error(new Fu({error:b,headers:g,status:v,statusText:_,url:E||void 0}))},d=g=>{const{url:v}=c(),_=new Fu({error:g,status:o.status||0,statusText:o.statusText||"Unknown Error",url:v||void 0});r.error(_)};let h=!1;const f=g=>{h||(r.next(c()),h=!0);let v={type:$r.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),"text"===t.responseType&&o.responseText&&(v.partialText=o.responseText),r.next(v)},p=g=>{let v={type:$r.UploadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),r.next(v)};return o.addEventListener("load",u),o.addEventListener("error",d),o.addEventListener("timeout",d),o.addEventListener("abort",d),t.reportProgress&&(o.addEventListener("progress",f),null!==a&&o.upload&&o.upload.addEventListener("progress",p)),o.send(a),r.next({type:$r.Sent}),()=>{o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",u),o.removeEventListener("timeout",d),t.reportProgress&&(o.removeEventListener("progress",f),null!==a&&o.upload&&o.upload.removeEventListener("progress",p)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(i){return new(i||n)(P(L2))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();const v0=new q(""),$F=new q("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),UF=new q("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class jF{}let gte=(()=>{class n{constructor(t,i,s){this.doc=t,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=C2(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(i){return new(i||n)(P(it),P(Co),P($F))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function mte(n,e){const t=n.url.toLowerCase();if(!H(v0)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const i=H(jF).getToken(),s=H(UF);return null!=i&&!n.headers.has(s)&&(n=n.clone({headers:n.headers.set(s,i)})),e(n)}var Ra=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Ra||{});function Ol(n,e){return{\u0275kind:n,\u0275providers:e}}function vte(...n){const e=[p0,VF,LF,{provide:ey,useExisting:LF},{provide:ty,useExisting:VF},{provide:qf,useValue:mte,multi:!0},{provide:v0,useValue:!0},{provide:jF,useClass:gte}];for(const t of n)e.push(...t.\u0275providers);return Lc(e)}const HF=new q("");let _te=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=en({type:n})}static{this.\u0275inj=Yt({providers:[vte(Ol(Ra.LegacyInterceptors,[{provide:HF,useFactory:ote},{provide:qf,useExisting:HF,multi:!0}]))]})}}return n})();var Ite=Mg(190);let Lu=(()=>{class n{constructor(){this.logger=Ite,this.logger.setLevel("error")}trace(...t){this.logger.trace(...t)}info(...t){this.logger.info(...t)}error(...t){this.logger.error(...t)}debug(...t){this.logger.debug(...t)}warn(...t){this.logger.warn(...t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function As(n){return Jt((e,t)=>{xi(n).subscribe(Ht(t,()=>t.complete(),zw)),!t.closed&&e.subscribe(t)})}function No(n){return Jt((e,t)=>{let r,i=null,s=!1;i=e.subscribe(Ht(t,void 0,void 0,o=>{r=xi(n(o,No(n)(e))),i?(i.unsubscribe(),i=null,r.subscribe(t)):s=!0})),s&&(i.unsubscribe(),i=null,r.subscribe(t))})}function Qn(n,e,t){const i=at(n)||e||t?{next:n,error:e,complete:t}:n;return i?Jt((s,r)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;s.subscribe(Ht(r,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),r.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),r.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),r.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):ua}let Gf=(()=>{class n{constructor(t){this.log=t,this.statusMapping={"initiate-request":"Starting request to AI Assistant",initiated:"Starting request to AI Assistant","llm-0":"Understanding your question",dochelp:"Retrieving help content from user manual",navigation:"Generating a link to navigate","kb-generation":"Searching the knowledge base for relevant answers","llm-1":"Processing Entity Search","named-search":"Identified a named entity, executing an exact match on the name","llm-2":"Generating search query based on your input","search-api":"Executing an Entity Search in GEMS",processing:"Preparing your response",error:"Oops! Something went wrong while processing your request",done:"Here's what I found for you",timeout:"The request took too long. Please try again","translating document":"Translating the Document","summarizing document":"Summarizing the Document","comparing documents":"Comparing the documents","analysing query":"Running Custom Instructions in the document"}}formatMessage(t){return t=t?.replace(/\r\n|\r/g,"\n"),t=t?.replace(/###\s*(.*?)(\n|$)/g,"<h6>$1</h6>"),t=t?.replace(/##\s*(.*?)(\n|$)/g,"<h5>$1</h5>"),t=t?.replace(/(\d+\.\s)/g,i=>`<p><span>${i.trim()}</span>`),t=t?.replace(/(?:^|\n)-\s/g,"<li>"),t=t?.replace(/<\/li>(?!\s*<li>)/g,"</li>"),t=t?.replace(/<li>/,"<ul><li>"),t=t?.replace(/<\/li>\s*$/,"</li></ul>"),t=t?.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),t=t?.replace(/\n/g,"<br>"),t=t?.replace(/(<p><span>\d+\.\s<\/span>\s*.*?)(?=<p>|<ul>|<br>|$)/g,(i,s)=>s.trimEnd().endsWith(".")?s.trimEnd():s.trimEnd()+"."),t=t?.replace(/ \./g,"."),t}videoContainer(){window.toggleMiniPlayer=function(){document.querySelector(".video-player-container").classList.add("mini-player");const i=document.querySelector(".mini-player");if(i){let s,r,o=function(l){let c=l.clientX-s,u=l.clientY-r;const d=window.innerWidth,h=window.innerHeight,f=i.offsetWidth,p=i.offsetHeight;c<0&&(c=0),u<0&&(u=0),c+f>d&&(c=d-f),u+p>h&&(u=h-p),i.style.left=`${c}px`,i.style.top=`${u}px`},a=function(){document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",a)};i.addEventListener("mousedown",l=>{s=l.clientX-i.getBoundingClientRect().left,r=l.clientY-i.getBoundingClientRect().top,document.addEventListener("mousemove",o),document.addEventListener("mouseup",a)})}},window.toggleMaxPlayer=function(){let t=document.querySelector(".video-player-container");t.classList.remove("mini-player"),t.style.left="0px",t.style.top="0px"},window.openVideo=function(){document.querySelector(".video-player-container").style.display="block"},window.closeVideo=function(){let t=document.querySelector(".video-player-container");t.style.display="none",t.classList.remove("mini-player"),t.style.left="0px",t.style.top="0px",document.querySelector("#videoPlayer")}}isJsonString(t){try{return JSON.parse(t),!0}catch{return!1}}getAccessTokenData(){let t=JSON.parse(sessionStorage.getItem("widgetAccessKey")||"{}");return JSON.parse(atob(t?.AccessToken?.split(".")[1]))}getFullAccessToken(){return JSON.parse(sessionStorage.getItem("widgetAccessKey")||"{}")}getWidgetContextToken(){return JSON.parse(sessionStorage.getItem("widgetcontextdata")||"{}")}transform(t){const i=new Date(t),s=new Date,r=new Date(i.getTime()-6e4*i.getTimezoneOffset()),o=s.getTime()-r.getTime(),a=Math.floor(o/6e4),l=Math.floor(a/60),c=Math.floor(l/24);return a<1||a<60?`${a}m ago`:l<24?`${l}h ago`:`${c}d ago`}scrolltoclick(){const t=document.querySelector("#messagesContainer");t&&sessionStorage.setItem("scrollPosition",t.scrollTop.toString());const i=(new Date).toISOString();sessionStorage.setItem("clickTimeUTC",i),this.log.info(`Clicked nav link time stored in UTC: ${i}`)}removeInstructions(t){return["### Instructions:","### Instructions","Instruction","Instruction:","Instructions","Instructions:","### Instructions","### Instructions:","## Instructions","## Instructions:"].forEach(s=>{t.startsWith(s)&&(t=t.slice(s.length).trim())}),t}getMappedStatus(t){return this.statusMapping[t]||t}formatDateTime(t){if(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d+$/.test(t)){const i=new Date(t);return`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")} ${String(i.getHours()).padStart(2,"0")}:${String(i.getMinutes()).padStart(2,"0")}`}return t}static{this.\u0275fac=function(i){return new(i||n)(P(Lu))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ry=(()=>{class n{constructor(t,i){this.http=t,this.common=i,this.cancelSubject=new ye}initializeApp(){this.widgetaccess=this.common.getFullAccessToken(),this.accessServer=this.widgetaccess?.BotApiServer,this.baseUrl=this.accessServer;let t=new Kt({Authorization:"Bearer "+this.widgetaccess?.AccessToken,"X-API-Type":"Web","X-Claims-Data":null==this.widgetaccess?.xclaimsdata?"null":this.widgetaccess?.xclaimsdata,"X-Language-Jurisdiction":this.widgetaccess?.LanguageJurisdiction??"null","X-Default-Schema-Enabled":"true"});return this.http.post(this.baseUrl+"/api/gems-ai/Widget/Initialize",{},{headers:t})}refreshToken(){this.widgetaccess=this.common.getFullAccessToken(),this.accessServer=this.widgetaccess?.BotApiServer,this.baseUrl=this.accessServer;const t={RefreshToken:this.widgetaccess?.RefreshToken},i=new Kt({"Content-Type":"application/json",Authorization:"Bearer "+this.widgetaccess?.AccessToken,"X-API-Type":"Web","X-Claims-Data":this.widgetaccess?.xclaimsdata??"null","X-Language-Jurisdiction":this.widgetaccess?.LanguageJurisdiction??"null","X-Default-Schema-Enabled":"true"});return this.http.post(`${this.baseUrl}/api/auth/token/ai/refresh`,t,{headers:i})}sendStreamMessage(t,i=!1,s=null){this.widgetaccess=this.common.getFullAccessToken(),this.accessServer=this.widgetaccess?.BotApiServer,this.baseUrl=this.accessServer;const r=atob(sessionStorage.getItem("tokenBalance")||"");console.log("Token Balance",r,"Type::",typeof r);let o=new Kt({Authorization:"Bearer "+this.widgetaccess?.AccessToken,"X-API-Type":"Web","X-Claims-Data":null==this.widgetaccess?.xclaimsdata?"null":this.widgetaccess?.xclaimsdata,"X-Language-Jurisdiction":this.widgetaccess?.LanguageJurisdiction??"null","X-Default-Schema-Enabled":"true","X-Person-Name-Format":this.widgetaccess?.PersonNameFormat??"null","X-REM-Token-Count":parseInt(r)?1:0});return i?this.http.post(this.baseUrl+"/api/gems-ai/chat/executeSavedQuery",s,{headers:o,observe:"events",responseType:"text",reportProgress:!0}).pipe(As(this.cancelSubject)):this.http.post(this.baseUrl+"/api/gems-ai/chat/stream/kbconversation",t,{headers:o,observe:"events",responseType:"text",reportProgress:!0}).pipe(As(this.cancelSubject))}getChartID(t){this.widgetaccess=this.common.getFullAccessToken(),this.accessServer=this.widgetaccess?.BotApiServer,this.baseUrl=this.accessServer;let i=new Kt({Authorization:"Bearer "+this.widgetaccess?.AccessToken,"X-API-Type":"Web","X-Claims-Data":null==this.widgetaccess?.xclaimsdata?"null":this.widgetaccess?.xclaimsdata,"X-Language-Jurisdiction":this.widgetaccess?.LanguageJurisdiction??"null","X-Default-Schema-Enabled":"true"});return this.http.post(this.baseUrl+"/api/gems-ai/chat/createChat",t,{headers:i})}getEntityVerification(t){this.widgetaccess=this.common.getFullAccessToken(),this.accessServer=this.widgetaccess?.BotApiServer,this.baseUrl=this.accessServer;let i=new Kt({Authorization:"Bearer "+this.widgetaccess?.AccessToken,"X-API-Type":"Web","X-Claims-Data":null==this.widgetaccess?.xclaimsdata?"null":this.widgetaccess?.xclaimsdata,"X-Language-Jurisdiction":this.widgetaccess?.LanguageJurisdiction??"null","X-Default-Schema-Enabled":"true"});return this.http.post(this.baseUrl+"/api/gems-ai/chat/stream/verifyEntity",t,{headers:i,observe:"events",responseType:"text",reportProgress:!0}).pipe(As(this.cancelSubject))}getStaticPrompts(){this.widgetaccess=this.common.getFullAccessToken(),this.accessServer=this.widgetaccess?.BotApiServer,this.baseUrl=this.accessServer;let t=new Kt({Authorization:"Bearer "+this.widgetaccess?.AccessToken,"X-API-Type":"Web","X-Claims-Data":null==this.widgetaccess?.xclaimsdata?"null":this.widgetaccess?.xclaimsdata,"X-Language-Jurisdiction":this.widgetaccess?.LanguageJurisdiction??"null","X-Default-Schema-Enabled":"true"});return this.http.get(this.baseUrl+"/api/gems-ai/chat/staticPrompts",{headers:t})}sendUserSatisfaction(t){this.widgetaccess=this.common.getFullAccessToken(),this.accessServer=this.widgetaccess?.BotApiServer,this.baseUrl=this.accessServer;let i=new Kt({"Content-Type":"application/json",Authorization:"Bearer "+this.widgetaccess?.AccessToken,"X-API-Type":"Web","X-Claims-Data":null==this.widgetaccess?.xclaimsdata?"null":this.widgetaccess?.xclaimsdata,"X-Language-Jurisdiction":this.widgetaccess?.LanguageJurisdiction??"null","X-Default-Schema-Enabled":"true"});return this.http.post(this.baseUrl+"/api/gems-ai/chat/userFeedback",t,{headers:i})}savePromptQuery(t){this.widgetaccess=this.common.getFullAccessToken(),this.accessServer=this.widgetaccess?.BotApiServer,this.baseUrl=this.accessServer;let i=new Kt({"Content-Type":"application/json",Authorization:"Bearer "+this.widgetaccess?.AccessToken,"X-API-Type":"Web","X-Claims-Data":null==this.widgetaccess?.xclaimsdata?"null":this.widgetaccess?.xclaimsdata,"X-Language-Jurisdiction":this.widgetaccess?.LanguageJurisdiction??"null","X-Default-Schema-Enabled":"true"});return this.http.post(this.baseUrl+"/api/gems-ai/chat/saveQuery",t,{headers:i})}getrecentSearch(){this.widgetaccess=this.common.getFullAccessToken(),this.accessServer=this.widgetaccess?.BotApiServer,this.baseUrl=this.accessServer;let t=new Kt({"Content-Type":"application/json",Authorization:"Bearer "+this.widgetaccess?.AccessToken,"X-API-Type":"Web","X-Claims-Data":null==this.widgetaccess?.xclaimsdata?"null":this.widgetaccess?.xclaimsdata,"X-Language-Jurisdiction":this.widgetaccess?.LanguageJurisdiction??"null","X-Default-Schema-Enabled":"true"});return this.http.get(this.baseUrl+"/api/gems-ai/historyConversation",{headers:t})}cancelRequest(){this.cancelSubject.next()}getSavedPrompts(t=""){this.widgetaccess=this.common.getFullAccessToken(),this.accessServer=this.widgetaccess?.BotApiServer,this.baseUrl=this.accessServer;let i=new Kt({Authorization:"Bearer "+this.widgetaccess?.AccessToken,"X-API-Type":"Web","X-Claims-Data":null==this.widgetaccess?.xclaimsdata?"null":this.widgetaccess?.xclaimsdata,"X-Language-Jurisdiction":this.widgetaccess?.LanguageJurisdiction??"null","X-Default-Schema-Enabled":"true"});return this.http.get(this.baseUrl+"/api/gems-ai/chat/getSaveQuery?filterBy="+t,{headers:i})}deleteSavedPrompt(t){this.widgetaccess=this.common.getFullAccessToken(),this.accessServer=this.widgetaccess?.BotApiServer,this.baseUrl=this.accessServer;let i=new Kt({"Content-Type":"application/json",Authorization:"Bearer "+this.widgetaccess?.AccessToken,"X-API-Type":"Web","X-Claims-Data":null==this.widgetaccess?.xclaimsdata?"null":this.widgetaccess?.xclaimsdata,"X-Language-Jurisdiction":this.widgetaccess?.LanguageJurisdiction??"null","X-Default-Schema-Enabled":"true"});return this.http.post(this.baseUrl+"/api/gems-ai/chat/deleteSavedQuery?id="+t,{},{headers:i})}static{this.\u0275fac=function(i){return new(i||n)(P(p0),P(Gf))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var xe=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(xe||{});const Ro="*";function KF(n,e){return{type:xe.Trigger,name:n,definitions:e,options:{}}}function oy(n,e=null){return{type:xe.Animate,styles:e,timings:n}}function Po(n){return{type:xe.Style,styles:n,offset:null}}function Wf(n,e,t){return{type:xe.State,name:n,styles:e,options:t}}function ay(n,e,t=null){return{type:xe.Transition,expr:n,animation:e,options:t}}class Qf{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class nL{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,s=0;const r=this.players.length;0==r?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==r&&this._onFinish()}),o.onDestroy(()=>{++i==r&&this._onDestroy()}),o.onStart(()=>{++s==r&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const s=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(s)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const iL=["toast-component",""];function Mte(n,e){if(1&n){const t=ht();S(0,"button",5),ce("click",function(){return be(t),Ce(O().remove())}),S(1,"span",6),$(2,"\xd7"),x()()}}function Nte(n,e){if(1&n&&(Gn(0),$(1),Wn()),2&n){const t=O(2);A(),Ci("[",t.duplicatesCount+1,"]")}}function Rte(n,e){if(1&n&&(S(0,"div"),$(1),se(2,Nte,2,1,"ng-container",4),x()),2&n){const t=O();Fr(t.options.titleClass),zn("aria-label",t.title),A(),Ci(" ",t.title," "),A(),B("ngIf",t.duplicatesCount)}}function Pte(n,e){if(1&n&&ve(0,"div",7),2&n){const t=O();Fr(t.options.messageClass),B("innerHTML",t.message,vl)}}function Ote(n,e){if(1&n&&(S(0,"div",8),$(1),x()),2&n){const t=O();Fr(t.options.messageClass),zn("aria-label",t.message),A(),Ci(" ",t.message," ")}}function Fte(n,e){if(1&n&&(S(0,"div"),ve(1,"div",9),x()),2&n){const t=O();A(),Il("width",t.width()+"%")}}class Hte{_attachedHost;component;viewContainerRef;injector;constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class zte{_attachedPortal;_disposeFn;attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class qte{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new ye;_activate=new ye;_manualClose=new ye;_resetTimeout=new ye;_countDuplicate=new ye;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class ly{toastId;config;message;title;toastType;toastRef;_onTap=new ye;_onAction=new ye;constructor(e,t,i,s,r,o){this.toastId=e,this.config=t,this.message=i,this.title=s,this.toastType=r,this.toastRef=o,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const rL=new q("ToastConfig");class Gte extends zte{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,t,i){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=i}attachComponentPortal(e,t){const i=this._componentFactoryResolver.resolveComponentFactory(e.component);let s;return s=i.create(e.injector),this._appRef.attachView(s.hostView),this.setDisposeFn(()=>{this._appRef.detachView(s.hostView),s.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(s),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(s)),s}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Wte=(()=>{class n{_document=H(it);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Qte{_portalHost;constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let Yte=(()=>{class n{_overlayContainer=H(Wte);_componentFactoryResolver=H(xo);_appRef=H(ir);_document=H(it);_paneElements=new Map;create(t,i){return this._createOverlayRef(this.getPaneElement(t,i))}getPaneElement(t="",i){return this._paneElements.get(i)||this._paneElements.set(i,{}),this._paneElements.get(i)[t]||(this._paneElements.get(i)[t]=this._createPaneElement(t,i)),this._paneElements.get(i)[t]}_createPaneElement(t,i){const s=this._document.createElement("div");return s.id="toast-container",s.classList.add(t),s.classList.add("toast-container"),i?i.getContainerElement().appendChild(s):this._overlayContainer.getContainerElement().appendChild(s),s}_createPortalHost(t){return new Gte(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new Qte(this._createPortalHost(t))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bu=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(t,i,s,r,o){this.overlay=i,this._injector=s,this.sanitizer=r,this.ngZone=o,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,i,s={},r=""){return this._preBuildNotification(r,t,i,this.applyConfig(s))}success(t,i,s={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,i,this.applyConfig(s))}error(t,i,s={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,i,this.applyConfig(s))}info(t,i,s={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,i,this.applyConfig(s))}warning(t,i,s={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,i,this.applyConfig(s))}clear(t){for(const i of this.toasts)if(void 0!==t){if(i.toastId===t)return void i.toastRef.manualClose()}else i.toastRef.manualClose()}remove(t){const i=this._findToast(t);if(!i||(i.activeToast.toastRef.close(),this.toasts.splice(i.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const s=this.toasts[this.currentlyActive].toastRef;s.isInactive()||(this.currentlyActive=this.currentlyActive+1,s.activate())}return!0}findDuplicate(t="",i="",s,r){const{includeTitleDuplicates:o}=this.toastrConfig;for(const a of this.toasts)if((!o||o&&a.title===t)&&a.message===i)return a.toastRef.onDuplicate(s,r),a;return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let i=0;i<this.toasts.length;i++)if(this.toasts[i].toastId===t)return{index:i,activeToast:this.toasts[i]};return null}_preBuildNotification(t,i,s,r){return r.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,i,s,r)):this._buildNotification(t,i,s,r)}_buildNotification(t,i,s,r){if(!r.toastComponent)throw new Error("toastComponent required");const o=this.findDuplicate(s,i,this.toastrConfig.resetTimeoutOnDuplicate&&r.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&s||i)&&this.toastrConfig.preventDuplicates&&null!==o)return o;this.previousToastMessage=i;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const l=this.overlay.create(r.positionClass,this.overlayContainer);this.index=this.index+1;let c=i;i&&r.enableHtml&&(c=this.sanitizer.sanitize(Hi.HTML,i));const u=new qte(l),d=new ly(this.index,r,c,s,t,u),f=Zt.create({providers:[{provide:ly,useValue:d}],parent:this._injector}),p=new Hte(r.toastComponent,f),g=l.attach(p,r.newestOnTop);u.componentInstance=g.instance;const v={toastId:this.index,title:s||"",message:i||"",toastRef:u,onShown:u.afterActivate(),onHidden:u.afterClosed(),onTap:d.onTap(),onAction:d.onAction(),portal:g};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{v.toastRef.activate()})),this.toasts.push(v),v}static \u0275fac=function(i){return new(i||n)(P(rL),P(Yte),P(Zt),P(Of),P(Ae))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Xte={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=rf(-1);toastClasses="";state;get _state(){return this.state()}get displayStyle(){if("inactive"===this.state().value)return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,i,s){this.toastrService=t,this.toastPackage=i,this.ngZone=s,this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(r=>{this.duplicatesCount=r}),this.state=rf({value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.update(t=>({...t,value:"active"})),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width()||100===this.width()||!this.options.timeOut)return;const t=(new Date).getTime();this.width.set((this.hideTime-t)/this.options.timeOut*100),"increasing"===this.options.progressAnimation&&this.width.update(s=>100-s),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.update(t=>({...t,value:"active"})),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state().value&&(clearTimeout(this.timeout),this.state.update(t=>({...t,value:"removed"})),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state().value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state().value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state().value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),i)):this.timeout=setTimeout(()=>t(),i)}outsideInterval(t,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),i)):this.intervalId=setInterval(()=>t(),i)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}static \u0275fac=function(i){return new(i||n)(k(Bu),k(ly),k(Ae))};static \u0275cmp=_i({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(i,s){1&i&&ce("click",function(){return s.tapToast()})("mouseenter",function(){return s.stickAround()})("mouseleave",function(){return s.delayedHideToast()}),2&i&&(BC("@flyInOut",s._state),Fr(s.toastClasses),Il("display",s.displayStyle))},standalone:!0,features:[ba],attrs:iL,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,s){1&i&&se(0,Mte,3,0,"button",0)(1,Rte,3,5,"div",1)(2,Pte,1,3,"div",2)(3,Ote,2,4,"div",3)(4,Fte,2,2,"div",4),2&i&&(B("ngIf",s.options.closeButton),A(),B("ngIf",s.title),A(),B("ngIf",s.message&&s.options.enableHtml),A(),B("ngIf",s.message&&!s.options.enableHtml),A(),B("ngIf",s.options.progressBar))},dependencies:[xa],encapsulation:2,data:{animation:[KF("flyInOut",[Wf("inactive",Po({opacity:0})),Wf("active",Po({opacity:1})),Wf("removed",Po({opacity:0})),ay("inactive => active",oy("{{ easeTime }}ms {{ easing }}")),ay("active => removed",oy("{{ easeTime }}ms {{ easing }}"))])]},changeDetection:0})}return n})()},Zte=(n={})=>Lc([{provide:rL,useValue:{default:Xte,config:n}}]);let Kte=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[Zte(t)]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=en({type:n});static \u0275inj=Yt({})}return n})();const Yf=jw(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),ene=["addListener","removeListener"],tne=["addEventListener","removeEventListener"],nne=["on","off"];function cy(n,e,t,i){if(at(t)&&(i=t,t=void 0),i)return cy(n,e,t).pipe(jS(i));const[s,r]=function rne(n){return at(n.addEventListener)&&at(n.removeEventListener)}(n)?tne.map(o=>a=>n[o](e,a,t)):function ine(n){return at(n.addListener)&&at(n.removeListener)}(n)?ene.map(oL(n,e)):function sne(n){return at(n.on)&&at(n.off)}(n)?nne.map(oL(n,e)):[];if(!s&&$S(n))return ci(o=>cy(o,e,t))(xi(n));if(!s)throw new TypeError("Invalid event target");return new Ut(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return s(a),()=>r(a)})}function oL(n,e){return t=>i=>n[t](e,i)}function aL(n,e=!1){return Jt((t,i)=>{let s=0;t.subscribe(Ht(i,r=>{const o=n(r,s++);(o||e)&&i.next(r),!o&&i.complete()}))})}class one{constructor(e,t){this.type=e,this.message=t}}class ane{constructor(e="",t="",i=[]){this.name=e,this.img=t,this.messages=i}}const lL=(n,e)=>(window.SaveSearch=function(i,s){e.scrolltoclick(),window.parent.$find("GEMSTabManager").navigateToGemsArea("Search/SavedSearch",i,s)},`\n            <div class="table-responsive searchTable">\n                <table class="table table-bordered">\n                    <thead>\n                        <tr>\n                           \n                            <th> Name</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        ${n.map(i=>`\n                <tr onclick="SaveSearch(${i?.savedSearchCounter},'${i?.primarySchema}')">\n                    \n                    <td>${i?.title}</td>\n                </tr>  \n            `).join("")}\n                    </tbody>\n                </table>\n            </div>\n        `),cL=(n,e=null,t)=>{window.redirectToEntityData=function(v,..._){t.scrolltoclick(),console.log(v,..._,"link and args"),window.parent.$find("GEMSTabManager").navigateToGemsArea(v,..._)},window.redirectToActivitySpecific=function(v){t.scrolltoclick(),window.parent.$find("GEMSTabManager").navigateToGemsArea("Hub/Activities/Specific",v)},window.viewFullResults=function(){t.scrolltoclick(),window.parent.$find("GEMSTabManager").navigateToGemsArea("Search/Active")};const i=Object.keys(n),s=document.createElement("div");s.classList.add("card-wrapper");const r=document.createElement("p");let o,a;Object.keys(n?.navlinks)?.length>0?r.classList.add("Heading"):r.classList.add("Heading","noLink"),r.innerText=n?.Name||n?.["Search Name"]||n?.["Chart Name"]||n?.["Contract Title"],n?.["Activity Title"]&&(r.innerText=n?.["Activity Title"]),e&&(r.innerText=n?.Name,n?.["Activity Title"]&&(r.innerText=n?.["Activity Title"])),console.log(Object.keys(n?.navlinks)?.length,"NavigationLinks Length"),s.append(r);const l=document.createElement("div");l.classList.add("single-record"),Object.keys(n?.navlinks).forEach(v=>{const _=n?.navlinks[v];o=v,a=_});const c=a?.match(/navigateToGemsArea\((.*?)\)/),u=c?c[1].split(",").map(v=>v.trim().replace(/['"]/g,"")):[];let d,h;console.log(u,"values --- 00"),console.log(n,"result======"),Object.entries(n).forEach(([v,_])=>{console.log(v,"key --- key 11"),console.log(_,"value --- value 22"),v===u[1]?(console.log(u[1],"value --- value 33"),d=_):v===u[2]&&(console.log(u[2],"value --- value 44"),h=_)}),Object.keys(n?.navlinks)?.length>0?(console.log(u,"values ----- 55"),2==u?.length?(console.log(u,"values ----- 66"),r.setAttribute("id","EntityDataLink"),r.setAttribute("onclick",`redirectToEntityData('${u[0]}',${d||null})`)):3==u?.length?(console.log(u,"values ----- 77"),r.setAttribute("id","EntityDataLink"),r.setAttribute("onclick",`redirectToEntityData('${u[0]}',${d||null}, '${h||null}')`)):(console.log(u,"values ----- 88"),r.setAttribute("id","EntityDataLink"),r.setAttribute("onclick",`redirectToEntityData('${u[0]}')`))):console.log("no navigation links");for(let v=0;v<i.length;v+=2){let V=function(N){if(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d+$/.test(N)){const M=new Date(N);return`${M.getFullYear()}-${String(M.getMonth()+1).padStart(2,"0")}-${String(M.getDate()).padStart(2,"0")} ${String(M.getHours()).padStart(2,"0")}:${String(M.getMinutes()).padStart(2,"0")}`}return N};const _=document.createElement("div");_.classList.add("row");const E=i[v];let b=null===n[E]?"":n[E];const T=document.createElement("div");if(T.classList.add("col-6"),"navlinks"!=E&&E!=o){const N=document.createElement("h4");N.classList.add("card-heading"),N.textContent=`${E}:`,T.appendChild(N);const M=document.createElement("p");"string"==typeof b&&b.includes("T00:00:00")&&(b=b?.replace("T00:00:00","")),"string"==typeof b&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d+$/.test(b)&&(b=V(b)),M.textContent=b,T.appendChild(M),_.appendChild(T)}if(v+1<i.length){const N=i[v+1];let M=null===n[N]?"":n[N];const D=document.createElement("div");if(D.classList.add("col-6"),"navlinks"!=N&&N!=o){const L=document.createElement("h4");L.classList.add("card-heading"),L.textContent=`${N}:`,D.appendChild(L);const ne=document.createElement("p");"string"==typeof M&&M.includes("T00:00:00")&&(M=M?.replace("T00:00:00","")),"string"==typeof M&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d+$/.test(M)&&(M=V(M)),ne.textContent=M,D.appendChild(ne),_.appendChild(D)}}l.appendChild(_)}const f=document.createElement("div");f.classList.add("load-more-btn");const p=document.createElement("span");return p.innerHTML='Showing 1 of 1 <div class="view-full-result" onclick="viewFullResults()">View full results</div>',f.appendChild(p),s.append(l),s.appendChild(f),s.outerHTML},Vu=(n,e)=>{let t,i;console.log(n,"All Records in List View"),window.redirectToEntityData=function(d,...h){e.scrolltoclick(),console.log(d,...h,"link and args"),window.parent.$find("GEMSTabManager").navigateToGemsArea(d,...h)},window.viewFullResults=function(){e.scrolltoclick(),window.parent.$find("GEMSTabManager").navigateToGemsArea("Search/Active")},window.redirectToActivitySpecific=function(d){e.scrolltoclick(),window.parent.$find("GEMSTabManager").navigateToGemsArea("Hub/Activities/Specific",d)};let s=n?.PageSize?n?.PageSize:5;const r=document.createElement("div");r.classList.add("card-wrapper");let o=n?.result;function a(d){if(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}([:\.]\d+)?$/.test(d)){const h=new Date(d);return`${h.getFullYear()}-${String(h.getMonth()+1).padStart(2,"0")}-${String(h.getDate()).padStart(2,"0")} ${String(h.getHours()).padStart(2,"0")}:${String(h.getMinutes()).padStart(2,"0")}`}return d}if(console.log(Object.keys(n?.navigation_links)?.length,"NavigationLinks Length"),Object.keys(n?.navigation_links)?.length>0){Object.keys(n?.navigation_links).forEach(f=>{const p=n?.navigation_links[f];t=f,i=p});const d=i?.match(/navigateToGemsArea\((.*?)\)/),h=d?d[1].split(",").map(f=>f.trim()?.replace(/['"]/g,"")):[];o?.length<s&&(s=o?.length),o.slice(0,s).forEach(f=>{const p=document.createElement("span");p.classList.add("Multiple-record","list");let v,_,g=!0;Object.entries(f).forEach(([E,b])=>{E===h[1]?v=b:E===h[2]&&(_=b)}),Object.entries(f).slice().forEach(([E,b])=>{if(E===t)return;const T=document.createElement("div");"string"==typeof b&&b.includes("T00:00:00")&&(b=b.split("T")[0]),"string"==typeof b&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d+$/.test(b)&&(b=a(b)),T.innerHTML=`<strong>${E}:</strong> ${b??""}`,g&&(2==h?.length?(T.setAttribute("id","EntityDataLink"),T.setAttribute("onclick",`redirectToEntityData('${h[0]}',${v||null})`)):3==h?.length?(T.setAttribute("id","EntityDataLink"),T.setAttribute("onclick",`redirectToEntityData('${h[0]}',${v||null}, '${_||null}')`)):(T.setAttribute("id","EntityDataLink"),T.setAttribute("onclick",`redirectToEntityData('${h[0]}')`)),g=!1),p.appendChild(T)}),r.appendChild(p)})}else o.length<s&&(s=o.length),o.slice(0,s).forEach(d=>{const h=document.createElement("span");h.classList.add("Multiple-record","list","noLinks"),Object.entries(d).slice().forEach(([p,g])=>{if("primaryentitykeyid"!==p&&"activityId"!==p&&"savedSearchCounter"!==p&&"personId"!==p){const v=document.createElement("div");"string"==typeof g&&g.includes("T00:00:00")&&(g=g.split("T")[0]),"string"==typeof g&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}([:\.]\d+)?$/.test(g)&&(g=a(g)),v.innerHTML=`<strong>${p}:</strong> ${g??""}`,h.appendChild(v)}}),r.appendChild(h)});const l=document.createElement("div");l.classList.add("load-more-btn"),console.log(n?.TotalRecords,"Total Records");const c=document.createElement("span");return c.innerHTML=`Showing ${s} of ${n?.TotalRecords} <div class="view-full-result" onclick="viewFullResults()">View full results</div>`,l.appendChild(c),r.appendChild(l),r.outerHTML};class uL{constructor(){this.finalTranscript="",this.recognizing=!1,this.ignoreOnEnd=!1,this.interimTranscript="","webkitSpeechRecognition"in window?(this.recognition=new window.webkitSpeechRecognition,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang="en-US",this.recognition.onstart=()=>{this.recognizing=!0,this.startRecognitionTimer()},this.recognition.onerror=e=>{"no-speech"===e.error&&(console.warn("No speech detected."),this.ignoreOnEnd=!0),"audio-capture"===e.error&&(console.warn("No microphone detected."),this.ignoreOnEnd=!0),"not-allowed"===e.error&&(console.warn("Permission to use microphone was denied."),this.ignoreOnEnd=!0)},this.recognition.onend=()=>{this.recognizing=!1,this.onStopCallback&&this.onStopCallback(),!this.ignoreOnEnd&&this.finalTranscript&&clearTimeout(this.recognitionTimeout)},this.recognition.onresult=e=>{let t="";for(let i=e.resultIndex;i<e.results.length;++i)e.results[i].isFinal?(this.finalTranscript+=e.results[i][0].transcript,this.finalCallback&&this.finalCallback(this.finalTranscript)):t+=e.results[i][0].transcript;this.interimCallback&&this.interimCallback(t),clearTimeout(this.recognitionTimeout),this.startRecognitionTimer()}):console.error("Web Speech API is not supported in this browser.")}startRecognitionTimer(){this.recognitionTimeout=setTimeout(()=>{this.stopListening()},1e4)}startListening(){this.recognizing?this.recognition.stop():(this.finalTranscript="",this.recognition.start(),this.ignoreOnEnd=!1,this.startRecognitionTimer())}stopListening(){this.recognition.stop(),clearTimeout(this.recognitionTimeout)}getFinalTranscript(){return this.finalTranscript}setInterimCallback(e){this.interimCallback=e}setFinalCallback(e){this.finalCallback=e}setOnStopCallback(e){this.onStopCallback=e}}const dL=(n,e)=>(window.SaveChart=function(i){e.scrolltoclick(),window.parent.$find("GEMSTabManager").navigateToGemsArea("Hub/Charting/Saved",i)},`\n        <div class="table-responsive searchTable">\n            <table class="table table-bordered">\n                <thead>\n                    <tr>\n                        <th> Name</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    ${n.map(i=>`\n            <tr onclick="SaveChart(${i?.SavedChartId})">\n                <td>${i?.["Chart Name"]}</td>\n            </tr>  \n        `).join("")}\n                </tbody>\n            </table>\n        </div>\n    `),{entries:hL,setPrototypeOf:fL,isFrozen:dne,getPrototypeOf:hne,getOwnPropertyDescriptor:fne}=Object;let{freeze:Di,seal:ks,create:pL}=Object,{apply:_0,construct:w0}=typeof Reflect<"u"&&Reflect;Di||(Di=function(e){return e}),ks||(ks=function(e){return e}),_0||(_0=function(e,t,i){return e.apply(t,i)}),w0||(w0=function(e,t){return new e(...t)});const uy=ki(Array.prototype.forEach),pne=ki(Array.prototype.lastIndexOf),gL=ki(Array.prototype.pop),Xf=ki(Array.prototype.push),gne=ki(Array.prototype.splice),dy=ki(String.prototype.toLowerCase),E0=ki(String.prototype.toString),mL=ki(String.prototype.match),Zf=ki(String.prototype.replace),mne=ki(String.prototype.indexOf),vne=ki(String.prototype.trim),or=ki(Object.prototype.hasOwnProperty),Ai=ki(RegExp.prototype.test),Kf=function yne(n){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return w0(n,t)}}(TypeError);function ki(n){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return _0(n,e,i)}}function We(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dy;fL&&fL(n,null);let i=e.length;for(;i--;){let s=e[i];if("string"==typeof s){const r=t(s);r!==s&&(dne(e)||(e[i]=r),s=r)}n[s]=!0}return n}function _ne(n){for(let e=0;e<n.length;e++)or(n,e)||(n[e]=null);return n}function Oo(n){const e=pL(null);for(const[t,i]of hL(n))or(n,t)&&(e[t]=Array.isArray(i)?_ne(i):i&&"object"==typeof i&&i.constructor===Object?Oo(i):i);return e}function Jf(n,e){for(;null!==n;){const i=fne(n,e);if(i){if(i.get)return ki(i.get);if("function"==typeof i.value)return ki(i.value)}n=hne(n)}return function t(){return null}}const vL=Di(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),b0=Di(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),C0=Di(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),wne=Di(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),S0=Di(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Ene=Di(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),yL=Di(["#text"]),_L=Di(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),I0=Di(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),wL=Di(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),hy=Di(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),bne=ks(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Cne=ks(/<%[\w\W]*|[\w\W]*%>/gm),Sne=ks(/\$\{[\w\W]*/gm),Ine=ks(/^data-[\-\w.\u00B7-\uFFFF]+$/),xne=ks(/^aria-[\-\w]+$/),EL=ks(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Tne=ks(/^(?:\w+script|data):/i),Dne=ks(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),bL=ks(/^html$/i),Ane=ks(/^[a-z][.\w]*(-[.\w]+)+$/i);var CL=Object.freeze({__proto__:null,ARIA_ATTR:xne,ATTR_WHITESPACE:Dne,CUSTOM_ELEMENT:Ane,DATA_ATTR:Ine,DOCTYPE_NAME:bL,ERB_EXPR:Cne,IS_ALLOWED_URI:EL,IS_SCRIPT_OR_DATA:Tne,MUSTACHE_EXPR:bne,TMPLIT_EXPR:Sne});var Fo=function IL(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window;const e=pe=>IL(pe);if(e.version="3.2.6",e.removed=[],!n||!n.document||9!==n.document.nodeType||!n.Element)return e.isSupported=!1,e;let{document:t}=n;const i=t,s=i.currentScript,{DocumentFragment:r,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:d,DOMParser:h,trustedTypes:f}=n,p=l.prototype,g=Jf(p,"cloneNode"),v=Jf(p,"remove"),_=Jf(p,"nextSibling"),E=Jf(p,"childNodes"),b=Jf(p,"parentNode");if("function"==typeof o){const pe=t.createElement("template");pe.content&&pe.content.ownerDocument&&(t=pe.content.ownerDocument)}let T,V="";const{implementation:N,createNodeIterator:M,createDocumentFragment:D,getElementsByTagName:L}=t,{importNode:ne}=i;let j={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};e.isSupported="function"==typeof hL&&"function"==typeof b&&N&&void 0!==N.createHTMLDocument;const{MUSTACHE_EXPR:X,ERB_EXPR:Ye,TMPLIT_EXPR:ot,DATA_ATTR:Rn,ARIA_ATTR:Z,IS_SCRIPT_OR_DATA:K,ATTR_WHITESPACE:re,CUSTOM_ELEMENT:De}=CL;let{IS_ALLOWED_URI:Dt}=CL,et=null;const gi=We({},[...vL,...b0,...C0,...S0,...yL]);let Bt=null;const Vt=We({},[..._L,...I0,...wL,...hy]);let Wt=Object.seal(pL(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),bc=null,yn=null,ho=!0,mi=!0,Cc=!1,Jd=!0,eh=!1,Aw=!0,Sc=!1,hD=!1,fD=!1,th=!1,kw=!1,Mw=!1,PH=!0,OH=!1,pD=!0,Dg=!1,nh={},ih=null;const FH=We({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let LH=null;const BH=We({},["audio","video","img","source","image","track"]);let gD=null;const VH=We({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Nw="http://www.w3.org/1998/Math/MathML",Rw="http://www.w3.org/2000/svg",ia="http://www.w3.org/1999/xhtml";let sh=ia,mD=!1,vD=null;const sSe=We({},[Nw,Rw,ia],E0);let Pw=We({},["mi","mo","mn","ms","mtext"]),Ow=We({},["annotation-xml"]);const rSe=We({},["title","style","font","a","script"]);let Ag=null;const oSe=["application/xhtml+xml","text/html"];let $n=null,rh=null;const lSe=t.createElement("form"),$H=function(I){return I instanceof RegExp||I instanceof Function},yD=function(){let I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!rh||rh!==I){if((!I||"object"!=typeof I)&&(I={}),I=Oo(I),Ag=-1===oSe.indexOf(I.PARSER_MEDIA_TYPE)?"text/html":I.PARSER_MEDIA_TYPE,$n="application/xhtml+xml"===Ag?E0:dy,et=or(I,"ALLOWED_TAGS")?We({},I.ALLOWED_TAGS,$n):gi,Bt=or(I,"ALLOWED_ATTR")?We({},I.ALLOWED_ATTR,$n):Vt,vD=or(I,"ALLOWED_NAMESPACES")?We({},I.ALLOWED_NAMESPACES,E0):sSe,gD=or(I,"ADD_URI_SAFE_ATTR")?We(Oo(VH),I.ADD_URI_SAFE_ATTR,$n):VH,LH=or(I,"ADD_DATA_URI_TAGS")?We(Oo(BH),I.ADD_DATA_URI_TAGS,$n):BH,ih=or(I,"FORBID_CONTENTS")?We({},I.FORBID_CONTENTS,$n):FH,bc=or(I,"FORBID_TAGS")?We({},I.FORBID_TAGS,$n):Oo({}),yn=or(I,"FORBID_ATTR")?We({},I.FORBID_ATTR,$n):Oo({}),nh=!!or(I,"USE_PROFILES")&&I.USE_PROFILES,ho=!1!==I.ALLOW_ARIA_ATTR,mi=!1!==I.ALLOW_DATA_ATTR,Cc=I.ALLOW_UNKNOWN_PROTOCOLS||!1,Jd=!1!==I.ALLOW_SELF_CLOSE_IN_ATTR,eh=I.SAFE_FOR_TEMPLATES||!1,Aw=!1!==I.SAFE_FOR_XML,Sc=I.WHOLE_DOCUMENT||!1,th=I.RETURN_DOM||!1,kw=I.RETURN_DOM_FRAGMENT||!1,Mw=I.RETURN_TRUSTED_TYPE||!1,fD=I.FORCE_BODY||!1,PH=!1!==I.SANITIZE_DOM,OH=I.SANITIZE_NAMED_PROPS||!1,pD=!1!==I.KEEP_CONTENT,Dg=I.IN_PLACE||!1,Dt=I.ALLOWED_URI_REGEXP||EL,sh=I.NAMESPACE||ia,Pw=I.MATHML_TEXT_INTEGRATION_POINTS||Pw,Ow=I.HTML_INTEGRATION_POINTS||Ow,Wt=I.CUSTOM_ELEMENT_HANDLING||{},I.CUSTOM_ELEMENT_HANDLING&&$H(I.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Wt.tagNameCheck=I.CUSTOM_ELEMENT_HANDLING.tagNameCheck),I.CUSTOM_ELEMENT_HANDLING&&$H(I.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Wt.attributeNameCheck=I.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),I.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof I.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Wt.allowCustomizedBuiltInElements=I.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),eh&&(mi=!1),kw&&(th=!0),nh&&(et=We({},yL),Bt=[],!0===nh.html&&(We(et,vL),We(Bt,_L)),!0===nh.svg&&(We(et,b0),We(Bt,I0),We(Bt,hy)),!0===nh.svgFilters&&(We(et,C0),We(Bt,I0),We(Bt,hy)),!0===nh.mathMl&&(We(et,S0),We(Bt,wL),We(Bt,hy))),I.ADD_TAGS&&(et===gi&&(et=Oo(et)),We(et,I.ADD_TAGS,$n)),I.ADD_ATTR&&(Bt===Vt&&(Bt=Oo(Bt)),We(Bt,I.ADD_ATTR,$n)),I.ADD_URI_SAFE_ATTR&&We(gD,I.ADD_URI_SAFE_ATTR,$n),I.FORBID_CONTENTS&&(ih===FH&&(ih=Oo(ih)),We(ih,I.FORBID_CONTENTS,$n)),pD&&(et["#text"]=!0),Sc&&We(et,["html","head","body"]),et.table&&(We(et,["tbody"]),delete bc.tbody),I.TRUSTED_TYPES_POLICY){if("function"!=typeof I.TRUSTED_TYPES_POLICY.createHTML)throw Kf('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof I.TRUSTED_TYPES_POLICY.createScriptURL)throw Kf('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');T=I.TRUSTED_TYPES_POLICY,V=T.createHTML("")}else void 0===T&&(T=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let i=null;const s="data-tt-policy-suffix";t&&t.hasAttribute(s)&&(i=t.getAttribute(s));const r="dompurify"+(i?"#"+i:"");try{return e.createPolicy(r,{createHTML:o=>o,createScriptURL:o=>o})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(f,s)),null!==T&&"string"==typeof V&&(V=T.createHTML(""));Di&&Di(I),rh=I}},UH=We({},[...b0,...C0,...wne]),jH=We({},[...S0,...Ene]),fo=function(I){Xf(e.removed,{element:I});try{b(I).removeChild(I)}catch{v(I)}},oh=function(I,Q){try{Xf(e.removed,{attribute:Q.getAttributeNode(I),from:Q})}catch{Xf(e.removed,{attribute:null,from:Q})}if(Q.removeAttribute(I),"is"===I)if(th||kw)try{fo(Q)}catch{}else try{Q.setAttribute(I,"")}catch{}},HH=function(I){let Q=null,ae=null;if(fD)I="<remove></remove>"+I;else{const Pn=mL(I,/^[\r\n\t ]+/);ae=Pn&&Pn[0]}"application/xhtml+xml"===Ag&&sh===ia&&(I='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+I+"</body></html>");const Qt=T?T.createHTML(I):I;if(sh===ia)try{Q=(new h).parseFromString(Qt,Ag)}catch{}if(!Q||!Q.documentElement){Q=N.createDocument(sh,"template",null);try{Q.documentElement.innerHTML=mD?V:Qt}catch{}}const vi=Q.body||Q.documentElement;return I&&ae&&vi.insertBefore(t.createTextNode(ae),vi.childNodes[0]||null),sh===ia?L.call(Q,Sc?"html":"body")[0]:Sc?Q.documentElement:vi},zH=function(I){return M.call(I.ownerDocument||I,I,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},_D=function(I){return I instanceof d&&("string"!=typeof I.nodeName||"string"!=typeof I.textContent||"function"!=typeof I.removeChild||!(I.attributes instanceof u)||"function"!=typeof I.removeAttribute||"function"!=typeof I.setAttribute||"string"!=typeof I.namespaceURI||"function"!=typeof I.insertBefore||"function"!=typeof I.hasChildNodes)},qH=function(I){return"function"==typeof a&&I instanceof a};function sa(pe,I,Q){uy(pe,ae=>{ae.call(e,I,Q,rh)})}const GH=function(I){let Q=null;if(sa(j.beforeSanitizeElements,I,null),_D(I))return fo(I),!0;const ae=$n(I.nodeName);if(sa(j.uponSanitizeElement,I,{tagName:ae,allowedTags:et}),Aw&&I.hasChildNodes()&&!qH(I.firstElementChild)&&Ai(/<[/\w!]/g,I.innerHTML)&&Ai(/<[/\w!]/g,I.textContent)||7===I.nodeType||Aw&&8===I.nodeType&&Ai(/<[/\w]/g,I.data))return fo(I),!0;if(!et[ae]||bc[ae]){if(!bc[ae]&&QH(ae)&&(Wt.tagNameCheck instanceof RegExp&&Ai(Wt.tagNameCheck,ae)||Wt.tagNameCheck instanceof Function&&Wt.tagNameCheck(ae)))return!1;if(pD&&!ih[ae]){const Qt=b(I)||I.parentNode,vi=E(I)||I.childNodes;if(vi&&Qt)for(let ns=vi.length-1;ns>=0;--ns){const ra=g(vi[ns],!0);ra.__removalCount=(I.__removalCount||0)+1,Qt.insertBefore(ra,_(I))}}return fo(I),!0}return I instanceof l&&!function(I){let Q=b(I);(!Q||!Q.tagName)&&(Q={namespaceURI:sh,tagName:"template"});const ae=dy(I.tagName),Qt=dy(Q.tagName);return!!vD[I.namespaceURI]&&(I.namespaceURI===Rw?Q.namespaceURI===ia?"svg"===ae:Q.namespaceURI===Nw?"svg"===ae&&("annotation-xml"===Qt||Pw[Qt]):!!UH[ae]:I.namespaceURI===Nw?Q.namespaceURI===ia?"math"===ae:Q.namespaceURI===Rw?"math"===ae&&Ow[Qt]:!!jH[ae]:I.namespaceURI===ia?!(Q.namespaceURI===Rw&&!Ow[Qt]||Q.namespaceURI===Nw&&!Pw[Qt])&&!jH[ae]&&(rSe[ae]||!UH[ae]):!("application/xhtml+xml"!==Ag||!vD[I.namespaceURI]))}(I)||("noscript"===ae||"noembed"===ae||"noframes"===ae)&&Ai(/<\/no(script|embed|frames)/i,I.innerHTML)?(fo(I),!0):(eh&&3===I.nodeType&&(Q=I.textContent,uy([X,Ye,ot],Qt=>{Q=Zf(Q,Qt," ")}),I.textContent!==Q&&(Xf(e.removed,{element:I.cloneNode()}),I.textContent=Q)),sa(j.afterSanitizeElements,I,null),!1)},WH=function(I,Q,ae){if(PH&&("id"===Q||"name"===Q)&&(ae in t||ae in lSe))return!1;if((!mi||yn[Q]||!Ai(Rn,Q))&&(!ho||!Ai(Z,Q)))if(!Bt[Q]||yn[Q]){if(!(QH(I)&&(Wt.tagNameCheck instanceof RegExp&&Ai(Wt.tagNameCheck,I)||Wt.tagNameCheck instanceof Function&&Wt.tagNameCheck(I))&&(Wt.attributeNameCheck instanceof RegExp&&Ai(Wt.attributeNameCheck,Q)||Wt.attributeNameCheck instanceof Function&&Wt.attributeNameCheck(Q))||"is"===Q&&Wt.allowCustomizedBuiltInElements&&(Wt.tagNameCheck instanceof RegExp&&Ai(Wt.tagNameCheck,ae)||Wt.tagNameCheck instanceof Function&&Wt.tagNameCheck(ae))))return!1}else if(!gD[Q]&&!Ai(Dt,Zf(ae,re,""))&&("src"!==Q&&"xlink:href"!==Q&&"href"!==Q||"script"===I||0!==mne(ae,"data:")||!LH[I])&&(!Cc||Ai(K,Zf(ae,re,"")))&&ae)return!1;return!0},QH=function(I){return"annotation-xml"!==I&&mL(I,De)},YH=function(I){sa(j.beforeSanitizeAttributes,I,null);const{attributes:Q}=I;if(!Q||_D(I))return;const ae={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Bt,forceKeepAttr:void 0};let Qt=Q.length;for(;Qt--;){const vi=Q[Qt],{name:Pn,namespaceURI:ns,value:ra}=vi,kg=$n(Pn),wD=ra;let yi="value"===Pn?wD:vne(wD);if(ae.attrName=kg,ae.attrValue=yi,ae.keepAttr=!0,ae.forceKeepAttr=void 0,sa(j.uponSanitizeAttribute,I,ae),yi=ae.attrValue,OH&&("id"===kg||"name"===kg)&&(oh(Pn,I),yi="user-content-"+yi),Aw&&Ai(/((--!?|])>)|<\/(style|title)/i,yi)){oh(Pn,I);continue}if(ae.forceKeepAttr)continue;if(!ae.keepAttr){oh(Pn,I);continue}if(!Jd&&Ai(/\/>/i,yi)){oh(Pn,I);continue}eh&&uy([X,Ye,ot],ZH=>{yi=Zf(yi,ZH," ")});const XH=$n(I.nodeName);if(WH(XH,kg,yi)){if(T&&"object"==typeof f&&"function"==typeof f.getAttributeType&&!ns)switch(f.getAttributeType(XH,kg)){case"TrustedHTML":yi=T.createHTML(yi);break;case"TrustedScriptURL":yi=T.createScriptURL(yi)}if(yi!==wD)try{ns?I.setAttributeNS(ns,Pn,yi):I.setAttribute(Pn,yi),_D(I)?fo(I):gL(e.removed)}catch{oh(Pn,I)}}else oh(Pn,I)}sa(j.afterSanitizeAttributes,I,null)},uSe=function pe(I){let Q=null;const ae=zH(I);for(sa(j.beforeSanitizeShadowDOM,I,null);Q=ae.nextNode();)sa(j.uponSanitizeShadowNode,Q,null),GH(Q),YH(Q),Q.content instanceof r&&pe(Q.content);sa(j.afterSanitizeShadowDOM,I,null)};return e.sanitize=function(pe){let I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Q=null,ae=null,Qt=null,vi=null;if(mD=!pe,mD&&(pe="\x3c!--\x3e"),"string"!=typeof pe&&!qH(pe)){if("function"!=typeof pe.toString)throw Kf("toString is not a function");if("string"!=typeof(pe=pe.toString()))throw Kf("dirty is not a string, aborting")}if(!e.isSupported)return pe;if(hD||yD(I),e.removed=[],"string"==typeof pe&&(Dg=!1),Dg){if(pe.nodeName){const ra=$n(pe.nodeName);if(!et[ra]||bc[ra])throw Kf("root node is forbidden and cannot be sanitized in-place")}}else if(pe instanceof a)Q=HH("\x3c!----\x3e"),ae=Q.ownerDocument.importNode(pe,!0),1===ae.nodeType&&"BODY"===ae.nodeName||"HTML"===ae.nodeName?Q=ae:Q.appendChild(ae);else{if(!th&&!eh&&!Sc&&-1===pe.indexOf("<"))return T&&Mw?T.createHTML(pe):pe;if(Q=HH(pe),!Q)return th?null:Mw?V:""}Q&&fD&&fo(Q.firstChild);const Pn=zH(Dg?pe:Q);for(;Qt=Pn.nextNode();)GH(Qt),YH(Qt),Qt.content instanceof r&&uSe(Qt.content);if(Dg)return pe;if(th){if(kw)for(vi=D.call(Q.ownerDocument);Q.firstChild;)vi.appendChild(Q.firstChild);else vi=Q;return(Bt.shadowroot||Bt.shadowrootmode)&&(vi=ne.call(i,vi,!0)),vi}let ns=Sc?Q.outerHTML:Q.innerHTML;return Sc&&et["!doctype"]&&Q.ownerDocument&&Q.ownerDocument.doctype&&Q.ownerDocument.doctype.name&&Ai(bL,Q.ownerDocument.doctype.name)&&(ns="<!DOCTYPE "+Q.ownerDocument.doctype.name+">\n"+ns),eh&&uy([X,Ye,ot],ra=>{ns=Zf(ns,ra," ")}),T&&Mw?T.createHTML(ns):ns},e.setConfig=function(){yD(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),hD=!0},e.clearConfig=function(){rh=null,hD=!1},e.isValidAttribute=function(pe,I,Q){rh||yD({});const ae=$n(pe),Qt=$n(I);return WH(ae,Qt,Q)},e.addHook=function(pe,I){"function"==typeof I&&Xf(j[pe],I)},e.removeHook=function(pe,I){if(void 0!==I){const Q=pne(j[pe],I);return-1===Q?void 0:gne(j[pe],Q,1)[0]}return gL(j[pe])},e.removeHooks=function(pe){j[pe]=[]},e.removeAllHooks=function(){j={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},e}();const xL=(n="No Result Found",e,t)=>{if(window.viewFullResults=function(){t.scrolltoclick(),window.parent.$find("GEMSTabManager").navigateToGemsArea("Search/Active")},console.log(e,"screenView"),"EntityMatchView"==e){const i=document.createElement("div"),s=document.createElement("p");return s.textContent=n,s.style.marginBottom="10px",s.style.color="#333",i.appendChild(s),i.outerHTML}return'\n            <div class="card-wrapper">\n              <div class="not-found-content">\n\n                  <img class="not-found-image" src="assets/Icons/notFound.svg" alt="no img" />\n\n                <strong class="not-found-text">No results found</strong>\n              </div>\n              <div class="load-more-btn view-full-result mt-4">\n                <span>\n                  <div onclick="viewFullResults()">\n                    View Search\n                  </div>\n                </span>\n              </div>\n            </div>\n          '};window.handleSavedSearchClick=function(n,e,t){console.log("arguments",e,n,t),window.parent.$find("GEMSTabManager").navigateToGemsArea(e,n,t)},window.handleQuestionClick=function(n,e){console.log(`Clicked: ${n} - ${e}`),"function"==typeof window.callUserSuggestionQuery&&(window.callUserSuggestionQuery(e),setTimeout(()=>{let t=document.querySelectorAll(".questionListContainerMain");t.length>0&&t.forEach(i=>{i.style.display="none"})},800))};const x0=n=>n?`<div style="display: block; margin-bottom: 14px; font-weight: 400; font-style: italic;">\n                ${n.split("\n").filter(i=>""!==i.trim()).map(i=>`<p style="margin: 0 0 8px 0; font-weight: 400; font-style: italic;">${i.trim()}</p>`).join("")}\n            </div>`:"",TL=n=>{window.handleContinueReasoning=function(){const o=document.querySelector(".reasoning-buttons-container");o&&o.remove()},window.handleNewConversation=function(){const o=document.querySelector(".reasoning-buttons-container");o&&o.remove(),n()};const e=document.createElement("div");e.className="snapshot-prompt-container";const t=document.createElement("div");t.className="error-message",t.textContent="Your question seems unrelated to the selected snapshot, would you like to start a new conversation or continue in Reasoning mode?";const i=document.createElement("div");i.className="reasoning-buttons-container";const s=document.createElement("button");s.className="reasoning-button",s.textContent="Continue in Reasoning mode";const r=document.createElement("button");return r.className="new-conversation-button",r.textContent="Start a new conversation",s.setAttribute("onclick","handleContinueReasoning()"),r.setAttribute("onclick","handleNewConversation()"),i.appendChild(s),i.appendChild(r),e.appendChild(t),e.appendChild(i),e.outerHTML},DL=new RegExp("(\\:not\\()|(([\\.\\#]?)[-\\w]+)|(?:\\[([-.\\w*\\\\$]+)(?:=([\"']?)([^\\]\"']*)\\5)?\\])|(\\))|(\\s*,\\s*)","g");class Pa{constructor(){this.element=null,this.classNames=[],this.attrs=[],this.notSelectors=[]}static parse(e){const t=[],i=(l,c)=>{c.notSelectors.length>0&&!c.element&&0==c.classNames.length&&0==c.attrs.length&&(c.element="*"),l.push(c)};let r,s=new Pa,o=s,a=!1;for(DL.lastIndex=0;r=DL.exec(e);){if(r[1]){if(a)throw new Error("Nesting :not in a selector is not allowed");a=!0,o=new Pa,s.notSelectors.push(o)}const l=r[2];if(l){const u=r[3];"#"===u?o.addAttribute("id",l.slice(1)):"."===u?o.addClassName(l.slice(1)):o.setElement(l)}const c=r[4];if(c&&o.addAttribute(o.unescapeAttribute(c),r[6]),r[7]&&(a=!1,o=s),r[8]){if(a)throw new Error("Multiple selectors in :not are not supported");i(t,s),s=o=new Pa}}return i(t,s),t}unescapeAttribute(e){let t="",i=!1;for(let s=0;s<e.length;s++){const r=e.charAt(s);if("\\"!==r){if("$"===r&&!i)throw new Error(`Error in attribute selector "${e}". Unescaped "$" is not supported. Please escape with "\\$".`);i=!1,t+=r}else i=!0}return t}escapeAttribute(e){return e.replace(/\\/g,"\\\\").replace(/\$/g,"\\$")}isElementSelector(){return this.hasElementSelector()&&0==this.classNames.length&&0==this.attrs.length&&0===this.notSelectors.length}hasElementSelector(){return!!this.element}setElement(e=null){this.element=e}getAttrs(){const e=[];return this.classNames.length>0&&e.push("class",this.classNames.join(" ")),e.concat(this.attrs)}addAttribute(e,t=""){this.attrs.push(e,t&&t.toLowerCase()||"")}addClassName(e){this.classNames.push(e.toLowerCase())}toString(){let e=this.element||"";if(this.classNames&&this.classNames.forEach(t=>e+=`.${t}`),this.attrs)for(let t=0;t<this.attrs.length;t+=2){const i=this.escapeAttribute(this.attrs[t]),s=this.attrs[t+1];e+=`[${i}${s?"="+s:""}]`}return this.notSelectors.forEach(t=>e+=`:not(${t})`),e}}class tp{constructor(){this._elementMap=new Map,this._elementPartialMap=new Map,this._classMap=new Map,this._classPartialMap=new Map,this._attrValueMap=new Map,this._attrValuePartialMap=new Map,this._listContexts=[]}static createNotMatcher(e){const t=new tp;return t.addSelectables(e,null),t}addSelectables(e,t){let i=null;e.length>1&&(i=new Pne(e),this._listContexts.push(i));for(let s=0;s<e.length;s++)this._addSelectable(e[s],t,i)}_addSelectable(e,t,i){let s=this;const r=e.element,o=e.classNames,a=e.attrs,l=new One(e,t,i);if(r&&(0===a.length&&0===o.length?this._addTerminal(s._elementMap,r,l):s=this._addPartial(s._elementPartialMap,r)),o)for(let c=0;c<o.length;c++){const d=o[c];0===a.length&&c===o.length-1?this._addTerminal(s._classMap,d,l):s=this._addPartial(s._classPartialMap,d)}if(a)for(let c=0;c<a.length;c+=2){const d=a[c],h=a[c+1];if(c===a.length-2){const f=s._attrValueMap;let p=f.get(d);p||(p=new Map,f.set(d,p)),this._addTerminal(p,h,l)}else{const f=s._attrValuePartialMap;let p=f.get(d);p||(p=new Map,f.set(d,p)),s=this._addPartial(p,h)}}}_addTerminal(e,t,i){let s=e.get(t);s||(s=[],e.set(t,s)),s.push(i)}_addPartial(e,t){let i=e.get(t);return i||(i=new tp,e.set(t,i)),i}match(e,t){let i=!1;const s=e.element,r=e.classNames,o=e.attrs;for(let a=0;a<this._listContexts.length;a++)this._listContexts[a].alreadyMatched=!1;if(i=this._matchTerminal(this._elementMap,s,e,t)||i,i=this._matchPartial(this._elementPartialMap,s,e,t)||i,r)for(let a=0;a<r.length;a++){const l=r[a];i=this._matchTerminal(this._classMap,l,e,t)||i,i=this._matchPartial(this._classPartialMap,l,e,t)||i}if(o)for(let a=0;a<o.length;a+=2){const l=o[a],c=o[a+1],u=this._attrValueMap.get(l);c&&(i=this._matchTerminal(u,"",e,t)||i),i=this._matchTerminal(u,c,e,t)||i;const d=this._attrValuePartialMap.get(l);c&&(i=this._matchPartial(d,"",e,t)||i),i=this._matchPartial(d,c,e,t)||i}return i}_matchTerminal(e,t,i,s){if(!e||"string"!=typeof t)return!1;let r=e.get(t)||[];const o=e.get("*");if(o&&(r=r.concat(o)),0===r.length)return!1;let a,l=!1;for(let c=0;c<r.length;c++)a=r[c],l=a.finalize(i,s)||l;return l}_matchPartial(e,t,i,s){if(!e||"string"!=typeof t)return!1;const r=e.get(t);return!!r&&r.match(i,s)}}class Pne{constructor(e){this.selectors=e,this.alreadyMatched=!1}}class One{constructor(e,t,i){this.selector=e,this.cbContext=t,this.listContext=i,this.notSelectors=e.notSelectors}finalize(e,t){let i=!0;return this.notSelectors.length>0&&(!this.listContext||!this.listContext.alreadyMatched)&&(i=!tp.createNotMatcher(this.notSelectors).match(e,null)),i&&t&&(!this.listContext||!this.listContext.alreadyMatched)&&(this.listContext&&(this.listContext.alreadyMatched=!0),t(this.selector,this.cbContext)),i}}var ar=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ar||{}),np=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(np||{}),Fl=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Fl||{});const T0_name="custom-elements",D0_name="no-errors-schema";var qe=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(qe||{});function $ne(n){const e=function Bne(n){const e=n.classNames&&n.classNames.length?[8,...n.classNames]:[];return[n.element&&"*"!==n.element?n.element:"",...n.attrs,...e]}(n),t=n.notSelectors&&n.notSelectors.length?n.notSelectors.map(i=>function Vne(n){const e=n.classNames&&n.classNames.length?[8,...n.classNames]:[];return n.element?[5,n.element,...n.attrs,...e]:n.attrs.length?[3,...n.attrs,...e]:n.classNames&&n.classNames.length?[9,...n.classNames]:[]}(i)):[];return e.concat(...t)}function Uu(n){return n?Pa.parse(n).map($ne):[]}let fy;function ML(n){const e=new Hne;return PL(n.nodes.map(i=>i.visit(e,null)).join(""),n.meaning)}class NL{visitText(e,t){return e.value}visitContainer(e,t){return`[${e.children.map(i=>i.visit(this)).join(", ")}]`}visitIcu(e,t){const i=Object.keys(e.cases).map(s=>`${s} {${e.cases[s].visit(this)}}`);return`{${e.expression}, ${e.type}, ${i.join(", ")}}`}visitTagPlaceholder(e,t){return e.isVoid?`<ph tag name="${e.startName}"/>`:`<ph tag name="${e.startName}">${e.children.map(i=>i.visit(this)).join(", ")}</ph name="${e.closeName}">`}visitPlaceholder(e,t){return e.value?`<ph name="${e.name}">${e.value}</ph>`:`<ph name="${e.name}"/>`}visitIcuPlaceholder(e,t){return`<ph icu name="${e.name}">${e.value.visit(this)}</ph>`}visitBlockPlaceholder(e,t){return`<ph block name="${e.startName}">${e.children.map(i=>i.visit(this)).join(", ")}</ph name="${e.closeName}">`}}const Une=new NL;class Hne extends NL{visitIcu(e,t){let i=Object.keys(e.cases).map(s=>`${s} {${e.cases[s].visit(this)}}`);return`{${e.type}, ${i.join(", ")}}`}}function ip(n){return(n>>>0).toString(16).padStart(8,"0")}function qne(n,e,t,i){return n<20?[e&t|~e&i,1518500249]:n<40?[e^t^i,1859775393]:n<60?[e&t|e&i|t&i,2400959708]:[e^t^i,3395469782]}function RL(n){fy??=new TextEncoder;const e=fy.encode(n),t=new DataView(e.buffer,e.byteOffset,e.byteLength);let i=OL(t,e.length,0),s=OL(t,e.length,102072);return 0==i&&(0==s||1==s)&&(i^=319790063,s^=-1801410264),BigInt.asUintN(32,BigInt(i))<<BigInt(32)|BigInt.asUintN(32,BigInt(s))}function PL(n,e=""){let t=RL(n);return e&&(t=BigInt.asUintN(64,t<<BigInt(1))|t>>BigInt(63)&BigInt(1),t+=RL(e)),BigInt.asUintN(63,t).toString()}function OL(n,e,t){let i=2654435769,s=2654435769,r=0;const o=e-12;for(;r<=o;r+=12){i+=n.getUint32(r,!0),s+=n.getUint32(r+4,!0);const l=FL(i,s,t+=n.getUint32(r+8,!0));i=l[0],s=l[1],t=l[2]}const a=e-r;return t+=e,a>=4?(i+=n.getUint32(r,!0),r+=4,a>=8?(s+=n.getUint32(r,!0),r+=4,a>=9&&(t+=n.getUint8(r++)<<8),a>=10&&(t+=n.getUint8(r++)<<16),11===a&&(t+=n.getUint8(r++)<<24)):(a>=5&&(s+=n.getUint8(r++)),a>=6&&(s+=n.getUint8(r++)<<8),7===a&&(s+=n.getUint8(r++)<<16))):(a>=1&&(i+=n.getUint8(r++)),a>=2&&(i+=n.getUint8(r++)<<8),3===a&&(i+=n.getUint8(r++)<<16)),FL(i,s,t)[2]}function FL(n,e,t){return n-=e,n-=t,e-=t,e-=n^=t>>>13,t-=n,t-=e^=n<<8,n-=e,n-=t^=e>>>13,e-=t,e-=n^=t>>>12,t-=n,t-=e^=n<<16,n-=e,n-=t^=e>>>5,e-=t,e-=n^=t>>>3,t-=n,t-=e^=n<<10,[n,e,t^=e>>>15]}var k0=function(n){return n[n.Little=0]="Little",n[n.Big=1]="Big",n}(k0||{});function ju(n,e){return function Gne(n,e){const t=(65535&n)+(65535&e),i=(n>>>16)+(e>>>16)+(t>>>16);return[i>>>16,i<<16|65535&t]}(n,e)[1]}function M0(n,e){return n<<e|n>>>32-e}function LL(n,e){return e>=n.length?0:n[e]}function Qne(n,e,t){let i=0;if(t===k0.Big)for(let s=0;s<4;s++)i+=LL(n,e+s)<<24-8*s;else for(let s=0;s<4;s++)i+=LL(n,e+s)<<8*s;return i}var N0=function(n){return n[n.None=0]="None",n[n.Const=1]="Const",n}(N0||{});class Hu{constructor(e=N0.None){this.modifiers=e}hasModifier(e){return!!(this.modifiers&e)}}var Ur=function(n){return n[n.Dynamic=0]="Dynamic",n[n.Bool=1]="Bool",n[n.String=2]="String",n[n.Int=3]="Int",n[n.Number=4]="Number",n[n.Function=5]="Function",n[n.Inferred=6]="Inferred",n[n.None=7]="None",n}(Ur||{});class Lo extends Hu{constructor(e,t){super(t),this.name=e}visitType(e,t){return e.visitBuiltinType(this,t)}}class lr extends Hu{constructor(e,t,i=null){super(t),this.value=e,this.typeParams=i}visitType(e,t){return e.visitExpressionType(this,t)}}const Ms=new Lo(Ur.Dynamic),ui=new Lo(Ur.Inferred),VL=new Lo(Ur.Bool),zu=(new Lo(Ur.Int),new Lo(Ur.Number)),py=new Lo(Ur.String),Ns=(new Lo(Ur.Function),new Lo(Ur.None));var Oa=function(n){return n[n.Minus=0]="Minus",n[n.Plus=1]="Plus",n}(Oa||{}),Y=function(n){return n[n.Equals=0]="Equals",n[n.NotEquals=1]="NotEquals",n[n.Identical=2]="Identical",n[n.NotIdentical=3]="NotIdentical",n[n.Minus=4]="Minus",n[n.Plus=5]="Plus",n[n.Divide=6]="Divide",n[n.Multiply=7]="Multiply",n[n.Modulo=8]="Modulo",n[n.And=9]="And",n[n.Or=10]="Or",n[n.BitwiseOr=11]="BitwiseOr",n[n.BitwiseAnd=12]="BitwiseAnd",n[n.Lower=13]="Lower",n[n.LowerEquals=14]="LowerEquals",n[n.Bigger=15]="Bigger",n[n.BiggerEquals=16]="BiggerEquals",n[n.NullishCoalesce=17]="NullishCoalesce",n}(Y||{});function UL(n,e,t){const i=n.length;if(i!==e.length)return!1;for(let s=0;s<i;s++)if(!t(n[s],e[s]))return!1;return!0}function Mi(n,e){return UL(n,e,(t,i)=>t.isEquivalent(i))}class lt{constructor(e,t){this.type=e||null,this.sourceSpan=t||null}prop(e,t){return new Xn(this,e,null,t)}key(e,t,i){return new Rs(this,e,t,i)}callFn(e,t,i){return new Yn(this,e,null,t,i)}instantiate(e,t,i){return new Bl(this,e,t,i)}conditional(e,t=null,i){return new Ri(this,e,t,null,i)}equals(e,t){return new Oe(Y.Equals,this,e,null,t)}notEquals(e,t){return new Oe(Y.NotEquals,this,e,null,t)}identical(e,t){return new Oe(Y.Identical,this,e,null,t)}notIdentical(e,t){return new Oe(Y.NotIdentical,this,e,null,t)}minus(e,t){return new Oe(Y.Minus,this,e,null,t)}plus(e,t){return new Oe(Y.Plus,this,e,null,t)}divide(e,t){return new Oe(Y.Divide,this,e,null,t)}multiply(e,t){return new Oe(Y.Multiply,this,e,null,t)}modulo(e,t){return new Oe(Y.Modulo,this,e,null,t)}and(e,t){return new Oe(Y.And,this,e,null,t)}bitwiseOr(e,t,i=!0){return new Oe(Y.BitwiseOr,this,e,null,t,i)}bitwiseAnd(e,t,i=!0){return new Oe(Y.BitwiseAnd,this,e,null,t,i)}or(e,t){return new Oe(Y.Or,this,e,null,t)}lower(e,t){return new Oe(Y.Lower,this,e,null,t)}lowerEquals(e,t){return new Oe(Y.LowerEquals,this,e,null,t)}bigger(e,t){return new Oe(Y.Bigger,this,e,null,t)}biggerEquals(e,t){return new Oe(Y.BiggerEquals,this,e,null,t)}isBlank(e){return this.equals(Uo,e)}nullishCoalesce(e,t){return new Oe(Y.NullishCoalesce,this,e,null,t)}toStmt(){return new Tn(this,null)}}class Ni extends lt{constructor(e,t,i){super(t,i),this.name=e}isEquivalent(e){return e instanceof Ni&&this.name===e.name}isConstant(){return!1}visitExpression(e,t){return e.visitReadVarExpr(this,t)}clone(){return new Ni(this.name,this.type,this.sourceSpan)}set(e){return new qu(this.name,e,null,this.sourceSpan)}}class Fa extends lt{constructor(e,t,i){super(t,i),this.expr=e}visitExpression(e,t){return e.visitTypeofExpr(this,t)}isEquivalent(e){return e instanceof Fa&&e.expr.isEquivalent(this.expr)}isConstant(){return this.expr.isConstant()}clone(){return new Fa(this.expr.clone())}}class Pe extends lt{constructor(e,t,i){super(t,i),this.node=e}isEquivalent(e){return e instanceof Pe&&this.node===e.node}isConstant(){return!1}visitExpression(e,t){return e.visitWrappedNodeExpr(this,t)}clone(){return new Pe(this.node,this.type,this.sourceSpan)}}class qu extends lt{constructor(e,t,i,s){super(i||t.type,s),this.name=e,this.value=t}isEquivalent(e){return e instanceof qu&&this.name===e.name&&this.value.isEquivalent(e.value)}isConstant(){return!1}visitExpression(e,t){return e.visitWriteVarExpr(this,t)}clone(){return new qu(this.name,this.value.clone(),this.type,this.sourceSpan)}toDeclStmt(e,t){return new Zn(this.name,this.value,e,t,this.sourceSpan)}toConstDecl(){return this.toDeclStmt(ui,Ln.Final)}}class Ll extends lt{constructor(e,t,i,s,r){super(s||i.type,r),this.receiver=e,this.index=t,this.value=i}isEquivalent(e){return e instanceof Ll&&this.receiver.isEquivalent(e.receiver)&&this.index.isEquivalent(e.index)&&this.value.isEquivalent(e.value)}isConstant(){return!1}visitExpression(e,t){return e.visitWriteKeyExpr(this,t)}clone(){return new Ll(this.receiver.clone(),this.index.clone(),this.value.clone(),this.type,this.sourceSpan)}}class La extends lt{constructor(e,t,i,s,r){super(s||i.type,r),this.receiver=e,this.name=t,this.value=i}isEquivalent(e){return e instanceof La&&this.receiver.isEquivalent(e.receiver)&&this.name===e.name&&this.value.isEquivalent(e.value)}isConstant(){return!1}visitExpression(e,t){return e.visitWritePropExpr(this,t)}clone(){return new La(this.receiver.clone(),this.name,this.value.clone(),this.type,this.sourceSpan)}}class Yn extends lt{constructor(e,t,i,s,r=!1){super(i,s),this.fn=e,this.args=t,this.pure=r}get receiver(){return this.fn}isEquivalent(e){return e instanceof Yn&&this.fn.isEquivalent(e.fn)&&Mi(this.args,e.args)&&this.pure===e.pure}isConstant(){return!1}visitExpression(e,t){return e.visitInvokeFunctionExpr(this,t)}clone(){return new Yn(this.fn.clone(),this.args.map(e=>e.clone()),this.type,this.sourceSpan,this.pure)}}class Gu extends lt{constructor(e,t,i,s){super(i,s),this.tag=e,this.template=t}isEquivalent(e){return e instanceof Gu&&this.tag.isEquivalent(e.tag)&&UL(this.template.elements,e.template.elements,(t,i)=>t.text===i.text)&&Mi(this.template.expressions,e.template.expressions)}isConstant(){return!1}visitExpression(e,t){return e.visitTaggedTemplateExpr(this,t)}clone(){return new Gu(this.tag.clone(),this.template.clone(),this.type,this.sourceSpan)}}class Bl extends lt{constructor(e,t,i,s){super(i,s),this.classExpr=e,this.args=t}isEquivalent(e){return e instanceof Bl&&this.classExpr.isEquivalent(e.classExpr)&&Mi(this.args,e.args)}isConstant(){return!1}visitExpression(e,t){return e.visitInstantiateExpr(this,t)}clone(){return new Bl(this.classExpr.clone(),this.args.map(e=>e.clone()),this.type,this.sourceSpan)}}class pn extends lt{constructor(e,t,i){super(t,i),this.value=e}isEquivalent(e){return e instanceof pn&&this.value===e.value}isConstant(){return!0}visitExpression(e,t){return e.visitLiteralExpr(this,t)}clone(){return new pn(this.value,this.type,this.sourceSpan)}}class Wu{constructor(e,t){this.elements=e,this.expressions=t}clone(){return new Wu(this.elements.map(e=>e.clone()),this.expressions.map(e=>e.clone()))}}class Qu{constructor(e,t,i){this.text=e,this.sourceSpan=t,this.rawText=i??t?.toString()??R0(gy(e))}clone(){return new Qu(this.text,this.sourceSpan,this.rawText)}}class Yu{constructor(e,t){this.text=e,this.sourceSpan=t}}class sp{constructor(e,t,i){this.text=e,this.sourceSpan=t,this.associatedMessage=i}}class rp extends lt{constructor(e,t,i,s,r){super(py,r),this.metaBlock=e,this.messageParts=t,this.placeHolderNames=i,this.expressions=s}isEquivalent(e){return!1}isConstant(){return!1}visitExpression(e,t){return e.visitLocalizedString(this,t)}clone(){return new rp(this.metaBlock,this.messageParts,this.placeHolderNames,this.expressions.map(e=>e.clone()),this.sourceSpan)}serializeI18nHead(){let e=this.metaBlock.description||"";return this.metaBlock.meaning&&(e=`${this.metaBlock.meaning}|${e}`),this.metaBlock.customId&&(e=`${e}@@${this.metaBlock.customId}`),this.metaBlock.legacyIds&&this.metaBlock.legacyIds.forEach(t=>{e=`${e}\u241f${t}`}),HL(e,this.messageParts[0].text,this.getMessagePartSourceSpan(0))}getMessagePartSourceSpan(e){return this.messageParts[e]?.sourceSpan??this.sourceSpan}getPlaceholderSourceSpan(e){return this.placeHolderNames[e]?.sourceSpan??this.expressions[e]?.sourceSpan??this.sourceSpan}serializeI18nTemplatePart(e){const t=this.placeHolderNames[e-1],i=this.messageParts[e];let s=t.text;return 0===t.associatedMessage?.legacyIds.length&&(s+=`@@${PL(t.associatedMessage.messageString,t.associatedMessage.meaning)}`),HL(s,i.text,this.getMessagePartSourceSpan(e))}}const gy=n=>n.replace(/\\/g,"\\\\"),tie=n=>n.replace(/^:/,"\\:"),nie=n=>n.replace(/:/g,"\\:"),R0=n=>n.replace(/`/g,"\\`").replace(/\${/g,"$\\{");function HL(n,e,t){return""===n?{cooked:e,raw:R0(tie(gy(e))),range:t}:{cooked:`:${n}:${e}`,raw:R0(`:${nie(gy(n))}:${gy(e)}`),range:t}}class cr extends lt{constructor(e,t,i=null,s){super(t,s),this.value=e,this.typeParams=i}isEquivalent(e){return e instanceof cr&&this.value.name===e.value.name&&this.value.moduleName===e.value.moduleName&&this.value.runtime===e.value.runtime}isConstant(){return!1}visitExpression(e,t){return e.visitExternalExpr(this,t)}clone(){return new cr(this.value,this.type,this.typeParams,this.sourceSpan)}}class Ri extends lt{constructor(e,t,i=null,s,r){super(s||t.type,r),this.condition=e,this.falseCase=i,this.trueCase=t}isEquivalent(e){return e instanceof Ri&&this.condition.isEquivalent(e.condition)&&this.trueCase.isEquivalent(e.trueCase)&&function $L(n,e){return null==n||null==e?n==e:n.isEquivalent(e)}(this.falseCase,e.falseCase)}isConstant(){return!1}visitExpression(e,t){return e.visitConditionalExpr(this,t)}clone(){return new Ri(this.condition.clone(),this.trueCase.clone(),this.falseCase?.clone(),this.type,this.sourceSpan)}}class Ba extends lt{constructor(e,t){super(null,t),this.url=e}isEquivalent(e){return e instanceof Ba&&this.url===e.url}isConstant(){return!1}visitExpression(e,t){return e.visitDynamicImportExpr(this,t)}clone(){return new Ba(this.url,this.sourceSpan)}}class ur extends lt{constructor(e,t){super(VL,t),this.condition=e}isEquivalent(e){return e instanceof ur&&this.condition.isEquivalent(e.condition)}isConstant(){return!1}visitExpression(e,t){return e.visitNotExpr(this,t)}clone(){return new ur(this.condition.clone(),this.sourceSpan)}}class gt{constructor(e,t=null){this.name=e,this.type=t}isEquivalent(e){return this.name===e.name}clone(){return new gt(this.name,this.type)}}class Bo extends lt{constructor(e,t,i,s,r){super(i,s),this.params=e,this.statements=t,this.name=r}isEquivalent(e){return(e instanceof Bo||e instanceof Zu)&&Mi(this.params,e.params)&&Mi(this.statements,e.statements)}isConstant(){return!1}visitExpression(e,t){return e.visitFunctionExpr(this,t)}toDeclStmt(e,t){return new Zu(e,this.params,this.statements,this.type,t,this.sourceSpan)}clone(){return new Bo(this.params.map(e=>e.clone()),this.statements,this.type,this.sourceSpan,this.name)}}class Vo extends lt{constructor(e,t,i,s){super(i,s),this.params=e,this.body=t}isEquivalent(e){return!!(e instanceof Vo&&Mi(this.params,e.params))&&(this.body instanceof lt&&e.body instanceof lt?this.body.isEquivalent(e.body):!(!Array.isArray(this.body)||!Array.isArray(e.body))&&Mi(this.body,e.body))}isConstant(){return!1}visitExpression(e,t){return e.visitArrowFunctionExpr(this,t)}clone(){return new Vo(this.params.map(e=>e.clone()),Array.isArray(this.body)?this.body:this.body.clone(),this.type,this.sourceSpan)}toDeclStmt(e,t){return new Zn(e,this,ui,t,this.sourceSpan)}}class jr extends lt{constructor(e,t,i,s,r=!0){super(i||zu,s),this.operator=e,this.expr=t,this.parens=r}isEquivalent(e){return e instanceof jr&&this.operator===e.operator&&this.expr.isEquivalent(e.expr)}isConstant(){return!1}visitExpression(e,t){return e.visitUnaryOperatorExpr(this,t)}clone(){return new jr(this.operator,this.expr.clone(),this.type,this.sourceSpan,this.parens)}}class Oe extends lt{constructor(e,t,i,s,r,o=!0){super(s||t.type,r),this.operator=e,this.rhs=i,this.parens=o,this.lhs=t}isEquivalent(e){return e instanceof Oe&&this.operator===e.operator&&this.lhs.isEquivalent(e.lhs)&&this.rhs.isEquivalent(e.rhs)}isConstant(){return!1}visitExpression(e,t){return e.visitBinaryOperatorExpr(this,t)}clone(){return new Oe(this.operator,this.lhs.clone(),this.rhs.clone(),this.type,this.sourceSpan,this.parens)}}class Xn extends lt{constructor(e,t,i,s){super(i,s),this.receiver=e,this.name=t}get index(){return this.name}isEquivalent(e){return e instanceof Xn&&this.receiver.isEquivalent(e.receiver)&&this.name===e.name}isConstant(){return!1}visitExpression(e,t){return e.visitReadPropExpr(this,t)}set(e){return new La(this.receiver,this.name,e,null,this.sourceSpan)}clone(){return new Xn(this.receiver.clone(),this.name,this.type,this.sourceSpan)}}class Rs extends lt{constructor(e,t,i,s){super(i,s),this.receiver=e,this.index=t}isEquivalent(e){return e instanceof Rs&&this.receiver.isEquivalent(e.receiver)&&this.index.isEquivalent(e.index)}isConstant(){return!1}visitExpression(e,t){return e.visitReadKeyExpr(this,t)}set(e){return new Ll(this.receiver,this.index,e,null,this.sourceSpan)}clone(){return new Rs(this.receiver.clone(),this.index.clone(),this.type,this.sourceSpan)}}class Qi extends lt{constructor(e,t,i){super(t,i),this.entries=e}isConstant(){return this.entries.every(e=>e.isConstant())}isEquivalent(e){return e instanceof Qi&&Mi(this.entries,e.entries)}visitExpression(e,t){return e.visitLiteralArrayExpr(this,t)}clone(){return new Qi(this.entries.map(e=>e.clone()),this.type,this.sourceSpan)}}class Vl{constructor(e,t,i){this.key=e,this.value=t,this.quoted=i}isEquivalent(e){return this.key===e.key&&this.value.isEquivalent(e.value)}clone(){return new Vl(this.key,this.value.clone(),this.quoted)}}class gs extends lt{constructor(e,t,i){super(t,i),this.entries=e,this.valueType=null,t&&(this.valueType=t.valueType)}isEquivalent(e){return e instanceof gs&&Mi(this.entries,e.entries)}isConstant(){return this.entries.every(e=>e.value.isConstant())}visitExpression(e,t){return e.visitLiteralMapExpr(this,t)}clone(){const e=this.entries.map(t=>t.clone());return new gs(e,this.type,this.sourceSpan)}}const $o=new pn(null,null,null),Uo=new pn(null,ui,null);var Ln=function(n){return n[n.None=0]="None",n[n.Final=1]="Final",n[n.Private=2]="Private",n[n.Exported=4]="Exported",n[n.Static=8]="Static",n}(Ln||{});class P0{constructor(e,t,i){this.text=e,this.multiline=t,this.trailingNewline=i}toString(){return this.multiline?` ${this.text} `:this.text}}class O0 extends P0{constructor(e){super("",!0,!0),this.tags=e}toString(){return function cie(n){if(0===n.length)return"";if(1===n.length&&n[0].tagName&&!n[0].text)return`*${GL(n[0])} `;let e="*\n";for(const t of n)e+=" *",e+=GL(t).replace(/\n/g,"\n * "),e+="\n";return e+=" ",e}(this.tags)}}class Xu{constructor(e=Ln.None,t=null,i){this.modifiers=e,this.sourceSpan=t,this.leadingComments=i}hasModifier(e){return!!(this.modifiers&e)}addLeadingComment(e){this.leadingComments=this.leadingComments??[],this.leadingComments.push(e)}}class Zn extends Xu{constructor(e,t,i,s,r,o){super(s,r,o),this.name=e,this.value=t,this.type=i||t&&t.type||null}isEquivalent(e){return e instanceof Zn&&this.name===e.name&&(this.value?!!e.value&&this.value.isEquivalent(e.value):!e.value)}visitStatement(e,t){return e.visitDeclareVarStmt(this,t)}}class Zu extends Xu{constructor(e,t,i,s,r,o,a){super(r,o,a),this.name=e,this.params=t,this.statements=i,this.type=s||null}isEquivalent(e){return e instanceof Zu&&Mi(this.params,e.params)&&Mi(this.statements,e.statements)}visitStatement(e,t){return e.visitDeclareFunctionStmt(this,t)}}class Tn extends Xu{constructor(e,t,i){super(Ln.None,t,i),this.expr=e}isEquivalent(e){return e instanceof Tn&&this.expr.isEquivalent(e.expr)}visitStatement(e,t){return e.visitExpressionStmt(this,t)}}class ln extends Xu{constructor(e,t=null,i){super(Ln.None,t,i),this.value=e}isEquivalent(e){return e instanceof ln&&this.value.isEquivalent(e.value)}visitStatement(e,t){return e.visitReturnStmt(this,t)}}class op extends Xu{constructor(e,t,i=[],s,r){super(Ln.None,s,r),this.condition=e,this.trueCase=t,this.falseCase=i}isEquivalent(e){return e instanceof op&&this.condition.isEquivalent(e.condition)&&Mi(this.trueCase,e.trueCase)&&Mi(this.falseCase,e.falseCase)}visitStatement(e,t){return e.visitIfStmt(this,t)}}function te(n,e,t){return new Ni(n,e,t)}function z(n,e=null,t){return new cr(n,null,e,t)}function Dn(n,e,t){return new lr(n,e,t)}function Ku(n){return new Fa(n)}function le(n,e,t){return new Qi(n,e,t)}function Gt(n,e=null){return new gs(n.map(t=>new Vl(t.key,t.value,t.quoted)),e,null)}function F0(n,e){return new ur(n,e)}function dr(n,e,t,i,s){return new Bo(n,e,t,i,s)}function jt(n,e,t,i){return new Vo(n,e,t,i)}function Ju(n,e,t,i,s){return new op(n,e,t,i,s)}function vy(n,e,t,i){return new Gu(n,e,t,i)}function w(n,e,t){return new pn(n,e,t)}function L0(n){return n instanceof pn&&null===n.value}function GL(n){let e="";if(n.tagName&&(e+=` @${n.tagName}`),n.text){if(n.text.match(/\/\*|\*\//))throw new Error('JSDoc text cannot contain "/*" and "*/"');e+=" "+n.text.replace(/@/g,"\\@")}return e}const WL=te("<unknown>"),die={};class yy extends lt{constructor(e){super(e.type),this.resolved=e,this.shared=!1,this.original=e}visitExpression(e,t){return t===die?this.original.visitExpression(e,t):this.resolved.visitExpression(e,t)}isEquivalent(e){return e instanceof yy&&this.resolved.isEquivalent(e.resolved)}isConstant(){return!0}clone(){throw new Error("Not supported.")}fixup(e){this.resolved=e,this.shared=!0}}class QL{constructor(e=!1){this.isClosureCompilerEnabled=e,this.statements=[],this.literals=new Map,this.literalFactories=new Map,this.sharedConstants=new Map,this._claimedNames=new Map,this.nextNameIndex=0}getConstLiteral(e,t){if(e instanceof pn&&!YL(e)||e instanceof yy)return e;const i=ed.INSTANCE.keyOf(e);let s=this.literals.get(i),r=!1;if(s||(s=new yy(e),this.literals.set(i,s),r=!0),!r&&!s.shared||r&&t){const o=this.freshName();let a,l;this.isClosureCompilerEnabled&&YL(e)?(a=te(o).set(new Bo([],[new ln(e)])),l=te(o).callFn([])):(a=te(o).set(e),l=te(o)),this.statements.push(a.toDeclStmt(ui,Ln.Final)),s.fixup(l)}return s}getSharedConstant(e,t){const i=e.keyOf(t);if(!this.sharedConstants.has(i)){const s=this.freshName();this.sharedConstants.set(i,te(s)),this.statements.push(e.toSharedConstantDeclaration(s,t))}return this.sharedConstants.get(i)}getLiteralFactory(e){if(e instanceof Qi){const t=e.entries.map(s=>s.isConstant()?s:WL),i=ed.INSTANCE.keyOf(le(t));return this._getLiteralFactory(i,e.entries,s=>le(s))}{const t=Gt(e.entries.map(s=>({key:s.key,value:s.value.isConstant()?s.value:WL,quoted:s.quoted}))),i=ed.INSTANCE.keyOf(t);return this._getLiteralFactory(i,e.entries.map(s=>s.value),s=>Gt(s.map((r,o)=>({key:e.entries[o].key,value:r,quoted:e.entries[o].quoted}))))}}getSharedFunctionReference(e,t,i=!0){const s=e instanceof Vo;for(const o of this.statements)if(s&&o instanceof Zn&&o.value?.isEquivalent(e)||!s&&o instanceof Zu&&e.isEquivalent(o))return te(o.name);const r=i?this.uniqueName(t):t;return this.statements.push(e.toDeclStmt(r,Ln.Final)),te(r)}_getLiteralFactory(e,t,i){let s=this.literalFactories.get(e);const r=t.filter(o=>!o.isConstant());if(!s){const o=t.map((u,d)=>u.isConstant()?this.getConstLiteral(u,!0):te(`a${d}`)),l=jt(o.filter(fie).map(u=>new gt(u.name,Ms)),i(o),ui),c=this.freshName();this.statements.push(te(c).set(l).toDeclStmt(ui,Ln.Final)),s=te(c),this.literalFactories.set(e,s)}return{literalFactory:s,literalFactoryArguments:r}}uniqueName(e,t=!0){const i=this._claimedNames.get(e)??0,s=0!==i||t?`${e}${i}`:`${e}`;return this._claimedNames.set(e,i+1),s}freshName(){return this.uniqueName("_c")}}class ed{static{this.INSTANCE=new ed}keyOf(e){if(e instanceof pn&&"string"==typeof e.value)return`"${e.value}"`;if(e instanceof pn)return String(e.value);if(e instanceof Qi){const t=[];for(const i of e.entries)t.push(this.keyOf(i));return`[${t.join(",")}]`}if(e instanceof gs){const t=[];for(const i of e.entries){let s=i.key;i.quoted&&(s=`"${s}"`),t.push(s+":"+this.keyOf(i.value))}return`{${t.join(",")}}`}if(e instanceof cr)return`import("${e.value.moduleName}", ${e.value.name})`;if(e instanceof Ni)return`read(${e.name})`;if(e instanceof Fa)return`typeof(${this.keyOf(e.expr)})`;throw new Error(`${this.constructor.name} does not handle expressions of type ${e.constructor.name}`)}}function fie(n){return n instanceof Ni}function YL(n){return n instanceof pn&&"string"==typeof n.value&&n.value.length>=50}const C="@angular/core";let m=(()=>{class n{static{this.NEW_METHOD="factory"}static{this.TRANSFORM_METHOD="transform"}static{this.PATCH_DEPS="patchedDeps"}static{this.core={name:null,moduleName:C}}static{this.namespaceHTML={name:"\u0275\u0275namespaceHTML",moduleName:C}}static{this.namespaceMathML={name:"\u0275\u0275namespaceMathML",moduleName:C}}static{this.namespaceSVG={name:"\u0275\u0275namespaceSVG",moduleName:C}}static{this.element={name:"\u0275\u0275element",moduleName:C}}static{this.elementStart={name:"\u0275\u0275elementStart",moduleName:C}}static{this.elementEnd={name:"\u0275\u0275elementEnd",moduleName:C}}static{this.advance={name:"\u0275\u0275advance",moduleName:C}}static{this.syntheticHostProperty={name:"\u0275\u0275syntheticHostProperty",moduleName:C}}static{this.syntheticHostListener={name:"\u0275\u0275syntheticHostListener",moduleName:C}}static{this.attribute={name:"\u0275\u0275attribute",moduleName:C}}static{this.attributeInterpolate1={name:"\u0275\u0275attributeInterpolate1",moduleName:C}}static{this.attributeInterpolate2={name:"\u0275\u0275attributeInterpolate2",moduleName:C}}static{this.attributeInterpolate3={name:"\u0275\u0275attributeInterpolate3",moduleName:C}}static{this.attributeInterpolate4={name:"\u0275\u0275attributeInterpolate4",moduleName:C}}static{this.attributeInterpolate5={name:"\u0275\u0275attributeInterpolate5",moduleName:C}}static{this.attributeInterpolate6={name:"\u0275\u0275attributeInterpolate6",moduleName:C}}static{this.attributeInterpolate7={name:"\u0275\u0275attributeInterpolate7",moduleName:C}}static{this.attributeInterpolate8={name:"\u0275\u0275attributeInterpolate8",moduleName:C}}static{this.attributeInterpolateV={name:"\u0275\u0275attributeInterpolateV",moduleName:C}}static{this.classProp={name:"\u0275\u0275classProp",moduleName:C}}static{this.elementContainerStart={name:"\u0275\u0275elementContainerStart",moduleName:C}}static{this.elementContainerEnd={name:"\u0275\u0275elementContainerEnd",moduleName:C}}static{this.elementContainer={name:"\u0275\u0275elementContainer",moduleName:C}}static{this.styleMap={name:"\u0275\u0275styleMap",moduleName:C}}static{this.styleMapInterpolate1={name:"\u0275\u0275styleMapInterpolate1",moduleName:C}}static{this.styleMapInterpolate2={name:"\u0275\u0275styleMapInterpolate2",moduleName:C}}static{this.styleMapInterpolate3={name:"\u0275\u0275styleMapInterpolate3",moduleName:C}}static{this.styleMapInterpolate4={name:"\u0275\u0275styleMapInterpolate4",moduleName:C}}static{this.styleMapInterpolate5={name:"\u0275\u0275styleMapInterpolate5",moduleName:C}}static{this.styleMapInterpolate6={name:"\u0275\u0275styleMapInterpolate6",moduleName:C}}static{this.styleMapInterpolate7={name:"\u0275\u0275styleMapInterpolate7",moduleName:C}}static{this.styleMapInterpolate8={name:"\u0275\u0275styleMapInterpolate8",moduleName:C}}static{this.styleMapInterpolateV={name:"\u0275\u0275styleMapInterpolateV",moduleName:C}}static{this.classMap={name:"\u0275\u0275classMap",moduleName:C}}static{this.classMapInterpolate1={name:"\u0275\u0275classMapInterpolate1",moduleName:C}}static{this.classMapInterpolate2={name:"\u0275\u0275classMapInterpolate2",moduleName:C}}static{this.classMapInterpolate3={name:"\u0275\u0275classMapInterpolate3",moduleName:C}}static{this.classMapInterpolate4={name:"\u0275\u0275classMapInterpolate4",moduleName:C}}static{this.classMapInterpolate5={name:"\u0275\u0275classMapInterpolate5",moduleName:C}}static{this.classMapInterpolate6={name:"\u0275\u0275classMapInterpolate6",moduleName:C}}static{this.classMapInterpolate7={name:"\u0275\u0275classMapInterpolate7",moduleName:C}}static{this.classMapInterpolate8={name:"\u0275\u0275classMapInterpolate8",moduleName:C}}static{this.classMapInterpolateV={name:"\u0275\u0275classMapInterpolateV",moduleName:C}}static{this.styleProp={name:"\u0275\u0275styleProp",moduleName:C}}static{this.stylePropInterpolate1={name:"\u0275\u0275stylePropInterpolate1",moduleName:C}}static{this.stylePropInterpolate2={name:"\u0275\u0275stylePropInterpolate2",moduleName:C}}static{this.stylePropInterpolate3={name:"\u0275\u0275stylePropInterpolate3",moduleName:C}}static{this.stylePropInterpolate4={name:"\u0275\u0275stylePropInterpolate4",moduleName:C}}static{this.stylePropInterpolate5={name:"\u0275\u0275stylePropInterpolate5",moduleName:C}}static{this.stylePropInterpolate6={name:"\u0275\u0275stylePropInterpolate6",moduleName:C}}static{this.stylePropInterpolate7={name:"\u0275\u0275stylePropInterpolate7",moduleName:C}}static{this.stylePropInterpolate8={name:"\u0275\u0275stylePropInterpolate8",moduleName:C}}static{this.stylePropInterpolateV={name:"\u0275\u0275stylePropInterpolateV",moduleName:C}}static{this.nextContext={name:"\u0275\u0275nextContext",moduleName:C}}static{this.resetView={name:"\u0275\u0275resetView",moduleName:C}}static{this.templateCreate={name:"\u0275\u0275template",moduleName:C}}static{this.defer={name:"\u0275\u0275defer",moduleName:C}}static{this.deferWhen={name:"\u0275\u0275deferWhen",moduleName:C}}static{this.deferOnIdle={name:"\u0275\u0275deferOnIdle",moduleName:C}}static{this.deferOnImmediate={name:"\u0275\u0275deferOnImmediate",moduleName:C}}static{this.deferOnTimer={name:"\u0275\u0275deferOnTimer",moduleName:C}}static{this.deferOnHover={name:"\u0275\u0275deferOnHover",moduleName:C}}static{this.deferOnInteraction={name:"\u0275\u0275deferOnInteraction",moduleName:C}}static{this.deferOnViewport={name:"\u0275\u0275deferOnViewport",moduleName:C}}static{this.deferPrefetchWhen={name:"\u0275\u0275deferPrefetchWhen",moduleName:C}}static{this.deferPrefetchOnIdle={name:"\u0275\u0275deferPrefetchOnIdle",moduleName:C}}static{this.deferPrefetchOnImmediate={name:"\u0275\u0275deferPrefetchOnImmediate",moduleName:C}}static{this.deferPrefetchOnTimer={name:"\u0275\u0275deferPrefetchOnTimer",moduleName:C}}static{this.deferPrefetchOnHover={name:"\u0275\u0275deferPrefetchOnHover",moduleName:C}}static{this.deferPrefetchOnInteraction={name:"\u0275\u0275deferPrefetchOnInteraction",moduleName:C}}static{this.deferPrefetchOnViewport={name:"\u0275\u0275deferPrefetchOnViewport",moduleName:C}}static{this.deferEnableTimerScheduling={name:"\u0275\u0275deferEnableTimerScheduling",moduleName:C}}static{this.conditional={name:"\u0275\u0275conditional",moduleName:C}}static{this.repeater={name:"\u0275\u0275repeater",moduleName:C}}static{this.repeaterCreate={name:"\u0275\u0275repeaterCreate",moduleName:C}}static{this.repeaterTrackByIndex={name:"\u0275\u0275repeaterTrackByIndex",moduleName:C}}static{this.repeaterTrackByIdentity={name:"\u0275\u0275repeaterTrackByIdentity",moduleName:C}}static{this.componentInstance={name:"\u0275\u0275componentInstance",moduleName:C}}static{this.text={name:"\u0275\u0275text",moduleName:C}}static{this.enableBindings={name:"\u0275\u0275enableBindings",moduleName:C}}static{this.disableBindings={name:"\u0275\u0275disableBindings",moduleName:C}}static{this.getCurrentView={name:"\u0275\u0275getCurrentView",moduleName:C}}static{this.textInterpolate={name:"\u0275\u0275textInterpolate",moduleName:C}}static{this.textInterpolate1={name:"\u0275\u0275textInterpolate1",moduleName:C}}static{this.textInterpolate2={name:"\u0275\u0275textInterpolate2",moduleName:C}}static{this.textInterpolate3={name:"\u0275\u0275textInterpolate3",moduleName:C}}static{this.textInterpolate4={name:"\u0275\u0275textInterpolate4",moduleName:C}}static{this.textInterpolate5={name:"\u0275\u0275textInterpolate5",moduleName:C}}static{this.textInterpolate6={name:"\u0275\u0275textInterpolate6",moduleName:C}}static{this.textInterpolate7={name:"\u0275\u0275textInterpolate7",moduleName:C}}static{this.textInterpolate8={name:"\u0275\u0275textInterpolate8",moduleName:C}}static{this.textInterpolateV={name:"\u0275\u0275textInterpolateV",moduleName:C}}static{this.restoreView={name:"\u0275\u0275restoreView",moduleName:C}}static{this.pureFunction0={name:"\u0275\u0275pureFunction0",moduleName:C}}static{this.pureFunction1={name:"\u0275\u0275pureFunction1",moduleName:C}}static{this.pureFunction2={name:"\u0275\u0275pureFunction2",moduleName:C}}static{this.pureFunction3={name:"\u0275\u0275pureFunction3",moduleName:C}}static{this.pureFunction4={name:"\u0275\u0275pureFunction4",moduleName:C}}static{this.pureFunction5={name:"\u0275\u0275pureFunction5",moduleName:C}}static{this.pureFunction6={name:"\u0275\u0275pureFunction6",moduleName:C}}static{this.pureFunction7={name:"\u0275\u0275pureFunction7",moduleName:C}}static{this.pureFunction8={name:"\u0275\u0275pureFunction8",moduleName:C}}static{this.pureFunctionV={name:"\u0275\u0275pureFunctionV",moduleName:C}}static{this.pipeBind1={name:"\u0275\u0275pipeBind1",moduleName:C}}static{this.pipeBind2={name:"\u0275\u0275pipeBind2",moduleName:C}}static{this.pipeBind3={name:"\u0275\u0275pipeBind3",moduleName:C}}static{this.pipeBind4={name:"\u0275\u0275pipeBind4",moduleName:C}}static{this.pipeBindV={name:"\u0275\u0275pipeBindV",moduleName:C}}static{this.hostProperty={name:"\u0275\u0275hostProperty",moduleName:C}}static{this.property={name:"\u0275\u0275property",moduleName:C}}static{this.propertyInterpolate={name:"\u0275\u0275propertyInterpolate",moduleName:C}}static{this.propertyInterpolate1={name:"\u0275\u0275propertyInterpolate1",moduleName:C}}static{this.propertyInterpolate2={name:"\u0275\u0275propertyInterpolate2",moduleName:C}}static{this.propertyInterpolate3={name:"\u0275\u0275propertyInterpolate3",moduleName:C}}static{this.propertyInterpolate4={name:"\u0275\u0275propertyInterpolate4",moduleName:C}}static{this.propertyInterpolate5={name:"\u0275\u0275propertyInterpolate5",moduleName:C}}static{this.propertyInterpolate6={name:"\u0275\u0275propertyInterpolate6",moduleName:C}}static{this.propertyInterpolate7={name:"\u0275\u0275propertyInterpolate7",moduleName:C}}static{this.propertyInterpolate8={name:"\u0275\u0275propertyInterpolate8",moduleName:C}}static{this.propertyInterpolateV={name:"\u0275\u0275propertyInterpolateV",moduleName:C}}static{this.i18n={name:"\u0275\u0275i18n",moduleName:C}}static{this.i18nAttributes={name:"\u0275\u0275i18nAttributes",moduleName:C}}static{this.i18nExp={name:"\u0275\u0275i18nExp",moduleName:C}}static{this.i18nStart={name:"\u0275\u0275i18nStart",moduleName:C}}static{this.i18nEnd={name:"\u0275\u0275i18nEnd",moduleName:C}}static{this.i18nApply={name:"\u0275\u0275i18nApply",moduleName:C}}static{this.i18nPostprocess={name:"\u0275\u0275i18nPostprocess",moduleName:C}}static{this.pipe={name:"\u0275\u0275pipe",moduleName:C}}static{this.projection={name:"\u0275\u0275projection",moduleName:C}}static{this.projectionDef={name:"\u0275\u0275projectionDef",moduleName:C}}static{this.reference={name:"\u0275\u0275reference",moduleName:C}}static{this.inject={name:"\u0275\u0275inject",moduleName:C}}static{this.injectAttribute={name:"\u0275\u0275injectAttribute",moduleName:C}}static{this.directiveInject={name:"\u0275\u0275directiveInject",moduleName:C}}static{this.invalidFactory={name:"\u0275\u0275invalidFactory",moduleName:C}}static{this.invalidFactoryDep={name:"\u0275\u0275invalidFactoryDep",moduleName:C}}static{this.templateRefExtractor={name:"\u0275\u0275templateRefExtractor",moduleName:C}}static{this.forwardRef={name:"forwardRef",moduleName:C}}static{this.resolveForwardRef={name:"resolveForwardRef",moduleName:C}}static{this.\u0275\u0275defineInjectable={name:"\u0275\u0275defineInjectable",moduleName:C}}static{this.declareInjectable={name:"\u0275\u0275ngDeclareInjectable",moduleName:C}}static{this.InjectableDeclaration={name:"\u0275\u0275InjectableDeclaration",moduleName:C}}static{this.resolveWindow={name:"\u0275\u0275resolveWindow",moduleName:C}}static{this.resolveDocument={name:"\u0275\u0275resolveDocument",moduleName:C}}static{this.resolveBody={name:"\u0275\u0275resolveBody",moduleName:C}}static{this.getComponentDepsFactory={name:"\u0275\u0275getComponentDepsFactory",moduleName:C}}static{this.defineComponent={name:"\u0275\u0275defineComponent",moduleName:C}}static{this.declareComponent={name:"\u0275\u0275ngDeclareComponent",moduleName:C}}static{this.setComponentScope={name:"\u0275\u0275setComponentScope",moduleName:C}}static{this.ChangeDetectionStrategy={name:"ChangeDetectionStrategy",moduleName:C}}static{this.ViewEncapsulation={name:"ViewEncapsulation",moduleName:C}}static{this.ComponentDeclaration={name:"\u0275\u0275ComponentDeclaration",moduleName:C}}static{this.FactoryDeclaration={name:"\u0275\u0275FactoryDeclaration",moduleName:C}}static{this.declareFactory={name:"\u0275\u0275ngDeclareFactory",moduleName:C}}static{this.FactoryTarget={name:"\u0275\u0275FactoryTarget",moduleName:C}}static{this.defineDirective={name:"\u0275\u0275defineDirective",moduleName:C}}static{this.declareDirective={name:"\u0275\u0275ngDeclareDirective",moduleName:C}}static{this.DirectiveDeclaration={name:"\u0275\u0275DirectiveDeclaration",moduleName:C}}static{this.InjectorDef={name:"\u0275\u0275InjectorDef",moduleName:C}}static{this.InjectorDeclaration={name:"\u0275\u0275InjectorDeclaration",moduleName:C}}static{this.defineInjector={name:"\u0275\u0275defineInjector",moduleName:C}}static{this.declareInjector={name:"\u0275\u0275ngDeclareInjector",moduleName:C}}static{this.NgModuleDeclaration={name:"\u0275\u0275NgModuleDeclaration",moduleName:C}}static{this.ModuleWithProviders={name:"ModuleWithProviders",moduleName:C}}static{this.defineNgModule={name:"\u0275\u0275defineNgModule",moduleName:C}}static{this.declareNgModule={name:"\u0275\u0275ngDeclareNgModule",moduleName:C}}static{this.setNgModuleScope={name:"\u0275\u0275setNgModuleScope",moduleName:C}}static{this.registerNgModuleType={name:"\u0275\u0275registerNgModuleType",moduleName:C}}static{this.PipeDeclaration={name:"\u0275\u0275PipeDeclaration",moduleName:C}}static{this.definePipe={name:"\u0275\u0275definePipe",moduleName:C}}static{this.declarePipe={name:"\u0275\u0275ngDeclarePipe",moduleName:C}}static{this.declareClassMetadata={name:"\u0275\u0275ngDeclareClassMetadata",moduleName:C}}static{this.setClassMetadata={name:"\u0275setClassMetadata",moduleName:C}}static{this.setClassMetadataAsync={name:"\u0275setClassMetadataAsync",moduleName:C}}static{this.setClassDebugInfo={name:"\u0275setClassDebugInfo",moduleName:C}}static{this.queryRefresh={name:"\u0275\u0275queryRefresh",moduleName:C}}static{this.viewQuery={name:"\u0275\u0275viewQuery",moduleName:C}}static{this.loadQuery={name:"\u0275\u0275loadQuery",moduleName:C}}static{this.contentQuery={name:"\u0275\u0275contentQuery",moduleName:C}}static{this.viewQuerySignal={name:"\u0275\u0275viewQuerySignal",moduleName:C}}static{this.contentQuerySignal={name:"\u0275\u0275contentQuerySignal",moduleName:C}}static{this.queryAdvance={name:"\u0275\u0275queryAdvance",moduleName:C}}static{this.twoWayProperty={name:"\u0275\u0275twoWayProperty",moduleName:C}}static{this.twoWayBindingSet={name:"\u0275\u0275twoWayBindingSet",moduleName:C}}static{this.twoWayListener={name:"\u0275\u0275twoWayListener",moduleName:C}}static{this.NgOnChangesFeature={name:"\u0275\u0275NgOnChangesFeature",moduleName:C}}static{this.InheritDefinitionFeature={name:"\u0275\u0275InheritDefinitionFeature",moduleName:C}}static{this.CopyDefinitionFeature={name:"\u0275\u0275CopyDefinitionFeature",moduleName:C}}static{this.StandaloneFeature={name:"\u0275\u0275StandaloneFeature",moduleName:C}}static{this.ProvidersFeature={name:"\u0275\u0275ProvidersFeature",moduleName:C}}static{this.HostDirectivesFeature={name:"\u0275\u0275HostDirectivesFeature",moduleName:C}}static{this.InputTransformsFeatureFeature={name:"\u0275\u0275InputTransformsFeature",moduleName:C}}static{this.listener={name:"\u0275\u0275listener",moduleName:C}}static{this.getInheritedFactory={name:"\u0275\u0275getInheritedFactory",moduleName:C}}static{this.InputFlags={name:"\u0275\u0275InputFlags",moduleName:C}}static{this.sanitizeHtml={name:"\u0275\u0275sanitizeHtml",moduleName:C}}static{this.sanitizeStyle={name:"\u0275\u0275sanitizeStyle",moduleName:C}}static{this.sanitizeResourceUrl={name:"\u0275\u0275sanitizeResourceUrl",moduleName:C}}static{this.sanitizeScript={name:"\u0275\u0275sanitizeScript",moduleName:C}}static{this.sanitizeUrl={name:"\u0275\u0275sanitizeUrl",moduleName:C}}static{this.sanitizeUrlOrResourceUrl={name:"\u0275\u0275sanitizeUrlOrResourceUrl",moduleName:C}}static{this.trustConstantHtml={name:"\u0275\u0275trustConstantHtml",moduleName:C}}static{this.trustConstantResourceUrl={name:"\u0275\u0275trustConstantResourceUrl",moduleName:C}}static{this.validateIframeAttribute={name:"\u0275\u0275validateIframeAttribute",moduleName:C}}static{this.InputSignalBrandWriteType={name:"\u0275INPUT_SIGNAL_BRAND_WRITE_TYPE",moduleName:C}}static{this.UnwrapDirectiveSignalInputs={name:"\u0275UnwrapDirectiveSignalInputs",moduleName:C}}static{this.unwrapWritableSignal={name:"\u0275unwrapWritableSignal",moduleName:C}}}return n})();const pie=/-+([a-z0-9])/g;function XL(n,e,t){const i=n.indexOf(e);return-1==i?t:[n.slice(0,i).trim(),n.slice(i+1).trim()]}function _y(n){throw new Error(`Internal Error: ${n}`)}function ZL(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ZL).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;if(!n.toString)return"object";const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}const ap=globalThis;class Sie{constructor(e=null){this.file=e,this.sourcesContent=new Map,this.lines=[],this.lastCol0=0,this.hasMappings=!1}addSource(e,t=null){return this.sourcesContent.has(e)||this.sourcesContent.set(e,t),this}addLine(){return this.lines.push([]),this.lastCol0=0,this}addMapping(e,t,i,s){if(!this.currentLine)throw new Error("A line must be added before mappings can be added");if(null!=t&&!this.sourcesContent.has(t))throw new Error(`Unknown source file "${t}"`);if(null==e)throw new Error("The column in the generated code must be provided");if(e<this.lastCol0)throw new Error("Mapping should be added in output order");if(t&&(null==i||null==s))throw new Error("The source location must be provided when a source url is provided");return this.hasMappings=!0,this.lastCol0=e,this.currentLine.push({col0:e,sourceUrl:t,sourceLine0:i,sourceCol0:s}),this}get currentLine(){return this.lines.slice(-1)[0]}toJSON(){if(!this.hasMappings)return null;const e=new Map,t=[],i=[];Array.from(this.sourcesContent.keys()).forEach((c,u)=>{e.set(c,u),t.push(c),i.push(this.sourcesContent.get(c)||null)});let s="",r=0,o=0,a=0,l=0;return this.lines.forEach(c=>{r=0,s+=c.map(u=>{let d=wy(u.col0-r);return r=u.col0,null!=u.sourceUrl&&(d+=wy(e.get(u.sourceUrl)-o),o=e.get(u.sourceUrl),d+=wy(u.sourceLine0-a),a=u.sourceLine0,d+=wy(u.sourceCol0-l),l=u.sourceCol0),d}).join(","),s+=";"}),s=s.slice(0,-1),{file:this.file||"",version:3,sourceRoot:"",sources:t,sourcesContent:i,mappings:s}}toJsComment(){return this.hasMappings?"//# sourceMappingURL=data:application/json;base64,"+function Iie(n){let e="";const t=function _ie(n){let e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i>=55296&&i<=56319&&n.length>t+1){const s=n.charCodeAt(t+1);s>=56320&&s<=57343&&(t++,i=(i-55296<<10)+s-56320+65536)}i<=127?e.push(i):i<=2047?e.push(i>>6&31|192,63&i|128):i<=65535?e.push(i>>12|224,i>>6&63|128,63&i|128):i<=2097151&&e.push(i>>18&7|240,i>>12&63|128,i>>6&63|128,63&i|128)}return e}(n);for(let i=0;i<t.length;){const s=t[i++],r=i<t.length?t[i++]:null,o=i<t.length?t[i++]:null;e+=lp(s>>2),e+=lp((3&s)<<4|(null===r?0:r>>4)),e+=null===r?"=":lp((15&r)<<2|(null===o?0:o>>6)),e+=null===r||null===o?"=":lp(63&o)}return e}(JSON.stringify(this,null,0)):""}}function wy(n){n=n<0?1+(-n<<1):n<<1;let e="";do{let t=31&n;(n>>=5)>0&&(t|=32),e+=lp(t)}while(n>0);return e}const xie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function lp(n){if(n<0||n>=64)throw new Error("Can only encode value in the range [0, 63]");return xie[n]}const Tie=/'|\\|\n|\r|\$/g,Die=/^[$A-Z_][0-9A-Z_$]*$/i;class KL{constructor(e){this.indent=e,this.partsLength=0,this.parts=[],this.srcSpans=[]}}class V0{static createRoot(){return new V0(0)}constructor(e){this._indent=e,this._lines=[new KL(e)]}get _currentLine(){return this._lines[this._lines.length-1]}println(e,t=""){this.print(e||null,t,!0)}lineIsEmpty(){return 0===this._currentLine.parts.length}lineLength(){return 2*this._currentLine.indent+this._currentLine.partsLength}print(e,t,i=!1){t.length>0&&(this._currentLine.parts.push(t),this._currentLine.partsLength+=t.length,this._currentLine.srcSpans.push(e&&e.sourceSpan||null)),i&&this._lines.push(new KL(this._indent))}removeEmptyLastLine(){this.lineIsEmpty()&&this._lines.pop()}incIndent(){this._indent++,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}decIndent(){this._indent--,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}toSource(){return this.sourceLines.map(e=>e.parts.length>0?JL(e.indent)+e.parts.join(""):"").join("\n")}toSourceMapGenerator(e,t=0){const i=new Sie(e);let s=!1;const r=()=>{s||(i.addSource(e," ").addMapping(0,e,0,0),s=!0)};for(let o=0;o<t;o++)i.addLine(),r();return this.sourceLines.forEach((o,a)=>{i.addLine();const l=o.srcSpans,c=o.parts;let u=2*o.indent,d=0;for(;d<l.length&&!l[d];)u+=c[d].length,d++;for(d<l.length&&0===a&&0===u?s=!0:r();d<l.length;){const h=l[d],f=h.start.file,p=h.start.line,g=h.start.col;for(i.addSource(f.url,f.content).addMapping(u,f.url,p,g),u+=c[d].length,d++;d<l.length&&(h===l[d]||!l[d]);)u+=c[d].length,d++}}),i}spanOf(e,t){const i=this._lines[e];if(i){let s=t-JL(i.indent).length;for(let r=0;r<i.parts.length;r++){const o=i.parts[r];if(o.length>s)return i.srcSpans[r];s-=o.length}}return null}get sourceLines(){return this._lines.length&&0===this._lines[this._lines.length-1].parts.length?this._lines.slice(0,-1):this._lines}}class Aie{constructor(e){this._escapeDollarInStrings=e}printLeadingComments(e,t){if(void 0!==e.leadingComments)for(const i of e.leadingComments)i instanceof O0?t.print(e,`/*${i.toString()}*/`,i.trailingNewline):i.multiline?t.print(e,`/* ${i.text} */`,i.trailingNewline):i.text.split("\n").forEach(s=>{t.println(e,`// ${s}`)})}visitExpressionStmt(e,t){return this.printLeadingComments(e,t),e.expr.visitExpression(this,t),t.println(e,";"),null}visitReturnStmt(e,t){return this.printLeadingComments(e,t),t.print(e,"return "),e.value.visitExpression(this,t),t.println(e,";"),null}visitIfStmt(e,t){this.printLeadingComments(e,t),t.print(e,"if ("),e.condition.visitExpression(this,t),t.print(e,") {");const i=null!=e.falseCase&&e.falseCase.length>0;return e.trueCase.length<=1&&!i?(t.print(e," "),this.visitAllStatements(e.trueCase,t),t.removeEmptyLastLine(),t.print(e," ")):(t.println(),t.incIndent(),this.visitAllStatements(e.trueCase,t),t.decIndent(),i&&(t.println(e,"} else {"),t.incIndent(),this.visitAllStatements(e.falseCase,t),t.decIndent())),t.println(e,"}"),null}visitWriteVarExpr(e,t){const i=t.lineIsEmpty();return i||t.print(e,"("),t.print(e,`${e.name} = `),e.value.visitExpression(this,t),i||t.print(e,")"),null}visitWriteKeyExpr(e,t){const i=t.lineIsEmpty();return i||t.print(e,"("),e.receiver.visitExpression(this,t),t.print(e,"["),e.index.visitExpression(this,t),t.print(e,"] = "),e.value.visitExpression(this,t),i||t.print(e,")"),null}visitWritePropExpr(e,t){const i=t.lineIsEmpty();return i||t.print(e,"("),e.receiver.visitExpression(this,t),t.print(e,`.${e.name} = `),e.value.visitExpression(this,t),i||t.print(e,")"),null}visitInvokeFunctionExpr(e,t){const i=e.fn instanceof Vo;return i&&t.print(e.fn,"("),e.fn.visitExpression(this,t),i&&t.print(e.fn,")"),t.print(e,"("),this.visitAllExpressions(e.args,t,","),t.print(e,")"),null}visitTaggedTemplateExpr(e,t){e.tag.visitExpression(this,t),t.print(e,"`"+e.template.elements[0].rawText);for(let i=1;i<e.template.elements.length;i++)t.print(e,"${"),e.template.expressions[i-1].visitExpression(this,t),t.print(e,`}${e.template.elements[i].rawText}`);return t.print(e,"`"),null}visitWrappedNodeExpr(e,t){throw new Error("Abstract emitter cannot visit WrappedNodeExpr.")}visitTypeofExpr(e,t){t.print(e,"typeof "),e.expr.visitExpression(this,t)}visitReadVarExpr(e,t){return t.print(e,e.name),null}visitInstantiateExpr(e,t){return t.print(e,"new "),e.classExpr.visitExpression(this,t),t.print(e,"("),this.visitAllExpressions(e.args,t,","),t.print(e,")"),null}visitLiteralExpr(e,t){const i=e.value;return t.print(e,"string"==typeof i?$l(i,this._escapeDollarInStrings):`${i}`),null}visitLocalizedString(e,t){const i=e.serializeI18nHead();t.print(e,"$localize `"+i.raw);for(let s=1;s<e.messageParts.length;s++)t.print(e,"${"),e.expressions[s-1].visitExpression(this,t),t.print(e,`}${e.serializeI18nTemplatePart(s).raw}`);return t.print(e,"`"),null}visitConditionalExpr(e,t){return t.print(e,"("),e.condition.visitExpression(this,t),t.print(e,"? "),e.trueCase.visitExpression(this,t),t.print(e,": "),e.falseCase.visitExpression(this,t),t.print(e,")"),null}visitDynamicImportExpr(e,t){t.print(e,`import(${e.url})`)}visitNotExpr(e,t){return t.print(e,"!"),e.condition.visitExpression(this,t),null}visitUnaryOperatorExpr(e,t){let i;switch(e.operator){case Oa.Plus:i="+";break;case Oa.Minus:i="-";break;default:throw new Error(`Unknown operator ${e.operator}`)}return e.parens&&t.print(e,"("),t.print(e,i),e.expr.visitExpression(this,t),e.parens&&t.print(e,")"),null}visitBinaryOperatorExpr(e,t){let i;switch(e.operator){case Y.Equals:i="==";break;case Y.Identical:i="===";break;case Y.NotEquals:i="!=";break;case Y.NotIdentical:i="!==";break;case Y.And:i="&&";break;case Y.BitwiseOr:i="|";break;case Y.BitwiseAnd:i="&";break;case Y.Or:i="||";break;case Y.Plus:i="+";break;case Y.Minus:i="-";break;case Y.Divide:i="/";break;case Y.Multiply:i="*";break;case Y.Modulo:i="%";break;case Y.Lower:i="<";break;case Y.LowerEquals:i="<=";break;case Y.Bigger:i=">";break;case Y.BiggerEquals:i=">=";break;case Y.NullishCoalesce:i="??";break;default:throw new Error(`Unknown operator ${e.operator}`)}return e.parens&&t.print(e,"("),e.lhs.visitExpression(this,t),t.print(e,` ${i} `),e.rhs.visitExpression(this,t),e.parens&&t.print(e,")"),null}visitReadPropExpr(e,t){return e.receiver.visitExpression(this,t),t.print(e,"."),t.print(e,e.name),null}visitReadKeyExpr(e,t){return e.receiver.visitExpression(this,t),t.print(e,"["),e.index.visitExpression(this,t),t.print(e,"]"),null}visitLiteralArrayExpr(e,t){return t.print(e,"["),this.visitAllExpressions(e.entries,t,","),t.print(e,"]"),null}visitLiteralMapExpr(e,t){return t.print(e,"{"),this.visitAllObjects(i=>{t.print(e,`${$l(i.key,this._escapeDollarInStrings,i.quoted)}:`),i.value.visitExpression(this,t)},e.entries,t,","),t.print(e,"}"),null}visitCommaExpr(e,t){return t.print(e,"("),this.visitAllExpressions(e.parts,t,","),t.print(e,")"),null}visitAllExpressions(e,t,i){this.visitAllObjects(s=>s.visitExpression(this,t),e,t,i)}visitAllObjects(e,t,i,s){let r=!1;for(let o=0;o<t.length;o++)o>0&&(i.lineLength()>80?(i.print(null,s,!0),r||(i.incIndent(),i.incIndent(),r=!0)):i.print(null,s,!1)),e(t[o]);r&&(i.decIndent(),i.decIndent())}visitAllStatements(e,t){e.forEach(i=>i.visitStatement(this,t))}}function $l(n,e,t=!0){if(null==n)return null;const i=n.replace(Tie,(...r)=>"$"==r[0]?e?"\\$":"$":"\n"==r[0]?"\\n":"\r"==r[0]?"\\r":`\\${r[0]}`);return t||!Die.test(i)?`'${i}'`:i}function JL(n){let e="";for(let t=0;t<n;t++)e+="  ";return e}function Ey(n,e){if(0===e)return Dn(n);const t=[];for(let i=0;i<e;i++)t.push(Ms);return Dn(n,void 0,t)}const eB="@";function tB(n){return`${eB}${n}`}function Mie(n,e){const t=$l(e,!1,!1);return t!==e?`${n}[${t}]`:`${n}.${e}`}function nB(n,e){return`animation_${n}_${e}`}function An(n){const e=new Pe(n);return{value:e,type:e}}function hr(n,e){const t=le(n.map(i=>i.value));return e?jt([],t):t}function U0(n,e){return{expression:n,forwardRef:e}}function td({expression:n,forwardRef:e}){switch(e){case 0:case 1:return n;case 2:return function j0(n){return z(m.forwardRef).callFn([jt([],n)])}(n)}}var by=function(n){return n[n.Class=0]="Class",n[n.Function=1]="Function",n}(by||{}),Hr=function(n){return n[n.Directive=0]="Directive",n[n.Component=1]="Component",n[n.Injectable=2]="Injectable",n[n.Pipe=3]="Pipe",n[n.NgModule=4]="NgModule",n}(Hr||{});function Ul(n){const e=te("t");let t=null;const i=oB(n)?e:new Oe(Y.Or,e,n.type.value);let s=null;null!==n.deps?"invalid"!==n.deps&&(s=new Bl(i,rB(n.deps,n.target))):(t=te(`\u0275${n.name}_BaseFactory`),s=t.callFn([i]));const r=[];let o=null;function a(c){const u=te("r");r.push(u.set($o).toDeclStmt());const d=null!==s?u.set(s).toStmt():z(m.invalidFactory).callFn([]).toStmt();return r.push(Ju(e,[d],[u.set(c).toStmt()])),u}if(oB(n)){const c=rB(n.delegateDeps,n.target);o=a(new(n.delegateType===by.Class?Bl:Yn)(n.delegate,c))}else o=function Fie(n){return void 0!==n.expression}(n)?a(n.expression):s;if(null===o)r.push(z(m.invalidFactory).callFn([]).toStmt());else if(null!==t){const c=z(m.getInheritedFactory).callFn([n.type.value]),u=new Oe(Y.Or,t,t.set(c));r.push(new ln(u.callFn([i])))}else r.push(new ln(o));let l=dr([new gt("t",Ms)],r,ui,void 0,`${n.name}_Factory`);return null!==t&&(l=jt([],[new Zn(t.name),new ln(l)]).callFn([],void 0,!0)),{expression:l,statements:[],type:sB(n)}}function sB(n){const e=null!==n.deps&&"invalid"!==n.deps?function Pie(n){let e=!1;const t=n.map(i=>{const s=function Oie(n){const e=[];return null!==n.attributeNameType&&e.push({key:"attribute",value:n.attributeNameType,quoted:!1}),n.optional&&e.push({key:"optional",value:w(!0),quoted:!1}),n.host&&e.push({key:"host",value:w(!0),quoted:!1}),n.self&&e.push({key:"self",value:w(!0),quoted:!1}),n.skipSelf&&e.push({key:"skipSelf",value:w(!0),quoted:!1}),e.length>0?Gt(e):null}(i);return null!==s?(e=!0,s):w(null)});return e?Dn(le(t)):Ns}(n.deps):Ns;return Dn(z(m.FactoryDeclaration,[Ey(n.type.type,n.typeArgumentCount),e]))}function rB(n,e){return n.map((t,i)=>function Rie(n,e,t){if(null===n.token)return z(m.invalidFactoryDep).callFn([w(t)]);if(null===n.attributeNameType){const i=(n.self?2:0)|(n.skipSelf?4:0)|(n.host?1:0)|(n.optional?8:0)|(e===Hr.Pipe?16:0);let s=0!==i||n.optional?w(i):null;const r=[n.token];s&&r.push(s);const o=function Lie(n){switch(n){case Hr.Component:case Hr.Directive:case Hr.Pipe:return m.directiveInject;default:return m.inject}}(e);return z(o).callFn(r)}return z(m.injectAttribute).callFn([n.token])}(t,e,i))}function oB(n){return void 0!==n.delegateType}var zr=function(n){return n[n.RAW_TEXT=0]="RAW_TEXT",n[n.ESCAPABLE_RAW_TEXT=1]="ESCAPABLE_RAW_TEXT",n[n.PARSABLE_DATA=2]="PARSABLE_DATA",n}(zr||{});function Pi(n,e=!0){if(":"!=n[0])return[null,n];const t=n.indexOf(":",1);if(-1===t){if(e)throw new Error(`Unsupported format "${n}" expecting ":namespace:name"`);return[null,n]}return[n.slice(1,t),n.slice(t+1)]}function H0(n){return"ng-container"===Pi(n)[1]}function z0(n){return"ng-content"===Pi(n)[1]}function q0(n){return null===n?null:Pi(n)[0]}function G0(n,e){return n?`:${n}:${e}`:e}class Cy{constructor(e,t){this.value=e,this.sourceSpan=t}visit(e){throw new Error("visit() not implemented for Comment")}}class jl{constructor(e,t){this.value=e,this.sourceSpan=t}visit(e){return e.visitText(this)}}class cp{constructor(e,t,i){this.value=e,this.sourceSpan=t,this.i18n=i}visit(e){return e.visitBoundText(this)}}class Sy{constructor(e,t,i,s,r,o){this.name=e,this.value=t,this.sourceSpan=i,this.keySpan=s,this.valueSpan=r,this.i18n=o}visit(e){return e.visitTextAttribute(this)}}class Iy{constructor(e,t,i,s,r,o,a,l,c){this.name=e,this.type=t,this.securityContext=i,this.value=s,this.unit=r,this.sourceSpan=o,this.keySpan=a,this.valueSpan=l,this.i18n=c}static fromBoundElementProperty(e,t){if(void 0===e.keySpan)throw new Error(`Unexpected state: keySpan must be defined for bound attributes but was not for ${e.name}: ${e.sourceSpan}`);return new Iy(e.name,e.type,e.securityContext,e.value,e.unit,e.sourceSpan,e.keySpan,e.valueSpan,t)}visit(e){return e.visitBoundAttribute(this)}}class xy{constructor(e,t,i,s,r,o,a,l){this.name=e,this.type=t,this.handler=i,this.target=s,this.phase=r,this.sourceSpan=o,this.handlerSpan=a,this.keySpan=l}static fromParsedEvent(e){const t=0===e.type?e.targetOrPhase:null,i=1===e.type?e.targetOrPhase:null;if(void 0===e.keySpan)throw new Error(`Unexpected state: keySpan must be defined for bound event but was not for ${e.name}: ${e.sourceSpan}`);return new xy(e.name,e.type,e.handler,t,i,e.sourceSpan,e.handlerSpan,e.keySpan)}visit(e){return e.visitBoundEvent(this)}}class ms{constructor(e,t,i,s,r,o,a,l,c,u){this.name=e,this.attributes=t,this.inputs=i,this.outputs=s,this.children=r,this.references=o,this.sourceSpan=a,this.startSourceSpan=l,this.endSourceSpan=c,this.i18n=u}visit(e){return e.visitElement(this)}}class Hl{constructor(e,t,i,s){this.nameSpan=e,this.sourceSpan=t,this.prefetchSpan=i,this.whenOrOnSourceSpan=s}visit(e){return e.visitDeferredTrigger(this)}}class Vie extends Hl{constructor(e,t,i,s){super(null,t,i,s),this.value=e}}class $ie extends Hl{}class Uie extends Hl{}class aB extends Hl{constructor(e,t,i,s,r){super(t,i,s,r),this.reference=e}}class jie extends Hl{constructor(e,t,i,s,r){super(t,i,s,r),this.delay=e}}class lB extends Hl{constructor(e,t,i,s,r){super(t,i,s,r),this.reference=e}}class cB extends Hl{constructor(e,t,i,s,r){super(t,i,s,r),this.reference=e}}class qr{constructor(e,t,i,s){this.nameSpan=e,this.sourceSpan=t,this.startSourceSpan=i,this.endSourceSpan=s}}class W0 extends qr{constructor(e,t,i,s,r,o,a){super(i,s,r,o),this.children=e,this.minimumTime=t,this.i18n=a}visit(e){return e.visitDeferredBlockPlaceholder(this)}}class Q0 extends qr{constructor(e,t,i,s,r,o,a,l){super(s,r,o,a),this.children=e,this.afterTime=t,this.minimumTime=i,this.i18n=l}visit(e){return e.visitDeferredBlockLoading(this)}}class Y0 extends qr{constructor(e,t,i,s,r,o){super(t,i,s,r),this.children=e,this.i18n=o}visit(e){return e.visitDeferredBlockError(this)}}class up extends qr{constructor(e,t,i,s,r,o,a,l,c,u,d,h){super(a,l,u,d),this.children=e,this.placeholder=s,this.loading=r,this.error=o,this.mainBlockSpan=c,this.i18n=h,this.triggers=t,this.prefetchTriggers=i,this.definedTriggers=Object.keys(t),this.definedPrefetchTriggers=Object.keys(i)}visit(e){return e.visitDeferredBlock(this)}visitAll(e){this.visitTriggers(this.definedTriggers,this.triggers,e),this.visitTriggers(this.definedPrefetchTriggers,this.prefetchTriggers,e),Ot(e,this.children),Ot(e,[this.placeholder,this.loading,this.error].filter(i=>null!==i))}visitTriggers(e,t,i){Ot(i,e.map(s=>t[s]))}}class uB extends qr{constructor(e,t,i,s,r,o,a){super(a,s,r,o),this.expression=e,this.cases=t,this.unknownBlocks=i}visit(e){return e.visitSwitchBlock(this)}}class X0 extends qr{constructor(e,t,i,s,r,o,a){super(o,i,s,r),this.expression=e,this.children=t,this.i18n=a}visit(e){return e.visitSwitchBlockCase(this)}}class Ty extends qr{constructor(e,t,i,s,r,o,a,l,c,u,d,h,f){super(h,l,u,d),this.item=e,this.expression=t,this.trackBy=i,this.trackKeywordSpan=s,this.contextVariables=r,this.children=o,this.empty=a,this.mainBlockSpan=c,this.i18n=f}visit(e){return e.visitForLoopBlock(this)}}class Z0 extends qr{constructor(e,t,i,s,r,o){super(r,t,i,s),this.children=e,this.i18n=o}visit(e){return e.visitForLoopBlockEmpty(this)}}class dB extends qr{constructor(e,t,i,s,r){super(r,t,i,s),this.branches=e}visit(e){return e.visitIfBlock(this)}}class dp extends qr{constructor(e,t,i,s,r,o,a,l){super(a,s,r,o),this.expression=e,this.children=t,this.expressionAlias=i,this.i18n=l}visit(e){return e.visitIfBlockBranch(this)}}class hB{constructor(e,t,i){this.name=e,this.sourceSpan=t,this.nameSpan=i}visit(e){return e.visitUnknownBlock(this)}}class Ps{constructor(e,t,i,s,r,o,a,l,c,u,d,h){this.tagName=e,this.attributes=t,this.inputs=i,this.outputs=s,this.templateAttrs=r,this.children=o,this.references=a,this.variables=l,this.sourceSpan=c,this.startSourceSpan=u,this.endSourceSpan=d,this.i18n=h}visit(e){return e.visitTemplate(this)}}class fB{constructor(e,t,i,s){this.selector=e,this.attributes=t,this.sourceSpan=i,this.i18n=s,this.name="ng-content"}visit(e){return e.visitContent(this)}}class zl{constructor(e,t,i,s,r){this.name=e,this.value=t,this.sourceSpan=i,this.keySpan=s,this.valueSpan=r}visit(e){return e.visitVariable(this)}}class K0{constructor(e,t,i,s,r){this.name=e,this.value=t,this.sourceSpan=i,this.keySpan=s,this.valueSpan=r}visit(e){return e.visitReference(this)}}class J0{constructor(e,t,i,s){this.vars=e,this.placeholders=t,this.sourceSpan=i,this.i18n=s}visit(e){return e.visitIcu(this)}}function Ot(n,e){const t=[];if(n.visit)for(const i of e)n.visit(i)||i.visit(n);else for(const i of e){const s=i.visit(n);s&&t.push(s)}return t}class Oi{constructor(e,t,i,s,r,o){this.nodes=e,this.placeholders=t,this.placeholderToMessage=i,this.meaning=s,this.description=r,this.customId=o,this.legacyIds=[],this.id=this.customId,this.messageString=function qie(n){const e=new Gie;return n.map(i=>i.visit(e)).join("")}(this.nodes),this.sources=e.length?[{filePath:e[0].sourceSpan.start.file.url,startLine:e[0].sourceSpan.start.line+1,startCol:e[0].sourceSpan.start.col+1,endLine:e[e.length-1].sourceSpan.end.line+1,endCol:e[0].sourceSpan.start.col+1}]:[]}}class jo{constructor(e,t){this.value=e,this.sourceSpan=t}visit(e,t){return e.visitText(this,t)}}class Os{constructor(e,t){this.children=e,this.sourceSpan=t}visit(e,t){return e.visitContainer(this,t)}}class nd{constructor(e,t,i,s,r){this.expression=e,this.type=t,this.cases=i,this.sourceSpan=s,this.expressionPlaceholder=r}visit(e,t){return e.visitIcu(this,t)}}class Va{constructor(e,t,i,s,r,o,a,l,c){this.tag=e,this.attrs=t,this.startName=i,this.closeName=s,this.children=r,this.isVoid=o,this.sourceSpan=a,this.startSourceSpan=l,this.endSourceSpan=c}visit(e,t){return e.visitTagPlaceholder(this,t)}}class Gr{constructor(e,t,i){this.value=e,this.name=t,this.sourceSpan=i}visit(e,t){return e.visitPlaceholder(this,t)}}class id{constructor(e,t,i){this.value=e,this.name=t,this.sourceSpan=i}visit(e,t){return e.visitIcuPlaceholder(this,t)}}class Ho{constructor(e,t,i,s,r,o,a,l){this.name=e,this.parameters=t,this.startName=i,this.closeName=s,this.children=r,this.sourceSpan=o,this.startSourceSpan=a,this.endSourceSpan=l}visit(e,t){return e.visitBlockPlaceholder(this,t)}}class Gie{visitText(e){return e.value}visitContainer(e){return e.children.map(t=>t.visit(this)).join("")}visitIcu(e){const t=Object.keys(e.cases).map(i=>`${i} {${e.cases[i].visit(this)}}`);return`{${e.expressionPlaceholder}, ${e.type}, ${t.join(" ")}}`}visitTagPlaceholder(e){const t=e.children.map(i=>i.visit(this)).join("");return`{$${e.startName}}${t}{$${e.closeName}}`}visitPlaceholder(e){return`{$${e.name}}`}visitIcuPlaceholder(e){return`{$${e.name}}`}visitBlockPlaceholder(e){const t=e.children.map(i=>i.visit(this)).join("");return`{$${e.startName}}${t}{$${e.closeName}}`}}new class Wie{visitTag(e){const t=this._serializeAttributes(e.attrs);if(0==e.children.length)return`<${e.name}${t}/>`;const i=e.children.map(s=>s.visit(this));return`<${e.name}${t}>${i.join("")}</${e.name}>`}visitText(e){return e.value}visitDeclaration(e){return`<?xml${this._serializeAttributes(e.attrs)} ?>`}_serializeAttributes(e){const t=Object.keys(e).map(i=>`${i}="${e[i]}"`).join(" ");return t.length>0?" "+t:""}visitDoctype(e){return`<!DOCTYPE ${e.rootTag} [\n${e.dtd}\n]>`}};const ise="MSG_",vB="i18n",iI="i18n-",yB="\ufffd";function _B(n){return n===vB||n.startsWith(iI)}function hp(n){return n instanceof Oi}function fp(n){return hp(n)&&1===n.nodes.length&&n.nodes[0]instanceof nd}function ase(n){return!!n.i18n}function sI(n){return n.nodes[0]}function Ay(n,e=0){return`${yB}${n}${e>0?`:${e}`:""}${yB}`}function use(n=0){let e=n;return()=>e++}function wB(n){const e={};return n.forEach((t,i)=>{e[i]=w(t.length>1?`[${t.join("|")}]`:t[0])}),e}function pp(n,e,...t){const i=n.get(e)||[];i.push(...t),n.set(e,i)}function EB(n,e=0,t=0){const i=e,s=new Map,r=n instanceof Oi?n.nodes.find(o=>o instanceof Os):n;return r&&r.children.filter(o=>o instanceof Gr).forEach((o,a)=>{const l=Ay(i+a,t);pp(s,o.name,l)}),s}function gp(n={},e){const t={};return n&&Object.keys(n).length&&Object.keys(n).forEach(i=>t[mp(i,e)]=n[i]),t}function mp(n,e=!0){const t=function nI(n){return n.toUpperCase().replace(/[^A-Z0-9_]/g,"_")}(n);if(!e)return t;const i=t.split("_");if(1===i.length)return n.toLowerCase();let s;/^\d+$/.test(i[i.length-1])&&(s=i.pop());let r=i.shift().toLowerCase();return i.length&&(r+=i.map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join("")),s?`${r}_${s}`:r}function ky(n){return`${ise}${n}`.toUpperCase()}function bB(n){return new Zn(n.name,void 0,ui,void 0,n.sourceSpan)}const rI=/[-.]/,oI="_t",Fi="ctx",vp="rf",CB="restoredCtx",aI="#context",pse=500,gse=new Set([m.element,m.elementStart,m.elementEnd,m.elementContainer,m.elementContainerStart,m.elementContainerEnd,m.i18nExp,m.listener,m.classProp,m.syntheticHostListener,m.hostProperty,m.syntheticHostProperty,m.property,m.propertyInterpolate1,m.propertyInterpolate2,m.propertyInterpolate3,m.propertyInterpolate4,m.propertyInterpolate5,m.propertyInterpolate6,m.propertyInterpolate7,m.propertyInterpolate8,m.propertyInterpolateV,m.attribute,m.attributeInterpolate1,m.attributeInterpolate2,m.attributeInterpolate3,m.attributeInterpolate4,m.attributeInterpolate5,m.attributeInterpolate6,m.attributeInterpolate7,m.attributeInterpolate8,m.attributeInterpolateV,m.styleProp,m.stylePropInterpolate1,m.stylePropInterpolate2,m.stylePropInterpolate3,m.stylePropInterpolate4,m.stylePropInterpolate5,m.stylePropInterpolate6,m.stylePropInterpolate7,m.stylePropInterpolate8,m.stylePropInterpolateV,m.textInterpolate,m.textInterpolate1,m.textInterpolate2,m.textInterpolate3,m.textInterpolate4,m.textInterpolate5,m.textInterpolate6,m.textInterpolate7,m.textInterpolate8,m.textInterpolateV,m.templateCreate,m.twoWayProperty,m.twoWayListener]);function Wl(n,e,t){return z(e,null,n).callFn(t,n)}function SB(n,e){let t=null;return()=>(t||(n(new Zn(oI,void 0,Ms)),t=te(e)),t)}function vs(n){throw new Error(`Invalid state: Visitor ${this.constructor.name} doesn't handle ${n.constructor.name}`)}function gn(n){return Array.isArray(n)?le(n.map(gn)):w(n,ui)}function lI(n,e){const t=Object.getOwnPropertyNames(n);return 0===t.length?null:Gt(t.map(i=>{const s=n[i];let r,o,a,l;if("string"==typeof s)r=i,a=i,o=s,l=gn(o);else{a=i,r=s.classPropertyName,o=s.bindingPropertyName;const c=o!==r,u=null!==s.transformFunction;let d=null;if(s.isSignal&&(d=xB(Fl.SignalBased,d)),u&&(d=xB(Fl.HasDecoratorInputTransform,d)),e&&(c||u||null!==d)){const f=[d??z(m.InputFlags).prop(Fl[Fl.None]),gn(o)];(c||u)&&(f.push(gn(r)),u&&f.push(s.transformFunction)),l=le(f)}else l=gn(o)}return{key:a,quoted:rI.test(a),value:l}}))}function IB(n){return z(m.InputFlags).prop(Fl[n])}function xB(n,e){return null===e?IB(n):IB(n).bitwiseOr(e)}function sd(n){for(;L0(n[n.length-1]);)n.pop();return n}class kn{constructor(){this.values=[]}set(e,t){if(t){const i=this.values.find(s=>s.key===e);i?i.value=t:this.values.push({key:e,value:t,quoted:!1})}}toLiteralMap(){return Gt(this.values)}}function Ql(n){const{expressions:e,strings:t}=n;return 1===e.length&&2===t.length&&""===t[0]&&""===t[1]?1:e.length+t.length}function My(n){const e=[];let t=null,i=null,s=0;for(const r of n){const o=("function"==typeof r.paramsOrFn?r.paramsOrFn():r.paramsOrFn)??[],a=Array.isArray(o)?o:[o];s<pse&&i===r.reference&&gse.has(i)?(t=t.callFn(a,t.sourceSpan),s++):(null!==t&&e.push(t.toStmt()),t=Wl(r.span,r.reference,a),i=r.reference,s=0)}return null!==t&&e.push(t.toStmt()),e}function TB(n,e){let t=null;const i={name:n.name,type:n.type,typeArgumentCount:n.typeArgumentCount,deps:[],target:Hr.Injectable};if(void 0!==n.useClass){const a=n.useClass.expression.isEquivalent(n.type.value);let l;void 0!==n.deps&&(l=n.deps),t=void 0!==l?Ul({...i,delegate:n.useClass.expression,delegateDeps:l,delegateType:by.Class}):a?Ul(i):{statements:[],expression:AB(n.type.value,n.useClass.expression,e)}}else t=void 0!==n.useFactory?void 0!==n.deps?Ul({...i,delegate:n.useFactory,delegateDeps:n.deps||[],delegateType:by.Function}):{statements:[],expression:jt([],n.useFactory.callFn([]))}:void 0!==n.useValue?Ul({...i,expression:n.useValue.expression}):void 0!==n.useExisting?Ul({...i,expression:z(m.inject).callFn([n.useExisting.expression])}):{statements:[],expression:AB(n.type.value,n.type.value,e)};const s=n.type.value,r=new kn;return r.set("token",s),r.set("factory",t.expression),null!==n.providedIn.expression.value&&r.set("providedIn",td(n.providedIn)),{expression:z(m.\u0275\u0275defineInjectable).callFn([r.toLiteralMap()],void 0,!0),type:DB(n),statements:t.statements}}function DB(n){return new lr(z(m.InjectableDeclaration,[Ey(n.type.type,n.typeArgumentCount)]))}function AB(n,e,t){return n.node===e.node?e.prop("\u0275fac"):kB(t?z(m.resolveForwardRef).callFn([e]):e)}function kB(n){return jt([new gt("t",Ms)],n.prop("\u0275fac").callFn([te("t")]))}const yse=[/^\s*$/,/[<>]/,/^[{}]$/,/&(#|[a-z])/i,/^\/\//];class Ny{static fromArray(e){return e?(function _se(n,e){if(null!=e&&(!Array.isArray(e)||2!=e.length))throw new Error(`Expected '${n}' to be an array, [start, end].`);if(null!=e){const t=e[0],i=e[1];yse.forEach(s=>{if(s.test(t)||s.test(i))throw new Error(`['${t}', '${i}'] contains unusable interpolation symbol.`)})}}("interpolation",e),new Ny(e[0],e[1])):Fs}constructor(e,t){this.start=e,this.end=t}}const Fs=new Ny("{{","}}"),MB=new Set(["switch"]),di=0,cI=9,PB=32,hI=48,VB=57,ld=65,Oy=90,Xl=97,wp=122,Wr=123,Yi=125,WB=160;function By(n){return n>=cI&&n<=PB||n==WB}function Go(n){return hI<=n&&n<=VB}function Vy(n){return n>=Xl&&n<=wp||n>=ld&&n<=Oy}function YB(n){return 10===n||13===n}function XB(n){return hI<=n&&n<=55}function $y(n){return 39===n||34===n||96===n}class Zl{constructor(e,t,i,s){this.file=e,this.offset=t,this.line=i,this.col=s}toString(){return null!=this.offset?`${this.file.url}@${this.line}:${this.col}`:this.file.url}moveBy(e){const t=this.file.content,i=t.length;let s=this.offset,r=this.line,o=this.col;for(;s>0&&e<0;)if(s--,e++,10==t.charCodeAt(s)){r--;const l=t.substring(0,s-1).lastIndexOf(String.fromCharCode(10));o=l>0?s-l:s}else o--;for(;s<i&&e>0;){const a=t.charCodeAt(s);s++,e--,10==a?(r++,o=0):o++}return new Zl(this.file,s,r,o)}getContext(e,t){const i=this.file.content;let s=this.offset;if(null!=s){s>i.length-1&&(s=i.length-1);let r=s,o=0,a=0;for(;o<e&&s>0&&(s--,o++,"\n"!=i[s]||++a!=t););for(o=0,a=0;o<e&&r<i.length-1&&(r++,o++,"\n"!=i[r]||++a!=t););return{before:i.substring(s,this.offset),after:i.substring(this.offset,r+1)}}return null}}class pI{constructor(e,t){this.content=e,this.url=t}}class $e{constructor(e,t,i=e,s=null){this.start=e,this.end=t,this.fullStart=i,this.details=s}toString(){return this.start.file.content.substring(this.start.offset,this.end.offset)}}var ja=function(n){return n[n.WARNING=0]="WARNING",n[n.ERROR=1]="ERROR",n}(ja||{});class Fe{constructor(e,t,i=ja.ERROR){this.span=e,this.msg=t,this.level=i}contextualMessage(){const e=this.span.start.getContext(100,3);return e?`${this.msg} ("${e.before}[${ja[this.level]} ->]${e.after}")`:this.msg}toString(){const e=this.span.details?`, ${this.span.details}`:"";return`${this.contextualMessage()}: ${this.span.start}${e}`}}let Rse=0;function Qr(n){return n.replace(/\W/g,"_")}const ZB='(this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e})';class Ose extends Aie{constructor(){super(!1)}visitWrappedNodeExpr(e,t){throw new Error("Cannot emit a WrappedNodeExpr in Javascript.")}visitDeclareVarStmt(e,t){return t.print(e,`var ${e.name}`),e.value&&(t.print(e," = "),e.value.visitExpression(this,t)),t.println(e,";"),null}visitTaggedTemplateExpr(e,t){const i=e.template.elements;return e.tag.visitExpression(this,t),t.print(e,`(${ZB}(`),t.print(e,`[${i.map(s=>$l(s.text,!1)).join(", ")}], `),t.print(e,`[${i.map(s=>$l(s.rawText,!1)).join(", ")}])`),e.template.expressions.forEach(s=>{t.print(e,", "),s.visitExpression(this,t)}),t.print(e,")"),null}visitFunctionExpr(e,t){return t.print(e,`function${e.name?" "+e.name:""}(`),this._visitParams(e.params,t),t.println(e,") {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.print(e,"}"),null}visitArrowFunctionExpr(e,t){if(t.print(e,"("),this._visitParams(e.params,t),t.print(e,") =>"),Array.isArray(e.body))t.println(e,"{"),t.incIndent(),this.visitAllStatements(e.body,t),t.decIndent(),t.print(e,"}");else{const i=e.body instanceof gs;i&&t.print(e,"("),e.body.visitExpression(this,t),i&&t.print(e,")")}return null}visitDeclareFunctionStmt(e,t){return t.print(e,`function ${e.name}(`),this._visitParams(e.params,t),t.println(e,") {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.println(e,"}"),null}visitLocalizedString(e,t){t.print(e,`$localize(${ZB}(`);const i=[e.serializeI18nHead()];for(let s=1;s<e.messageParts.length;s++)i.push(e.serializeI18nTemplatePart(s));return t.print(e,`[${i.map(s=>$l(s.cooked,!1)).join(", ")}], `),t.print(e,`[${i.map(s=>$l(s.raw,!1)).join(", ")}])`),e.expressions.forEach(s=>{t.print(e,", "),s.visitExpression(this,t)}),t.print(e,")"),null}_visitParams(e,t){this.visitAllObjects(i=>t.print(null,i.name),e,t,",")}}let Uy;function KB(...n){if(!ap.trustedTypes)return new Function(...n);const i=`(function anonymous(${n.slice(0,-1).join(",")}\n) { ${n[n.length-1]}\n})`,s=ap.eval(function Lse(n){return function Fse(){if(void 0===Uy){const n=ap.trustedTypes;if(Uy=null,n)try{Uy=n.createPolicy("angular#unsafe-jit",{createScript:e=>e})}catch{}}return Uy}()?.createScript(n)||n}(i));return void 0===s.bind?new Function(...n):(s.toString=()=>i,s.bind(ap))}class Bse{evaluateStatements(e,t,i,s){const r=new Vse(i),o=V0.createRoot();return t.length>0&&!function $se(n){return n.isEquivalent(w("use strict").toStmt())}(t[0])&&(t=[w("use strict").toStmt(),...t]),r.visitAllStatements(t,o),r.createReturnStmt(o),this.evaluateCode(e,o,r.getArgs(),s)}evaluateCode(e,t,i,s){let r=`"use strict";${t.toSource()}\n//# sourceURL=${e}`;const o=[],a=[];for(const c in i)a.push(i[c]),o.push(c);if(s){const c=KB(...o.concat("return null;")).toString(),u=c.slice(0,c.indexOf("return null;")).split("\n").length-1;r+=`\n${t.toSourceMapGenerator(e,u).toJsComment()}`}const l=KB(...o.concat(r));return this.executeFunction(l,a)}executeFunction(e,t){return e(...t)}}class Vse extends Ose{constructor(e){super(),this.refResolver=e,this._evalArgNames=[],this._evalArgValues=[],this._evalExportedVars=[]}createReturnStmt(e){new ln(new gs(this._evalExportedVars.map(i=>new Vl(i,te(i),!1)))).visitStatement(this,e)}getArgs(){const e={};for(let t=0;t<this._evalArgNames.length;t++)e[this._evalArgNames[t]]=this._evalArgValues[t];return e}visitExternalExpr(e,t){return this._emitReferenceToExternal(e,this.refResolver.resolveExternalReference(e.value),t),null}visitWrappedNodeExpr(e,t){return this._emitReferenceToExternal(e,e.node,t),null}visitDeclareVarStmt(e,t){return e.hasModifier(Ln.Exported)&&this._evalExportedVars.push(e.name),super.visitDeclareVarStmt(e,t)}visitDeclareFunctionStmt(e,t){return e.hasModifier(Ln.Exported)&&this._evalExportedVars.push(e.name),super.visitDeclareFunctionStmt(e,t)}_emitReferenceToExternal(e,t,i){let s=this._evalArgValues.indexOf(t);if(-1===s){s=this._evalArgValues.length,this._evalArgValues.push(t);const r=function Pse(n){if(!n||!n.reference)return null;const e=n.reference;if(e.__anonymousType)return e.__anonymousType;if(e.__forward_ref__)return"__forward_ref__";let t=ZL(e);return t.indexOf("(")>=0?(t="anonymous_"+Rse++,e.__anonymousType=t):t=Qr(t),t}({reference:t})||"val";this._evalArgNames.push(`jit_${r}_${s}`)}i.print(e,this._evalArgNames[s])}}function JB(n){const e=new kn;return null!==n.providers&&e.set("providers",n.providers),n.imports.length>0&&e.set("imports",le(n.imports)),{expression:z(m.defineInjector).callFn([e.toLiteralMap()],void 0,!0),type:eV(n),statements:[]}}function eV(n){return new lr(z(m.InjectorDeclaration,[new lr(n.type.type)]))}class Use{constructor(e){this.context=e}resolveExternalReference(e){if("@angular/core"!==e.moduleName)throw new Error(`Cannot resolve external reference to ${e.moduleName}, only references to @angular/core are supported.`);if(!this.context.hasOwnProperty(e.name))throw new Error(`No value provided for @angular/core symbol '${e.name}'.`);return this.context[e.name]}}var jy=function(n){return n[n.Inline=0]="Inline",n[n.SideEffect=1]="SideEffect",n[n.Omit=2]="Omit",n}(jy||{}),Wo=function(n){return n[n.Global=0]="Global",n[n.Local=1]="Local",n}(Wo||{});function jse(n){const e=[],t=new kn;if(t.set("type",n.type.value),n.kind===Wo.Global&&n.bootstrap.length>0&&t.set("bootstrap",hr(n.bootstrap,n.containsForwardDecls)),n.selectorScopeMode===jy.Inline)n.declarations.length>0&&t.set("declarations",hr(n.declarations,n.containsForwardDecls)),n.imports.length>0&&t.set("imports",hr(n.imports,n.containsForwardDecls)),n.exports.length>0&&t.set("exports",hr(n.exports,n.containsForwardDecls));else if(n.selectorScopeMode===jy.SideEffect){const r=function zse(n){const e=new kn;if(n.kind===Wo.Global?n.declarations.length>0&&e.set("declarations",hr(n.declarations,n.containsForwardDecls)):n.declarationsExpression&&e.set("declarations",n.declarationsExpression),n.kind===Wo.Global?n.imports.length>0&&e.set("imports",hr(n.imports,n.containsForwardDecls)):n.importsExpression&&e.set("imports",n.importsExpression),n.kind===Wo.Global?n.exports.length>0&&e.set("exports",hr(n.exports,n.containsForwardDecls)):n.exportsExpression&&e.set("exports",n.exportsExpression),n.kind===Wo.Local&&n.bootstrapExpression&&e.set("bootstrap",n.bootstrapExpression),0===Object.keys(e.values).length)return null;const i=function Nie(n){return function iB(n,e){const t=new cr({name:n,moduleName:null}),i=new Oe(Y.Identical,new Fa(t),w("undefined")),s=new Oe(Y.Or,i,t,void 0,void 0,!0);return new Oe(Y.And,s,e)}("ngJitMode",n)}(new Yn(z(m.setNgModuleScope),[n.type.value,e.toLiteralMap()])),s=new Bo([],[i.toStmt()]);return new Yn(s,[]).toStmt()}(n);null!==r&&e.push(r)}return null!==n.schemas&&n.schemas.length>0&&t.set("schemas",le(n.schemas.map(r=>r.value))),null!==n.id&&(t.set("id",n.id),e.push(z(m.registerNgModuleType).callFn([n.type.value,n.id]).toStmt())),{expression:z(m.defineNgModule).callFn([t.toLiteralMap()],void 0,!0),type:tV(n),statements:e}}function tV(n){if(n.kind===Wo.Local)return new lr(n.type.value);const{type:e,declarations:t,exports:i,imports:s,includeImportTypes:r,publicDeclarationTypes:o}=n;return new lr(z(m.NgModuleDeclaration,[new lr(e.type),null===o?gI(t):qse(o),r?gI(s):Ns,gI(i)]))}function gI(n){const e=n.map(t=>Ku(t.type));return n.length>0?Dn(le(e)):Ns}function qse(n){const e=n.map(t=>Ku(t));return n.length>0?Dn(le(e)):Ns}function nV(n){const e=[];return e.push({key:"name",value:w(n.pipeName),quoted:!1}),e.push({key:"type",value:n.type.value,quoted:!1}),e.push({key:"pure",value:w(n.pure),quoted:!1}),n.isStandalone&&e.push({key:"standalone",value:w(!0),quoted:!1}),{expression:z(m.definePipe).callFn([Gt(e)],void 0,!0),type:iV(n),statements:[]}}function iV(n){return new lr(z(m.PipeDeclaration,[Ey(n.type.type,n.typeArgumentCount),new lr(new pn(n.pipeName)),new lr(new pn(n.isStandalone))]))}var Kl=function(n){return n[n.Directive=0]="Directive",n[n.Pipe=1]="Pipe",n[n.NgModule=2]="NgModule",n}(Kl||{});class mI{constructor(e,t,i,s){this.input=t,this.errLocation=i,this.ctxLocation=s,this.message=`Parser Error: ${e} ${i} [${t}] in ${s}`}}class Ep{constructor(e,t){this.start=e,this.end=t}toAbsolute(e){return new gr(e+this.start,e+this.end)}}class mn{constructor(e,t){this.span=e,this.sourceSpan=t}toString(){return"AST"}}class Hy extends mn{constructor(e,t,i){super(e,t),this.nameSpan=i}}class Xi extends mn{visit(e,t=null){}}class Zi extends mn{visit(e,t=null){return e.visitImplicitReceiver(this,t)}}class dd extends Zi{visit(e,t=null){return e.visitThisReceiver?.(this,t)}}class hd extends mn{constructor(e,t,i){super(e,t),this.expressions=i}visit(e,t=null){return e.visitChain(this,t)}}class bp extends mn{constructor(e,t,i,s,r){super(e,t),this.condition=i,this.trueExp=s,this.falseExp=r}visit(e,t=null){return e.visitConditional(this,t)}}class hi extends Hy{constructor(e,t,i,s,r){super(e,t,i),this.receiver=s,this.name=r}visit(e,t=null){return e.visitPropertyRead(this,t)}}class zy extends Hy{constructor(e,t,i,s,r,o){super(e,t,i),this.receiver=s,this.name=r,this.value=o}visit(e,t=null){return e.visitPropertyWrite(this,t)}}class qy extends Hy{constructor(e,t,i,s,r){super(e,t,i),this.receiver=s,this.name=r}visit(e,t=null){return e.visitSafePropertyRead(this,t)}}class Jl extends mn{constructor(e,t,i,s){super(e,t),this.receiver=i,this.key=s}visit(e,t=null){return e.visitKeyedRead(this,t)}}class Cp extends mn{constructor(e,t,i,s){super(e,t),this.receiver=i,this.key=s}visit(e,t=null){return e.visitSafeKeyedRead(this,t)}}class Gy extends mn{constructor(e,t,i,s,r){super(e,t),this.receiver=i,this.key=s,this.value=r}visit(e,t=null){return e.visitKeyedWrite(this,t)}}class Sp extends Hy{constructor(e,t,i,s,r,o){super(e,t,o),this.exp=i,this.name=s,this.args=r}visit(e,t=null){return e.visitPipe(this,t)}}class Ki extends mn{constructor(e,t,i){super(e,t),this.value=i}visit(e,t=null){return e.visitLiteralPrimitive(this,t)}}class Ip extends mn{constructor(e,t,i){super(e,t),this.expressions=i}visit(e,t=null){return e.visitLiteralArray(this,t)}}class Wy extends mn{constructor(e,t,i,s){super(e,t),this.keys=i,this.values=s}visit(e,t=null){return e.visitLiteralMap(this,t)}}class Mn extends mn{constructor(e,t,i,s){super(e,t),this.strings=i,this.expressions=s}visit(e,t=null){return e.visitInterpolation(this,t)}}class Bs extends mn{constructor(e,t,i,s,r){super(e,t),this.operation=i,this.left=s,this.right=r}visit(e,t=null){return e.visitBinary(this,t)}}class Yr extends Bs{static createMinus(e,t,i){return new Yr(e,t,"-",i,"-",new Ki(e,t,0),i)}static createPlus(e,t,i){return new Yr(e,t,"+",i,"-",i,new Ki(e,t,0))}constructor(e,t,i,s,r,o,a){super(e,t,r,o,a),this.operator=i,this.expr=s,this.left=null,this.right=null,this.operation=null}visit(e,t=null){return void 0!==e.visitUnary?e.visitUnary(this,t):e.visitBinary(this,t)}}class xp extends mn{constructor(e,t,i){super(e,t),this.expression=i}visit(e,t=null){return e.visitPrefixNot(this,t)}}class Tp extends mn{constructor(e,t,i){super(e,t),this.expression=i}visit(e,t=null){return e.visitNonNullAssert(this,t)}}class Ha extends mn{constructor(e,t,i,s,r){super(e,t),this.receiver=i,this.args=s,this.argumentSpan=r}visit(e,t=null){return e.visitCall(this,t)}}class Dp extends mn{constructor(e,t,i,s,r){super(e,t),this.receiver=i,this.args=s,this.argumentSpan=r}visit(e,t=null){return e.visitSafeCall(this,t)}}class gr{constructor(e,t){this.start=e,this.end=t}}class Vs extends mn{constructor(e,t,i,s,r){super(new Ep(0,null===t?0:t.length),new gr(s,null===t?s:s+t.length)),this.ast=e,this.source=t,this.location=i,this.errors=r}visit(e,t=null){return e.visitASTWithSource?e.visitASTWithSource(this,t):this.ast.visit(e,t)}toString(){return`${this.source} in ${this.location}`}}class vI{constructor(e,t,i){this.sourceSpan=e,this.key=t,this.value=i}}class Gse{constructor(e,t,i){this.sourceSpan=e,this.key=t,this.value=i}}class yI{visit(e,t){e.visit(this,t)}visitUnary(e,t){this.visit(e.expr,t)}visitBinary(e,t){this.visit(e.left,t),this.visit(e.right,t)}visitChain(e,t){this.visitAll(e.expressions,t)}visitConditional(e,t){this.visit(e.condition,t),this.visit(e.trueExp,t),this.visit(e.falseExp,t)}visitPipe(e,t){this.visit(e.exp,t),this.visitAll(e.args,t)}visitImplicitReceiver(e,t){}visitThisReceiver(e,t){}visitInterpolation(e,t){this.visitAll(e.expressions,t)}visitKeyedRead(e,t){this.visit(e.receiver,t),this.visit(e.key,t)}visitKeyedWrite(e,t){this.visit(e.receiver,t),this.visit(e.key,t),this.visit(e.value,t)}visitLiteralArray(e,t){this.visitAll(e.expressions,t)}visitLiteralMap(e,t){this.visitAll(e.values,t)}visitLiteralPrimitive(e,t){}visitPrefixNot(e,t){this.visit(e.expression,t)}visitNonNullAssert(e,t){this.visit(e.expression,t)}visitPropertyRead(e,t){this.visit(e.receiver,t)}visitPropertyWrite(e,t){this.visit(e.receiver,t),this.visit(e.value,t)}visitSafePropertyRead(e,t){this.visit(e.receiver,t)}visitSafeKeyedRead(e,t){this.visit(e.receiver,t),this.visit(e.key,t)}visitCall(e,t){this.visit(e.receiver,t),this.visitAll(e.args,t)}visitSafeCall(e,t){this.visit(e.receiver,t),this.visitAll(e.args,t)}visitAll(e,t){for(const i of e)this.visit(i,t)}}class Wse{visitImplicitReceiver(e,t){return e}visitThisReceiver(e,t){return e}visitInterpolation(e,t){return new Mn(e.span,e.sourceSpan,e.strings,this.visitAll(e.expressions))}visitLiteralPrimitive(e,t){return new Ki(e.span,e.sourceSpan,e.value)}visitPropertyRead(e,t){return new hi(e.span,e.sourceSpan,e.nameSpan,e.receiver.visit(this),e.name)}visitPropertyWrite(e,t){return new zy(e.span,e.sourceSpan,e.nameSpan,e.receiver.visit(this),e.name,e.value.visit(this))}visitSafePropertyRead(e,t){return new qy(e.span,e.sourceSpan,e.nameSpan,e.receiver.visit(this),e.name)}visitLiteralArray(e,t){return new Ip(e.span,e.sourceSpan,this.visitAll(e.expressions))}visitLiteralMap(e,t){return new Wy(e.span,e.sourceSpan,e.keys,this.visitAll(e.values))}visitUnary(e,t){switch(e.operator){case"+":return Yr.createPlus(e.span,e.sourceSpan,e.expr.visit(this));case"-":return Yr.createMinus(e.span,e.sourceSpan,e.expr.visit(this));default:throw new Error(`Unknown unary operator ${e.operator}`)}}visitBinary(e,t){return new Bs(e.span,e.sourceSpan,e.operation,e.left.visit(this),e.right.visit(this))}visitPrefixNot(e,t){return new xp(e.span,e.sourceSpan,e.expression.visit(this))}visitNonNullAssert(e,t){return new Tp(e.span,e.sourceSpan,e.expression.visit(this))}visitConditional(e,t){return new bp(e.span,e.sourceSpan,e.condition.visit(this),e.trueExp.visit(this),e.falseExp.visit(this))}visitPipe(e,t){return new Sp(e.span,e.sourceSpan,e.exp.visit(this),e.name,this.visitAll(e.args),e.nameSpan)}visitKeyedRead(e,t){return new Jl(e.span,e.sourceSpan,e.receiver.visit(this),e.key.visit(this))}visitKeyedWrite(e,t){return new Gy(e.span,e.sourceSpan,e.receiver.visit(this),e.key.visit(this),e.value.visit(this))}visitCall(e,t){return new Ha(e.span,e.sourceSpan,e.receiver.visit(this),this.visitAll(e.args),e.argumentSpan)}visitSafeCall(e,t){return new Dp(e.span,e.sourceSpan,e.receiver.visit(this),this.visitAll(e.args),e.argumentSpan)}visitAll(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].visit(this);return t}visitChain(e,t){return new hd(e.span,e.sourceSpan,this.visitAll(e.expressions))}visitSafeKeyedRead(e,t){return new Cp(e.span,e.sourceSpan,e.receiver.visit(this),e.key.visit(this))}}class Qse{visitImplicitReceiver(e,t){return e}visitThisReceiver(e,t){return e}visitInterpolation(e,t){const i=this.visitAll(e.expressions);return i!==e.expressions?new Mn(e.span,e.sourceSpan,e.strings,i):e}visitLiteralPrimitive(e,t){return e}visitPropertyRead(e,t){const i=e.receiver.visit(this);return i!==e.receiver?new hi(e.span,e.sourceSpan,e.nameSpan,i,e.name):e}visitPropertyWrite(e,t){const i=e.receiver.visit(this),s=e.value.visit(this);return i!==e.receiver||s!==e.value?new zy(e.span,e.sourceSpan,e.nameSpan,i,e.name,s):e}visitSafePropertyRead(e,t){const i=e.receiver.visit(this);return i!==e.receiver?new qy(e.span,e.sourceSpan,e.nameSpan,i,e.name):e}visitLiteralArray(e,t){const i=this.visitAll(e.expressions);return i!==e.expressions?new Ip(e.span,e.sourceSpan,i):e}visitLiteralMap(e,t){const i=this.visitAll(e.values);return i!==e.values?new Wy(e.span,e.sourceSpan,e.keys,i):e}visitUnary(e,t){const i=e.expr.visit(this);if(i!==e.expr)switch(e.operator){case"+":return Yr.createPlus(e.span,e.sourceSpan,i);case"-":return Yr.createMinus(e.span,e.sourceSpan,i);default:throw new Error(`Unknown unary operator ${e.operator}`)}return e}visitBinary(e,t){const i=e.left.visit(this),s=e.right.visit(this);return i!==e.left||s!==e.right?new Bs(e.span,e.sourceSpan,e.operation,i,s):e}visitPrefixNot(e,t){const i=e.expression.visit(this);return i!==e.expression?new xp(e.span,e.sourceSpan,i):e}visitNonNullAssert(e,t){const i=e.expression.visit(this);return i!==e.expression?new Tp(e.span,e.sourceSpan,i):e}visitConditional(e,t){const i=e.condition.visit(this),s=e.trueExp.visit(this),r=e.falseExp.visit(this);return i!==e.condition||s!==e.trueExp||r!==e.falseExp?new bp(e.span,e.sourceSpan,i,s,r):e}visitPipe(e,t){const i=e.exp.visit(this),s=this.visitAll(e.args);return i!==e.exp||s!==e.args?new Sp(e.span,e.sourceSpan,i,e.name,s,e.nameSpan):e}visitKeyedRead(e,t){const i=e.receiver.visit(this),s=e.key.visit(this);return i!==e.receiver||s!==e.key?new Jl(e.span,e.sourceSpan,i,s):e}visitKeyedWrite(e,t){const i=e.receiver.visit(this),s=e.key.visit(this),r=e.value.visit(this);return i!==e.receiver||s!==e.key||r!==e.value?new Gy(e.span,e.sourceSpan,i,s,r):e}visitAll(e){const t=[];let i=!1;for(let s=0;s<e.length;++s){const r=e[s],o=r.visit(this);t[s]=o,i=i||o!==r}return i?t:e}visitChain(e,t){const i=this.visitAll(e.expressions);return i!==e.expressions?new hd(e.span,e.sourceSpan,i):e}visitCall(e,t){const i=e.receiver.visit(this),s=this.visitAll(e.args);return i!==e.receiver||s!==e.args?new Ha(e.span,e.sourceSpan,i,s,e.argumentSpan):e}visitSafeCall(e,t){const i=e.receiver.visit(this),s=this.visitAll(e.args);return i!==e.receiver||s!==e.args?new Dp(e.span,e.sourceSpan,i,s,e.argumentSpan):e}visitSafeKeyedRead(e,t){const i=e.receiver.visit(this),s=e.key.visit(this);return i!==e.receiver||s!==e.key?new Cp(e.span,e.sourceSpan,i,s):e}}class _I{constructor(e,t,i,s,r,o){this.name=e,this.expression=t,this.type=i,this.sourceSpan=s,this.keySpan=r,this.valueSpan=o,this.isLiteral=this.type===za.LITERAL_ATTR,this.isAnimation=this.type===za.ANIMATION}}var za=function(n){return n[n.DEFAULT=0]="DEFAULT",n[n.LITERAL_ATTR=1]="LITERAL_ATTR",n[n.ANIMATION=2]="ANIMATION",n[n.TWO_WAY=3]="TWO_WAY",n}(za||{});class sV{constructor(e,t,i,s,r,o,a){this.name=e,this.targetOrPhase=t,this.type=i,this.handler=s,this.sourceSpan=r,this.handlerSpan=o,this.keySpan=a}}class Yse{constructor(e,t,i,s,r){this.name=e,this.value=t,this.sourceSpan=i,this.keySpan=s,this.valueSpan=r}}class rV{constructor(e,t,i,s,r,o,a,l){this.name=e,this.type=t,this.securityContext=i,this.value=s,this.unit=r,this.sourceSpan=o,this.keySpan=a,this.valueSpan=l}}class fd{static{this.event=te("$event")}}function Qy(n){return new cr(m.twoWayBindingSet).callFn([n,fd.event]).or(n.set(fd.event))}function Yy(n){return n instanceof Xn||n instanceof Rs}function oV(n,e){return function nre(n,e){const t=new sre(n);return e.visit(t)}(n,e)}class Jse{constructor(e,t){this.stmts=e,this.currValExpr=t}}function aV(n,e,t,i){n||(n=new EI);const s=new Ap(n,e,i,!1),r=t.visit(s,ct.Expression),o=lV(s,i);return s.usesImplicitReceiver&&n.notifyImplicitReceiverUse(),new Jse(o,r)}function lV(n,e){const t=[];for(let i=0;i<n.temporaryCount;i++)t.push(uV(e,i));return t}function cV(n){return oV({createLiteralArrayConverter:()=>t=>le(t),createLiteralMapConverter:t=>i=>Gt(t.map((r,o)=>({key:r.key,value:i[o],quoted:r.quoted}))),createPipeConverter:t=>{throw new Error(`Illegal State: Actions are not allowed to contain pipes. Pipe: ${t}`)}},n)}function wI(n,e){return`tmp_${n}_${e}`}function uV(n,e){return new Zn(wI(n,e))}function dV(n,e,t){for(let i=n-1;i>=0;i--)t.unshift(uV(e,i))}var ct=function(n){return n[n.Statement=0]="Statement",n[n.Expression=1]="Expression",n}(ct||{});function hV(n,e){if(n!==ct.Expression)throw new Error(`Expected an expression, but saw ${e}`)}function Li(n,e){return n===ct.Statement?e.toStmt():e}class sre extends Wse{constructor(e){super(),this._converterFactory=e}visitPipe(e,t){const i=[e.exp,...e.args].map(s=>s.visit(this,t));return new pd(e.span,e.sourceSpan,i,this._converterFactory.createPipeConverter(e.name,i.length))}visitLiteralArray(e,t){const i=e.expressions.map(s=>s.visit(this,t));return new pd(e.span,e.sourceSpan,i,this._converterFactory.createLiteralArrayConverter(e.expressions.length))}visitLiteralMap(e,t){const i=e.values.map(s=>s.visit(this,t));return new pd(e.span,e.sourceSpan,i,this._converterFactory.createLiteralMapConverter(e.keys))}}class Ap{constructor(e,t,i,s,r,o){this._localResolver=e,this._implicitReceiver=t,this.bindingId=i,this.supportsInterpolation=s,this.baseSourceSpan=r,this.implicitReceiverAccesses=o,this._nodeMap=new Map,this._resultMap=new Map,this._currentTemporary=0,this.temporaryCount=0,this.usesImplicitReceiver=!1}visitUnary(e,t){let i;switch(e.operator){case"+":i=Oa.Plus;break;case"-":i=Oa.Minus;break;default:throw new Error(`Unsupported operator ${e.operator}`)}return Li(t,new jr(i,this._visit(e.expr,ct.Expression),void 0,this.convertSourceSpan(e.span)))}visitBinary(e,t){let i;switch(e.operation){case"+":i=Y.Plus;break;case"-":i=Y.Minus;break;case"*":i=Y.Multiply;break;case"/":i=Y.Divide;break;case"%":i=Y.Modulo;break;case"&&":i=Y.And;break;case"||":i=Y.Or;break;case"==":i=Y.Equals;break;case"!=":i=Y.NotEquals;break;case"===":i=Y.Identical;break;case"!==":i=Y.NotIdentical;break;case"<":i=Y.Lower;break;case">":i=Y.Bigger;break;case"<=":i=Y.LowerEquals;break;case">=":i=Y.BiggerEquals;break;case"??":return this.convertNullishCoalesce(e,t);default:throw new Error(`Unsupported operation ${e.operation}`)}return Li(t,new Oe(i,this._visit(e.left,ct.Expression),this._visit(e.right,ct.Expression),void 0,this.convertSourceSpan(e.span)))}visitChain(e,t){return function ire(n,e){if(n!==ct.Statement)throw new Error(`Expected a statement, but saw ${e}`)}(t,e),this.visitAll(e.expressions,t)}visitConditional(e,t){return Li(t,this._visit(e.condition,ct.Expression).conditional(this._visit(e.trueExp,ct.Expression),this._visit(e.falseExp,ct.Expression),this.convertSourceSpan(e.span)))}visitPipe(e,t){throw new Error(`Illegal state: Pipes should have been converted into functions. Pipe: ${e.name}`)}visitImplicitReceiver(e,t){return hV(t,e),this.usesImplicitReceiver=!0,this._implicitReceiver}visitThisReceiver(e,t){return this.visitImplicitReceiver(e,t)}visitInterpolation(e,t){if(!this.supportsInterpolation)throw new Error("Unexpected interpolation");hV(t,e);let i=[];for(let r=0;r<e.strings.length-1;r++)i.push(w(e.strings[r])),i.push(this._visit(e.expressions[r],ct.Expression));i.push(w(e.strings[e.strings.length-1]));const s=e.strings;return 2===s.length&&""===s[0]&&""===s[1]?i=[i[1]]:e.expressions.length>=9&&(i=[le(i)]),new rre(i)}visitKeyedRead(e,t){const i=this.leftMostSafeNode(e);return i?this.convertSafeAccess(e,i,t):Li(t,this._visit(e.receiver,ct.Expression).key(this._visit(e.key,ct.Expression)))}visitKeyedWrite(e,t){const i=this._visit(e.receiver,ct.Expression),s=this._visit(e.key,ct.Expression),r=this._visit(e.value,ct.Expression);return i===this._implicitReceiver&&this._localResolver.maybeRestoreView(),Li(t,i.key(s).set(r))}visitLiteralArray(e,t){throw new Error("Illegal State: literal arrays should have been converted into functions")}visitLiteralMap(e,t){throw new Error("Illegal State: literal maps should have been converted into functions")}visitLiteralPrimitive(e,t){return Li(t,w(e.value,null==e.value||!0===e.value||!0===e.value?ui:void 0,this.convertSourceSpan(e.span)))}_getLocal(e,t){return this._localResolver.globals?.has(e)&&t instanceof dd?null:this._localResolver.getLocal(e)}visitPrefixNot(e,t){return Li(t,F0(this._visit(e.expression,ct.Expression)))}visitNonNullAssert(e,t){return Li(t,this._visit(e.expression,ct.Expression))}visitPropertyRead(e,t){const i=this.leftMostSafeNode(e);if(i)return this.convertSafeAccess(e,i,t);{let s=null;const r=this.usesImplicitReceiver,o=this._visit(e.receiver,ct.Expression);return o===this._implicitReceiver&&(s=this._getLocal(e.name,e.receiver),s&&(this.usesImplicitReceiver=r,this.addImplicitReceiverAccess(e.name))),null==s&&(s=o.prop(e.name,this.convertSourceSpan(e.span))),Li(t,s)}}visitPropertyWrite(e,t){const i=this._visit(e.receiver,ct.Expression),s=this.usesImplicitReceiver;let r=null;if(i===this._implicitReceiver){const o=this._getLocal(e.name,e.receiver);if(o){if(!(o instanceof Xn))throw new Error(`Cannot assign value "${e.value instanceof hi?e.value.name:void 0}" to template variable "${e.name}". Template variables are read-only.`);r=o,this.usesImplicitReceiver=s,this.addImplicitReceiverAccess(e.name)}}return null===r&&(r=i.prop(e.name,this.convertSourceSpan(e.span))),Li(t,r.set(this._visit(e.value,ct.Expression)))}visitSafePropertyRead(e,t){return this.convertSafeAccess(e,this.leftMostSafeNode(e),t)}visitSafeKeyedRead(e,t){return this.convertSafeAccess(e,this.leftMostSafeNode(e),t)}visitAll(e,t){return e.map(i=>this._visit(i,t))}visitCall(e,t){const i=this.leftMostSafeNode(e);if(i)return this.convertSafeAccess(e,i,t);const s=this.visitAll(e.args,ct.Expression);if(e instanceof pd)return Li(t,e.converter(s));const r=e.receiver;if(r instanceof hi&&r.receiver instanceof Zi&&!(r.receiver instanceof dd)&&"$any"===r.name){if(1!==s.length)throw new Error(`Invalid call to $any, expected 1 argument but received ${s.length||"none"}`);return Li(t,s[0])}return Li(t,this._visit(r,ct.Expression).callFn(s,this.convertSourceSpan(e.span)))}visitSafeCall(e,t){return this.convertSafeAccess(e,this.leftMostSafeNode(e),t)}_visit(e,t){return this._resultMap.get(e)||(this._nodeMap.get(e)||e).visit(this,t)}convertSafeAccess(e,t,i){let r,s=this._visit(t.receiver,ct.Expression);this.needsTemporaryInSafeAccess(t.receiver)&&(r=this.allocateTemporary(),s=r.set(s),this._resultMap.set(t.receiver,r));const o=s.isBlank();this._nodeMap.set(t,t instanceof Dp?new Ha(t.span,t.sourceSpan,t.receiver,t.args,t.argumentSpan):t instanceof Cp?new Jl(t.span,t.sourceSpan,t.receiver,t.key):new hi(t.span,t.sourceSpan,t.nameSpan,t.receiver,t.name));const a=this._visit(e,ct.Expression);return this._nodeMap.delete(t),r&&this.releaseTemporary(r),Li(i,o.conditional($o,a))}convertNullishCoalesce(e,t){const i=this._visit(e.left,ct.Expression),s=this._visit(e.right,ct.Expression),r=this.allocateTemporary();return this.releaseTemporary(r),Li(t,r.set(i).notIdentical($o).and(r.notIdentical(w(void 0))).conditional(r,s))}leftMostSafeNode(e){const t=(i,s)=>(this._nodeMap.get(s)||s).visit(i);return e.visit({visitUnary:i=>null,visitBinary:i=>null,visitChain:i=>null,visitConditional:i=>null,visitCall(i){return t(this,i.receiver)},visitSafeCall(i){return t(this,i.receiver)||i},visitImplicitReceiver:i=>null,visitThisReceiver:i=>null,visitInterpolation:i=>null,visitKeyedRead(i){return t(this,i.receiver)},visitKeyedWrite:i=>null,visitLiteralArray:i=>null,visitLiteralMap:i=>null,visitLiteralPrimitive:i=>null,visitPipe:i=>null,visitPrefixNot:i=>null,visitNonNullAssert(i){return t(this,i.expression)},visitPropertyRead(i){return t(this,i.receiver)},visitPropertyWrite:i=>null,visitSafePropertyRead(i){return t(this,i.receiver)||i},visitSafeKeyedRead(i){return t(this,i.receiver)||i}})}needsTemporaryInSafeAccess(e){const t=(s,r)=>r&&(this._nodeMap.get(r)||r).visit(s);return e.visit({visitUnary(s){return t(this,s.expr)},visitBinary(s){return t(this,s.left)||t(this,s.right)},visitChain:s=>!1,visitConditional(s){return t(this,s.condition)||t(this,s.trueExp)||t(this,s.falseExp)},visitCall:s=>!0,visitSafeCall:s=>!0,visitImplicitReceiver:s=>!1,visitThisReceiver:s=>!1,visitInterpolation(s){return((s,r)=>r.some(o=>t(s,o)))(this,s.expressions)},visitKeyedRead:s=>!1,visitKeyedWrite:s=>!1,visitLiteralArray:s=>!0,visitLiteralMap:s=>!0,visitLiteralPrimitive:s=>!1,visitPipe:s=>!0,visitPrefixNot(s){return t(this,s.expression)},visitNonNullAssert(s){return t(this,s.expression)},visitPropertyRead:s=>!1,visitPropertyWrite:s=>!1,visitSafePropertyRead:s=>!1,visitSafeKeyedRead:s=>!1})}allocateTemporary(){const e=this._currentTemporary++;return this.temporaryCount=Math.max(this._currentTemporary,this.temporaryCount),new Ni(wI(this.bindingId,e))}releaseTemporary(e){if(this._currentTemporary--,e.name!=wI(this.bindingId,this._currentTemporary))throw new Error(`Temporary ${e.name} released out of order`)}convertSourceSpan(e){if(this.baseSourceSpan){const t=this.baseSourceSpan.start.moveBy(e.start),i=this.baseSourceSpan.start.moveBy(e.end),s=this.baseSourceSpan.fullStart.moveBy(e.start);return new $e(t,i,s)}return null}addImplicitReceiverAccess(e){this.implicitReceiverAccesses&&this.implicitReceiverAccesses.add(e)}}function Xy(n,e){Array.isArray(n)?n.forEach(t=>Xy(t,e)):e.push(n)}function Zy(){throw new Error("Unsupported operation")}class rre extends lt{constructor(e){super(null,null),this.args=e,this.isConstant=Zy,this.isEquivalent=Zy,this.visitExpression=Zy,this.clone=Zy}}class EI{constructor(e){this.globals=e}notifyImplicitReceiverUse(){}maybeRestoreView(){}getLocal(e){return e===fd.event.name?fd.event:null}}class pd extends Ha{constructor(e,t,i,s){super(e,t,new Xi(e,t),i,null),this.converter=s}}let Ky;function fV(){return Ky||(Ky={},Jy(qe.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),Jy(qe.STYLE,["*|style"]),Jy(qe.URL,["*|formAction","area|href","area|ping","audio|src","a|href","a|ping","blockquote|cite","body|background","del|cite","form|action","img|src","input|src","ins|cite","q|cite","source|src","track|src","video|poster","video|src"]),Jy(qe.RESOURCE_URL,["applet|code","applet|codebase","base|href","embed|src","frame|src","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])),Ky}function Jy(n,e){for(const t of e)Ky[t.toLowerCase()]=n}const ore=new Set(["sandbox","allow","allowfullscreen","referrerpolicy","csp","fetchpriority"]);function bI(n){return ore.has(n.toLowerCase())}const are=new Set(["inherit","initial","revert","unset","alternate","alternate-reverse","normal","reverse","backwards","both","forwards","none","paused","running","ease","ease-in","ease-in-out","ease-out","linear","step-start","step-end","end","jump-both","jump-end","jump-none","jump-start","start"]),lre=["@media","@supports","@document","@layer","@container","@scope","@starting-style"];class pV{constructor(){this._animationDeclarationKeyframesRe=/(^|\s+)(?:(?:(['"])((?:\\\\|\\\2|(?!\2).)+)\2)|(-?[A-Za-z][\w\-]*))(?=[,\s]|$)/g}shimCssText(e,t,i=""){const s=[];e=e.replace(wre,a=>{if(a.match(Ere))s.push(a);else{const l=a.match(_re);s.push((l?.join("")??"")+"\n")}return II}),e=this._insertDirectives(e);const r=this._scopeCssText(e,t,i);let o=0;return r.replace(bre,()=>s[o++])}_insertDirectives(e){return e=this._insertPolyfillDirectivesInCssText(e),this._insertPolyfillRulesInCssText(e)}_scopeKeyframesRelatedCss(e,t){const i=new Set,s=t_(e,r=>this._scopeLocalKeyframeDeclarations(r,t,i));return t_(s,r=>this._scopeAnimationRule(r,t,i))}_scopeLocalKeyframeDeclarations(e,t,i){return{...e,selector:e.selector.replace(/(^@(?:-webkit-)?keyframes(?:\s+))(['"]?)(.+)\2(\s*)$/,(s,r,o,a,l)=>(i.add(EV(a,o)),`${r}${o}${t}_${a}${o}${l}`))}}_scopeAnimationKeyframe(e,t,i){return e.replace(/^(\s*)(['"]?)(.+?)\2(\s*)$/,(s,r,o,a,l)=>`${r}${o}${a=`${i.has(EV(a,o))?t+"_":""}${a}`}${o}${l}`)}_scopeAnimationRule(e,t,i){let s=e.content.replace(/((?:^|\s+|;)(?:-webkit-)?animation(?:\s*):(?:\s*))([^;]+)/g,(r,o,a)=>o+a.replace(this._animationDeclarationKeyframesRe,(l,c,u="",d,h)=>d?`${c}${this._scopeAnimationKeyframe(`${u}${d}${u}`,t,i)}`:are.has(h)?l:`${c}${this._scopeAnimationKeyframe(h,t,i)}`));return s=s.replace(/((?:^|\s+|;)(?:-webkit-)?animation-name(?:\s*):(?:\s*))([^;]+)/g,(r,o,a)=>`${o}${a.split(",").map(l=>this._scopeAnimationKeyframe(l,t,i)).join(",")}`),{...e,content:s}}_insertPolyfillDirectivesInCssText(e){return e.replace(ure,function(...t){return t[2]+"{"})}_insertPolyfillRulesInCssText(e){return e.replace(dre,(...t)=>{const i=t[0].replace(t[1],"").replace(t[2],"");return t[4]+i})}_scopeCssText(e,t,i){const s=this._extractUnscopedRulesFromCssText(e);return e=this._insertPolyfillHostInCssText(e),e=this._convertColonHost(e),e=this._convertColonHostContext(e),e=this._convertShadowDOMSelectors(e),t&&(e=this._scopeKeyframesRelatedCss(e,t),e=this._scopeSelectors(e,t,i)),(e=e+"\n"+s).trim()}_extractUnscopedRulesFromCssText(e){let i,t="";for(gV.lastIndex=0;null!==(i=gV.exec(e));)t+=i[0].replace(i[2],"").replace(i[1],i[4])+"\n\n";return t}_convertColonHost(e){return e.replace(hre,(t,i,s)=>{if(i){const r=[],o=i.split(",").map(a=>a.trim());for(const a of o){if(!a)break;const l=ec+a.replace(e_,"")+s;r.push(l)}return r.join(",")}return ec+s})}_convertColonHostContext(e){return e.replace(fre,t=>{const i=[[]];let s;for(;s=pre.exec(t);){const r=(s[1]??"").trim().split(",").map(a=>a.trim()).filter(a=>""!==a),o=i.length;Pre(i,r.length);for(let a=0;a<r.length;a++)for(let l=0;l<o;l++)i[l+a*o].push(r[a]);t=s[2]}return i.map(r=>function Rre(n,e){const t=ec;gd.lastIndex=0;const i=gd.test(e);if(0===n.length)return t+e;const s=[n.pop()||""];for(;n.length>0;){const r=s.length,o=n.pop();for(let a=0;a<r;a++){const l=s[a];s[2*r+a]=l+" "+o,s[r+a]=o+" "+l,s[a]=o+l}}return s.map(r=>i?`${r}${e}`:`${r}${t}${e}, ${r} ${t}${e}`).join(",")}(r,t)).join(", ")})}_convertShadowDOMSelectors(e){return gre.reduce((t,i)=>t.replace(i," "),e)}_scopeSelectors(e,t,i){return t_(e,s=>{let r=s.selector,o=s.content;return"@"!==s.selector[0]?r=this._scopeSelector(s.selector,t,i):lre.some(a=>s.selector.startsWith(a))?o=this._scopeSelectors(s.content,t,i):(s.selector.startsWith("@font-face")||s.selector.startsWith("@page"))&&(o=this._stripScopingSelectors(s.content)),new TI(r,o)})}_stripScopingSelectors(e){return t_(e,t=>{const i=t.selector.replace(vV," ").replace(mV," ");return new TI(i,t.content)})}_scopeSelector(e,t,i){return e.split(",").map(s=>s.trim().split(vV)).map(s=>{const[r,...o]=s;return[(l=>this._selectorNeedsScoping(l,t)?this._applySelectorScope(l,t,i):l)(r),...o].join(" ")}).join(", ")}_selectorNeedsScoping(e,t){return!this._makeScopeMatcher(t).test(e)}_makeScopeMatcher(e){return e=e.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),new RegExp("^("+e+")"+mre,"m")}_applySimpleSelectorScope(e,t,i){if(gd.lastIndex=0,gd.test(e)){const s=`[${i}]`;return e.replace(mV,(r,o)=>o.replace(/([^:]*)(:*)(.*)/,(a,l,c,u)=>l+s+c+u)).replace(gd,s+" ")}return t+" "+e}_applySelectorScope(e,t,i){const r="["+(t=t.replace(/\[is=([^\]]*)\]/g,(g,...v)=>v[0]))+"]",o=g=>{let v=g.trim();if(!v)return"";if(g.indexOf(ec)>-1)v=this._applySimpleSelectorScope(g,t,i);else{const _=g.replace(gd,"");if(_.length>0){const E=_.match(/([^:]*)(:*)(.*)/);E&&(v=E[1]+r+E[2]+E[3])}}return v},a=new cre(e);let u,l="",c=0;const d=/( |>|\+|~(?!=))\s*/g;let f=!((e=a.content()).indexOf(ec)>-1);for(;null!==(u=d.exec(e));){const g=u[1],v=e.slice(c,u.index).trim();v.match(/__esc-ph-(\d+)__/)&&e[u.index+1]?.match(/[a-fA-F\d]/)||(f=f||v.indexOf(ec)>-1,l+=`${f?o(v):v} ${g} `,c=d.lastIndex)}const p=e.substring(c);return f=f||p.indexOf(ec)>-1,l+=f?o(p):p,a.restore(l)}_insertPolyfillHostInCssText(e){return e.replace(yre,CI).replace(vre,e_)}}class cre{constructor(e){this.placeholders=[],this.index=0,e=(e=this._escapeRegexMatches(e,/(\[[^\]]*\])/g)).replace(/(\\.)/g,(t,i)=>{const s=`__esc-ph-${this.index}__`;return this.placeholders.push(i),this.index++,s}),this._content=e.replace(/(:nth-[-\w]+)(\([^)]+\))/g,(t,i,s)=>{const r=`__ph-${this.index}__`;return this.placeholders.push(s),this.index++,i+r})}restore(e){return e.replace(/__(?:ph|esc-ph)-(\d+)__/g,(t,i)=>this.placeholders[+i])}content(){return this._content}_escapeRegexMatches(e,t){return e.replace(t,(i,s)=>{const r=`__ph-${this.index}__`;return this.placeholders.push(s),this.index++,r})}}const ure=/polyfill-next-selector[^}]*content:[\s]*?(['"])(.*?)\1[;\s]*}([^{]*?){/gim,dre=/(polyfill-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,gV=/(polyfill-unscoped-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,e_="-shadowcsshost",CI="-shadowcsscontext",SI="(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",hre=new RegExp(e_+SI,"gim"),fre=new RegExp(CI+SI,"gim"),pre=new RegExp(CI+SI,"im"),ec=e_+"-no-combinator",mV=/-shadowcsshost-no-combinator([^\s]*)/,gre=[/::shadow/g,/::content/g,/\/shadow-deep\//g,/\/shadow\//g],vV=/(?:>>>)|(?:\/deep\/)|(?:::ng-deep)/g,mre="([>\\s~+[.,{:][\\s\\S]*)?$",gd=/-shadowcsshost/gim,vre=/:host/gim,yre=/:host-context/gim,_re=/\r?\n/g,wre=/\/\*[\s\S]*?\*\//g,Ere=/\/\*\s*#\s*source(Mapping)?URL=/g,II="%COMMENT%",bre=new RegExp(II,"g"),xI="%BLOCK%",Cre=new RegExp(`(\\s*(?:${II}\\s*)*)([^;\\{\\}]+?)(\\s*)((?:{%BLOCK%}?\\s*;?)|(?:\\s*;))`,"g"),Sre=new Map([["{","}"]]),yV="%COMMA_IN_PLACEHOLDER%",_V="%SEMI_IN_PLACEHOLDER%",wV="%COLON_IN_PLACEHOLDER%",Ire=new RegExp(yV,"g"),xre=new RegExp(_V,"g"),Tre=new RegExp(wV,"g");class TI{constructor(e,t){this.selector=e,this.content=t}}function t_(n,e){const t=function Mre(n){let e=n,t=null;for(let i=0;i<e.length;i++){const s=e[i];if("\\"===s)i++;else if(null!==t)if(s===t)t=null;else{const r=kre[s];r&&(e=`${e.substr(0,i)}${r}${e.substr(i+1)}`,i+=r.length-1)}else("'"===s||'"'===s)&&(t=s)}return e}(n),i=function Are(n,e,t){const i=[],s=[];let l,c,r=0,o=0,a=-1;for(let u=0;u<n.length;u++){const d=n[u];"\\"===d?u++:d===c?(r--,0===r&&(s.push(n.substring(a,u)),i.push(t),o=u,a=-1,l=c=void 0)):d===l?r++:0===r&&e.has(d)&&(l=d,c=e.get(d),r=1,a=u+1,i.push(n.substring(o,a)))}return-1!==a?(s.push(n.substring(a)),i.push(t)):i.push(n.substring(o)),new Dre(i.join(""),s)}(t,Sre,xI);let s=0;return function Nre(n){let e=n.replace(Ire,",");return e=e.replace(xre,";"),e=e.replace(Tre,":"),e}(i.escapedString.replace(Cre,(...o)=>{const a=o[2];let l="",c=o[4],u="";c&&c.startsWith("{"+xI)&&(l=i.blocks[s++],c=c.substring(xI.length+1),u="{");const d=e(new TI(a,l));return`${o[1]}${d.selector}${o[3]}${u}${d.content}${c}`}))}class Dre{constructor(e,t){this.escapedString=e,this.blocks=t}}const kre={";":_V,",":yV,":":wV};function EV(n,e){return e?n.replace(/((?:^|[^\\])(?:\\\\)*)\\(?=['"])/g,"$1"):n}function Pre(n,e){const t=n.length;for(let i=1;i<e;i++)for(let s=0;s<t;s++)n[s+i*t]=n[s].slice(0)}var y=function(n){return n[n.ListEnd=0]="ListEnd",n[n.Statement=1]="Statement",n[n.Variable=2]="Variable",n[n.ElementStart=3]="ElementStart",n[n.Element=4]="Element",n[n.Template=5]="Template",n[n.ElementEnd=6]="ElementEnd",n[n.ContainerStart=7]="ContainerStart",n[n.Container=8]="Container",n[n.ContainerEnd=9]="ContainerEnd",n[n.DisableBindings=10]="DisableBindings",n[n.Conditional=11]="Conditional",n[n.EnableBindings=12]="EnableBindings",n[n.Text=13]="Text",n[n.Listener=14]="Listener",n[n.InterpolateText=15]="InterpolateText",n[n.Binding=16]="Binding",n[n.Property=17]="Property",n[n.StyleProp=18]="StyleProp",n[n.ClassProp=19]="ClassProp",n[n.StyleMap=20]="StyleMap",n[n.ClassMap=21]="ClassMap",n[n.Advance=22]="Advance",n[n.Pipe=23]="Pipe",n[n.Attribute=24]="Attribute",n[n.ExtractedAttribute=25]="ExtractedAttribute",n[n.Defer=26]="Defer",n[n.DeferOn=27]="DeferOn",n[n.DeferWhen=28]="DeferWhen",n[n.I18nMessage=29]="I18nMessage",n[n.HostProperty=30]="HostProperty",n[n.Namespace=31]="Namespace",n[n.ProjectionDef=32]="ProjectionDef",n[n.Projection=33]="Projection",n[n.RepeaterCreate=34]="RepeaterCreate",n[n.Repeater=35]="Repeater",n[n.TwoWayProperty=36]="TwoWayProperty",n[n.TwoWayListener=37]="TwoWayListener",n[n.I18nStart=38]="I18nStart",n[n.I18n=39]="I18n",n[n.I18nEnd=40]="I18nEnd",n[n.I18nExpression=41]="I18nExpression",n[n.I18nApply=42]="I18nApply",n[n.IcuStart=43]="IcuStart",n[n.IcuEnd=44]="IcuEnd",n[n.IcuPlaceholder=45]="IcuPlaceholder",n[n.I18nContext=46]="I18nContext",n[n.I18nAttributes=47]="I18nAttributes",n}(y||{}),ue=function(n){return n[n.LexicalRead=0]="LexicalRead",n[n.Context=1]="Context",n[n.TrackContext=2]="TrackContext",n[n.ReadVariable=3]="ReadVariable",n[n.NextContext=4]="NextContext",n[n.Reference=5]="Reference",n[n.GetCurrentView=6]="GetCurrentView",n[n.RestoreView=7]="RestoreView",n[n.ResetView=8]="ResetView",n[n.PureFunctionExpr=9]="PureFunctionExpr",n[n.PureFunctionParameterExpr=10]="PureFunctionParameterExpr",n[n.PipeBinding=11]="PipeBinding",n[n.PipeBindingVariadic=12]="PipeBindingVariadic",n[n.SafePropertyRead=13]="SafePropertyRead",n[n.SafeKeyedRead=14]="SafeKeyedRead",n[n.SafeInvokeFunction=15]="SafeInvokeFunction",n[n.SafeTernaryExpr=16]="SafeTernaryExpr",n[n.EmptyExpr=17]="EmptyExpr",n[n.AssignTemporaryExpr=18]="AssignTemporaryExpr",n[n.ReadTemporaryExpr=19]="ReadTemporaryExpr",n[n.SlotLiteralExpr=20]="SlotLiteralExpr",n[n.ConditionalCase=21]="ConditionalCase",n[n.ConstCollected=22]="ConstCollected",n[n.TwoWayBindingSet=23]="TwoWayBindingSet",n}(ue||{}),Xr=function(n){return n[n.None=0]="None",n[n.AlwaysInline=1]="AlwaysInline",n}(Xr||{}),Bn=function(n){return n[n.Context=0]="Context",n[n.Identifier=1]="Identifier",n[n.SavedView=2]="SavedView",n[n.Alias=3]="Alias",n}(Bn||{}),ys=function(n){return n[n.Normal=0]="Normal",n[n.TemplateDefinitionBuilder=1]="TemplateDefinitionBuilder",n}(ys||{}),oe=function(n){return n[n.Attribute=0]="Attribute",n[n.ClassName=1]="ClassName",n[n.StyleProperty=2]="StyleProperty",n[n.Property=3]="Property",n[n.Template=4]="Template",n[n.I18n=5]="I18n",n[n.Animation=6]="Animation",n[n.TwoWayProperty=7]="TwoWayProperty",n}(oe||{}),kp=function(n){return n[n.Creation=0]="Creation",n[n.Postproccessing=1]="Postproccessing",n}(kp||{}),md=function(n){return n[n.I18nText=0]="I18nText",n[n.I18nAttribute=1]="I18nAttribute",n}(md||{}),Ct=function(n){return n[n.None=0]="None",n[n.ElementTag=1]="ElementTag",n[n.TemplateTag=2]="TemplateTag",n[n.OpenTag=4]="OpenTag",n[n.CloseTag=8]="CloseTag",n[n.ExpressionIndex=16]="ExpressionIndex",n}(Ct||{}),fi=function(n){return n[n.HTML=0]="HTML",n[n.SVG=1]="SVG",n[n.Math=2]="Math",n}(fi||{}),Ft=function(n){return n[n.Idle=0]="Idle",n[n.Immediate=1]="Immediate",n[n.Timer=2]="Timer",n[n.Hover=3]="Hover",n[n.Interaction=4]="Interaction",n[n.Viewport=5]="Viewport",n}(Ft||{}),tc=function(n){return n[n.RootI18n=0]="RootI18n",n[n.Icu=1]="Icu",n[n.Attr=2]="Attr",n}(tc||{}),_s=function(n){return n[n.NgTemplate=0]="NgTemplate",n[n.Structural=1]="Structural",n[n.Block=2]="Block",n}(_s||{});const bV=Symbol("ConsumesSlot"),CV=Symbol("DependsOnSlotContext"),Mp=Symbol("ConsumesVars"),n_=Symbol("UsesVarOffset"),Qo={[bV]:!0,numSlotsUsed:1},$s={[CV]:!0},ws={[Mp]:!0};function vd(n){return!0===n[bV]}function DI(n){return!0===n[CV]}function AI(n){return!0===n[Mp]}function SV(n){return!0===n[n_]}function Zr(n){return{kind:y.Statement,statement:n,...Le}}function yd(n,e,t,i){return{kind:y.Variable,xref:n,variable:e,initializer:t,flags:i,...Le}}const Le={debugListId:null,prev:null,next:null};class Nn{constructor(e,t,i){if(this.strings=e,this.expressions=t,this.i18nPlaceholders=i,0!==i.length&&i.length!==t.length)throw new Error(`Expected ${t.length} placeholders to match interpolation expression count, but got ${i.length}`)}}function nc(n,e,t,i,s,r,o,a,l,c,u){return{kind:y.Binding,bindingKind:e,target:n,name:t,expression:i,unit:s,securityContext:r,isTextAttribute:o,isStructuralTemplateAttribute:a,templateKind:l,i18nContext:null,i18nMessage:c,sourceSpan:u,...Le}}function Fre(n,e,t,i,s,r,o,a,l,c){return{kind:y.Property,target:n,name:e,expression:t,isAnimationTrigger:i,securityContext:s,sanitizer:null,isStructuralTemplateAttribute:r,templateKind:o,i18nContext:a,i18nMessage:l,sourceSpan:c,...$s,...ws,...Le}}function Lre(n,e,t,i,s,r,o,a,l){return{kind:y.TwoWayProperty,target:n,name:e,expression:t,securityContext:i,sanitizer:null,isStructuralTemplateAttribute:s,templateKind:r,i18nContext:o,i18nMessage:a,sourceSpan:l,...$s,...ws,...Le}}function Bre(n,e,t,i,s){return{kind:y.StyleProp,target:n,name:e,expression:t,unit:i,sourceSpan:s,...$s,...ws,...Le}}function Vre(n,e,t,i){return{kind:y.ClassProp,target:n,name:e,expression:t,sourceSpan:i,...$s,...ws,...Le}}function $re(n,e,t){return{kind:y.StyleMap,target:n,expression:e,sourceSpan:t,...$s,...ws,...Le}}function Ure(n,e,t){return{kind:y.ClassMap,target:n,expression:e,sourceSpan:t,...$s,...ws,...Le}}function jre(n,e,t,i,s,r,o,a,l,c){return{kind:y.Attribute,target:n,namespace:e,name:t,expression:i,securityContext:s,sanitizer:null,isTextAttribute:r,isStructuralTemplateAttribute:o,templateKind:a,i18nContext:null,i18nMessage:l,sourceSpan:c,...$s,...ws,...Le}}function Hre(n,e){return{kind:y.Advance,delta:n,sourceSpan:e,...Le}}function IV(n,e,t,i,s){return{kind:y.Conditional,target:n,targetSlot:e,test:t,conditions:i,processed:null,sourceSpan:s,contextValue:null,...Le,...$s,...ws}}function qre(n,e,t,i){return{kind:y.DeferWhen,target:n,expr:e,prefetch:t,sourceSpan:i,...Le,...$s,...ws}}function xV(n,e,t,i,s,r,o,a,l,c,u){return{kind:y.I18nExpression,context:n,target:e,i18nOwner:t,handle:i,expression:s,icuPlaceholder:r,i18nPlaceholder:o,resolutionTime:a,usage:l,name:c,sourceSpan:u,...Le,...ws,...$s}}function Gre(n,e,t){return{kind:y.I18nApply,owner:n,handle:e,sourceSpan:t,...Le}}var TV,DV,AV,kV,MV,NV;function Us(n){return n instanceof Lt}class Lt extends lt{constructor(e=null){super(null,e)}}class Ji extends Lt{constructor(e){super(),this.name=e,this.kind=ue.LexicalRead}visitExpression(e,t){}isEquivalent(e){return this.name===e.name}isConstant(){return!1}transformInternalExpressions(){}clone(){return new Ji(this.name)}}class Np extends Lt{constructor(e,t,i){super(),this.target=e,this.targetSlot=t,this.offset=i,this.kind=ue.Reference}visitExpression(){}isEquivalent(e){return e instanceof Np&&e.target===this.target}isConstant(){return!1}transformInternalExpressions(){}clone(){return new Np(this.target,this.targetSlot,this.offset)}}class Kr extends Lt{constructor(e){super(),this.view=e,this.kind=ue.Context}visitExpression(){}isEquivalent(e){return e instanceof Kr&&e.view===this.view}isConstant(){return!1}transformInternalExpressions(){}clone(){return new Kr(this.view)}}class Rp extends Lt{constructor(e){super(),this.view=e,this.kind=ue.TrackContext}visitExpression(){}isEquivalent(e){return e instanceof Rp&&e.view===this.view}isConstant(){return!1}transformInternalExpressions(){}clone(){return new Rp(this.view)}}class Pp extends Lt{constructor(){super(),this.kind=ue.NextContext,this.steps=1}visitExpression(){}isEquivalent(e){return e instanceof Pp&&e.steps===this.steps}isConstant(){return!1}transformInternalExpressions(){}clone(){const e=new Pp;return e.steps=this.steps,e}}class i_ extends Lt{constructor(){super(),this.kind=ue.GetCurrentView}visitExpression(){}isEquivalent(e){return e instanceof i_}isConstant(){return!1}transformInternalExpressions(){}clone(){return new i_}}class Op extends Lt{constructor(e){super(),this.view=e,this.kind=ue.RestoreView}visitExpression(e,t){"number"!=typeof this.view&&this.view.visitExpression(e,t)}isEquivalent(e){return e instanceof Op&&typeof e.view==typeof this.view&&("number"==typeof this.view?this.view===e.view:this.view.isEquivalent(e.view))}isConstant(){return!1}transformInternalExpressions(e,t){"number"!=typeof this.view&&(this.view=J(this.view,e,t))}clone(){return new Op(this.view instanceof lt?this.view.clone():this.view)}}class s_ extends Lt{constructor(e){super(),this.expr=e,this.kind=ue.ResetView}visitExpression(e,t){this.expr.visitExpression(e,t)}isEquivalent(e){return e instanceof s_&&this.expr.isEquivalent(e.expr)}isConstant(){return!1}transformInternalExpressions(e,t){this.expr=J(this.expr,e,t)}clone(){return new s_(this.expr.clone())}}class r_ extends Lt{constructor(e,t){super(),this.target=e,this.value=t,this.kind=ue.TwoWayBindingSet}visitExpression(e,t){this.target.visitExpression(e,t),this.value.visitExpression(e,t)}isEquivalent(e){return this.target.isEquivalent(e.target)&&this.value.isEquivalent(e.value)}isConstant(){return!1}transformInternalExpressions(e,t){this.target=J(this.target,e,t),this.value=J(this.value,e,t)}clone(){return new r_(this.target,this.value)}}class Jr extends Lt{constructor(e){super(),this.xref=e,this.kind=ue.ReadVariable,this.name=null}visitExpression(){}isEquivalent(e){return e instanceof Jr&&e.xref===this.xref}isConstant(){return!1}transformInternalExpressions(){}clone(){const e=new Jr(this.xref);return e.name=this.name,e}}class qa extends Lt{static{TV=Mp,DV=n_}constructor(e,t){super(),this.kind=ue.PureFunctionExpr,this[TV]=!0,this[DV]=!0,this.varOffset=null,this.fn=null,this.body=e,this.args=t}visitExpression(e,t){this.body?.visitExpression(e,t);for(const i of this.args)i.visitExpression(e,t)}isEquivalent(e){return e instanceof qa&&e.args.length===this.args.length&&null!==e.body&&null!==this.body&&e.body.isEquivalent(this.body)&&e.args.every((t,i)=>t.isEquivalent(this.args[i]))}isConstant(){return!1}transformInternalExpressions(e,t){null!==this.body?this.body=J(this.body,e,t|rt.InChildOperation):null!==this.fn&&(this.fn=J(this.fn,e,t));for(let i=0;i<this.args.length;i++)this.args[i]=J(this.args[i],e,t)}clone(){const e=new qa(this.body?.clone()??null,this.args.map(t=>t.clone()));return e.fn=this.fn?.clone()??null,e.varOffset=this.varOffset,e}}class ic extends Lt{constructor(e){super(),this.index=e,this.kind=ue.PureFunctionParameterExpr}visitExpression(){}isEquivalent(e){return e instanceof ic&&e.index===this.index}isConstant(){return!0}transformInternalExpressions(){}clone(){return new ic(this.index)}}class sc extends Lt{static{AV=Mp,kV=n_}constructor(e,t,i,s){super(),this.target=e,this.targetSlot=t,this.name=i,this.args=s,this.kind=ue.PipeBinding,this[AV]=!0,this[kV]=!0,this.varOffset=null}visitExpression(e,t){for(const i of this.args)i.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){for(let i=0;i<this.args.length;i++)this.args[i]=J(this.args[i],e,t)}clone(){const e=new sc(this.target,this.targetSlot,this.name,this.args.map(t=>t.clone()));return e.varOffset=this.varOffset,e}}class o_ extends Lt{static{MV=Mp,NV=n_}constructor(e,t,i,s,r){super(),this.target=e,this.targetSlot=t,this.name=i,this.args=s,this.numArgs=r,this.kind=ue.PipeBindingVariadic,this[MV]=!0,this[NV]=!0,this.varOffset=null}visitExpression(e,t){this.args.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.args=J(this.args,e,t)}clone(){const e=new o_(this.target,this.targetSlot,this.name,this.args.clone(),this.numArgs);return e.varOffset=this.varOffset,e}}class _d extends Lt{constructor(e,t){super(),this.receiver=e,this.name=t,this.kind=ue.SafePropertyRead}get index(){return this.name}visitExpression(e,t){this.receiver.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.receiver=J(this.receiver,e,t)}clone(){return new _d(this.receiver.clone(),this.name)}}class wd extends Lt{constructor(e,t,i){super(i),this.receiver=e,this.index=t,this.kind=ue.SafeKeyedRead}visitExpression(e,t){this.receiver.visitExpression(e,t),this.index.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.receiver=J(this.receiver,e,t),this.index=J(this.index,e,t)}clone(){return new wd(this.receiver.clone(),this.index.clone(),this.sourceSpan)}}class Ga extends Lt{constructor(e,t){super(),this.receiver=e,this.args=t,this.kind=ue.SafeInvokeFunction}visitExpression(e,t){this.receiver.visitExpression(e,t);for(const i of this.args)i.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.receiver=J(this.receiver,e,t);for(let i=0;i<this.args.length;i++)this.args[i]=J(this.args[i],e,t)}clone(){return new Ga(this.receiver.clone(),this.args.map(e=>e.clone()))}}class Ed extends Lt{constructor(e,t){super(),this.guard=e,this.expr=t,this.kind=ue.SafeTernaryExpr}visitExpression(e,t){this.guard.visitExpression(e,t),this.expr.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.guard=J(this.guard,e,t),this.expr=J(this.expr,e,t)}clone(){return new Ed(this.guard.clone(),this.expr.clone())}}class bd extends Lt{constructor(){super(...arguments),this.kind=ue.EmptyExpr}visitExpression(e,t){}isEquivalent(e){return e instanceof bd}isConstant(){return!0}clone(){return new bd}transformInternalExpressions(){}}class mr extends Lt{constructor(e,t){super(),this.expr=e,this.xref=t,this.kind=ue.AssignTemporaryExpr,this.name=null}visitExpression(e,t){this.expr.visitExpression(e,t)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,t){this.expr=J(this.expr,e,t)}clone(){const e=new mr(this.expr.clone(),this.xref);return e.name=this.name,e}}class Yo extends Lt{constructor(e){super(),this.xref=e,this.kind=ue.ReadTemporaryExpr,this.name=null}visitExpression(e,t){}isEquivalent(){return this.xref==this.xref}isConstant(){return!1}transformInternalExpressions(e,t){}clone(){const e=new Yo(this.xref);return e.name=this.name,e}}class Fp extends Lt{constructor(e){super(),this.slot=e,this.kind=ue.SlotLiteralExpr}visitExpression(e,t){}isEquivalent(e){return e instanceof Fp&&e.slot===this.slot}isConstant(){return!0}clone(){return new Fp(this.slot)}transformInternalExpressions(){}}class Lp extends Lt{constructor(e,t,i,s=null){super(),this.expr=e,this.target=t,this.targetSlot=i,this.alias=s,this.kind=ue.ConditionalCase}visitExpression(e,t){null!==this.expr&&this.expr.visitExpression(e,t)}isEquivalent(e){return e instanceof Lp&&e.expr===this.expr}isConstant(){return!0}clone(){return new Lp(this.expr,this.target,this.targetSlot)}transformInternalExpressions(e,t){null!==this.expr&&(this.expr=J(this.expr,e,t))}}class Cd extends Lt{constructor(e){super(),this.expr=e,this.kind=ue.ConstCollected}transformInternalExpressions(e,t){this.expr=e(this.expr,t)}visitExpression(e,t){this.expr.visitExpression(e,t)}isEquivalent(e){return e instanceof Cd&&this.expr.isEquivalent(e.expr)}isConstant(){return this.expr.isConstant()}clone(){return new Cd(this.expr)}}function Bi(n,e){Kn(n,(t,i)=>(e(t,i),t),rt.None)}var rt=function(n){return n[n.None=0]="None",n[n.InChildOperation=1]="InChildOperation",n}(rt||{});function kI(n,e,t){for(let i=0;i<n.expressions.length;i++)n.expressions[i]=J(n.expressions[i],e,t)}function Kn(n,e,t){switch(n.kind){case y.StyleProp:case y.StyleMap:case y.ClassProp:case y.ClassMap:case y.Binding:n.expression instanceof Nn?kI(n.expression,e,t):n.expression=J(n.expression,e,t);break;case y.Property:case y.HostProperty:case y.Attribute:n.expression instanceof Nn?kI(n.expression,e,t):n.expression=J(n.expression,e,t),n.sanitizer=n.sanitizer&&J(n.sanitizer,e,t);break;case y.TwoWayProperty:n.expression=J(n.expression,e,t),n.sanitizer=n.sanitizer&&J(n.sanitizer,e,t);break;case y.I18nExpression:n.expression=J(n.expression,e,t);break;case y.InterpolateText:kI(n.interpolation,e,t);break;case y.Statement:Bp(n.statement,e,t);break;case y.Variable:n.initializer=J(n.initializer,e,t);break;case y.Conditional:for(const i of n.conditions)null!==i.expr&&(i.expr=J(i.expr,e,t));null!==n.processed&&(n.processed=J(n.processed,e,t)),null!==n.contextValue&&(n.contextValue=J(n.contextValue,e,t));break;case y.Listener:case y.TwoWayListener:for(const i of n.handlerOps)Kn(i,e,t|rt.InChildOperation);break;case y.ExtractedAttribute:n.expression=n.expression&&J(n.expression,e,t),n.trustedValueFn=n.trustedValueFn&&J(n.trustedValueFn,e,t);break;case y.RepeaterCreate:n.track=J(n.track,e,t),null!==n.trackByFn&&(n.trackByFn=J(n.trackByFn,e,t));break;case y.Repeater:n.collection=J(n.collection,e,t);break;case y.Defer:null!==n.loadingConfig&&(n.loadingConfig=J(n.loadingConfig,e,t)),null!==n.placeholderConfig&&(n.placeholderConfig=J(n.placeholderConfig,e,t)),null!==n.resolverFn&&(n.resolverFn=J(n.resolverFn,e,t));break;case y.I18nMessage:for(const[i,s]of n.params)n.params.set(i,J(s,e,t));for(const[i,s]of n.postprocessingParams)n.postprocessingParams.set(i,J(s,e,t));break;case y.DeferWhen:n.expr=J(n.expr,e,t);break;case y.Advance:case y.Container:case y.ContainerEnd:case y.ContainerStart:case y.DeferOn:case y.DisableBindings:case y.Element:case y.ElementEnd:case y.ElementStart:case y.EnableBindings:case y.I18n:case y.I18nApply:case y.I18nContext:case y.I18nEnd:case y.I18nStart:case y.IcuEnd:case y.IcuStart:case y.Namespace:case y.Pipe:case y.Projection:case y.ProjectionDef:case y.Template:case y.Text:case y.I18nAttributes:case y.IcuPlaceholder:break;default:throw new Error(`AssertionError: transformExpressionsInOp doesn't handle ${y[n.kind]}`)}}function J(n,e,t){if(n instanceof Lt)n.transformInternalExpressions(e,t);else if(n instanceof Oe)n.lhs=J(n.lhs,e,t),n.rhs=J(n.rhs,e,t);else if(n instanceof jr)n.expr=J(n.expr,e,t);else if(n instanceof Xn)n.receiver=J(n.receiver,e,t);else if(n instanceof Rs)n.receiver=J(n.receiver,e,t),n.index=J(n.index,e,t);else if(n instanceof La)n.receiver=J(n.receiver,e,t),n.value=J(n.value,e,t);else if(n instanceof Ll)n.receiver=J(n.receiver,e,t),n.index=J(n.index,e,t),n.value=J(n.value,e,t);else if(n instanceof Yn){n.fn=J(n.fn,e,t);for(let i=0;i<n.args.length;i++)n.args[i]=J(n.args[i],e,t)}else if(n instanceof Qi)for(let i=0;i<n.entries.length;i++)n.entries[i]=J(n.entries[i],e,t);else if(n instanceof gs)for(let i=0;i<n.entries.length;i++)n.entries[i].value=J(n.entries[i].value,e,t);else if(n instanceof Ri)n.condition=J(n.condition,e,t),n.trueCase=J(n.trueCase,e,t),null!==n.falseCase&&(n.falseCase=J(n.falseCase,e,t));else if(n instanceof Fa)n.expr=J(n.expr,e,t);else if(n instanceof qu)n.value=J(n.value,e,t);else if(n instanceof rp)for(let i=0;i<n.expressions.length;i++)n.expressions[i]=J(n.expressions[i],e,t);else if(n instanceof ur)n.condition=J(n.condition,e,t);else if(n instanceof Gu)n.tag=J(n.tag,e,t),n.template.expressions=n.template.expressions.map(i=>J(i,e,t));else if(n instanceof Vo)if(Array.isArray(n.body))for(let i=0;i<n.body.length;i++)Bp(n.body[i],e,t);else n.body=J(n.body,e,t);else if(!(n instanceof Pe||n instanceof Ni||n instanceof cr||n instanceof pn))throw new Error(`Unhandled expression kind: ${n.constructor.name}`);return e(n,t)}function Bp(n,e,t){if(n instanceof Tn)n.expr=J(n.expr,e,t);else if(n instanceof ln)n.value=J(n.value,e,t);else if(n instanceof Zn)void 0!==n.value&&(n.value=J(n.value,e,t));else{if(!(n instanceof op))throw new Error(`Unhandled statement kind: ${n.constructor.name}`);n.condition=J(n.condition,e,t);for(const i of n.trueCase)Bp(i,e,t);for(const i of n.falseCase)Bp(i,e,t)}}function RV(n){return n instanceof pn&&"string"==typeof n.value}let U=(()=>{class n{static{this.nextListId=0}constructor(){this.debugListId=n.nextListId++,this.head={kind:y.ListEnd,next:null,prev:null,debugListId:this.debugListId},this.tail={kind:y.ListEnd,next:null,prev:null,debugListId:this.debugListId},this.head.next=this.tail,this.tail.prev=this.head}push(t){if(Array.isArray(t)){for(const s of t)this.push(s);return}n.assertIsNotEnd(t),n.assertIsUnowned(t),t.debugListId=this.debugListId;const i=this.tail.prev;t.prev=i,i.next=t,t.next=this.tail,this.tail.prev=t}prepend(t){if(0===t.length)return;for(const r of t)n.assertIsNotEnd(r),n.assertIsUnowned(r),r.debugListId=this.debugListId;const i=this.head.next;let s=this.head;for(const r of t)s.next=r,r.prev=s,s=r;s.next=i,i.prev=s}*[Symbol.iterator](){let t=this.head.next;for(;t!==this.tail;){n.assertIsOwned(t,this.debugListId);const i=t.next;yield t,t=i}}*reversed(){let t=this.tail.prev;for(;t!==this.head;){n.assertIsOwned(t,this.debugListId);const i=t.prev;yield t,t=i}}static replace(t,i){n.assertIsNotEnd(t),n.assertIsNotEnd(i),n.assertIsOwned(t),n.assertIsUnowned(i),i.debugListId=t.debugListId,null!==t.prev&&(t.prev.next=i,i.prev=t.prev),null!==t.next&&(t.next.prev=i,i.next=t.next),t.debugListId=null,t.prev=null,t.next=null}static replaceWithMany(t,i){if(0===i.length)return void n.remove(t);n.assertIsNotEnd(t),n.assertIsOwned(t);const s=t.debugListId;t.debugListId=null;for(const u of i)n.assertIsNotEnd(u),n.assertIsUnowned(u);const{prev:r,next:o}=t;t.prev=null,t.next=null;let a=r;for(const u of i)this.assertIsUnowned(u),u.debugListId=s,a.next=u,u.prev=a,u.next=null,a=u;const l=i[0],c=a;null!==r&&(r.next=l,l.prev=r),null!==o&&(o.prev=c,c.next=o)}static remove(t){n.assertIsNotEnd(t),n.assertIsOwned(t),t.prev.next=t.next,t.next.prev=t.prev,t.debugListId=null,t.prev=null,t.next=null}static insertBefore(t,i){if(Array.isArray(t))for(const s of t)this.insertBefore(s,i);else{if(n.assertIsOwned(i),null===i.prev)throw new Error("AssertionError: illegal operation on list start");n.assertIsNotEnd(t),n.assertIsUnowned(t),t.debugListId=i.debugListId,t.prev=null,i.prev.next=t,t.prev=i.prev,t.next=i,i.prev=t}}static insertAfter(t,i){if(n.assertIsOwned(i),null===i.next)throw new Error("AssertionError: illegal operation on list end");n.assertIsNotEnd(t),n.assertIsUnowned(t),t.debugListId=i.debugListId,i.next.prev=t,t.next=i.next,t.prev=i,i.next=t}static assertIsUnowned(t){if(null!==t.debugListId)throw new Error(`AssertionError: illegal operation on owned node: ${y[t.kind]}`)}static assertIsOwned(t,i){if(null===t.debugListId)throw new Error(`AssertionError: illegal operation on unowned node: ${y[t.kind]}`);if(void 0!==i&&t.debugListId!==i)throw new Error(`AssertionError: node belongs to the wrong list (expected ${i}, actual ${t.debugListId})`)}static assertIsNotEnd(t){if(t.kind===y.ListEnd)throw new Error("AssertionError: illegal operation on list head or tail")}}return n})();class vr{constructor(){this.slot=null}}const Wre=new Set([y.Element,y.ElementStart,y.Container,y.ContainerStart,y.Template,y.RepeaterCreate]);function Wa(n){return Wre.has(n.kind)}function a_(n,e,t,i,s,r,o,a){return{kind:y.Template,xref:n,templateKind:e,attributes:null,tag:t,handle:new vr,functionNameSuffix:i,decls:null,vars:null,localRefs:[],nonBindable:!1,namespace:s,i18nPlaceholder:r,startSourceSpan:o,wholeSourceSpan:a,...Qo,...Le}}function Zre(n){return{kind:y.DisableBindings,xref:n,...Le}}function Kre(n){return{kind:y.EnableBindings,xref:n,...Le}}function PV(n,e,t,i){return{kind:y.Text,xref:n,handle:new vr,initialValue:e,icuPlaceholder:t,sourceSpan:i,...Qo,...Le}}function MI(n,e,t,i,s,r,o,a,l){const c=new U;return c.push(s),{kind:y.Listener,target:n,targetSlot:e,tag:i,hostListener:a,name:t,handlerOps:c,handlerFnName:null,consumesDollarEvent:!1,isAnimationListener:null!==r,animationPhase:r,eventTarget:o,sourceSpan:l,...Le}}function OV(n,e,t,i,s,r){const o=new U;return o.push(s),{kind:y.TwoWayListener,target:n,targetSlot:e,tag:i,name:t,handlerOps:o,handlerFnName:null,sourceSpan:r,...Le}}function FV(n,e,t){return{kind:y.Pipe,xref:n,handle:e,name:t,...Le,...Qo}}function Jre(n){return{kind:y.Namespace,active:n,...Le}}function eoe(n){return{kind:y.ProjectionDef,def:n,...Le}}function js(n,e,t,i,s,r,o,a){return{kind:y.ExtractedAttribute,target:n,bindingKind:e,namespace:t,name:i,expression:s,i18nContext:r,i18nMessage:o,securityContext:a,trustedValueFn:null,...Le}}function rc(n,e,t,i){return{kind:y.DeferOn,defer:n,trigger:e,prefetch:t,sourceSpan:i,...Le}}function l_(n,e,t,i){return{kind:y.I18nStart,xref:n,handle:new vr,root:t??n,message:e,messageIndex:null,subTemplateIndex:null,context:null,sourceSpan:i,...Le,...Qo}}function c_(n,e){return{kind:y.I18nEnd,xref:n,sourceSpan:e,...Le}}function ooe(n,e,t){return{kind:y.IcuPlaceholder,xref:n,name:e,strings:t,expressionPlaceholders:[],...Le}}function NI(n,e,t,i,s){if(null===t&&n!==tc.Attr)throw new Error("AssertionError: i18nBlock must be provided for non-attribute contexts.");return{kind:y.I18nContext,contextKind:n,xref:e,i18nBlock:t,message:i,sourceSpan:s,params:new Map,postprocessingParams:new Map,...Le}}function LV(n,e,t){return{kind:y.I18nAttributes,xref:n,handle:e,target:t,i18nAttributesConfig:null,...Le,...Qo}}function aoe(n,e,t,i,s,r){return{kind:y.HostProperty,name:n,expression:e,isAnimationTrigger:t,i18nContext:i,securityContext:s,sanitizer:null,sourceSpan:r,...ws,...Le}}const BV="CTX_REF_MARKER";var ee=function(n){return n[n.Tmpl=0]="Tmpl",n[n.Host=1]="Host",n[n.Both=2]="Both",n}(ee||{});class VV{constructor(e,t,i){this.componentName=e,this.pool=t,this.compatibility=i,this.kind=ee.Both,this.nextXrefId=0}allocateXrefId(){return this.nextXrefId++}}class RI extends VV{constructor(e,t,i,s,r,o,a){super(e,t,i),this.relativeContextFilePath=s,this.i18nUseExternalIds=r,this.deferBlocksMeta=o,this.allDeferrableDepsFn=a,this.kind=ee.Tmpl,this.fnSuffix="Template",this.views=new Map,this.contentSelectors=null,this.consts=[],this.constsInitializers=[],this.root=new Sd(this,this.allocateXrefId(),null),this.views.set(this.root.xref,this.root)}allocateView(e){const t=new Sd(this,this.allocateXrefId(),e);return this.views.set(t.xref,t),t}get units(){return this.views.values()}addConst(e,t){for(let s=0;s<this.consts.length;s++)if(this.consts[s].isEquivalent(e))return s;const i=this.consts.length;return this.consts.push(e),t&&this.constsInitializers.push(...t),i}}class $V{constructor(e){this.xref=e,this.create=new U,this.update=new U,this.fnName=null,this.vars=null}*ops(){for(const e of this.create)if(yield e,e.kind===y.Listener||e.kind===y.TwoWayListener)for(const t of e.handlerOps)yield t;for(const e of this.update)yield e}}class Sd extends $V{constructor(e,t,i){super(t),this.job=e,this.parent=i,this.contextVariables=new Map,this.aliases=new Set,this.decls=null}}class UV extends VV{constructor(e,t,i){super(e,t,i),this.kind=ee.Host,this.fnSuffix="HostBindings",this.root=new loe(this)}get units(){return[this.root]}}class loe extends $V{constructor(e){super(0),this.job=e,this.attributes=null}}function uoe(n){if(n instanceof Yn&&n.fn instanceof Ji&&"$any"===n.fn.name){if(1!==n.args.length)throw new Error("The $any builtin function expects exactly one argument.");return n.args[0]}return n}function hoe(n,e){if(e.next?.kind!==y.I18nExpression)return!0;const t=n.get(e.context),i=n.get(e.next.context);if(void 0===t)throw new Error("AssertionError: expected an I18nContextOp to exist for the I18nExpressionOp's context");if(void 0===i)throw new Error("AssertionError: expected an I18nContextOp to exist for the next I18nExpressionOp's context");return null!==t.i18nBlock?t.i18nBlock!==i.i18nBlock:e.i18nOwner!==e.next.i18nOwner}function PI(n){const e=new Map;for(const t of n.create)vd(t)&&(e.set(t.xref,t),t.kind===y.RepeaterCreate&&null!==t.emptyView&&e.set(t.emptyView,t));return e}function Id(n,e){const t=n.get(e);if(void 0===t)throw new Error("All attributes should have an element-like target.");return t}function goe(n,e,t){if(e.expression instanceof Nn)return;let i=e.isTextAttribute||e.expression.isConstant();if(n.job.compatibility===ys.TemplateDefinitionBuilder&&(i&&=e.isTextAttribute),i){const s=js(e.target,e.isStructuralTemplateAttribute?oe.Template:oe.Attribute,e.namespace,e.name,e.expression,e.i18nContext,e.i18nMessage,e.securityContext);if(n.job.kind===ee.Host)n.create.push(s);else{const r=Id(t,e.target);U.insertBefore(s,r)}U.remove(e)}}function moe(n,e){const t=n.get(e);if(void 0===t)throw new Error("All attributes should have an element-like target.");return t}const yoe=new Set([m.attribute,m.classProp,m.element,m.elementContainer,m.elementContainerEnd,m.elementContainerStart,m.elementEnd,m.elementStart,m.hostProperty,m.i18nExp,m.listener,m.listener,m.property,m.styleProp,m.stylePropInterpolate1,m.stylePropInterpolate2,m.stylePropInterpolate3,m.stylePropInterpolate4,m.stylePropInterpolate5,m.stylePropInterpolate6,m.stylePropInterpolate7,m.stylePropInterpolate8,m.stylePropInterpolateV,m.syntheticHostListener,m.syntheticHostProperty,m.templateCreate,m.twoWayProperty,m.twoWayListener]);function jV(n){let e=null;for(const t of n){if(t.kind!==y.Statement||!(t.statement instanceof Tn)){e=null;continue}if(!(t.statement.expr instanceof Yn&&t.statement.expr.fn instanceof cr)){e=null;continue}const i=t.statement.expr.fn.value;if(yoe.has(i))if(null!==e&&e.instruction===i){const s=e.expression.callFn(t.statement.expr.args,t.statement.expr.sourceSpan,t.statement.expr.pure);e.expression=s,e.op.statement=s.toStmt(),U.remove(t)}else e={op:t,instruction:i,expression:t.statement.expr};else e=null}}const boe=new Map([["&&",Y.And],[">",Y.Bigger],[">=",Y.BiggerEquals],["|",Y.BitwiseOr],["&",Y.BitwiseAnd],["/",Y.Divide],["==",Y.Equals],["===",Y.Identical],["<",Y.Lower],["<=",Y.LowerEquals],["-",Y.Minus],["%",Y.Modulo],["*",Y.Multiply],["!=",Y.NotEquals],["!==",Y.NotIdentical],["??",Y.NullishCoalesce],["||",Y.Or],["+",Y.Plus]]);function HV(n){return null===n?fi.HTML:new Map([["svg",fi.SVG],["math",fi.Math]]).get(n)??fi.HTML}function xd(n){return Array.isArray(n)?le(n.map(xd)):w(n)}function zV(n,e,t){const i=e.get(t);if(void 0!==i){const s=OI(i);if(s.entries.length>0)return n.addConst(s)}return null}const Td=Object.freeze([]);class xoe{get attributes(){return this.byKind.get(oe.Attribute)??Td}get classes(){return this.byKind.get(oe.ClassName)??Td}get styles(){return this.byKind.get(oe.StyleProperty)??Td}get bindings(){return this.propertyBindings??Td}get template(){return this.byKind.get(oe.Template)??Td}get i18n(){return this.byKind.get(oe.I18n)??Td}constructor(e){this.compatibility=e,this.known=new Map,this.byKind=new Map,this.propertyBindings=null,this.projectAs=null}isKnown(e,t){const i=this.known.get(e)??new Set;return this.known.set(e,i),!!i.has(t)||(i.add(t),!1)}add(e,t,i,s,r){if((this.compatibility!==ys.TemplateDefinitionBuilder||e!==oe.Attribute&&e!==oe.ClassName&&e!==oe.StyleProperty)&&this.isKnown(e,t))return;if("ngProjectAs"===t){if(null===i||!(i instanceof pn)||null==i.value||"string"!=typeof i.value?.toString())throw Error("ngProjectAs must have a string literal value");this.projectAs=i.value.toString()}const a=this.arrayFor(e);if(a.push(...function Toe(n,e){const t=w(e);return n?[w(0),w(n),t]:[t]}(s,t)),e===oe.Attribute||e===oe.StyleProperty){if(null===i)throw Error("Attribute, i18n attribute, & style element attributes must have a value");if(null!==r){if(!RV(i))throw Error("AssertionError: extracted attribute value should be string literal");a.push(vy(r,new Wu([new Qu(i.value)],[]),void 0,i.sourceSpan))}else a.push(i)}}arrayFor(e){return e===oe.Property||e===oe.TwoWayProperty?(this.propertyBindings??=[],this.propertyBindings):(this.byKind.has(e)||this.byKind.set(e,[]),this.byKind.get(e))}}function OI({attributes:n,bindings:e,classes:t,i18n:i,projectAs:s,styles:r,template:o}){const a=[...n];if(null!==s){const l=Uu(s)[0];a.push(w(5),xd(l))}return t.length>0&&a.push(w(1),...t),r.length>0&&a.push(w(2),...r),e.length>0&&a.push(w(3),...e),o.length>0&&a.push(w(4),...o),i.length>0&&a.push(w(6),...i),le(a)}class Poe{constructor(){this.targets=new Map}}const Ooe=new Map([[y.ElementEnd,[y.ElementStart,y.Element]],[y.ContainerEnd,[y.ContainerStart,y.Container]],[y.I18nEnd,[y.I18nStart,y.I18n]]]),Foe=new Set([y.Pipe]);function Hs(n){return n instanceof jr?Hs(n.expr):n instanceof Oe?Hs(n.lhs)||Hs(n.rhs):n instanceof Ri?!(!n.falseCase||!Hs(n.falseCase))||Hs(n.condition)||Hs(n.trueCase):n instanceof ur?Hs(n.condition):n instanceof mr?Hs(n.expr):n instanceof Xn?Hs(n.receiver):n instanceof Rs?Hs(n.receiver)||Hs(n.index):n instanceof Yn||n instanceof Qi||n instanceof gs||n instanceof Ga||n instanceof sc}function Dd(n,e,t){let i;if(Hs(n)){const s=t.job.allocateXrefId();i=[new mr(n,s),new Yo(s)]}else i=[n,n.clone()],function $oe(n,e,t){J(n,i=>{if(i instanceof mr&&e.has(i.xref)){const s=new Yo(i.xref);return t.job.compatibility===ys.TemplateDefinitionBuilder?new mr(s,s.xref):s}return i},rt.None)}(i[1],function Voe(n){const e=new Set;return J(n,t=>(t instanceof mr&&e.add(t.xref),t),rt.None),e}(i[0]),t);return new Ed(i[0],e(i[1]))}function qV(n){return function Uoe(n){return n instanceof _d||n instanceof wd||n instanceof Ga}(n)||function joe(n){return n instanceof Xn||n instanceof Rs||n instanceof Yn}(n)}function zoe(n,e){if(!qV(n))return n;const t=function Hoe(n){if(qV(n)&&n.receiver instanceof Ed){let e=n.receiver;for(;e.expr instanceof Ed;)e=e.expr;return e}return null}(n);if(t){if(n instanceof Yn)return t.expr=t.expr.callFn(n.args),n.receiver;if(n instanceof Xn)return t.expr=t.expr.prop(n.name),n.receiver;if(n instanceof Rs)return t.expr=t.expr.key(n.index),n.receiver;if(n instanceof Ga)return t.expr=Dd(t.expr,i=>i.callFn(n.args),e),n.receiver;if(n instanceof _d)return t.expr=Dd(t.expr,i=>i.prop(n.name),e),n.receiver;if(n instanceof wd)return t.expr=Dd(t.expr,i=>i.key(n.index),e),n.receiver}else{if(n instanceof Ga)return Dd(n.receiver,i=>i.callFn(n.args),e);if(n instanceof _d)return Dd(n.receiver,i=>i.prop(n.name),e);if(n instanceof wd)return Dd(n.receiver,i=>i.key(n.index),e)}return n}function qoe(n){return n instanceof Ed?new Ri(new Oe(Y.Equals,n.guard,$o),$o,n.expr):n}[Yn,Qi,gs,Ga,sc].map(n=>n.constructor.name);const GV="\ufffd",Goe="#",Woe="*",Qoe="/",Yoe=":",Xoe="[",Zoe="]",Koe="|";function eae(n,e,t){let i=WV(e.params);const s=WV(e.postprocessingParams);let r=[...e.params.values()].some(o=>o.length>1);return function ioe(n,e,t,i,s,r,o,a){return{kind:y.I18nMessage,xref:n,i18nContext:e,i18nBlock:t,message:i,messagePlaceholder:s,params:r,postprocessingParams:o,needsPostprocessing:a,subMessages:[],...Le}}(n.allocateXrefId(),e.xref,e.i18nBlock,e.message,t??null,i,s,r)}function tae(n){if(n.strings.length!==n.expressionPlaceholders.length+1)throw Error(`AssertionError: Invalid ICU placeholder with ${n.strings.length} strings and ${n.expressionPlaceholders.length} expressions`);const e=n.expressionPlaceholders.map(Ad);return n.strings.flatMap((t,i)=>[t,e[i]||""]).join("")}function WV(n){const e=new Map;for(const[t,i]of n){const s=nae(i);null!==s&&e.set(t,w(s))}return e}function nae(n){if(0===n.length)return null;const e=n.map(t=>Ad(t));return 1===e.length?e[0]:`${Xoe}${e.join(Koe)}${Zoe}`}function Ad(n){if(n.flags&Ct.ElementTag&&n.flags&Ct.TemplateTag){if("object"!=typeof n.value)throw Error("AssertionError: Expected i18n param value to have an element and template slot");const s=Ad({...n,value:n.value.element,flags:n.flags&~Ct.TemplateTag}),r=Ad({...n,value:n.value.template,flags:n.flags&~Ct.ElementTag});return n.flags&Ct.OpenTag&&n.flags&Ct.CloseTag?`${r}${s}${r}`:n.flags&Ct.CloseTag?`${s}${r}`:`${r}${s}`}if(n.flags&Ct.OpenTag&&n.flags&Ct.CloseTag)return`${Ad({...n,flags:n.flags&~Ct.CloseTag})}${Ad({...n,flags:n.flags&~Ct.OpenTag})}`;if(n.flags===Ct.None)return`${n.value}`;let e="",t="";return n.flags&Ct.ElementTag?e=Goe:n.flags&Ct.TemplateTag&&(e=Woe),""!==e&&(t=n.flags&Ct.CloseTag?Qoe:""),`${GV}${t}${e}${n.value}${null===n.subTemplateIndex?"":`${Yoe}${n.subTemplateIndex}`}${GV}`}function u_(n,e){const t=function oae(n,e){const t={view:n.xref,viewContextVariable:{kind:Bn.Context,name:null,view:n.xref},contextVariables:new Map,aliases:n.aliases,references:[],parent:e};for(const i of n.contextVariables.keys())t.contextVariables.set(i,{kind:Bn.Identifier,name:null,identifier:i});for(const i of n.create)switch(i.kind){case y.ElementStart:case y.Template:if(!Array.isArray(i.localRefs))throw new Error("AssertionError: expected localRefs to be an array");for(let s=0;s<i.localRefs.length;s++)t.references.push({name:i.localRefs[s].name,targetId:i.xref,targetSlot:i.handle,offset:s,variable:{kind:Bn.Identifier,name:null,identifier:i.localRefs[s].name}})}return t}(n,e);for(const s of n.create)switch(s.kind){case y.Template:u_(n.job.views.get(s.xref),t);break;case y.RepeaterCreate:u_(n.job.views.get(s.xref),t),s.emptyView&&u_(n.job.views.get(s.emptyView),t);break;case y.Listener:case y.TwoWayListener:s.handlerOps.prepend(FI(n,t))}const i=FI(n,t);n.update.prepend(i)}function FI(n,e){const t=[];e.view!==n.xref&&t.push(yd(n.job.allocateXrefId(),e.viewContextVariable,new Pp,Xr.None));const i=n.job.views.get(e.view);for(const[s,r]of i.contextVariables){const o=new Kr(e.view),a=r===BV?o:new Xn(o,r);t.push(yd(n.job.allocateXrefId(),e.contextVariables.get(s),a,Xr.None))}for(const s of i.aliases)t.push(yd(n.job.allocateXrefId(),s,s.expression.clone(),Xr.AlwaysInline));for(const s of e.references)t.push(yd(n.job.allocateXrefId(),s.variable,new Np(s.targetId,s.targetSlot,s.offset),Xr.None));return null!==e.parent&&t.push(...FI(n,e.parent)),t}function uae(n){return n.startsWith("--")}function dae(n){return n.replace(/[a-z][A-Z]/g,e=>e.charAt(0)+"-"+e.charAt(1)).toLowerCase()}function LI(n){const e=n.indexOf("!important");-1!==e&&(n=e>0?n.substring(0,e):"");let t=null,i=n;const s=n.lastIndexOf(".");return s>0&&(t=n.slice(s+1),i=n.substring(0,s)),{property:i,suffix:t}}function kd(n,e=!1){return Gt(Object.keys(n).map(t=>({key:t,quoted:e,value:n[t]})))}const fae=new class hae{visitText(e){return e.value}visitContainer(e){return e.children.map(t=>t.visit(this)).join("")}visitIcu(e){const t=Object.keys(e.cases).map(s=>`${s} {${e.cases[s].visit(this)}}`);return`{${e.expressionPlaceholder}, ${e.type}, ${t.join(" ")}}`}visitTagPlaceholder(e){return e.isVoid?this.formatPh(e.startName):`${this.formatPh(e.startName)}${e.children.map(t=>t.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitPlaceholder(e){return this.formatPh(e.name)}visitBlockPlaceholder(e){return`${this.formatPh(e.startName)}${e.children.map(t=>t.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitIcuPlaceholder(e,t){return this.formatPh(e.name)}formatPh(e){return`{${mp(e,!1)}}`}};function KV(n){return n.visit(fae)}var He=function(n){return n[n.Character=0]="Character",n[n.Identifier=1]="Identifier",n[n.PrivateIdentifier=2]="PrivateIdentifier",n[n.Keyword=3]="Keyword",n[n.String=4]="String",n[n.Operator=5]="Operator",n[n.Number=6]="Number",n[n.Error=7]="Error",n}(He||{});const pae=["var","let","as","null","undefined","true","false","if","else","this"];class BI{tokenize(e){const t=new e$(e),i=[];let s=t.scanToken();for(;null!=s;)i.push(s),s=t.scanToken();return i}}class Xo{constructor(e,t,i,s,r){this.index=e,this.end=t,this.type=i,this.numValue=s,this.strValue=r}isCharacter(e){return this.type==He.Character&&this.numValue==e}isNumber(){return this.type==He.Number}isString(){return this.type==He.String}isOperator(e){return this.type==He.Operator&&this.strValue==e}isIdentifier(){return this.type==He.Identifier}isPrivateIdentifier(){return this.type==He.PrivateIdentifier}isKeyword(){return this.type==He.Keyword}isKeywordLet(){return this.type==He.Keyword&&"let"==this.strValue}isKeywordAs(){return this.type==He.Keyword&&"as"==this.strValue}isKeywordNull(){return this.type==He.Keyword&&"null"==this.strValue}isKeywordUndefined(){return this.type==He.Keyword&&"undefined"==this.strValue}isKeywordTrue(){return this.type==He.Keyword&&"true"==this.strValue}isKeywordFalse(){return this.type==He.Keyword&&"false"==this.strValue}isKeywordThis(){return this.type==He.Keyword&&"this"==this.strValue}isError(){return this.type==He.Error}toNumber(){return this.type==He.Number?this.numValue:-1}toString(){switch(this.type){case He.Character:case He.Identifier:case He.Keyword:case He.Operator:case He.PrivateIdentifier:case He.String:case He.Error:return this.strValue;case He.Number:return this.numValue.toString();default:return null}}}function JV(n,e,t){return new Xo(n,e,He.Character,t,String.fromCharCode(t))}function VI(n,e,t){return new Xo(n,e,He.Operator,0,t)}const $I=new Xo(-1,-1,He.Character,0,"");class e${constructor(e){this.input=e,this.peek=0,this.index=-1,this.length=e.length,this.advance()}advance(){this.peek=++this.index>=this.length?di:this.input.charCodeAt(this.index)}scanToken(){const e=this.input,t=this.length;let i=this.peek,s=this.index;for(;i<=PB;){if(++s>=t){i=di;break}i=e.charCodeAt(s)}if(this.peek=i,this.index=s,s>=t)return null;if(UI(i))return this.scanIdentifier();if(Go(i))return this.scanNumber(s);const r=s;switch(i){case 46:return this.advance(),Go(this.peek)?this.scanNumber(r):JV(r,this.index,46);case 40:case 41:case Wr:case Yi:case 91:case 93:case 44:case 58:case 59:return this.scanCharacter(r,i);case 39:case 34:return this.scanString();case 35:return this.scanPrivateIdentifier();case 43:case 45:case 42:case 47:case 37:case 94:return this.scanOperator(r,String.fromCharCode(i));case 63:return this.scanQuestion(r);case 60:case 62:return this.scanComplexOperator(r,String.fromCharCode(i),61,"=");case 33:case 61:return this.scanComplexOperator(r,String.fromCharCode(i),61,"=",61,"=");case 38:return this.scanComplexOperator(r,"&",38,"&");case 124:return this.scanComplexOperator(r,"|",124,"|");case WB:for(;By(this.peek);)this.advance();return this.scanToken()}return this.advance(),this.error(`Unexpected character [${String.fromCharCode(i)}]`,0)}scanCharacter(e,t){return this.advance(),JV(e,this.index,t)}scanOperator(e,t){return this.advance(),VI(e,this.index,t)}scanComplexOperator(e,t,i,s,r,o){this.advance();let a=t;return this.peek==i&&(this.advance(),a+=s),null!=r&&this.peek==r&&(this.advance(),a+=o),VI(e,this.index,a)}scanIdentifier(){const e=this.index;for(this.advance();jI(this.peek);)this.advance();const t=this.input.substring(e,this.index);return pae.indexOf(t)>-1?function vae(n,e,t){return new Xo(n,e,He.Keyword,0,t)}(e,this.index,t):function gae(n,e,t){return new Xo(n,e,He.Identifier,0,t)}(e,this.index,t)}scanPrivateIdentifier(){const e=this.index;if(this.advance(),!UI(this.peek))return this.error("Invalid character [#]",-1);for(;jI(this.peek);)this.advance();const t=this.input.substring(e,this.index);return function mae(n,e,t){return new Xo(n,e,He.PrivateIdentifier,0,t)}(e,this.index,t)}scanNumber(e){let t=this.index===e,i=!1;for(this.advance();;){if(!Go(this.peek))if(95===this.peek){if(!Go(this.input.charCodeAt(this.index-1))||!Go(this.input.charCodeAt(this.index+1)))return this.error("Invalid numeric separator",0);i=!0}else if(46===this.peek)t=!1;else{if(101!=(n=this.peek)&&69!=n)break;if(this.advance(),bae(this.peek)&&this.advance(),!Go(this.peek))return this.error("Invalid exponent",-1);t=!1}this.advance()}var n;let s=this.input.substring(e,this.index);i&&(s=s.replace(/_/g,""));const r=t?function Sae(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}(s):parseFloat(s);return function _ae(n,e,t){return new Xo(n,e,He.Number,t,"")}(e,this.index,r)}scanString(){const e=this.index,t=this.peek;this.advance();let i="",s=this.index;const r=this.input;for(;this.peek!=t;)if(92==this.peek){let a;if(i+=r.substring(s,this.index),this.advance(),117==this.peek){const l=r.substring(this.index+1,this.index+5);if(!/^[0-9a-f]+$/i.test(l))return this.error(`Invalid unicode escape [\\u${l}]`,0);a=parseInt(l,16);for(let c=0;c<5;c++)this.advance()}else a=Cae(this.peek),this.advance();i+=String.fromCharCode(a),s=this.index}else{if(this.peek==di)return this.error("Unterminated quote",0);this.advance()}const o=r.substring(s,this.index);return this.advance(),function yae(n,e,t){return new Xo(n,e,He.String,0,t)}(e,this.index,i+o)}scanQuestion(e){this.advance();let t="?";return(63===this.peek||46===this.peek)&&(t+=46===this.peek?".":"?",this.advance()),VI(e,this.index,t)}error(e,t){const i=this.index+t;return function wae(n,e,t){return new Xo(n,e,He.Error,0,t)}(i,this.index,`Lexer Error: ${e} at column ${i} in expression [${this.input}]`)}}function UI(n){return Xl<=n&&n<=wp||ld<=n&&n<=Oy||95==n||36==n}function jI(n){return Vy(n)||Go(n)||95==n||36==n}function bae(n){return 45==n||43==n}function Cae(n){switch(n){case 110:return 10;case 102:return 12;case 114:return 13;case 116:return cI;case 118:return 11;default:return n}}class Iae{constructor(e,t,i){this.strings=e,this.expressions=t,this.offsets=i}}class xae{constructor(e,t,i){this.templateBindings=e,this.warnings=t,this.errors=i}}class t${constructor(e){this._lexer=e,this.errors=[]}parseAction(e,t,i,s=Fs){this._checkNoInterpolation(e,t,s);const r=this._stripComments(e),o=this._lexer.tokenize(r),a=new $p(e,t,i,o,1,this.errors,0).parseChain();return new Vs(a,e,t,i,this.errors)}parseBinding(e,t,i,s=Fs){const r=this._parseBindingAst(e,t,i,s);return new Vs(r,e,t,i,this.errors)}checkSimpleExpression(e){const t=new Tae;return e.visit(t),t.errors}parseSimpleBinding(e,t,i,s=Fs){const r=this._parseBindingAst(e,t,i,s),o=this.checkSimpleExpression(r);return o.length>0&&this._reportError(`Host binding expression cannot contain ${o.join(" ")}`,e,t),new Vs(r,e,t,i,this.errors)}_reportError(e,t,i,s){this.errors.push(new mI(e,t,i,s))}_parseBindingAst(e,t,i,s){this._checkNoInterpolation(e,t,s);const r=this._stripComments(e),o=this._lexer.tokenize(r);return new $p(e,t,i,o,0,this.errors,0).parseChain()}parseTemplateBindings(e,t,i,s,r){const o=this._lexer.tokenize(t);return new $p(t,i,r,o,0,this.errors,0).parseTemplateBindings({source:e,span:new gr(s,s+e.length)})}parseInterpolation(e,t,i,s,r=Fs){const{strings:o,expressions:a,offsets:l}=this.splitInterpolation(e,t,s,r);if(0===a.length)return null;const c=[];for(let u=0;u<a.length;++u){const h=this._stripComments(a[u].text),f=this._lexer.tokenize(h),p=new $p(e,t,i,f,0,this.errors,l[u]).parseChain();c.push(p)}return this.createInterpolationAst(o.map(u=>u.text),c,e,t,i)}parseInterpolationExpression(e,t,i){const s=this._stripComments(e),r=this._lexer.tokenize(s),o=new $p(e,t,i,r,0,this.errors,0).parseChain();return this.createInterpolationAst(["",""],[o],e,t,i)}createInterpolationAst(e,t,i,s,r){const o=new Ep(0,i.length),a=new Mn(o,o.toAbsolute(r),e,t);return new Vs(a,i,s,r,this.errors)}splitInterpolation(e,t,i,s=Fs){const r=[],o=[],a=[],l=i?function Dae(n){let e=new Map,t=0,i=0,s=0;for(;s<n.length;){const r=n[s];if(9===r.type){const[o,a]=r.parts;t+=a.length,i+=o.length}else{const o=r.parts.reduce((a,l)=>a+l.length,0);i+=o,t+=o}e.set(i,t),s++}return e}(i):null;let c=0,u=!1,d=!1,{start:h,end:f}=s;for(;c<e.length;)if(u){const p=c,g=p+h.length,v=this._getInterpolationEndIndex(e,f,g);if(-1===v){u=!1,d=!0;break}const _=v+f.length,E=e.substring(g,v);0===E.trim().length&&this._reportError("Blank expressions are not allowed in interpolated strings",e,`at column ${c} in`,t),o.push({text:E,start:p,end:_});const T=(l?.get(p)??p)+h.length;a.push(T),c=_,u=!1}else{const p=c;c=e.indexOf(h,c),-1===c&&(c=e.length);const g=e.substring(p,c);r.push({text:g,start:p,end:c}),u=!0}if(!u)if(d){const p=r[r.length-1];p.text+=e.substring(c),p.end=e.length}else r.push({text:e.substring(c),start:c,end:e.length});return new Iae(r,o,a)}wrapLiteralPrimitive(e,t,i){const s=new Ep(0,null==e?0:e.length);return new Vs(new Ki(s,s.toAbsolute(i),e),e,t,i,this.errors)}_stripComments(e){const t=this._commentStart(e);return null!=t?e.substring(0,t):e}_commentStart(e){let t=null;for(let i=0;i<e.length-1;i++){const s=e.charCodeAt(i),r=e.charCodeAt(i+1);if(47===s&&47==r&&null==t)return i;t===s?t=null:null==t&&$y(s)&&(t=s)}return null}_checkNoInterpolation(e,t,{start:i,end:s}){let r=-1,o=-1;for(const a of this._forEachUnquotedChar(e,0))if(-1===r)e.startsWith(i)&&(r=a);else if(o=this._getInterpolationEndIndex(e,s,a),o>-1)break;r>-1&&o>-1&&this._reportError(`Got interpolation (${i}${s}) where expression was expected`,e,`at column ${r} in`,t)}_getInterpolationEndIndex(e,t,i){for(const s of this._forEachUnquotedChar(e,i)){if(e.startsWith(t,s))return s;if(e.startsWith("//",s))return e.indexOf(t,s)}return-1}*_forEachUnquotedChar(e,t){let i=null,s=0;for(let r=t;r<e.length;r++){const o=e[r];!$y(e.charCodeAt(r))||null!==i&&i!==o||s%2!=0?null===i&&(yield r):i=null===i?o:null,s="\\"===o?s+1:0}}}var Vp=function(n){return n[n.None=0]="None",n[n.Writable=1]="Writable",n}(Vp||{});class $p{constructor(e,t,i,s,r,o,a){this.input=e,this.location=t,this.absoluteOffset=i,this.tokens=s,this.parseFlags=r,this.errors=o,this.offset=a,this.rparensExpected=0,this.rbracketsExpected=0,this.rbracesExpected=0,this.context=Vp.None,this.sourceSpanCache=new Map,this.index=0}peek(e){const t=this.index+e;return t<this.tokens.length?this.tokens[t]:$I}get next(){return this.peek(0)}get atEOF(){return this.index>=this.tokens.length}get inputIndex(){return this.atEOF?this.currentEndIndex:this.next.index+this.offset}get currentEndIndex(){return this.index>0?this.peek(-1).end+this.offset:0===this.tokens.length?this.input.length+this.offset:this.next.index+this.offset}get currentAbsoluteOffset(){return this.absoluteOffset+this.inputIndex}span(e,t){let i=this.currentEndIndex;if(void 0!==t&&t>this.currentEndIndex&&(i=t),e>i){const s=i;i=e,e=s}return new Ep(e,i)}sourceSpan(e,t){const i=`${e}@${this.inputIndex}:${t}`;return this.sourceSpanCache.has(i)||this.sourceSpanCache.set(i,this.span(e,t).toAbsolute(this.absoluteOffset)),this.sourceSpanCache.get(i)}advance(){this.index++}withContext(e,t){this.context|=e;const i=t();return this.context^=e,i}consumeOptionalCharacter(e){return!!this.next.isCharacter(e)&&(this.advance(),!0)}peekKeywordLet(){return this.next.isKeywordLet()}peekKeywordAs(){return this.next.isKeywordAs()}expectCharacter(e){this.consumeOptionalCharacter(e)||this.error(`Missing expected ${String.fromCharCode(e)}`)}consumeOptionalOperator(e){return!!this.next.isOperator(e)&&(this.advance(),!0)}expectOperator(e){this.consumeOptionalOperator(e)||this.error(`Missing expected operator ${e}`)}prettyPrintToken(e){return e===$I?"end of input":`token ${e}`}expectIdentifierOrKeyword(){const e=this.next;return e.isIdentifier()||e.isKeyword()?(this.advance(),e.toString()):(e.isPrivateIdentifier()?this._reportErrorForPrivateIdentifier(e,"expected identifier or keyword"):this.error(`Unexpected ${this.prettyPrintToken(e)}, expected identifier or keyword`),null)}expectIdentifierOrKeywordOrString(){const e=this.next;return e.isIdentifier()||e.isKeyword()||e.isString()?(this.advance(),e.toString()):(e.isPrivateIdentifier()?this._reportErrorForPrivateIdentifier(e,"expected identifier, keyword or string"):this.error(`Unexpected ${this.prettyPrintToken(e)}, expected identifier, keyword, or string`),"")}parseChain(){const e=[],t=this.inputIndex;for(;this.index<this.tokens.length;){const i=this.parsePipe();if(e.push(i),this.consumeOptionalCharacter(59))for(1&this.parseFlags||this.error("Binding expression cannot contain chained expression");this.consumeOptionalCharacter(59););else if(this.index<this.tokens.length){const s=this.index;if(this.error(`Unexpected token '${this.next}'`),this.index===s)break}}if(0===e.length){const i=this.offset,s=this.offset+this.input.length;return new Xi(this.span(i,s),this.sourceSpan(i,s))}return 1==e.length?e[0]:new hd(this.span(t),this.sourceSpan(t),e)}parsePipe(){const e=this.inputIndex;let t=this.parseExpression();if(this.consumeOptionalOperator("|")){1&this.parseFlags&&this.error("Cannot have a pipe in an action expression");do{const i=this.inputIndex;let r,o,s=this.expectIdentifierOrKeyword();null!==s?r=this.sourceSpan(i):(s="",o=-1!==this.next.index?this.next.index:this.input.length+this.offset,r=new Ep(o,o).toAbsolute(this.absoluteOffset));const a=[];for(;this.consumeOptionalCharacter(58);)a.push(this.parseExpression());t=new Sp(this.span(e),this.sourceSpan(e,o),t,s,a,r)}while(this.consumeOptionalOperator("|"))}return t}parseExpression(){return this.parseConditional()}parseConditional(){const e=this.inputIndex,t=this.parseLogicalOr();if(this.consumeOptionalOperator("?")){const i=this.parsePipe();let s;if(this.consumeOptionalCharacter(58))s=this.parsePipe();else{const o=this.input.substring(e,this.inputIndex);this.error(`Conditional expression ${o} requires all 3 expressions`),s=new Xi(this.span(e),this.sourceSpan(e))}return new bp(this.span(e),this.sourceSpan(e),t,i,s)}return t}parseLogicalOr(){const e=this.inputIndex;let t=this.parseLogicalAnd();for(;this.consumeOptionalOperator("||");){const i=this.parseLogicalAnd();t=new Bs(this.span(e),this.sourceSpan(e),"||",t,i)}return t}parseLogicalAnd(){const e=this.inputIndex;let t=this.parseNullishCoalescing();for(;this.consumeOptionalOperator("&&");){const i=this.parseNullishCoalescing();t=new Bs(this.span(e),this.sourceSpan(e),"&&",t,i)}return t}parseNullishCoalescing(){const e=this.inputIndex;let t=this.parseEquality();for(;this.consumeOptionalOperator("??");){const i=this.parseEquality();t=new Bs(this.span(e),this.sourceSpan(e),"??",t,i)}return t}parseEquality(){const e=this.inputIndex;let t=this.parseRelational();for(;this.next.type==He.Operator;){const i=this.next.strValue;switch(i){case"==":case"===":case"!=":case"!==":this.advance();const s=this.parseRelational();t=new Bs(this.span(e),this.sourceSpan(e),i,t,s);continue}break}return t}parseRelational(){const e=this.inputIndex;let t=this.parseAdditive();for(;this.next.type==He.Operator;){const i=this.next.strValue;switch(i){case"<":case">":case"<=":case">=":this.advance();const s=this.parseAdditive();t=new Bs(this.span(e),this.sourceSpan(e),i,t,s);continue}break}return t}parseAdditive(){const e=this.inputIndex;let t=this.parseMultiplicative();for(;this.next.type==He.Operator;){const i=this.next.strValue;switch(i){case"+":case"-":this.advance();let s=this.parseMultiplicative();t=new Bs(this.span(e),this.sourceSpan(e),i,t,s);continue}break}return t}parseMultiplicative(){const e=this.inputIndex;let t=this.parsePrefix();for(;this.next.type==He.Operator;){const i=this.next.strValue;switch(i){case"*":case"%":case"/":this.advance();let s=this.parsePrefix();t=new Bs(this.span(e),this.sourceSpan(e),i,t,s);continue}break}return t}parsePrefix(){if(this.next.type==He.Operator){const e=this.inputIndex;let i;switch(this.next.strValue){case"+":return this.advance(),i=this.parsePrefix(),Yr.createPlus(this.span(e),this.sourceSpan(e),i);case"-":return this.advance(),i=this.parsePrefix(),Yr.createMinus(this.span(e),this.sourceSpan(e),i);case"!":return this.advance(),i=this.parsePrefix(),new xp(this.span(e),this.sourceSpan(e),i)}}return this.parseCallChain()}parseCallChain(){const e=this.inputIndex;let t=this.parsePrimary();for(;;)if(this.consumeOptionalCharacter(46))t=this.parseAccessMember(t,e,!1);else if(this.consumeOptionalOperator("?."))t=this.consumeOptionalCharacter(40)?this.parseCall(t,e,!0):this.consumeOptionalCharacter(91)?this.parseKeyedReadOrWrite(t,e,!0):this.parseAccessMember(t,e,!0);else if(this.consumeOptionalCharacter(91))t=this.parseKeyedReadOrWrite(t,e,!1);else if(this.consumeOptionalCharacter(40))t=this.parseCall(t,e,!1);else{if(!this.consumeOptionalOperator("!"))return t;t=new Tp(this.span(e),this.sourceSpan(e),t)}}parsePrimary(){const e=this.inputIndex;if(this.consumeOptionalCharacter(40)){this.rparensExpected++;const t=this.parsePipe();return this.rparensExpected--,this.expectCharacter(41),t}if(this.next.isKeywordNull())return this.advance(),new Ki(this.span(e),this.sourceSpan(e),null);if(this.next.isKeywordUndefined())return this.advance(),new Ki(this.span(e),this.sourceSpan(e),void 0);if(this.next.isKeywordTrue())return this.advance(),new Ki(this.span(e),this.sourceSpan(e),!0);if(this.next.isKeywordFalse())return this.advance(),new Ki(this.span(e),this.sourceSpan(e),!1);if(this.next.isKeywordThis())return this.advance(),new dd(this.span(e),this.sourceSpan(e));if(this.consumeOptionalCharacter(91)){this.rbracketsExpected++;const t=this.parseExpressionList(93);return this.rbracketsExpected--,this.expectCharacter(93),new Ip(this.span(e),this.sourceSpan(e),t)}if(this.next.isCharacter(Wr))return this.parseLiteralMap();if(this.next.isIdentifier())return this.parseAccessMember(new Zi(this.span(e),this.sourceSpan(e)),e,!1);if(this.next.isNumber()){const t=this.next.toNumber();return this.advance(),new Ki(this.span(e),this.sourceSpan(e),t)}if(this.next.isString()){const t=this.next.toString();return this.advance(),new Ki(this.span(e),this.sourceSpan(e),t)}return this.next.isPrivateIdentifier()?(this._reportErrorForPrivateIdentifier(this.next,null),new Xi(this.span(e),this.sourceSpan(e))):this.index>=this.tokens.length?(this.error(`Unexpected end of expression: ${this.input}`),new Xi(this.span(e),this.sourceSpan(e))):(this.error(`Unexpected token ${this.next}`),new Xi(this.span(e),this.sourceSpan(e)))}parseExpressionList(e){const t=[];do{if(this.next.isCharacter(e))break;t.push(this.parsePipe())}while(this.consumeOptionalCharacter(44));return t}parseLiteralMap(){const e=[],t=[],i=this.inputIndex;if(this.expectCharacter(Wr),!this.consumeOptionalCharacter(Yi)){this.rbracesExpected++;do{const s=this.inputIndex,r=this.next.isString(),o=this.expectIdentifierOrKeywordOrString();if(e.push({key:o,quoted:r}),r)this.expectCharacter(58),t.push(this.parsePipe());else if(this.consumeOptionalCharacter(58))t.push(this.parsePipe());else{const a=this.span(s),l=this.sourceSpan(s);t.push(new hi(a,l,l,new Zi(a,l),o))}}while(this.consumeOptionalCharacter(44)&&!this.next.isCharacter(Yi));this.rbracesExpected--,this.expectCharacter(Yi)}return new Wy(this.span(i),this.sourceSpan(i),e,t)}parseAccessMember(e,t,i){const s=this.inputIndex,r=this.withContext(Vp.Writable,()=>{const l=this.expectIdentifierOrKeyword()??"";return 0===l.length&&this.error("Expected identifier for property access",e.span.end),l}),o=this.sourceSpan(s);let a;if(i)this.consumeOptionalOperator("=")?(this.error("The '?.' operator cannot be used in the assignment"),a=new Xi(this.span(t),this.sourceSpan(t))):a=new qy(this.span(t),this.sourceSpan(t),o,e,r);else if(this.consumeOptionalOperator("=")){if(!(1&this.parseFlags))return this.error("Bindings cannot contain assignments"),new Xi(this.span(t),this.sourceSpan(t));const l=this.parseConditional();a=new zy(this.span(t),this.sourceSpan(t),o,e,r,l)}else a=new hi(this.span(t),this.sourceSpan(t),o,e,r);return a}parseCall(e,t,i){const s=this.inputIndex;this.rparensExpected++;const r=this.parseCallArguments(),o=this.span(s,this.inputIndex).toAbsolute(this.absoluteOffset);this.expectCharacter(41),this.rparensExpected--;const a=this.span(t),l=this.sourceSpan(t);return i?new Dp(a,l,e,r,o):new Ha(a,l,e,r,o)}parseCallArguments(){if(this.next.isCharacter(41))return[];const e=[];do{e.push(this.parsePipe())}while(this.consumeOptionalCharacter(44));return e}expectTemplateBindingKey(){let e="",t=!1;const i=this.currentAbsoluteOffset;do{e+=this.expectIdentifierOrKeywordOrString(),t=this.consumeOptionalOperator("-"),t&&(e+="-")}while(t);return{source:e,span:new gr(i,i+e.length)}}parseTemplateBindings(e){const t=[];for(t.push(...this.parseDirectiveKeywordBindings(e));this.index<this.tokens.length;){const i=this.parseLetBinding();if(i)t.push(i);else{const s=this.expectTemplateBindingKey(),r=this.parseAsBinding(s);r?t.push(r):(s.source=e.source+s.source.charAt(0).toUpperCase()+s.source.substring(1),t.push(...this.parseDirectiveKeywordBindings(s)))}this.consumeStatementTerminator()}return new xae(t,[],this.errors)}parseKeyedReadOrWrite(e,t,i){return this.withContext(Vp.Writable,()=>{this.rbracketsExpected++;const s=this.parsePipe();if(s instanceof Xi&&this.error("Key access cannot be empty"),this.rbracketsExpected--,this.expectCharacter(93),!this.consumeOptionalOperator("="))return i?new Cp(this.span(t),this.sourceSpan(t),e,s):new Jl(this.span(t),this.sourceSpan(t),e,s);if(!i){const r=this.parseConditional();return new Gy(this.span(t),this.sourceSpan(t),e,s,r)}return this.error("The '?.' operator cannot be used in the assignment"),new Xi(this.span(t),this.sourceSpan(t))})}parseDirectiveKeywordBindings(e){const t=[];this.consumeOptionalCharacter(58);const i=this.getDirectiveBoundTarget();let s=this.currentAbsoluteOffset;const r=this.parseAsBinding(e);r||(this.consumeStatementTerminator(),s=this.currentAbsoluteOffset);const o=new gr(e.span.start,s);return t.push(new Gse(o,e,i)),r&&t.push(r),t}getDirectiveBoundTarget(){if(this.next===$I||this.peekKeywordAs()||this.peekKeywordLet())return null;const e=this.parsePipe(),{start:t,end:i}=e.span,s=this.input.substring(t,i);return new Vs(e,s,this.location,this.absoluteOffset+t,this.errors)}parseAsBinding(e){if(!this.peekKeywordAs())return null;this.advance();const t=this.expectTemplateBindingKey();this.consumeStatementTerminator();const i=new gr(e.span.start,this.currentAbsoluteOffset);return new vI(i,t,e)}parseLetBinding(){if(!this.peekKeywordLet())return null;const e=this.currentAbsoluteOffset;this.advance();const t=this.expectTemplateBindingKey();let i=null;this.consumeOptionalOperator("=")&&(i=this.expectTemplateBindingKey()),this.consumeStatementTerminator();const s=new gr(e,this.currentAbsoluteOffset);return new vI(s,t,i)}consumeStatementTerminator(){this.consumeOptionalCharacter(59)||this.consumeOptionalCharacter(44)}error(e,t=null){this.errors.push(new mI(e,this.input,this.locationText(t),this.location)),this.skip()}locationText(e=null){return null==e&&(e=this.index),e<this.tokens.length?`at column ${this.tokens[e].index+1} in`:"at the end of the expression"}_reportErrorForPrivateIdentifier(e,t){let i=`Private identifiers are not supported. Unexpected private identifier: ${e}`;null!==t&&(i+=`, ${t}`),this.error(i)}skip(){let e=this.next;for(;this.index<this.tokens.length&&!e.isCharacter(59)&&!e.isOperator("|")&&(this.rparensExpected<=0||!e.isCharacter(41))&&(this.rbracesExpected<=0||!e.isCharacter(Yi))&&(this.rbracketsExpected<=0||!e.isCharacter(93))&&!(this.context&Vp.Writable&&e.isOperator("="));)this.next.isError()&&this.errors.push(new mI(this.next.toString(),this.input,this.locationText(),this.location)),this.advance(),e=this.next}}class Tae extends yI{constructor(){super(...arguments),this.errors=[]}visitPipe(){this.errors.push("pipes")}}class Md{constructor(e,t){this.sourceSpan=e,this.i18n=t}}class oc extends Md{constructor(e,t,i,s){super(t,s),this.value=e,this.tokens=i}visit(e,t){return e.visitText(this,t)}}class Up extends Md{constructor(e,t,i,s,r,o){super(s,o),this.switchValue=e,this.type=t,this.cases=i,this.switchValueSourceSpan=r}visit(e,t){return e.visitExpansion(this,t)}}class n${constructor(e,t,i,s,r){this.value=e,this.expression=t,this.sourceSpan=i,this.valueSourceSpan=s,this.expSourceSpan=r}visit(e,t){return e.visitExpansionCase(this,t)}}class d_ extends Md{constructor(e,t,i,s,r,o,a){super(i,a),this.name=e,this.value=t,this.keySpan=s,this.valueSpan=r,this.valueTokens=o}visit(e,t){return e.visitAttribute(this,t)}}class zs extends Md{constructor(e,t,i,s,r,o=null,a){super(s,a),this.name=e,this.attrs=t,this.children=i,this.startSourceSpan=r,this.endSourceSpan=o}visit(e,t){return e.visitElement(this,t)}}class Nd{constructor(e,t){this.value=e,this.sourceSpan=t}visit(e,t){return e.visitComment(this,t)}}class eo extends Md{constructor(e,t,i,s,r,o,a=null,l){super(s,l),this.name=e,this.parameters=t,this.children=i,this.nameSpan=r,this.startSourceSpan=o,this.endSourceSpan=a}visit(e,t){return e.visitBlock(this,t)}}class i${constructor(e,t){this.expression=e,this.sourceSpan=t}visit(e,t){return e.visitBlockParameter(this,t)}}function me(n,e,t=null){const i=[],s=n.visit?r=>n.visit(r,t)||r.visit(n,t):r=>r.visit(n,t);return e.forEach(r=>{const o=s(r);o&&i.push(o)}),i}class Aae{}const Pae=["[Element]|textContent,%ariaAtomic,%ariaAutoComplete,%ariaBusy,%ariaChecked,%ariaColCount,%ariaColIndex,%ariaColSpan,%ariaCurrent,%ariaDescription,%ariaDisabled,%ariaExpanded,%ariaHasPopup,%ariaHidden,%ariaKeyShortcuts,%ariaLabel,%ariaLevel,%ariaLive,%ariaModal,%ariaMultiLine,%ariaMultiSelectable,%ariaOrientation,%ariaPlaceholder,%ariaPosInSet,%ariaPressed,%ariaReadOnly,%ariaRelevant,%ariaRequired,%ariaRoleDescription,%ariaRowCount,%ariaRowIndex,%ariaRowSpan,%ariaSelected,%ariaSetSize,%ariaSort,%ariaValueMax,%ariaValueMin,%ariaValueNow,%ariaValueText,%classList,className,elementTiming,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*fullscreenchange,*fullscreenerror,*search,*webkitfullscreenchange,*webkitfullscreenerror,outerHTML,%part,#scrollLeft,#scrollTop,slot,*message,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored","[HTMLElement]^[Element]|accessKey,autocapitalize,!autofocus,contentEditable,dir,!draggable,enterKeyHint,!hidden,!inert,innerText,inputMode,lang,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate,virtualKeyboardPolicy","abbr,address,article,aside,b,bdi,bdo,cite,content,code,dd,dfn,dt,em,figcaption,figure,footer,header,hgroup,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,section,small,strong,sub,sup,u,var,wbr^[HTMLElement]|accessKey,autocapitalize,!autofocus,contentEditable,dir,!draggable,enterKeyHint,!hidden,innerText,inputMode,lang,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate,virtualKeyboardPolicy","media^[HTMLElement]|!autoplay,!controls,%controlsList,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,*waitingforkey,#playbackRate,preload,!preservesPitch,src,%srcObject,#volume",":svg:^[HTMLElement]|!autofocus,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,%style,#tabIndex",":svg:graphics^:svg:|",":svg:animation^:svg:|*begin,*end,*repeat",":svg:geometry^:svg:|",":svg:componentTransferFunction^:svg:|",":svg:gradient^:svg:|",":svg:textContent^:svg:graphics|",":svg:textPositioning^:svg:textContent|","a^[HTMLElement]|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,%relList,rev,search,shape,target,text,type,username","area^[HTMLElement]|alt,coords,download,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,rel,%relList,search,shape,target,username","audio^media|","br^[HTMLElement]|clear","base^[HTMLElement]|href,target","body^[HTMLElement]|aLink,background,bgColor,link,*afterprint,*beforeprint,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*messageerror,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink","button^[HTMLElement]|!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value","canvas^[HTMLElement]|#height,#width","content^[HTMLElement]|select","dl^[HTMLElement]|!compact","data^[HTMLElement]|value","datalist^[HTMLElement]|","details^[HTMLElement]|!open","dialog^[HTMLElement]|!open,returnValue","dir^[HTMLElement]|!compact","div^[HTMLElement]|align","embed^[HTMLElement]|align,height,name,src,type,width","fieldset^[HTMLElement]|!disabled,name","font^[HTMLElement]|color,face,size","form^[HTMLElement]|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target","frame^[HTMLElement]|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src","frameset^[HTMLElement]|cols,*afterprint,*beforeprint,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*messageerror,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows","hr^[HTMLElement]|align,color,!noShade,size,width","head^[HTMLElement]|","h1,h2,h3,h4,h5,h6^[HTMLElement]|align","html^[HTMLElement]|version","iframe^[HTMLElement]|align,allow,!allowFullscreen,!allowPaymentRequest,csp,frameBorder,height,loading,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width","img^[HTMLElement]|align,alt,border,%crossOrigin,decoding,#height,#hspace,!isMap,loading,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width","input^[HTMLElement]|accept,align,alt,autocomplete,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width","li^[HTMLElement]|type,#value","label^[HTMLElement]|htmlFor","legend^[HTMLElement]|align","link^[HTMLElement]|as,charset,%crossOrigin,!disabled,href,hreflang,imageSizes,imageSrcset,integrity,media,referrerPolicy,rel,%relList,rev,%sizes,target,type","map^[HTMLElement]|name","marquee^[HTMLElement]|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width","menu^[HTMLElement]|!compact","meta^[HTMLElement]|content,httpEquiv,media,name,scheme","meter^[HTMLElement]|#high,#low,#max,#min,#optimum,#value","ins,del^[HTMLElement]|cite,dateTime","ol^[HTMLElement]|!compact,!reversed,#start,type","object^[HTMLElement]|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width","optgroup^[HTMLElement]|!disabled,label","option^[HTMLElement]|!defaultSelected,!disabled,label,!selected,text,value","output^[HTMLElement]|defaultValue,%htmlFor,name,value","p^[HTMLElement]|align","param^[HTMLElement]|name,type,value,valueType","picture^[HTMLElement]|","pre^[HTMLElement]|#width","progress^[HTMLElement]|#max,#value","q,blockquote,cite^[HTMLElement]|","script^[HTMLElement]|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,!noModule,%referrerPolicy,src,text,type","select^[HTMLElement]|autocomplete,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value","slot^[HTMLElement]|name","source^[HTMLElement]|#height,media,sizes,src,srcset,type,#width","span^[HTMLElement]|","style^[HTMLElement]|!disabled,media,type","caption^[HTMLElement]|align","th,td^[HTMLElement]|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width","col,colgroup^[HTMLElement]|align,ch,chOff,#span,vAlign,width","table^[HTMLElement]|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width","tr^[HTMLElement]|align,bgColor,ch,chOff,vAlign","tfoot,thead,tbody^[HTMLElement]|align,ch,chOff,vAlign","template^[HTMLElement]|","textarea^[HTMLElement]|autocomplete,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap","time^[HTMLElement]|dateTime","title^[HTMLElement]|text","track^[HTMLElement]|!default,kind,label,src,srclang","ul^[HTMLElement]|!compact,type","unknown^[HTMLElement]|","video^media|!disablePictureInPicture,#height,*enterpictureinpicture,*leavepictureinpicture,!playsInline,poster,#width",":svg:a^:svg:graphics|",":svg:animate^:svg:animation|",":svg:animateMotion^:svg:animation|",":svg:animateTransform^:svg:animation|",":svg:circle^:svg:geometry|",":svg:clipPath^:svg:graphics|",":svg:defs^:svg:graphics|",":svg:desc^:svg:|",":svg:discard^:svg:|",":svg:ellipse^:svg:geometry|",":svg:feBlend^:svg:|",":svg:feColorMatrix^:svg:|",":svg:feComponentTransfer^:svg:|",":svg:feComposite^:svg:|",":svg:feConvolveMatrix^:svg:|",":svg:feDiffuseLighting^:svg:|",":svg:feDisplacementMap^:svg:|",":svg:feDistantLight^:svg:|",":svg:feDropShadow^:svg:|",":svg:feFlood^:svg:|",":svg:feFuncA^:svg:componentTransferFunction|",":svg:feFuncB^:svg:componentTransferFunction|",":svg:feFuncG^:svg:componentTransferFunction|",":svg:feFuncR^:svg:componentTransferFunction|",":svg:feGaussianBlur^:svg:|",":svg:feImage^:svg:|",":svg:feMerge^:svg:|",":svg:feMergeNode^:svg:|",":svg:feMorphology^:svg:|",":svg:feOffset^:svg:|",":svg:fePointLight^:svg:|",":svg:feSpecularLighting^:svg:|",":svg:feSpotLight^:svg:|",":svg:feTile^:svg:|",":svg:feTurbulence^:svg:|",":svg:filter^:svg:|",":svg:foreignObject^:svg:graphics|",":svg:g^:svg:graphics|",":svg:image^:svg:graphics|decoding",":svg:line^:svg:geometry|",":svg:linearGradient^:svg:gradient|",":svg:mpath^:svg:|",":svg:marker^:svg:|",":svg:mask^:svg:|",":svg:metadata^:svg:|",":svg:path^:svg:geometry|",":svg:pattern^:svg:|",":svg:polygon^:svg:geometry|",":svg:polyline^:svg:geometry|",":svg:radialGradient^:svg:gradient|",":svg:rect^:svg:geometry|",":svg:svg^:svg:graphics|#currentScale,#zoomAndPan",":svg:script^:svg:|type",":svg:set^:svg:animation|",":svg:stop^:svg:|",":svg:style^:svg:|!disabled,media,title,type",":svg:switch^:svg:graphics|",":svg:symbol^:svg:|",":svg:tspan^:svg:textPositioning|",":svg:text^:svg:textPositioning|",":svg:textPath^:svg:textContent|",":svg:title^:svg:|",":svg:use^:svg:graphics|",":svg:view^:svg:|#zoomAndPan","data^[HTMLElement]|value","keygen^[HTMLElement]|!autofocus,challenge,!disabled,form,keytype,name","menuitem^[HTMLElement]|type,label,icon,!disabled,!checked,radiogroup,!default","summary^[HTMLElement]|","time^[HTMLElement]|dateTime",":svg:cursor^:svg:|",":math:^[HTMLElement]|!autofocus,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforeinput,*beforematch,*beforetoggle,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contentvisibilityautostatechange,*contextlost,*contextmenu,*contextrestored,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*scrollend,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,%style,#tabIndex",":math:math^:math:|",":math:maction^:math:|",":math:menclose^:math:|",":math:merror^:math:|",":math:mfenced^:math:|",":math:mfrac^:math:|",":math:mi^:math:|",":math:mmultiscripts^:math:|",":math:mn^:math:|",":math:mo^:math:|",":math:mover^:math:|",":math:mpadded^:math:|",":math:mphantom^:math:|",":math:mroot^:math:|",":math:mrow^:math:|",":math:ms^:math:|",":math:mspace^:math:|",":math:msqrt^:math:|",":math:mstyle^:math:|",":math:msub^:math:|",":math:msubsup^:math:|",":math:msup^:math:|",":math:mtable^:math:|",":math:mtd^:math:|",":math:mtext^:math:|",":math:mtr^:math:|",":math:munder^:math:|",":math:munderover^:math:|",":math:semantics^:math:|"],s$=new Map(Object.entries({class:"className",for:"htmlFor",formaction:"formAction",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"})),Oae=Array.from(s$).reduce((n,[e,t])=>(n.set(e,t),n),new Map);class h_ extends Aae{constructor(){super(),this._schema=new Map,this._eventSchema=new Map,Pae.forEach(e=>{const t=new Map,i=new Set,[s,r]=e.split("|"),o=r.split(","),[a,l]=s.split("^");a.split(",").forEach(u=>{this._schema.set(u.toLowerCase(),t),this._eventSchema.set(u.toLowerCase(),i)});const c=l&&this._schema.get(l.toLowerCase());if(c){for(const[u,d]of c)t.set(u,d);for(const u of this._eventSchema.get(l.toLowerCase()))i.add(u)}o.forEach(u=>{if(u.length>0)switch(u[0]){case"*":i.add(u.substring(1));break;case"!":t.set(u.substring(1),"boolean");break;case"#":t.set(u.substring(1),"number");break;case"%":t.set(u.substring(1),"object");break;default:t.set(u,"string")}})})}hasProperty(e,t,i){if(i.some(r=>r.name===D0_name))return!0;if(e.indexOf("-")>-1){if(H0(e)||z0(e))return!1;if(i.some(r=>r.name===T0_name))return!0}return(this._schema.get(e.toLowerCase())||this._schema.get("unknown")).has(t)}hasElement(e,t){return!!(t.some(i=>i.name===D0_name)||e.indexOf("-")>-1&&(H0(e)||z0(e)||t.some(i=>i.name===T0_name)))||this._schema.has(e.toLowerCase())}securityContext(e,t,i){i&&(t=this.getMappedPropName(t)),e=e.toLowerCase(),t=t.toLowerCase();let s=fV()[e+"|"+t];return s||(s=fV()["*|"+t],s||qe.NONE)}getMappedPropName(e){return s$.get(e)??e}getDefaultComponentElementName(){return"ng-component"}validateProperty(e){return e.toLowerCase().startsWith("on")?{error:!0,msg:`Binding to event property '${e}' is disallowed for security reasons, please use (${e.slice(2)})=...\nIf '${e}' is a directive input, make sure the directive is imported by the current module.`}:{error:!1}}validateAttribute(e){return e.toLowerCase().startsWith("on")?{error:!0,msg:`Binding to event attribute '${e}' is disallowed for security reasons, please use (${e.slice(2)})=...`}:{error:!1}}allKnownElementNames(){return Array.from(this._schema.keys())}allKnownAttributesOfElement(e){const t=this._schema.get(e.toLowerCase())||this._schema.get("unknown");return Array.from(t.keys()).map(i=>Oae.get(i)??i)}allKnownEventsOfElement(e){return Array.from(this._eventSchema.get(e.toLowerCase())??[])}normalizeAnimationStyleProperty(e){return function gie(n){return n.replace(pie,(...e)=>e[1].toUpperCase())}(e)}normalizeAnimationStyleValue(e,t,i){let s="";const r=i.toString().trim();let o=null;if(function Fae(n){switch(n){case"width":case"height":case"minWidth":case"minHeight":case"maxWidth":case"maxHeight":case"left":case"top":case"bottom":case"right":case"fontSize":case"outlineWidth":case"outlineOffset":case"paddingTop":case"paddingLeft":case"paddingBottom":case"paddingRight":case"marginTop":case"marginLeft":case"marginBottom":case"marginRight":case"borderRadius":case"borderWidth":case"borderTopWidth":case"borderLeftWidth":case"borderRightWidth":case"borderBottomWidth":case"textIndent":return!0;default:return!1}}(e)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&(o=`Please provide a CSS unit value for ${t}:${i}`)}return{error:o,value:r+s}}}class Ue{constructor({closedByChildren:e,implicitNamespacePrefix:t,contentType:i=zr.PARSABLE_DATA,closedByParent:s=!1,isVoid:r=!1,ignoreFirstLf:o=!1,preventNamespaceInheritance:a=!1,canSelfClose:l=!1}={}){this.closedByChildren={},this.closedByParent=!1,e&&e.length>0&&e.forEach(c=>this.closedByChildren[c]=!0),this.isVoid=r,this.closedByParent=s||r,this.implicitNamespacePrefix=t||null,this.contentType=i,this.ignoreFirstLf=o,this.preventNamespaceInheritance=a,this.canSelfClose=l??r}isClosedByChild(e){return this.isVoid||e.toLowerCase()in this.closedByChildren}getContentType(e){return"object"==typeof this.contentType?(void 0===e?void 0:this.contentType[e])??this.contentType.default:this.contentType}}let r$,Rd;function o$(n){return Rd||(r$=new Ue({canSelfClose:!0}),Rd=Object.assign(Object.create(null),{base:new Ue({isVoid:!0}),meta:new Ue({isVoid:!0}),area:new Ue({isVoid:!0}),embed:new Ue({isVoid:!0}),link:new Ue({isVoid:!0}),img:new Ue({isVoid:!0}),input:new Ue({isVoid:!0}),param:new Ue({isVoid:!0}),hr:new Ue({isVoid:!0}),br:new Ue({isVoid:!0}),source:new Ue({isVoid:!0}),track:new Ue({isVoid:!0}),wbr:new Ue({isVoid:!0}),p:new Ue({closedByChildren:["address","article","aside","blockquote","div","dl","fieldset","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","ol","p","pre","section","table","ul"],closedByParent:!0}),thead:new Ue({closedByChildren:["tbody","tfoot"]}),tbody:new Ue({closedByChildren:["tbody","tfoot"],closedByParent:!0}),tfoot:new Ue({closedByChildren:["tbody"],closedByParent:!0}),tr:new Ue({closedByChildren:["tr"],closedByParent:!0}),td:new Ue({closedByChildren:["td","th"],closedByParent:!0}),th:new Ue({closedByChildren:["td","th"],closedByParent:!0}),col:new Ue({isVoid:!0}),svg:new Ue({implicitNamespacePrefix:"svg"}),foreignObject:new Ue({implicitNamespacePrefix:"svg",preventNamespaceInheritance:!0}),math:new Ue({implicitNamespacePrefix:"math"}),li:new Ue({closedByChildren:["li"],closedByParent:!0}),dt:new Ue({closedByChildren:["dt","dd"]}),dd:new Ue({closedByChildren:["dt","dd"],closedByParent:!0}),rb:new Ue({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rt:new Ue({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rtc:new Ue({closedByChildren:["rb","rtc","rp"],closedByParent:!0}),rp:new Ue({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),optgroup:new Ue({closedByChildren:["optgroup"],closedByParent:!0}),option:new Ue({closedByChildren:["option","optgroup"],closedByParent:!0}),pre:new Ue({ignoreFirstLf:!0}),listing:new Ue({ignoreFirstLf:!0}),style:new Ue({contentType:zr.RAW_TEXT}),script:new Ue({contentType:zr.RAW_TEXT}),title:new Ue({contentType:{default:zr.ESCAPABLE_RAW_TEXT,svg:zr.PARSABLE_DATA}}),textarea:new Ue({contentType:zr.ESCAPABLE_RAW_TEXT,ignoreFirstLf:!0})}),(new h_).allKnownElementNames().forEach(e=>{!Rd[e]&&null===q0(e)&&(Rd[e]=new Ue({canSelfClose:!1}))})),Rd[n]??Rd[n.toLowerCase()]??r$}const a$={A:"LINK",B:"BOLD_TEXT",BR:"LINE_BREAK",EM:"EMPHASISED_TEXT",H1:"HEADING_LEVEL1",H2:"HEADING_LEVEL2",H3:"HEADING_LEVEL3",H4:"HEADING_LEVEL4",H5:"HEADING_LEVEL5",H6:"HEADING_LEVEL6",HR:"HORIZONTAL_RULE",I:"ITALIC_TEXT",LI:"LIST_ITEM",LINK:"MEDIA_LINK",OL:"ORDERED_LIST",P:"PARAGRAPH",Q:"QUOTATION",S:"STRIKETHROUGH_TEXT",SMALL:"SMALL_TEXT",SUB:"SUBSTRIPT",SUP:"SUPERSCRIPT",TBODY:"TABLE_BODY",TD:"TABLE_CELL",TFOOT:"TABLE_FOOTER",TH:"TABLE_HEADER_CELL",THEAD:"TABLE_HEADER",TR:"TABLE_ROW",TT:"MONOSPACED_TEXT",U:"UNDERLINED_TEXT",UL:"UNORDERED_LIST"};class Lae{constructor(){this._placeHolderNameCounts={},this._signatureToName={}}getStartTagPlaceholderName(e,t,i){const s=this._hashTag(e,t,i);if(this._signatureToName[s])return this._signatureToName[s];const r=e.toUpperCase(),o=a$[r]||`TAG_${r}`,a=this._generateUniqueName(i?o:`START_${o}`);return this._signatureToName[s]=a,a}getCloseTagPlaceholderName(e){const t=this._hashClosingTag(e);if(this._signatureToName[t])return this._signatureToName[t];const i=e.toUpperCase(),r=this._generateUniqueName(`CLOSE_${a$[i]||`TAG_${i}`}`);return this._signatureToName[t]=r,r}getPlaceholderName(e,t){const i=e.toUpperCase(),s=`PH: ${i}=${t}`;if(this._signatureToName[s])return this._signatureToName[s];const r=this._generateUniqueName(i);return this._signatureToName[s]=r,r}getUniquePlaceholder(e){return this._generateUniqueName(e.toUpperCase())}getStartBlockPlaceholderName(e,t){const i=this._hashBlock(e,t);if(this._signatureToName[i])return this._signatureToName[i];const s=this._generateUniqueName(`START_BLOCK_${this._toSnakeCase(e)}`);return this._signatureToName[i]=s,s}getCloseBlockPlaceholderName(e){const t=this._hashClosingBlock(e);if(this._signatureToName[t])return this._signatureToName[t];const i=this._generateUniqueName(`CLOSE_BLOCK_${this._toSnakeCase(e)}`);return this._signatureToName[t]=i,i}_hashTag(e,t,i){return`<${e}`+Object.keys(t).sort().map(a=>` ${a}=${t[a]}`).join("")+(i?"/>":`></${e}>`)}_hashClosingTag(e){return this._hashTag(`/${e}`,{},!1)}_hashBlock(e,t){return`@${e}${0===t.length?"":` (${t.sort().join("; ")})`} {}`}_hashClosingBlock(e){return this._hashBlock(`close_${e}`,[])}_toSnakeCase(e){return e.toUpperCase().replace(/[^A-Z0-9]/g,"_")}_generateUniqueName(e){if(!this._placeHolderNameCounts.hasOwnProperty(e))return this._placeHolderNameCounts[e]=1,e;const i=this._placeHolderNameCounts[e];return this._placeHolderNameCounts[e]=i+1,`${e}_${i}`}}const Bae=new t$(new BI);function Vae(n,e){return e}class $ae{constructor(e,t,i){this._expressionParser=e,this._interpolationConfig=t,this._containerBlocks=i}toI18nMessage(e,t="",i="",s="",r){const o={isIcu:1==e.length&&e[0]instanceof Up,icuDepth:0,placeholderRegistry:new Lae,placeholderToContent:{},placeholderToMessage:{},visitNodeFn:r||Vae},a=me(this,e,o);return new Oi(a,o.placeholderToContent,o.placeholderToMessage,t,i,s)}visitElement(e,t){const i=me(this,e.children,t),s={};e.attrs.forEach(c=>{s[c.name]=c.value});const r=o$(e.name).isVoid,o=t.placeholderRegistry.getStartTagPlaceholderName(e.name,s,r);t.placeholderToContent[o]={text:e.startSourceSpan.toString(),sourceSpan:e.startSourceSpan};let a="";r||(a=t.placeholderRegistry.getCloseTagPlaceholderName(e.name),t.placeholderToContent[a]={text:`</${e.name}>`,sourceSpan:e.endSourceSpan??e.sourceSpan});const l=new Va(e.name,s,o,a,i,r,e.sourceSpan,e.startSourceSpan,e.endSourceSpan);return t.visitNodeFn(e,l)}visitAttribute(e,t){const i=void 0===e.valueTokens||1===e.valueTokens.length?new jo(e.value,e.valueSpan||e.sourceSpan):this._visitTextWithInterpolation(e.valueTokens,e.valueSpan||e.sourceSpan,t,e.i18n);return t.visitNodeFn(e,i)}visitText(e,t){const i=1===e.tokens.length?new jo(e.value,e.sourceSpan):this._visitTextWithInterpolation(e.tokens,e.sourceSpan,t,e.i18n);return t.visitNodeFn(e,i)}visitComment(e,t){return null}visitExpansion(e,t){t.icuDepth++;const i={},s=new nd(e.switchValue,e.type,i,e.sourceSpan);if(e.cases.forEach(a=>{i[a.value]=new Os(a.expression.map(l=>l.visit(this,t)),a.expSourceSpan)}),t.icuDepth--,t.isIcu||t.icuDepth>0){const a=t.placeholderRegistry.getUniquePlaceholder(`VAR_${e.type}`);return s.expressionPlaceholder=a,t.placeholderToContent[a]={text:e.switchValue,sourceSpan:e.switchValueSourceSpan},t.visitNodeFn(e,s)}const r=t.placeholderRegistry.getPlaceholderName("ICU",e.sourceSpan.toString());t.placeholderToMessage[r]=this.toI18nMessage([e],"","","",void 0);const o=new id(s,r,e.sourceSpan);return t.visitNodeFn(e,o)}visitExpansionCase(e,t){throw new Error("Unreachable code")}visitBlock(e,t){const i=me(this,e.children,t);if(this._containerBlocks.has(e.name))return new Os(i,e.sourceSpan);const s=e.parameters.map(l=>l.expression),r=t.placeholderRegistry.getStartBlockPlaceholderName(e.name,s),o=t.placeholderRegistry.getCloseBlockPlaceholderName(e.name);t.placeholderToContent[r]={text:e.startSourceSpan.toString(),sourceSpan:e.startSourceSpan},t.placeholderToContent[o]={text:e.endSourceSpan?e.endSourceSpan.toString():"}",sourceSpan:e.endSourceSpan??e.sourceSpan};const a=new Ho(e.name,s,r,o,i,e.sourceSpan,e.startSourceSpan,e.endSourceSpan);return t.visitNodeFn(e,a)}visitBlockParameter(e,t){throw new Error("Unreachable code")}_visitTextWithInterpolation(e,t,i,s){const r=[];let o=!1;for(const a of e)switch(a.type){case 8:case 17:o=!0;const l=a.parts[1],c=l.split(zae)[2]||"INTERPOLATION",u=i.placeholderRegistry.getPlaceholderName(c,l);i.placeholderToContent[u]={text:a.parts.join(""),sourceSpan:a.sourceSpan},r.push(new Gr(l,u,a.sourceSpan));break;default:if(a.parts[0].length>0){const d=r[r.length-1];d instanceof jo?(d.value+=a.parts[0],d.sourceSpan=new $e(d.sourceSpan.start,a.sourceSpan.end,d.sourceSpan.fullStart,d.sourceSpan.details)):r.push(new jo(a.parts[0],a.sourceSpan))}}return o?(function Uae(n,e){if(e instanceof Oi&&(function jae(n){const e=n.nodes;if(1!==e.length||!(e[0]instanceof Os))throw new Error("Unexpected previous i18n message - expected it to consist of only a single `Container` node.")}(e),e=e.nodes[0]),e instanceof Os){!function Hae(n,e){if(n.length!==e.length)throw new Error("The number of i18n message children changed between first and second pass.");if(n.some((t,i)=>e[i].constructor!==t.constructor))throw new Error("The types of the i18n message children changed between first and second pass.")}(e.children,n);for(let t=0;t<n.length;t++)n[t].sourceSpan=e.children[t].sourceSpan}}(r,s),new Os(r,t)):r[0]}}const zae=/\/\/[\s\S]*i18n[\s\S]*\([\s\S]*ph[\s\S]*=[\s\S]*("|')([\s\S]*?)\1[\s\S]*\)/g;class Zo extends Fe{constructor(e,t){super(e,t)}}const f_={AElig:"\xc6",AMP:"&",amp:"&",Aacute:"\xc1",Abreve:"\u0102",Acirc:"\xc2",Acy:"\u0410",Afr:"\u{1d504}",Agrave:"\xc0",Alpha:"\u0391",Amacr:"\u0100",And:"\u2a53",Aogon:"\u0104",Aopf:"\u{1d538}",ApplyFunction:"\u2061",af:"\u2061",Aring:"\xc5",angst:"\xc5",Ascr:"\u{1d49c}",Assign:"\u2254",colone:"\u2254",coloneq:"\u2254",Atilde:"\xc3",Auml:"\xc4",Backslash:"\u2216",setminus:"\u2216",setmn:"\u2216",smallsetminus:"\u2216",ssetmn:"\u2216",Barv:"\u2ae7",Barwed:"\u2306",doublebarwedge:"\u2306",Bcy:"\u0411",Because:"\u2235",becaus:"\u2235",because:"\u2235",Bernoullis:"\u212c",Bscr:"\u212c",bernou:"\u212c",Beta:"\u0392",Bfr:"\u{1d505}",Bopf:"\u{1d539}",Breve:"\u02d8",breve:"\u02d8",Bumpeq:"\u224e",HumpDownHump:"\u224e",bump:"\u224e",CHcy:"\u0427",COPY:"\xa9",copy:"\xa9",Cacute:"\u0106",Cap:"\u22d2",CapitalDifferentialD:"\u2145",DD:"\u2145",Cayleys:"\u212d",Cfr:"\u212d",Ccaron:"\u010c",Ccedil:"\xc7",Ccirc:"\u0108",Cconint:"\u2230",Cdot:"\u010a",Cedilla:"\xb8",cedil:"\xb8",CenterDot:"\xb7",centerdot:"\xb7",middot:"\xb7",Chi:"\u03a7",CircleDot:"\u2299",odot:"\u2299",CircleMinus:"\u2296",ominus:"\u2296",CirclePlus:"\u2295",oplus:"\u2295",CircleTimes:"\u2297",otimes:"\u2297",ClockwiseContourIntegral:"\u2232",cwconint:"\u2232",CloseCurlyDoubleQuote:"\u201d",rdquo:"\u201d",rdquor:"\u201d",CloseCurlyQuote:"\u2019",rsquo:"\u2019",rsquor:"\u2019",Colon:"\u2237",Proportion:"\u2237",Colone:"\u2a74",Congruent:"\u2261",equiv:"\u2261",Conint:"\u222f",DoubleContourIntegral:"\u222f",ContourIntegral:"\u222e",conint:"\u222e",oint:"\u222e",Copf:"\u2102",complexes:"\u2102",Coproduct:"\u2210",coprod:"\u2210",CounterClockwiseContourIntegral:"\u2233",awconint:"\u2233",Cross:"\u2a2f",Cscr:"\u{1d49e}",Cup:"\u22d3",CupCap:"\u224d",asympeq:"\u224d",DDotrahd:"\u2911",DJcy:"\u0402",DScy:"\u0405",DZcy:"\u040f",Dagger:"\u2021",ddagger:"\u2021",Darr:"\u21a1",Dashv:"\u2ae4",DoubleLeftTee:"\u2ae4",Dcaron:"\u010e",Dcy:"\u0414",Del:"\u2207",nabla:"\u2207",Delta:"\u0394",Dfr:"\u{1d507}",DiacriticalAcute:"\xb4",acute:"\xb4",DiacriticalDot:"\u02d9",dot:"\u02d9",DiacriticalDoubleAcute:"\u02dd",dblac:"\u02dd",DiacriticalGrave:"`",grave:"`",DiacriticalTilde:"\u02dc",tilde:"\u02dc",Diamond:"\u22c4",diam:"\u22c4",diamond:"\u22c4",DifferentialD:"\u2146",dd:"\u2146",Dopf:"\u{1d53b}",Dot:"\xa8",DoubleDot:"\xa8",die:"\xa8",uml:"\xa8",DotDot:"\u20dc",DotEqual:"\u2250",doteq:"\u2250",esdot:"\u2250",DoubleDownArrow:"\u21d3",Downarrow:"\u21d3",dArr:"\u21d3",DoubleLeftArrow:"\u21d0",Leftarrow:"\u21d0",lArr:"\u21d0",DoubleLeftRightArrow:"\u21d4",Leftrightarrow:"\u21d4",hArr:"\u21d4",iff:"\u21d4",DoubleLongLeftArrow:"\u27f8",Longleftarrow:"\u27f8",xlArr:"\u27f8",DoubleLongLeftRightArrow:"\u27fa",Longleftrightarrow:"\u27fa",xhArr:"\u27fa",DoubleLongRightArrow:"\u27f9",Longrightarrow:"\u27f9",xrArr:"\u27f9",DoubleRightArrow:"\u21d2",Implies:"\u21d2",Rightarrow:"\u21d2",rArr:"\u21d2",DoubleRightTee:"\u22a8",vDash:"\u22a8",DoubleUpArrow:"\u21d1",Uparrow:"\u21d1",uArr:"\u21d1",DoubleUpDownArrow:"\u21d5",Updownarrow:"\u21d5",vArr:"\u21d5",DoubleVerticalBar:"\u2225",par:"\u2225",parallel:"\u2225",shortparallel:"\u2225",spar:"\u2225",DownArrow:"\u2193",ShortDownArrow:"\u2193",darr:"\u2193",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21f5",duarr:"\u21f5",DownBreve:"\u0311",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295e",DownLeftVector:"\u21bd",leftharpoondown:"\u21bd",lhard:"\u21bd",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295f",DownRightVector:"\u21c1",rhard:"\u21c1",rightharpoondown:"\u21c1",DownRightVectorBar:"\u2957",DownTee:"\u22a4",top:"\u22a4",DownTeeArrow:"\u21a7",mapstodown:"\u21a7",Dscr:"\u{1d49f}",Dstrok:"\u0110",ENG:"\u014a",ETH:"\xd0",Eacute:"\xc9",Ecaron:"\u011a",Ecirc:"\xca",Ecy:"\u042d",Edot:"\u0116",Efr:"\u{1d508}",Egrave:"\xc8",Element:"\u2208",in:"\u2208",isin:"\u2208",isinv:"\u2208",Emacr:"\u0112",EmptySmallSquare:"\u25fb",EmptyVerySmallSquare:"\u25ab",Eogon:"\u0118",Eopf:"\u{1d53c}",Epsilon:"\u0395",Equal:"\u2a75",EqualTilde:"\u2242",eqsim:"\u2242",esim:"\u2242",Equilibrium:"\u21cc",rightleftharpoons:"\u21cc",rlhar:"\u21cc",Escr:"\u2130",expectation:"\u2130",Esim:"\u2a73",Eta:"\u0397",Euml:"\xcb",Exists:"\u2203",exist:"\u2203",ExponentialE:"\u2147",ee:"\u2147",exponentiale:"\u2147",Fcy:"\u0424",Ffr:"\u{1d509}",FilledSmallSquare:"\u25fc",FilledVerySmallSquare:"\u25aa",blacksquare:"\u25aa",squarf:"\u25aa",squf:"\u25aa",Fopf:"\u{1d53d}",ForAll:"\u2200",forall:"\u2200",Fouriertrf:"\u2131",Fscr:"\u2131",GJcy:"\u0403",GT:">",gt:">",Gamma:"\u0393",Gammad:"\u03dc",Gbreve:"\u011e",Gcedil:"\u0122",Gcirc:"\u011c",Gcy:"\u0413",Gdot:"\u0120",Gfr:"\u{1d50a}",Gg:"\u22d9",ggg:"\u22d9",Gopf:"\u{1d53e}",GreaterEqual:"\u2265",ge:"\u2265",geq:"\u2265",GreaterEqualLess:"\u22db",gel:"\u22db",gtreqless:"\u22db",GreaterFullEqual:"\u2267",gE:"\u2267",geqq:"\u2267",GreaterGreater:"\u2aa2",GreaterLess:"\u2277",gl:"\u2277",gtrless:"\u2277",GreaterSlantEqual:"\u2a7e",geqslant:"\u2a7e",ges:"\u2a7e",GreaterTilde:"\u2273",gsim:"\u2273",gtrsim:"\u2273",Gscr:"\u{1d4a2}",Gt:"\u226b",NestedGreaterGreater:"\u226b",gg:"\u226b",HARDcy:"\u042a",Hacek:"\u02c7",caron:"\u02c7",Hat:"^",Hcirc:"\u0124",Hfr:"\u210c",Poincareplane:"\u210c",HilbertSpace:"\u210b",Hscr:"\u210b",hamilt:"\u210b",Hopf:"\u210d",quaternions:"\u210d",HorizontalLine:"\u2500",boxh:"\u2500",Hstrok:"\u0126",HumpEqual:"\u224f",bumpe:"\u224f",bumpeq:"\u224f",IEcy:"\u0415",IJlig:"\u0132",IOcy:"\u0401",Iacute:"\xcd",Icirc:"\xce",Icy:"\u0418",Idot:"\u0130",Ifr:"\u2111",Im:"\u2111",image:"\u2111",imagpart:"\u2111",Igrave:"\xcc",Imacr:"\u012a",ImaginaryI:"\u2148",ii:"\u2148",Int:"\u222c",Integral:"\u222b",int:"\u222b",Intersection:"\u22c2",bigcap:"\u22c2",xcap:"\u22c2",InvisibleComma:"\u2063",ic:"\u2063",InvisibleTimes:"\u2062",it:"\u2062",Iogon:"\u012e",Iopf:"\u{1d540}",Iota:"\u0399",Iscr:"\u2110",imagline:"\u2110",Itilde:"\u0128",Iukcy:"\u0406",Iuml:"\xcf",Jcirc:"\u0134",Jcy:"\u0419",Jfr:"\u{1d50d}",Jopf:"\u{1d541}",Jscr:"\u{1d4a5}",Jsercy:"\u0408",Jukcy:"\u0404",KHcy:"\u0425",KJcy:"\u040c",Kappa:"\u039a",Kcedil:"\u0136",Kcy:"\u041a",Kfr:"\u{1d50e}",Kopf:"\u{1d542}",Kscr:"\u{1d4a6}",LJcy:"\u0409",LT:"<",lt:"<",Lacute:"\u0139",Lambda:"\u039b",Lang:"\u27ea",Laplacetrf:"\u2112",Lscr:"\u2112",lagran:"\u2112",Larr:"\u219e",twoheadleftarrow:"\u219e",Lcaron:"\u013d",Lcedil:"\u013b",Lcy:"\u041b",LeftAngleBracket:"\u27e8",lang:"\u27e8",langle:"\u27e8",LeftArrow:"\u2190",ShortLeftArrow:"\u2190",larr:"\u2190",leftarrow:"\u2190",slarr:"\u2190",LeftArrowBar:"\u21e4",larrb:"\u21e4",LeftArrowRightArrow:"\u21c6",leftrightarrows:"\u21c6",lrarr:"\u21c6",LeftCeiling:"\u2308",lceil:"\u2308",LeftDoubleBracket:"\u27e6",lobrk:"\u27e6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21c3",dharl:"\u21c3",downharpoonleft:"\u21c3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230a",lfloor:"\u230a",LeftRightArrow:"\u2194",harr:"\u2194",leftrightarrow:"\u2194",LeftRightVector:"\u294e",LeftTee:"\u22a3",dashv:"\u22a3",LeftTeeArrow:"\u21a4",mapstoleft:"\u21a4",LeftTeeVector:"\u295a",LeftTriangle:"\u22b2",vartriangleleft:"\u22b2",vltri:"\u22b2",LeftTriangleBar:"\u29cf",LeftTriangleEqual:"\u22b4",ltrie:"\u22b4",trianglelefteq:"\u22b4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21bf",uharl:"\u21bf",upharpoonleft:"\u21bf",LeftUpVectorBar:"\u2958",LeftVector:"\u21bc",leftharpoonup:"\u21bc",lharu:"\u21bc",LeftVectorBar:"\u2952",LessEqualGreater:"\u22da",leg:"\u22da",lesseqgtr:"\u22da",LessFullEqual:"\u2266",lE:"\u2266",leqq:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",lg:"\u2276",LessLess:"\u2aa1",LessSlantEqual:"\u2a7d",leqslant:"\u2a7d",les:"\u2a7d",LessTilde:"\u2272",lesssim:"\u2272",lsim:"\u2272",Lfr:"\u{1d50f}",Ll:"\u22d8",Lleftarrow:"\u21da",lAarr:"\u21da",Lmidot:"\u013f",LongLeftArrow:"\u27f5",longleftarrow:"\u27f5",xlarr:"\u27f5",LongLeftRightArrow:"\u27f7",longleftrightarrow:"\u27f7",xharr:"\u27f7",LongRightArrow:"\u27f6",longrightarrow:"\u27f6",xrarr:"\u27f6",Lopf:"\u{1d543}",LowerLeftArrow:"\u2199",swarr:"\u2199",swarrow:"\u2199",LowerRightArrow:"\u2198",searr:"\u2198",searrow:"\u2198",Lsh:"\u21b0",lsh:"\u21b0",Lstrok:"\u0141",Lt:"\u226a",NestedLessLess:"\u226a",ll:"\u226a",Map:"\u2905",Mcy:"\u041c",MediumSpace:"\u205f",Mellintrf:"\u2133",Mscr:"\u2133",phmmat:"\u2133",Mfr:"\u{1d510}",MinusPlus:"\u2213",mnplus:"\u2213",mp:"\u2213",Mopf:"\u{1d544}",Mu:"\u039c",NJcy:"\u040a",Nacute:"\u0143",Ncaron:"\u0147",Ncedil:"\u0145",Ncy:"\u041d",NegativeMediumSpace:"\u200b",NegativeThickSpace:"\u200b",NegativeThinSpace:"\u200b",NegativeVeryThinSpace:"\u200b",ZeroWidthSpace:"\u200b",NewLine:"\n",Nfr:"\u{1d511}",NoBreak:"\u2060",NonBreakingSpace:"\xa0",nbsp:"\xa0",Nopf:"\u2115",naturals:"\u2115",Not:"\u2aec",NotCongruent:"\u2262",nequiv:"\u2262",NotCupCap:"\u226d",NotDoubleVerticalBar:"\u2226",npar:"\u2226",nparallel:"\u2226",nshortparallel:"\u2226",nspar:"\u2226",NotElement:"\u2209",notin:"\u2209",notinva:"\u2209",NotEqual:"\u2260",ne:"\u2260",NotEqualTilde:"\u2242\u0338",nesim:"\u2242\u0338",NotExists:"\u2204",nexist:"\u2204",nexists:"\u2204",NotGreater:"\u226f",ngt:"\u226f",ngtr:"\u226f",NotGreaterEqual:"\u2271",nge:"\u2271",ngeq:"\u2271",NotGreaterFullEqual:"\u2267\u0338",ngE:"\u2267\u0338",ngeqq:"\u2267\u0338",NotGreaterGreater:"\u226b\u0338",nGtv:"\u226b\u0338",NotGreaterLess:"\u2279",ntgl:"\u2279",NotGreaterSlantEqual:"\u2a7e\u0338",ngeqslant:"\u2a7e\u0338",nges:"\u2a7e\u0338",NotGreaterTilde:"\u2275",ngsim:"\u2275",NotHumpDownHump:"\u224e\u0338",nbump:"\u224e\u0338",NotHumpEqual:"\u224f\u0338",nbumpe:"\u224f\u0338",NotLeftTriangle:"\u22ea",nltri:"\u22ea",ntriangleleft:"\u22ea",NotLeftTriangleBar:"\u29cf\u0338",NotLeftTriangleEqual:"\u22ec",nltrie:"\u22ec",ntrianglelefteq:"\u22ec",NotLess:"\u226e",nless:"\u226e",nlt:"\u226e",NotLessEqual:"\u2270",nle:"\u2270",nleq:"\u2270",NotLessGreater:"\u2278",ntlg:"\u2278",NotLessLess:"\u226a\u0338",nLtv:"\u226a\u0338",NotLessSlantEqual:"\u2a7d\u0338",nleqslant:"\u2a7d\u0338",nles:"\u2a7d\u0338",NotLessTilde:"\u2274",nlsim:"\u2274",NotNestedGreaterGreater:"\u2aa2\u0338",NotNestedLessLess:"\u2aa1\u0338",NotPrecedes:"\u2280",npr:"\u2280",nprec:"\u2280",NotPrecedesEqual:"\u2aaf\u0338",npre:"\u2aaf\u0338",npreceq:"\u2aaf\u0338",NotPrecedesSlantEqual:"\u22e0",nprcue:"\u22e0",NotReverseElement:"\u220c",notni:"\u220c",notniva:"\u220c",NotRightTriangle:"\u22eb",nrtri:"\u22eb",ntriangleright:"\u22eb",NotRightTriangleBar:"\u29d0\u0338",NotRightTriangleEqual:"\u22ed",nrtrie:"\u22ed",ntrianglerighteq:"\u22ed",NotSquareSubset:"\u228f\u0338",NotSquareSubsetEqual:"\u22e2",nsqsube:"\u22e2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22e3",nsqsupe:"\u22e3",NotSubset:"\u2282\u20d2",nsubset:"\u2282\u20d2",vnsub:"\u2282\u20d2",NotSubsetEqual:"\u2288",nsube:"\u2288",nsubseteq:"\u2288",NotSucceeds:"\u2281",nsc:"\u2281",nsucc:"\u2281",NotSucceedsEqual:"\u2ab0\u0338",nsce:"\u2ab0\u0338",nsucceq:"\u2ab0\u0338",NotSucceedsSlantEqual:"\u22e1",nsccue:"\u22e1",NotSucceedsTilde:"\u227f\u0338",NotSuperset:"\u2283\u20d2",nsupset:"\u2283\u20d2",vnsup:"\u2283\u20d2",NotSupersetEqual:"\u2289",nsupe:"\u2289",nsupseteq:"\u2289",NotTilde:"\u2241",nsim:"\u2241",NotTildeEqual:"\u2244",nsime:"\u2244",nsimeq:"\u2244",NotTildeFullEqual:"\u2247",ncong:"\u2247",NotTildeTilde:"\u2249",nap:"\u2249",napprox:"\u2249",NotVerticalBar:"\u2224",nmid:"\u2224",nshortmid:"\u2224",nsmid:"\u2224",Nscr:"\u{1d4a9}",Ntilde:"\xd1",Nu:"\u039d",OElig:"\u0152",Oacute:"\xd3",Ocirc:"\xd4",Ocy:"\u041e",Odblac:"\u0150",Ofr:"\u{1d512}",Ograve:"\xd2",Omacr:"\u014c",Omega:"\u03a9",ohm:"\u03a9",Omicron:"\u039f",Oopf:"\u{1d546}",OpenCurlyDoubleQuote:"\u201c",ldquo:"\u201c",OpenCurlyQuote:"\u2018",lsquo:"\u2018",Or:"\u2a54",Oscr:"\u{1d4aa}",Oslash:"\xd8",Otilde:"\xd5",Otimes:"\u2a37",Ouml:"\xd6",OverBar:"\u203e",oline:"\u203e",OverBrace:"\u23de",OverBracket:"\u23b4",tbrk:"\u23b4",OverParenthesis:"\u23dc",PartialD:"\u2202",part:"\u2202",Pcy:"\u041f",Pfr:"\u{1d513}",Phi:"\u03a6",Pi:"\u03a0",PlusMinus:"\xb1",plusmn:"\xb1",pm:"\xb1",Popf:"\u2119",primes:"\u2119",Pr:"\u2abb",Precedes:"\u227a",pr:"\u227a",prec:"\u227a",PrecedesEqual:"\u2aaf",pre:"\u2aaf",preceq:"\u2aaf",PrecedesSlantEqual:"\u227c",prcue:"\u227c",preccurlyeq:"\u227c",PrecedesTilde:"\u227e",precsim:"\u227e",prsim:"\u227e",Prime:"\u2033",Product:"\u220f",prod:"\u220f",Proportional:"\u221d",prop:"\u221d",propto:"\u221d",varpropto:"\u221d",vprop:"\u221d",Pscr:"\u{1d4ab}",Psi:"\u03a8",QUOT:'"',quot:'"',Qfr:"\u{1d514}",Qopf:"\u211a",rationals:"\u211a",Qscr:"\u{1d4ac}",RBarr:"\u2910",drbkarow:"\u2910",REG:"\xae",circledR:"\xae",reg:"\xae",Racute:"\u0154",Rang:"\u27eb",Rarr:"\u21a0",twoheadrightarrow:"\u21a0",Rarrtl:"\u2916",Rcaron:"\u0158",Rcedil:"\u0156",Rcy:"\u0420",Re:"\u211c",Rfr:"\u211c",real:"\u211c",realpart:"\u211c",ReverseElement:"\u220b",SuchThat:"\u220b",ni:"\u220b",niv:"\u220b",ReverseEquilibrium:"\u21cb",leftrightharpoons:"\u21cb",lrhar:"\u21cb",ReverseUpEquilibrium:"\u296f",duhar:"\u296f",Rho:"\u03a1",RightAngleBracket:"\u27e9",rang:"\u27e9",rangle:"\u27e9",RightArrow:"\u2192",ShortRightArrow:"\u2192",rarr:"\u2192",rightarrow:"\u2192",srarr:"\u2192",RightArrowBar:"\u21e5",rarrb:"\u21e5",RightArrowLeftArrow:"\u21c4",rightleftarrows:"\u21c4",rlarr:"\u21c4",RightCeiling:"\u2309",rceil:"\u2309",RightDoubleBracket:"\u27e7",robrk:"\u27e7",RightDownTeeVector:"\u295d",RightDownVector:"\u21c2",dharr:"\u21c2",downharpoonright:"\u21c2",RightDownVectorBar:"\u2955",RightFloor:"\u230b",rfloor:"\u230b",RightTee:"\u22a2",vdash:"\u22a2",RightTeeArrow:"\u21a6",map:"\u21a6",mapsto:"\u21a6",RightTeeVector:"\u295b",RightTriangle:"\u22b3",vartriangleright:"\u22b3",vrtri:"\u22b3",RightTriangleBar:"\u29d0",RightTriangleEqual:"\u22b5",rtrie:"\u22b5",trianglerighteq:"\u22b5",RightUpDownVector:"\u294f",RightUpTeeVector:"\u295c",RightUpVector:"\u21be",uharr:"\u21be",upharpoonright:"\u21be",RightUpVectorBar:"\u2954",RightVector:"\u21c0",rharu:"\u21c0",rightharpoonup:"\u21c0",RightVectorBar:"\u2953",Ropf:"\u211d",reals:"\u211d",RoundImplies:"\u2970",Rrightarrow:"\u21db",rAarr:"\u21db",Rscr:"\u211b",realine:"\u211b",Rsh:"\u21b1",rsh:"\u21b1",RuleDelayed:"\u29f4",SHCHcy:"\u0429",SHcy:"\u0428",SOFTcy:"\u042c",Sacute:"\u015a",Sc:"\u2abc",Scaron:"\u0160",Scedil:"\u015e",Scirc:"\u015c",Scy:"\u0421",Sfr:"\u{1d516}",ShortUpArrow:"\u2191",UpArrow:"\u2191",uarr:"\u2191",uparrow:"\u2191",Sigma:"\u03a3",SmallCircle:"\u2218",compfn:"\u2218",Sopf:"\u{1d54a}",Sqrt:"\u221a",radic:"\u221a",Square:"\u25a1",squ:"\u25a1",square:"\u25a1",SquareIntersection:"\u2293",sqcap:"\u2293",SquareSubset:"\u228f",sqsub:"\u228f",sqsubset:"\u228f",SquareSubsetEqual:"\u2291",sqsube:"\u2291",sqsubseteq:"\u2291",SquareSuperset:"\u2290",sqsup:"\u2290",sqsupset:"\u2290",SquareSupersetEqual:"\u2292",sqsupe:"\u2292",sqsupseteq:"\u2292",SquareUnion:"\u2294",sqcup:"\u2294",Sscr:"\u{1d4ae}",Star:"\u22c6",sstarf:"\u22c6",Sub:"\u22d0",Subset:"\u22d0",SubsetEqual:"\u2286",sube:"\u2286",subseteq:"\u2286",Succeeds:"\u227b",sc:"\u227b",succ:"\u227b",SucceedsEqual:"\u2ab0",sce:"\u2ab0",succeq:"\u2ab0",SucceedsSlantEqual:"\u227d",sccue:"\u227d",succcurlyeq:"\u227d",SucceedsTilde:"\u227f",scsim:"\u227f",succsim:"\u227f",Sum:"\u2211",sum:"\u2211",Sup:"\u22d1",Supset:"\u22d1",Superset:"\u2283",sup:"\u2283",supset:"\u2283",SupersetEqual:"\u2287",supe:"\u2287",supseteq:"\u2287",THORN:"\xde",TRADE:"\u2122",trade:"\u2122",TSHcy:"\u040b",TScy:"\u0426",Tab:"\t",Tau:"\u03a4",Tcaron:"\u0164",Tcedil:"\u0162",Tcy:"\u0422",Tfr:"\u{1d517}",Therefore:"\u2234",there4:"\u2234",therefore:"\u2234",Theta:"\u0398",ThickSpace:"\u205f\u200a",ThinSpace:"\u2009",thinsp:"\u2009",Tilde:"\u223c",sim:"\u223c",thicksim:"\u223c",thksim:"\u223c",TildeEqual:"\u2243",sime:"\u2243",simeq:"\u2243",TildeFullEqual:"\u2245",cong:"\u2245",TildeTilde:"\u2248",ap:"\u2248",approx:"\u2248",asymp:"\u2248",thickapprox:"\u2248",thkap:"\u2248",Topf:"\u{1d54b}",TripleDot:"\u20db",tdot:"\u20db",Tscr:"\u{1d4af}",Tstrok:"\u0166",Uacute:"\xda",Uarr:"\u219f",Uarrocir:"\u2949",Ubrcy:"\u040e",Ubreve:"\u016c",Ucirc:"\xdb",Ucy:"\u0423",Udblac:"\u0170",Ufr:"\u{1d518}",Ugrave:"\xd9",Umacr:"\u016a",UnderBar:"_",lowbar:"_",UnderBrace:"\u23df",UnderBracket:"\u23b5",bbrk:"\u23b5",UnderParenthesis:"\u23dd",Union:"\u22c3",bigcup:"\u22c3",xcup:"\u22c3",UnionPlus:"\u228e",uplus:"\u228e",Uogon:"\u0172",Uopf:"\u{1d54c}",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21c5",udarr:"\u21c5",UpDownArrow:"\u2195",updownarrow:"\u2195",varr:"\u2195",UpEquilibrium:"\u296e",udhar:"\u296e",UpTee:"\u22a5",bot:"\u22a5",bottom:"\u22a5",perp:"\u22a5",UpTeeArrow:"\u21a5",mapstoup:"\u21a5",UpperLeftArrow:"\u2196",nwarr:"\u2196",nwarrow:"\u2196",UpperRightArrow:"\u2197",nearr:"\u2197",nearrow:"\u2197",Upsi:"\u03d2",upsih:"\u03d2",Upsilon:"\u03a5",Uring:"\u016e",Uscr:"\u{1d4b0}",Utilde:"\u0168",Uuml:"\xdc",VDash:"\u22ab",Vbar:"\u2aeb",Vcy:"\u0412",Vdash:"\u22a9",Vdashl:"\u2ae6",Vee:"\u22c1",bigvee:"\u22c1",xvee:"\u22c1",Verbar:"\u2016",Vert:"\u2016",VerticalBar:"\u2223",mid:"\u2223",shortmid:"\u2223",smid:"\u2223",VerticalLine:"|",verbar:"|",vert:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",wr:"\u2240",wreath:"\u2240",VeryThinSpace:"\u200a",hairsp:"\u200a",Vfr:"\u{1d519}",Vopf:"\u{1d54d}",Vscr:"\u{1d4b1}",Vvdash:"\u22aa",Wcirc:"\u0174",Wedge:"\u22c0",bigwedge:"\u22c0",xwedge:"\u22c0",Wfr:"\u{1d51a}",Wopf:"\u{1d54e}",Wscr:"\u{1d4b2}",Xfr:"\u{1d51b}",Xi:"\u039e",Xopf:"\u{1d54f}",Xscr:"\u{1d4b3}",YAcy:"\u042f",YIcy:"\u0407",YUcy:"\u042e",Yacute:"\xdd",Ycirc:"\u0176",Ycy:"\u042b",Yfr:"\u{1d51c}",Yopf:"\u{1d550}",Yscr:"\u{1d4b4}",Yuml:"\u0178",ZHcy:"\u0416",Zacute:"\u0179",Zcaron:"\u017d",Zcy:"\u0417",Zdot:"\u017b",Zeta:"\u0396",Zfr:"\u2128",zeetrf:"\u2128",Zopf:"\u2124",integers:"\u2124",Zscr:"\u{1d4b5}",aacute:"\xe1",abreve:"\u0103",ac:"\u223e",mstpos:"\u223e",acE:"\u223e\u0333",acd:"\u223f",acirc:"\xe2",acy:"\u0430",aelig:"\xe6",afr:"\u{1d51e}",agrave:"\xe0",alefsym:"\u2135",aleph:"\u2135",alpha:"\u03b1",amacr:"\u0101",amalg:"\u2a3f",and:"\u2227",wedge:"\u2227",andand:"\u2a55",andd:"\u2a5c",andslope:"\u2a58",andv:"\u2a5a",ang:"\u2220",angle:"\u2220",ange:"\u29a4",angmsd:"\u2221",measuredangle:"\u2221",angmsdaa:"\u29a8",angmsdab:"\u29a9",angmsdac:"\u29aa",angmsdad:"\u29ab",angmsdae:"\u29ac",angmsdaf:"\u29ad",angmsdag:"\u29ae",angmsdah:"\u29af",angrt:"\u221f",angrtvb:"\u22be",angrtvbd:"\u299d",angsph:"\u2222",angzarr:"\u237c",aogon:"\u0105",aopf:"\u{1d552}",apE:"\u2a70",apacir:"\u2a6f",ape:"\u224a",approxeq:"\u224a",apid:"\u224b",apos:"'",aring:"\xe5",ascr:"\u{1d4b6}",ast:"*",midast:"*",atilde:"\xe3",auml:"\xe4",awint:"\u2a11",bNot:"\u2aed",backcong:"\u224c",bcong:"\u224c",backepsilon:"\u03f6",bepsi:"\u03f6",backprime:"\u2035",bprime:"\u2035",backsim:"\u223d",bsim:"\u223d",backsimeq:"\u22cd",bsime:"\u22cd",barvee:"\u22bd",barwed:"\u2305",barwedge:"\u2305",bbrktbrk:"\u23b6",bcy:"\u0431",bdquo:"\u201e",ldquor:"\u201e",bemptyv:"\u29b0",beta:"\u03b2",beth:"\u2136",between:"\u226c",twixt:"\u226c",bfr:"\u{1d51f}",bigcirc:"\u25ef",xcirc:"\u25ef",bigodot:"\u2a00",xodot:"\u2a00",bigoplus:"\u2a01",xoplus:"\u2a01",bigotimes:"\u2a02",xotime:"\u2a02",bigsqcup:"\u2a06",xsqcup:"\u2a06",bigstar:"\u2605",starf:"\u2605",bigtriangledown:"\u25bd",xdtri:"\u25bd",bigtriangleup:"\u25b3",xutri:"\u25b3",biguplus:"\u2a04",xuplus:"\u2a04",bkarow:"\u290d",rbarr:"\u290d",blacklozenge:"\u29eb",lozf:"\u29eb",blacktriangle:"\u25b4",utrif:"\u25b4",blacktriangledown:"\u25be",dtrif:"\u25be",blacktriangleleft:"\u25c2",ltrif:"\u25c2",blacktriangleright:"\u25b8",rtrif:"\u25b8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20e5",bnequiv:"\u2261\u20e5",bnot:"\u2310",bopf:"\u{1d553}",bowtie:"\u22c8",boxDL:"\u2557",boxDR:"\u2554",boxDl:"\u2556",boxDr:"\u2553",boxH:"\u2550",boxHD:"\u2566",boxHU:"\u2569",boxHd:"\u2564",boxHu:"\u2567",boxUL:"\u255d",boxUR:"\u255a",boxUl:"\u255c",boxUr:"\u2559",boxV:"\u2551",boxVH:"\u256c",boxVL:"\u2563",boxVR:"\u2560",boxVh:"\u256b",boxVl:"\u2562",boxVr:"\u255f",boxbox:"\u29c9",boxdL:"\u2555",boxdR:"\u2552",boxdl:"\u2510",boxdr:"\u250c",boxhD:"\u2565",boxhU:"\u2568",boxhd:"\u252c",boxhu:"\u2534",boxminus:"\u229f",minusb:"\u229f",boxplus:"\u229e",plusb:"\u229e",boxtimes:"\u22a0",timesb:"\u22a0",boxuL:"\u255b",boxuR:"\u2558",boxul:"\u2518",boxur:"\u2514",boxv:"\u2502",boxvH:"\u256a",boxvL:"\u2561",boxvR:"\u255e",boxvh:"\u253c",boxvl:"\u2524",boxvr:"\u251c",brvbar:"\xa6",bscr:"\u{1d4b7}",bsemi:"\u204f",bsol:"\\",bsolb:"\u29c5",bsolhsub:"\u27c8",bull:"\u2022",bullet:"\u2022",bumpE:"\u2aae",cacute:"\u0107",cap:"\u2229",capand:"\u2a44",capbrcup:"\u2a49",capcap:"\u2a4b",capcup:"\u2a47",capdot:"\u2a40",caps:"\u2229\ufe00",caret:"\u2041",ccaps:"\u2a4d",ccaron:"\u010d",ccedil:"\xe7",ccirc:"\u0109",ccups:"\u2a4c",ccupssm:"\u2a50",cdot:"\u010b",cemptyv:"\u29b2",cent:"\xa2",cfr:"\u{1d520}",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",chi:"\u03c7",cir:"\u25cb",cirE:"\u29c3",circ:"\u02c6",circeq:"\u2257",cire:"\u2257",circlearrowleft:"\u21ba",olarr:"\u21ba",circlearrowright:"\u21bb",orarr:"\u21bb",circledS:"\u24c8",oS:"\u24c8",circledast:"\u229b",oast:"\u229b",circledcirc:"\u229a",ocir:"\u229a",circleddash:"\u229d",odash:"\u229d",cirfnint:"\u2a10",cirmid:"\u2aef",cirscir:"\u29c2",clubs:"\u2663",clubsuit:"\u2663",colon:":",comma:",",commat:"@",comp:"\u2201",complement:"\u2201",congdot:"\u2a6d",copf:"\u{1d554}",copysr:"\u2117",crarr:"\u21b5",cross:"\u2717",cscr:"\u{1d4b8}",csub:"\u2acf",csube:"\u2ad1",csup:"\u2ad0",csupe:"\u2ad2",ctdot:"\u22ef",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22de",curlyeqprec:"\u22de",cuesc:"\u22df",curlyeqsucc:"\u22df",cularr:"\u21b6",curvearrowleft:"\u21b6",cularrp:"\u293d",cup:"\u222a",cupbrcap:"\u2a48",cupcap:"\u2a46",cupcup:"\u2a4a",cupdot:"\u228d",cupor:"\u2a45",cups:"\u222a\ufe00",curarr:"\u21b7",curvearrowright:"\u21b7",curarrm:"\u293c",curlyvee:"\u22ce",cuvee:"\u22ce",curlywedge:"\u22cf",cuwed:"\u22cf",curren:"\xa4",cwint:"\u2231",cylcty:"\u232d",dHar:"\u2965",dagger:"\u2020",daleth:"\u2138",dash:"\u2010",hyphen:"\u2010",dbkarow:"\u290f",rBarr:"\u290f",dcaron:"\u010f",dcy:"\u0434",ddarr:"\u21ca",downdownarrows:"\u21ca",ddotseq:"\u2a77",eDDot:"\u2a77",deg:"\xb0",delta:"\u03b4",demptyv:"\u29b1",dfisht:"\u297f",dfr:"\u{1d521}",diamondsuit:"\u2666",diams:"\u2666",digamma:"\u03dd",gammad:"\u03dd",disin:"\u22f2",div:"\xf7",divide:"\xf7",divideontimes:"\u22c7",divonx:"\u22c7",djcy:"\u0452",dlcorn:"\u231e",llcorner:"\u231e",dlcrop:"\u230d",dollar:"$",dopf:"\u{1d555}",doteqdot:"\u2251",eDot:"\u2251",dotminus:"\u2238",minusd:"\u2238",dotplus:"\u2214",plusdo:"\u2214",dotsquare:"\u22a1",sdotb:"\u22a1",drcorn:"\u231f",lrcorner:"\u231f",drcrop:"\u230c",dscr:"\u{1d4b9}",dscy:"\u0455",dsol:"\u29f6",dstrok:"\u0111",dtdot:"\u22f1",dtri:"\u25bf",triangledown:"\u25bf",dwangle:"\u29a6",dzcy:"\u045f",dzigrarr:"\u27ff",eacute:"\xe9",easter:"\u2a6e",ecaron:"\u011b",ecir:"\u2256",eqcirc:"\u2256",ecirc:"\xea",ecolon:"\u2255",eqcolon:"\u2255",ecy:"\u044d",edot:"\u0117",efDot:"\u2252",fallingdotseq:"\u2252",efr:"\u{1d522}",eg:"\u2a9a",egrave:"\xe8",egs:"\u2a96",eqslantgtr:"\u2a96",egsdot:"\u2a98",el:"\u2a99",elinters:"\u23e7",ell:"\u2113",els:"\u2a95",eqslantless:"\u2a95",elsdot:"\u2a97",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",emptyv:"\u2205",varnothing:"\u2205",emsp13:"\u2004",emsp14:"\u2005",emsp:"\u2003",eng:"\u014b",ensp:"\u2002",eogon:"\u0119",eopf:"\u{1d556}",epar:"\u22d5",eparsl:"\u29e3",eplus:"\u2a71",epsi:"\u03b5",epsilon:"\u03b5",epsiv:"\u03f5",straightepsilon:"\u03f5",varepsilon:"\u03f5",equals:"=",equest:"\u225f",questeq:"\u225f",equivDD:"\u2a78",eqvparsl:"\u29e5",erDot:"\u2253",risingdotseq:"\u2253",erarr:"\u2971",escr:"\u212f",eta:"\u03b7",eth:"\xf0",euml:"\xeb",euro:"\u20ac",excl:"!",fcy:"\u0444",female:"\u2640",ffilig:"\ufb03",fflig:"\ufb00",ffllig:"\ufb04",ffr:"\u{1d523}",filig:"\ufb01",fjlig:"fj",flat:"\u266d",fllig:"\ufb02",fltns:"\u25b1",fnof:"\u0192",fopf:"\u{1d557}",fork:"\u22d4",pitchfork:"\u22d4",forkv:"\u2ad9",fpartint:"\u2a0d",frac12:"\xbd",half:"\xbd",frac13:"\u2153",frac14:"\xbc",frac15:"\u2155",frac16:"\u2159",frac18:"\u215b",frac23:"\u2154",frac25:"\u2156",frac34:"\xbe",frac35:"\u2157",frac38:"\u215c",frac45:"\u2158",frac56:"\u215a",frac58:"\u215d",frac78:"\u215e",frasl:"\u2044",frown:"\u2322",sfrown:"\u2322",fscr:"\u{1d4bb}",gEl:"\u2a8c",gtreqqless:"\u2a8c",gacute:"\u01f5",gamma:"\u03b3",gap:"\u2a86",gtrapprox:"\u2a86",gbreve:"\u011f",gcirc:"\u011d",gcy:"\u0433",gdot:"\u0121",gescc:"\u2aa9",gesdot:"\u2a80",gesdoto:"\u2a82",gesdotol:"\u2a84",gesl:"\u22db\ufe00",gesles:"\u2a94",gfr:"\u{1d524}",gimel:"\u2137",gjcy:"\u0453",glE:"\u2a92",gla:"\u2aa5",glj:"\u2aa4",gnE:"\u2269",gneqq:"\u2269",gnap:"\u2a8a",gnapprox:"\u2a8a",gne:"\u2a88",gneq:"\u2a88",gnsim:"\u22e7",gopf:"\u{1d558}",gscr:"\u210a",gsime:"\u2a8e",gsiml:"\u2a90",gtcc:"\u2aa7",gtcir:"\u2a7a",gtdot:"\u22d7",gtrdot:"\u22d7",gtlPar:"\u2995",gtquest:"\u2a7c",gtrarr:"\u2978",gvertneqq:"\u2269\ufe00",gvnE:"\u2269\ufe00",hardcy:"\u044a",harrcir:"\u2948",harrw:"\u21ad",leftrightsquigarrow:"\u21ad",hbar:"\u210f",hslash:"\u210f",planck:"\u210f",plankv:"\u210f",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",mldr:"\u2026",hercon:"\u22b9",hfr:"\u{1d525}",hksearow:"\u2925",searhk:"\u2925",hkswarow:"\u2926",swarhk:"\u2926",hoarr:"\u21ff",homtht:"\u223b",hookleftarrow:"\u21a9",larrhk:"\u21a9",hookrightarrow:"\u21aa",rarrhk:"\u21aa",hopf:"\u{1d559}",horbar:"\u2015",hscr:"\u{1d4bd}",hstrok:"\u0127",hybull:"\u2043",iacute:"\xed",icirc:"\xee",icy:"\u0438",iecy:"\u0435",iexcl:"\xa1",ifr:"\u{1d526}",igrave:"\xec",iiiint:"\u2a0c",qint:"\u2a0c",iiint:"\u222d",tint:"\u222d",iinfin:"\u29dc",iiota:"\u2129",ijlig:"\u0133",imacr:"\u012b",imath:"\u0131",inodot:"\u0131",imof:"\u22b7",imped:"\u01b5",incare:"\u2105",infin:"\u221e",infintie:"\u29dd",intcal:"\u22ba",intercal:"\u22ba",intlarhk:"\u2a17",intprod:"\u2a3c",iprod:"\u2a3c",iocy:"\u0451",iogon:"\u012f",iopf:"\u{1d55a}",iota:"\u03b9",iquest:"\xbf",iscr:"\u{1d4be}",isinE:"\u22f9",isindot:"\u22f5",isins:"\u22f4",isinsv:"\u22f3",itilde:"\u0129",iukcy:"\u0456",iuml:"\xef",jcirc:"\u0135",jcy:"\u0439",jfr:"\u{1d527}",jmath:"\u0237",jopf:"\u{1d55b}",jscr:"\u{1d4bf}",jsercy:"\u0458",jukcy:"\u0454",kappa:"\u03ba",kappav:"\u03f0",varkappa:"\u03f0",kcedil:"\u0137",kcy:"\u043a",kfr:"\u{1d528}",kgreen:"\u0138",khcy:"\u0445",kjcy:"\u045c",kopf:"\u{1d55c}",kscr:"\u{1d4c0}",lAtail:"\u291b",lBarr:"\u290e",lEg:"\u2a8b",lesseqqgtr:"\u2a8b",lHar:"\u2962",lacute:"\u013a",laemptyv:"\u29b4",lambda:"\u03bb",langd:"\u2991",lap:"\u2a85",lessapprox:"\u2a85",laquo:"\xab",larrbfs:"\u291f",larrfs:"\u291d",larrlp:"\u21ab",looparrowleft:"\u21ab",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21a2",leftarrowtail:"\u21a2",lat:"\u2aab",latail:"\u2919",late:"\u2aad",lates:"\u2aad\ufe00",lbarr:"\u290c",lbbrk:"\u2772",lbrace:"{",lcub:"{",lbrack:"[",lsqb:"[",lbrke:"\u298b",lbrksld:"\u298f",lbrkslu:"\u298d",lcaron:"\u013e",lcedil:"\u013c",lcy:"\u043b",ldca:"\u2936",ldrdhar:"\u2967",ldrushar:"\u294b",ldsh:"\u21b2",le:"\u2264",leq:"\u2264",leftleftarrows:"\u21c7",llarr:"\u21c7",leftthreetimes:"\u22cb",lthree:"\u22cb",lescc:"\u2aa8",lesdot:"\u2a7f",lesdoto:"\u2a81",lesdotor:"\u2a83",lesg:"\u22da\ufe00",lesges:"\u2a93",lessdot:"\u22d6",ltdot:"\u22d6",lfisht:"\u297c",lfr:"\u{1d529}",lgE:"\u2a91",lharul:"\u296a",lhblk:"\u2584",ljcy:"\u0459",llhard:"\u296b",lltri:"\u25fa",lmidot:"\u0140",lmoust:"\u23b0",lmoustache:"\u23b0",lnE:"\u2268",lneqq:"\u2268",lnap:"\u2a89",lnapprox:"\u2a89",lne:"\u2a87",lneq:"\u2a87",lnsim:"\u22e6",loang:"\u27ec",loarr:"\u21fd",longmapsto:"\u27fc",xmap:"\u27fc",looparrowright:"\u21ac",rarrlp:"\u21ac",lopar:"\u2985",lopf:"\u{1d55d}",loplus:"\u2a2d",lotimes:"\u2a34",lowast:"\u2217",loz:"\u25ca",lozenge:"\u25ca",lpar:"(",lparlt:"\u2993",lrhard:"\u296d",lrm:"\u200e",lrtri:"\u22bf",lsaquo:"\u2039",lscr:"\u{1d4c1}",lsime:"\u2a8d",lsimg:"\u2a8f",lsquor:"\u201a",sbquo:"\u201a",lstrok:"\u0142",ltcc:"\u2aa6",ltcir:"\u2a79",ltimes:"\u22c9",ltlarr:"\u2976",ltquest:"\u2a7b",ltrPar:"\u2996",ltri:"\u25c3",triangleleft:"\u25c3",lurdshar:"\u294a",luruhar:"\u2966",lvertneqq:"\u2268\ufe00",lvnE:"\u2268\ufe00",mDDot:"\u223a",macr:"\xaf",strns:"\xaf",male:"\u2642",malt:"\u2720",maltese:"\u2720",marker:"\u25ae",mcomma:"\u2a29",mcy:"\u043c",mdash:"\u2014",mfr:"\u{1d52a}",mho:"\u2127",micro:"\xb5",midcir:"\u2af0",minus:"\u2212",minusdu:"\u2a2a",mlcp:"\u2adb",models:"\u22a7",mopf:"\u{1d55e}",mscr:"\u{1d4c2}",mu:"\u03bc",multimap:"\u22b8",mumap:"\u22b8",nGg:"\u22d9\u0338",nGt:"\u226b\u20d2",nLeftarrow:"\u21cd",nlArr:"\u21cd",nLeftrightarrow:"\u21ce",nhArr:"\u21ce",nLl:"\u22d8\u0338",nLt:"\u226a\u20d2",nRightarrow:"\u21cf",nrArr:"\u21cf",nVDash:"\u22af",nVdash:"\u22ae",nacute:"\u0144",nang:"\u2220\u20d2",napE:"\u2a70\u0338",napid:"\u224b\u0338",napos:"\u0149",natur:"\u266e",natural:"\u266e",ncap:"\u2a43",ncaron:"\u0148",ncedil:"\u0146",ncongdot:"\u2a6d\u0338",ncup:"\u2a42",ncy:"\u043d",ndash:"\u2013",neArr:"\u21d7",nearhk:"\u2924",nedot:"\u2250\u0338",nesear:"\u2928",toea:"\u2928",nfr:"\u{1d52b}",nharr:"\u21ae",nleftrightarrow:"\u21ae",nhpar:"\u2af2",nis:"\u22fc",nisd:"\u22fa",njcy:"\u045a",nlE:"\u2266\u0338",nleqq:"\u2266\u0338",nlarr:"\u219a",nleftarrow:"\u219a",nldr:"\u2025",nopf:"\u{1d55f}",not:"\xac",notinE:"\u22f9\u0338",notindot:"\u22f5\u0338",notinvb:"\u22f7",notinvc:"\u22f6",notnivb:"\u22fe",notnivc:"\u22fd",nparsl:"\u2afd\u20e5",npart:"\u2202\u0338",npolint:"\u2a14",nrarr:"\u219b",nrightarrow:"\u219b",nrarrc:"\u2933\u0338",nrarrw:"\u219d\u0338",nscr:"\u{1d4c3}",nsub:"\u2284",nsubE:"\u2ac5\u0338",nsubseteqq:"\u2ac5\u0338",nsup:"\u2285",nsupE:"\u2ac6\u0338",nsupseteqq:"\u2ac6\u0338",ntilde:"\xf1",nu:"\u03bd",num:"#",numero:"\u2116",numsp:"\u2007",nvDash:"\u22ad",nvHarr:"\u2904",nvap:"\u224d\u20d2",nvdash:"\u22ac",nvge:"\u2265\u20d2",nvgt:">\u20d2",nvinfin:"\u29de",nvlArr:"\u2902",nvle:"\u2264\u20d2",nvlt:"<\u20d2",nvltrie:"\u22b4\u20d2",nvrArr:"\u2903",nvrtrie:"\u22b5\u20d2",nvsim:"\u223c\u20d2",nwArr:"\u21d6",nwarhk:"\u2923",nwnear:"\u2927",oacute:"\xf3",ocirc:"\xf4",ocy:"\u043e",odblac:"\u0151",odiv:"\u2a38",odsold:"\u29bc",oelig:"\u0153",ofcir:"\u29bf",ofr:"\u{1d52c}",ogon:"\u02db",ograve:"\xf2",ogt:"\u29c1",ohbar:"\u29b5",olcir:"\u29be",olcross:"\u29bb",olt:"\u29c0",omacr:"\u014d",omega:"\u03c9",omicron:"\u03bf",omid:"\u29b6",oopf:"\u{1d560}",opar:"\u29b7",operp:"\u29b9",or:"\u2228",vee:"\u2228",ord:"\u2a5d",order:"\u2134",orderof:"\u2134",oscr:"\u2134",ordf:"\xaa",ordm:"\xba",origof:"\u22b6",oror:"\u2a56",orslope:"\u2a57",orv:"\u2a5b",oslash:"\xf8",osol:"\u2298",otilde:"\xf5",otimesas:"\u2a36",ouml:"\xf6",ovbar:"\u233d",para:"\xb6",parsim:"\u2af3",parsl:"\u2afd",pcy:"\u043f",percnt:"%",period:".",permil:"\u2030",pertenk:"\u2031",pfr:"\u{1d52d}",phi:"\u03c6",phiv:"\u03d5",straightphi:"\u03d5",varphi:"\u03d5",phone:"\u260e",pi:"\u03c0",piv:"\u03d6",varpi:"\u03d6",planckh:"\u210e",plus:"+",plusacir:"\u2a23",pluscir:"\u2a22",plusdu:"\u2a25",pluse:"\u2a72",plussim:"\u2a26",plustwo:"\u2a27",pointint:"\u2a15",popf:"\u{1d561}",pound:"\xa3",prE:"\u2ab3",prap:"\u2ab7",precapprox:"\u2ab7",precnapprox:"\u2ab9",prnap:"\u2ab9",precneqq:"\u2ab5",prnE:"\u2ab5",precnsim:"\u22e8",prnsim:"\u22e8",prime:"\u2032",profalar:"\u232e",profline:"\u2312",profsurf:"\u2313",prurel:"\u22b0",pscr:"\u{1d4c5}",psi:"\u03c8",puncsp:"\u2008",qfr:"\u{1d52e}",qopf:"\u{1d562}",qprime:"\u2057",qscr:"\u{1d4c6}",quatint:"\u2a16",quest:"?",rAtail:"\u291c",rHar:"\u2964",race:"\u223d\u0331",racute:"\u0155",raemptyv:"\u29b3",rangd:"\u2992",range:"\u29a5",raquo:"\xbb",rarrap:"\u2975",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291e",rarrpl:"\u2945",rarrsim:"\u2974",rarrtl:"\u21a3",rightarrowtail:"\u21a3",rarrw:"\u219d",rightsquigarrow:"\u219d",ratail:"\u291a",ratio:"\u2236",rbbrk:"\u2773",rbrace:"}",rcub:"}",rbrack:"]",rsqb:"]",rbrke:"\u298c",rbrksld:"\u298e",rbrkslu:"\u2990",rcaron:"\u0159",rcedil:"\u0157",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdsh:"\u21b3",rect:"\u25ad",rfisht:"\u297d",rfr:"\u{1d52f}",rharul:"\u296c",rho:"\u03c1",rhov:"\u03f1",varrho:"\u03f1",rightrightarrows:"\u21c9",rrarr:"\u21c9",rightthreetimes:"\u22cc",rthree:"\u22cc",ring:"\u02da",rlm:"\u200f",rmoust:"\u23b1",rmoustache:"\u23b1",rnmid:"\u2aee",roang:"\u27ed",roarr:"\u21fe",ropar:"\u2986",ropf:"\u{1d563}",roplus:"\u2a2e",rotimes:"\u2a35",rpar:")",rpargt:"\u2994",rppolint:"\u2a12",rsaquo:"\u203a",rscr:"\u{1d4c7}",rtimes:"\u22ca",rtri:"\u25b9",triangleright:"\u25b9",rtriltri:"\u29ce",ruluhar:"\u2968",rx:"\u211e",sacute:"\u015b",scE:"\u2ab4",scap:"\u2ab8",succapprox:"\u2ab8",scaron:"\u0161",scedil:"\u015f",scirc:"\u015d",scnE:"\u2ab6",succneqq:"\u2ab6",scnap:"\u2aba",succnapprox:"\u2aba",scnsim:"\u22e9",succnsim:"\u22e9",scpolint:"\u2a13",scy:"\u0441",sdot:"\u22c5",sdote:"\u2a66",seArr:"\u21d8",sect:"\xa7",semi:";",seswar:"\u2929",tosa:"\u2929",sext:"\u2736",sfr:"\u{1d530}",sharp:"\u266f",shchcy:"\u0449",shcy:"\u0448",shy:"\xad",sigma:"\u03c3",sigmaf:"\u03c2",sigmav:"\u03c2",varsigma:"\u03c2",simdot:"\u2a6a",simg:"\u2a9e",simgE:"\u2aa0",siml:"\u2a9d",simlE:"\u2a9f",simne:"\u2246",simplus:"\u2a24",simrarr:"\u2972",smashp:"\u2a33",smeparsl:"\u29e4",smile:"\u2323",ssmile:"\u2323",smt:"\u2aaa",smte:"\u2aac",smtes:"\u2aac\ufe00",softcy:"\u044c",sol:"/",solb:"\u29c4",solbar:"\u233f",sopf:"\u{1d564}",spades:"\u2660",spadesuit:"\u2660",sqcaps:"\u2293\ufe00",sqcups:"\u2294\ufe00",sscr:"\u{1d4c8}",star:"\u2606",sub:"\u2282",subset:"\u2282",subE:"\u2ac5",subseteqq:"\u2ac5",subdot:"\u2abd",subedot:"\u2ac3",submult:"\u2ac1",subnE:"\u2acb",subsetneqq:"\u2acb",subne:"\u228a",subsetneq:"\u228a",subplus:"\u2abf",subrarr:"\u2979",subsim:"\u2ac7",subsub:"\u2ad5",subsup:"\u2ad3",sung:"\u266a",sup1:"\xb9",sup2:"\xb2",sup3:"\xb3",supE:"\u2ac6",supseteqq:"\u2ac6",supdot:"\u2abe",supdsub:"\u2ad8",supedot:"\u2ac4",suphsol:"\u27c9",suphsub:"\u2ad7",suplarr:"\u297b",supmult:"\u2ac2",supnE:"\u2acc",supsetneqq:"\u2acc",supne:"\u228b",supsetneq:"\u228b",supplus:"\u2ac0",supsim:"\u2ac8",supsub:"\u2ad4",supsup:"\u2ad6",swArr:"\u21d9",swnwar:"\u292a",szlig:"\xdf",target:"\u2316",tau:"\u03c4",tcaron:"\u0165",tcedil:"\u0163",tcy:"\u0442",telrec:"\u2315",tfr:"\u{1d531}",theta:"\u03b8",thetasym:"\u03d1",thetav:"\u03d1",vartheta:"\u03d1",thorn:"\xfe",times:"\xd7",timesbar:"\u2a31",timesd:"\u2a30",topbot:"\u2336",topcir:"\u2af1",topf:"\u{1d565}",topfork:"\u2ada",tprime:"\u2034",triangle:"\u25b5",utri:"\u25b5",triangleq:"\u225c",trie:"\u225c",tridot:"\u25ec",triminus:"\u2a3a",triplus:"\u2a39",trisb:"\u29cd",tritime:"\u2a3b",trpezium:"\u23e2",tscr:"\u{1d4c9}",tscy:"\u0446",tshcy:"\u045b",tstrok:"\u0167",uHar:"\u2963",uacute:"\xfa",ubrcy:"\u045e",ubreve:"\u016d",ucirc:"\xfb",ucy:"\u0443",udblac:"\u0171",ufisht:"\u297e",ufr:"\u{1d532}",ugrave:"\xf9",uhblk:"\u2580",ulcorn:"\u231c",ulcorner:"\u231c",ulcrop:"\u230f",ultri:"\u25f8",umacr:"\u016b",uogon:"\u0173",uopf:"\u{1d566}",upsi:"\u03c5",upsilon:"\u03c5",upuparrows:"\u21c8",uuarr:"\u21c8",urcorn:"\u231d",urcorner:"\u231d",urcrop:"\u230e",uring:"\u016f",urtri:"\u25f9",uscr:"\u{1d4ca}",utdot:"\u22f0",utilde:"\u0169",uuml:"\xfc",uwangle:"\u29a7",vBar:"\u2ae8",vBarv:"\u2ae9",vangrt:"\u299c",varsubsetneq:"\u228a\ufe00",vsubne:"\u228a\ufe00",varsubsetneqq:"\u2acb\ufe00",vsubnE:"\u2acb\ufe00",varsupsetneq:"\u228b\ufe00",vsupne:"\u228b\ufe00",varsupsetneqq:"\u2acc\ufe00",vsupnE:"\u2acc\ufe00",vcy:"\u0432",veebar:"\u22bb",veeeq:"\u225a",vellip:"\u22ee",vfr:"\u{1d533}",vopf:"\u{1d567}",vscr:"\u{1d4cb}",vzigzag:"\u299a",wcirc:"\u0175",wedbar:"\u2a5f",wedgeq:"\u2259",weierp:"\u2118",wp:"\u2118",wfr:"\u{1d534}",wopf:"\u{1d568}",wscr:"\u{1d4cc}",xfr:"\u{1d535}",xi:"\u03be",xnis:"\u22fb",xopf:"\u{1d569}",xscr:"\u{1d4cd}",yacute:"\xfd",yacy:"\u044f",ycirc:"\u0177",ycy:"\u044b",yen:"\xa5",yfr:"\u{1d536}",yicy:"\u0457",yopf:"\u{1d56a}",yscr:"\u{1d4ce}",yucy:"\u044e",yuml:"\xff",zacute:"\u017a",zcaron:"\u017e",zcy:"\u0437",zdot:"\u017c",zeta:"\u03b6",zfr:"\u{1d537}",zhcy:"\u0436",zigrarr:"\u21dd",zopf:"\u{1d56b}",zscr:"\u{1d4cf}",zwj:"\u200d",zwnj:"\u200c"},c$="\ue500";f_.ngsp=c$;class HI extends Fe{constructor(e,t,i){super(i,e),this.tokenType=t}}class Gae{constructor(e,t,i){this.tokens=e,this.errors=t,this.nonNormalizedIcuExpressions=i}}const Qae=/\r\n?/g;function jp(n){return`Unexpected character "${n===di?"EOF":String.fromCharCode(n)}"`}function u$(n){return`Unknown entity "${n}" - use the "&#<decimal>;" or  "&#x<hex>;" syntax`}var zI=function(n){return n.HEX="hexadecimal",n.DEC="decimal",n}(zI||{});class qI{constructor(e){this.error=e}}class Xae{constructor(e,t,i){this._getTagDefinition=t,this._currentTokenStart=null,this._currentTokenType=null,this._expansionCaseStack=[],this._inInterpolation=!1,this.tokens=[],this.errors=[],this.nonNormalizedIcuExpressions=[],this._tokenizeIcu=i.tokenizeExpansionForms||!1,this._interpolationConfig=i.interpolationConfig||Fs,this._leadingTriviaCodePoints=i.leadingTriviaChars&&i.leadingTriviaChars.map(r=>r.codePointAt(0)||0);const s=i.range||{endPos:e.content.length,startPos:0,startLine:0,startCol:0};this._cursor=i.escapedString?new p_(e,s):new Hp(e,s),this._preserveLineEndings=i.preserveLineEndings||!1,this._i18nNormalizeLineEndingsInICUs=i.i18nNormalizeLineEndingsInICUs||!1,this._tokenizeBlocks=i.tokenizeBlocks??!0;try{this._cursor.init()}catch(r){this.handleError(r)}}_processCarriageReturns(e){return this._preserveLineEndings?e:e.replace(Qae,"\n")}tokenize(){for(;this._cursor.peek()!==di;){const e=this._cursor.clone();try{this._attemptCharCode(60)?this._attemptCharCode(33)?this._attemptCharCode(91)?this._consumeCdata(e):this._attemptCharCode(45)?this._consumeComment(e):this._consumeDocType(e):this._attemptCharCode(47)?this._consumeTagClose(e):this._consumeTagOpen(e):this._tokenizeBlocks&&this._attemptCharCode(64)?this._consumeBlockStart(e):!this._tokenizeBlocks||this._inInterpolation||this._isInExpansionCase()||this._isInExpansionForm()||!this._attemptCharCode(Yi)?this._tokenizeIcu&&this._tokenizeExpansionForm()||this._consumeWithInterpolation(5,8,()=>this._isTextEnd(),()=>this._isTagStart()):this._consumeBlockEnd(e)}catch(t){this.handleError(t)}}this._beginToken(29),this._endToken([])}_getBlockName(){let e=!1;const t=this._cursor.clone();return this._attemptCharCodeUntilFn(i=>By(i)?!e:!function nle(n){return Vy(n)||Go(n)||95===n}(i)||(e=!0,!1)),this._cursor.getChars(t).trim()}_consumeBlockStart(e){this._beginToken(24,e);const t=this._endToken([this._getBlockName()]);if(40===this._cursor.peek()){if(this._cursor.advance(),this._consumeBlockParameters(),this._attemptCharCodeUntilFn(pi),!this._attemptCharCode(41))return void(t.type=28);this._attemptCharCodeUntilFn(pi)}this._attemptCharCode(Wr)?(this._beginToken(25),this._endToken([])):t.type=28}_consumeBlockEnd(e){this._beginToken(26,e),this._endToken([])}_consumeBlockParameters(){for(this._attemptCharCodeUntilFn(f$);41!==this._cursor.peek()&&this._cursor.peek()!==di;){this._beginToken(27);const e=this._cursor.clone();let t=null,i=0;for(;59!==this._cursor.peek()&&this._cursor.peek()!==di||null!==t;){const s=this._cursor.peek();if(92===s)this._cursor.advance();else if(s===t)t=null;else if(null===t&&$y(s))t=s;else if(40===s&&null===t)i++;else if(41===s&&null===t){if(0===i)break;i>0&&i--}this._cursor.advance()}this._endToken([this._cursor.getChars(e)]),this._attemptCharCodeUntilFn(f$)}}_tokenizeExpansionForm(){if(this.isExpansionFormStart())return this._consumeExpansionFormStart(),!0;if(function ele(n){return n!==Yi}(this._cursor.peek())&&this._isInExpansionForm())return this._consumeExpansionCaseStart(),!0;if(this._cursor.peek()===Yi){if(this._isInExpansionCase())return this._consumeExpansionCaseEnd(),!0;if(this._isInExpansionForm())return this._consumeExpansionFormEnd(),!0}return!1}_beginToken(e,t=this._cursor.clone()){this._currentTokenStart=t,this._currentTokenType=e}_endToken(e,t){if(null===this._currentTokenStart)throw new HI("Programming error - attempted to end a token when there was no start to the token",this._currentTokenType,this._cursor.getSpan(t));if(null===this._currentTokenType)throw new HI("Programming error - attempted to end a token which has no token type",null,this._cursor.getSpan(this._currentTokenStart));const i={type:this._currentTokenType,parts:e,sourceSpan:(t??this._cursor).getSpan(this._currentTokenStart,this._leadingTriviaCodePoints)};return this.tokens.push(i),this._currentTokenStart=null,this._currentTokenType=null,i}_createError(e,t){this._isInExpansionForm()&&(e+=' (Do you have an unescaped "{" in your template? Use "{{ \'{\' }}") to escape it.)');const i=new HI(e,this._currentTokenType,t);return this._currentTokenStart=null,this._currentTokenType=null,new qI(i)}handleError(e){if(e instanceof GI&&(e=this._createError(e.msg,this._cursor.getSpan(e.cursor))),!(e instanceof qI))throw e;this.errors.push(e.error)}_attemptCharCode(e){return this._cursor.peek()===e&&(this._cursor.advance(),!0)}_attemptCharCodeCaseInsensitive(e){return!!function tle(n,e){return h$(n)===h$(e)}(this._cursor.peek(),e)&&(this._cursor.advance(),!0)}_requireCharCode(e){const t=this._cursor.clone();if(!this._attemptCharCode(e))throw this._createError(jp(this._cursor.peek()),this._cursor.getSpan(t))}_attemptStr(e){const t=e.length;if(this._cursor.charsLeft()<t)return!1;const i=this._cursor.clone();for(let s=0;s<t;s++)if(!this._attemptCharCode(e.charCodeAt(s)))return this._cursor=i,!1;return!0}_attemptStrCaseInsensitive(e){for(let t=0;t<e.length;t++)if(!this._attemptCharCodeCaseInsensitive(e.charCodeAt(t)))return!1;return!0}_requireStr(e){const t=this._cursor.clone();if(!this._attemptStr(e))throw this._createError(jp(this._cursor.peek()),this._cursor.getSpan(t))}_attemptCharCodeUntilFn(e){for(;!e(this._cursor.peek());)this._cursor.advance()}_requireCharCodeUntilFn(e,t){const i=this._cursor.clone();if(this._attemptCharCodeUntilFn(e),this._cursor.diff(i)<t)throw this._createError(jp(this._cursor.peek()),this._cursor.getSpan(i))}_attemptUntilChar(e){for(;this._cursor.peek()!==e;)this._cursor.advance()}_readChar(){const e=String.fromCodePoint(this._cursor.peek());return this._cursor.advance(),e}_consumeEntity(e){this._beginToken(9);const t=this._cursor.clone();if(this._cursor.advance(),this._attemptCharCode(35)){const i=this._attemptCharCode(120)||this._attemptCharCode(88),s=this._cursor.clone();if(this._attemptCharCodeUntilFn(Kae),59!=this._cursor.peek())throw this._cursor.advance(),this._createError(function Yae(n,e){return`Unable to parse entity "${e}" - ${n} character reference entities must end with ";"`}(i?zI.HEX:zI.DEC,this._cursor.getChars(t)),this._cursor.getSpan());const r=this._cursor.getChars(s);this._cursor.advance();try{const o=parseInt(r,i?16:10);this._endToken([String.fromCharCode(o),this._cursor.getChars(t)])}catch{throw this._createError(u$(this._cursor.getChars(t)),this._cursor.getSpan())}}else{const i=this._cursor.clone();if(this._attemptCharCodeUntilFn(Jae),59!=this._cursor.peek())this._beginToken(e,t),this._cursor=i,this._endToken(["&"]);else{const s=this._cursor.getChars(i);this._cursor.advance();const r=f_[s];if(!r)throw this._createError(u$(s),this._cursor.getSpan(t));this._endToken([r,`&${s};`])}}}_consumeRawText(e,t){this._beginToken(e?6:7);const i=[];for(;;){const s=this._cursor.clone(),r=t();if(this._cursor=s,r)break;e&&38===this._cursor.peek()?(this._endToken([this._processCarriageReturns(i.join(""))]),i.length=0,this._consumeEntity(6),this._beginToken(6)):i.push(this._readChar())}this._endToken([this._processCarriageReturns(i.join(""))])}_consumeComment(e){this._beginToken(10,e),this._requireCharCode(45),this._endToken([]),this._consumeRawText(!1,()=>this._attemptStr("--\x3e")),this._beginToken(11),this._requireStr("--\x3e"),this._endToken([])}_consumeCdata(e){this._beginToken(12,e),this._requireStr("CDATA["),this._endToken([]),this._consumeRawText(!1,()=>this._attemptStr("]]>")),this._beginToken(13),this._requireStr("]]>"),this._endToken([])}_consumeDocType(e){this._beginToken(18,e);const t=this._cursor.clone();this._attemptUntilChar(62);const i=this._cursor.getChars(t);this._cursor.advance(),this._endToken([i])}_consumePrefixAndName(){const e=this._cursor.clone();let t="";for(;58!==this._cursor.peek()&&!(((n=this._cursor.peek())<Xl||wp<n)&&(n<ld||Oy<n)&&(n<hI||n>VB));)this._cursor.advance();var n;let i;return 58===this._cursor.peek()?(t=this._cursor.getChars(e),this._cursor.advance(),i=this._cursor.clone()):i=e,this._requireCharCodeUntilFn(d$,""===t?0:1),[t,this._cursor.getChars(i)]}_consumeTagOpen(e){let t,i,s;try{if(!Vy(this._cursor.peek()))throw this._createError(jp(this._cursor.peek()),this._cursor.getSpan(e));for(s=this._consumeTagOpenStart(e),i=s.parts[0],t=s.parts[1],this._attemptCharCodeUntilFn(pi);47!==this._cursor.peek()&&62!==this._cursor.peek()&&60!==this._cursor.peek()&&this._cursor.peek()!==di;)this._consumeAttributeName(),this._attemptCharCodeUntilFn(pi),this._attemptCharCode(61)&&(this._attemptCharCodeUntilFn(pi),this._consumeAttributeValue()),this._attemptCharCodeUntilFn(pi);this._consumeTagOpenEnd()}catch(o){if(o instanceof qI)return void(s?s.type=4:(this._beginToken(5,e),this._endToken(["<"])));throw o}const r=this._getTagDefinition(t).getContentType(i);r===zr.RAW_TEXT?this._consumeRawTextWithTagClose(i,t,!1):r===zr.ESCAPABLE_RAW_TEXT&&this._consumeRawTextWithTagClose(i,t,!0)}_consumeRawTextWithTagClose(e,t,i){this._consumeRawText(i,()=>!!(this._attemptCharCode(60)&&this._attemptCharCode(47)&&(this._attemptCharCodeUntilFn(pi),this._attemptStrCaseInsensitive(t)))&&(this._attemptCharCodeUntilFn(pi),this._attemptCharCode(62))),this._beginToken(3),this._requireCharCodeUntilFn(s=>62===s,3),this._cursor.advance(),this._endToken([e,t])}_consumeTagOpenStart(e){this._beginToken(0,e);const t=this._consumePrefixAndName();return this._endToken(t)}_consumeAttributeName(){const e=this._cursor.peek();if(39===e||34===e)throw this._createError(jp(e),this._cursor.getSpan());this._beginToken(14);const t=this._consumePrefixAndName();this._endToken(t)}_consumeAttributeValue(){if(39===this._cursor.peek()||34===this._cursor.peek()){const e=this._cursor.peek();this._consumeQuote(e);const t=()=>this._cursor.peek()===e;this._consumeWithInterpolation(16,17,t,t),this._consumeQuote(e)}else{const e=()=>d$(this._cursor.peek());this._consumeWithInterpolation(16,17,e,e)}}_consumeQuote(e){this._beginToken(15),this._requireCharCode(e),this._endToken([String.fromCodePoint(e)])}_consumeTagOpenEnd(){const e=this._attemptCharCode(47)?2:1;this._beginToken(e),this._requireCharCode(62),this._endToken([])}_consumeTagClose(e){this._beginToken(3,e),this._attemptCharCodeUntilFn(pi);const t=this._consumePrefixAndName();this._attemptCharCodeUntilFn(pi),this._requireCharCode(62),this._endToken(t)}_consumeExpansionFormStart(){this._beginToken(19),this._requireCharCode(Wr),this._endToken([]),this._expansionCaseStack.push(19),this._beginToken(7);const e=this._readUntil(44),t=this._processCarriageReturns(e);if(this._i18nNormalizeLineEndingsInICUs)this._endToken([t]);else{const s=this._endToken([e]);t!==e&&this.nonNormalizedIcuExpressions.push(s)}this._requireCharCode(44),this._attemptCharCodeUntilFn(pi),this._beginToken(7);const i=this._readUntil(44);this._endToken([i]),this._requireCharCode(44),this._attemptCharCodeUntilFn(pi)}_consumeExpansionCaseStart(){this._beginToken(20);const e=this._readUntil(Wr).trim();this._endToken([e]),this._attemptCharCodeUntilFn(pi),this._beginToken(21),this._requireCharCode(Wr),this._endToken([]),this._attemptCharCodeUntilFn(pi),this._expansionCaseStack.push(21)}_consumeExpansionCaseEnd(){this._beginToken(22),this._requireCharCode(Yi),this._endToken([]),this._attemptCharCodeUntilFn(pi),this._expansionCaseStack.pop()}_consumeExpansionFormEnd(){this._beginToken(23),this._requireCharCode(Yi),this._endToken([]),this._expansionCaseStack.pop()}_consumeWithInterpolation(e,t,i,s){this._beginToken(e);const r=[];for(;!i();){const o=this._cursor.clone();this._interpolationConfig&&this._attemptStr(this._interpolationConfig.start)?(this._endToken([this._processCarriageReturns(r.join(""))],o),r.length=0,this._consumeInterpolation(t,o,s),this._beginToken(e)):38===this._cursor.peek()?(this._endToken([this._processCarriageReturns(r.join(""))]),r.length=0,this._consumeEntity(e),this._beginToken(e)):r.push(this._readChar())}this._inInterpolation=!1,this._endToken([this._processCarriageReturns(r.join(""))])}_consumeInterpolation(e,t,i){const s=[];this._beginToken(e,t),s.push(this._interpolationConfig.start);const r=this._cursor.clone();let o=null,a=!1;for(;this._cursor.peek()!==di&&(null===i||!i());){const l=this._cursor.clone();if(this._isTagStart())return this._cursor=l,s.push(this._getProcessedChars(r,l)),void this._endToken(s);if(null===o){if(this._attemptStr(this._interpolationConfig.end))return s.push(this._getProcessedChars(r,l)),s.push(this._interpolationConfig.end),void this._endToken(s);this._attemptStr("//")&&(a=!0)}const c=this._cursor.peek();this._cursor.advance(),92===c?this._cursor.advance():c===o?o=null:!a&&null===o&&$y(c)&&(o=c)}s.push(this._getProcessedChars(r,this._cursor)),this._endToken(s)}_getProcessedChars(e,t){return this._processCarriageReturns(t.getChars(e))}_isTextEnd(){return!(!(this._isTagStart()||this._cursor.peek()===di||this._tokenizeIcu&&!this._inInterpolation&&(this.isExpansionFormStart()||this._cursor.peek()===Yi&&this._isInExpansionCase()))&&(!this._tokenizeBlocks||this._inInterpolation||this._isInExpansion()||64!==this._cursor.peek()&&this._cursor.peek()!==Yi))}_isTagStart(){if(60===this._cursor.peek()){const e=this._cursor.clone();e.advance();const t=e.peek();if(Xl<=t&&t<=wp||ld<=t&&t<=Oy||47===t||33===t)return!0}return!1}_readUntil(e){const t=this._cursor.clone();return this._attemptUntilChar(e),this._cursor.getChars(t)}_isInExpansion(){return this._isInExpansionCase()||this._isInExpansionForm()}_isInExpansionCase(){return this._expansionCaseStack.length>0&&21===this._expansionCaseStack[this._expansionCaseStack.length-1]}_isInExpansionForm(){return this._expansionCaseStack.length>0&&19===this._expansionCaseStack[this._expansionCaseStack.length-1]}isExpansionFormStart(){if(this._cursor.peek()!==Wr)return!1;if(this._interpolationConfig){const e=this._cursor.clone(),t=this._attemptStr(this._interpolationConfig.start);return this._cursor=e,!t}return!0}}function pi(n){return!By(n)||n===di}function d$(n){return By(n)||62===n||60===n||47===n||39===n||34===n||61===n||n===di}function Kae(n){return 59===n||n===di||!function Mse(n){return n>=Xl&&n<=102||n>=ld&&n<=70||Go(n)}(n)}function Jae(n){return 59===n||n===di||!Vy(n)}function h$(n){return n>=Xl&&n<=wp?n-Xl+ld:n}function f$(n){return 59!==n&&pi(n)}class Hp{constructor(e,t){if(e instanceof Hp){this.file=e.file,this.input=e.input,this.end=e.end;const i=e.state;this.state={peek:i.peek,offset:i.offset,line:i.line,column:i.column}}else{if(!t)throw new Error("Programming error: the range argument must be provided with a file argument.");this.file=e,this.input=e.content,this.end=t.endPos,this.state={peek:-1,offset:t.startPos,line:t.startLine,column:t.startCol}}}clone(){return new Hp(this)}peek(){return this.state.peek}charsLeft(){return this.end-this.state.offset}diff(e){return this.state.offset-e.state.offset}advance(){this.advanceState(this.state)}init(){this.updatePeek(this.state)}getSpan(e,t){let i=e=e||this;if(t)for(;this.diff(e)>0&&-1!==t.indexOf(e.peek());)i===e&&(e=e.clone()),e.advance();const s=this.locationFromCursor(e),r=this.locationFromCursor(this),o=i!==e?this.locationFromCursor(i):s;return new $e(s,r,o)}getChars(e){return this.input.substring(e.state.offset,this.state.offset)}charAt(e){return this.input.charCodeAt(e)}advanceState(e){if(e.offset>=this.end)throw this.state=e,new GI('Unexpected character "EOF"',this);const t=this.charAt(e.offset);10===t?(e.line++,e.column=0):YB(t)||e.column++,e.offset++,this.updatePeek(e)}updatePeek(e){e.peek=e.offset>=this.end?di:this.charAt(e.offset)}locationFromCursor(e){return new Zl(e.file,e.state.offset,e.state.line,e.state.column)}}class p_ extends Hp{constructor(e,t){e instanceof p_?(super(e),this.internalState={...e.internalState}):(super(e,t),this.internalState=this.state)}advance(){this.state=this.internalState,super.advance(),this.processEscapeSequence()}init(){super.init(),this.processEscapeSequence()}clone(){return new p_(this)}getChars(e){const t=e.clone();let i="";for(;t.internalState.offset<this.internalState.offset;)i+=String.fromCodePoint(t.peek()),t.advance();return i}processEscapeSequence(){const e=()=>this.internalState.peek;if(92===e())if(this.internalState={...this.state},this.advanceState(this.internalState),110===e())this.state.peek=10;else if(114===e())this.state.peek=13;else if(118===e())this.state.peek=11;else if(116===e())this.state.peek=cI;else if(98===e())this.state.peek=8;else if(102===e())this.state.peek=12;else if(117===e())if(this.advanceState(this.internalState),e()===Wr){this.advanceState(this.internalState);const t=this.clone();let i=0;for(;e()!==Yi;)this.advanceState(this.internalState),i++;this.state.peek=this.decodeHexDigits(t,i)}else{const t=this.clone();this.advanceState(this.internalState),this.advanceState(this.internalState),this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(t,4)}else if(120===e()){this.advanceState(this.internalState);const t=this.clone();this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(t,2)}else if(XB(e())){let t="",i=0,s=this.clone();for(;XB(e())&&i<3;)s=this.clone(),t+=String.fromCodePoint(e()),this.advanceState(this.internalState),i++;this.state.peek=parseInt(t,8),this.internalState=s.internalState}else YB(this.internalState.peek)?(this.advanceState(this.internalState),this.state=this.internalState):this.state.peek=this.internalState.peek}decodeHexDigits(e,t){const i=this.input.slice(e.internalState.offset,e.internalState.offset+t),s=parseInt(i,16);if(isNaN(s))throw e.state=e.internalState,new GI("Invalid hexadecimal escape sequence",e);return s}}class GI{constructor(e,t){this.msg=e,this.cursor=t}}class es extends Fe{static create(e,t,i){return new es(e,t,i)}constructor(e,t,i){super(t,i),this.elementName=e}}class zp{constructor(e,t){this.rootNodes=e,this.errors=t}}class p${constructor(e){this.getTagDefinition=e}parse(e,t,i){const s=function Wae(n,e,t,i={}){const s=new Xae(new pI(n,e),t,i);return s.tokenize(),new Gae(function ile(n){const e=[];let t;for(let i=0;i<n.length;i++){const s=n[i];t&&5===t.type&&5===s.type||t&&16===t.type&&16===s.type?(t.parts[0]+=s.parts[0],t.sourceSpan.end=s.sourceSpan.end):(t=s,e.push(t))}return e}(s.tokens),s.errors,s.nonNormalizedIcuExpressions)}(e,t,this.getTagDefinition,i),r=new WI(s.tokens,this.getTagDefinition);return r.build(),new zp(r.rootNodes,s.errors.concat(r.errors))}}class WI{constructor(e,t){this.tokens=e,this.getTagDefinition=t,this._index=-1,this._containerStack=[],this.rootNodes=[],this.errors=[],this._advance()}build(){for(;29!==this._peek.type;)0===this._peek.type||4===this._peek.type?this._consumeStartTag(this._advance()):3===this._peek.type?this._consumeEndTag(this._advance()):12===this._peek.type?(this._closeVoidElement(),this._consumeCdata(this._advance())):10===this._peek.type?(this._closeVoidElement(),this._consumeComment(this._advance())):5===this._peek.type||7===this._peek.type||6===this._peek.type?(this._closeVoidElement(),this._consumeText(this._advance())):19===this._peek.type?this._consumeExpansion(this._advance()):24===this._peek.type?(this._closeVoidElement(),this._consumeBlockOpen(this._advance())):26===this._peek.type?(this._closeVoidElement(),this._consumeBlockClose(this._advance())):28===this._peek.type?(this._closeVoidElement(),this._consumeIncompleteBlock(this._advance())):this._advance();for(const e of this._containerStack)e instanceof eo&&this.errors.push(es.create(e.name,e.sourceSpan,`Unclosed block "${e.name}"`))}_advance(){const e=this._peek;return this._index<this.tokens.length-1&&this._index++,this._peek=this.tokens[this._index],e}_advanceIf(e){return this._peek.type===e?this._advance():null}_consumeCdata(e){this._consumeText(this._advance()),this._advanceIf(13)}_consumeComment(e){const t=this._advanceIf(7),i=this._advanceIf(11),s=null!=t?t.parts[0].trim():null,r=null==i?e.sourceSpan:new $e(e.sourceSpan.start,i.sourceSpan.end,e.sourceSpan.fullStart);this._addToParent(new Nd(s,r))}_consumeExpansion(e){const t=this._advance(),i=this._advance(),s=[];for(;20===this._peek.type;){const o=this._parseExpansionCase();if(!o)return;s.push(o)}if(23!==this._peek.type)return void this.errors.push(es.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '}'."));const r=new $e(e.sourceSpan.start,this._peek.sourceSpan.end,e.sourceSpan.fullStart);this._addToParent(new Up(t.parts[0],i.parts[0],s,r,t.sourceSpan)),this._advance()}_parseExpansionCase(){const e=this._advance();if(21!==this._peek.type)return this.errors.push(es.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '{'.")),null;const t=this._advance(),i=this._collectExpansionExpTokens(t);if(!i)return null;const s=this._advance();i.push({type:29,parts:[],sourceSpan:s.sourceSpan});const r=new WI(i,this.getTagDefinition);if(r.build(),r.errors.length>0)return this.errors=this.errors.concat(r.errors),null;const o=new $e(e.sourceSpan.start,s.sourceSpan.end,e.sourceSpan.fullStart),a=new $e(t.sourceSpan.start,s.sourceSpan.end,t.sourceSpan.fullStart);return new n$(e.parts[0],r.rootNodes,o,e.sourceSpan,a)}_collectExpansionExpTokens(e){const t=[],i=[21];for(;;){if((19===this._peek.type||21===this._peek.type)&&i.push(this._peek.type),22===this._peek.type){if(!g$(i,21))return this.errors.push(es.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;if(i.pop(),0===i.length)return t}if(23===this._peek.type){if(!g$(i,19))return this.errors.push(es.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;i.pop()}if(29===this._peek.type)return this.errors.push(es.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;t.push(this._advance())}}_consumeText(e){const t=[e],i=e.sourceSpan;let s=e.parts[0];if(s.length>0&&"\n"===s[0]){const r=this._getContainer();null!=r&&0===r.children.length&&this.getTagDefinition(r.name).ignoreFirstLf&&(s=s.substring(1),t[0]={type:e.type,sourceSpan:e.sourceSpan,parts:[s]})}for(;8===this._peek.type||5===this._peek.type||9===this._peek.type;)e=this._advance(),t.push(e),s+=8===e.type?e.parts.join("").replace(/&([^;]+);/g,m$):9===e.type?e.parts[0]:e.parts.join("");s.length>0&&this._addToParent(new oc(s,new $e(i.start,e.sourceSpan.end,i.fullStart,i.details),t))}_closeVoidElement(){const e=this._getContainer();e instanceof zs&&this.getTagDefinition(e.name).isVoid&&this._containerStack.pop()}_consumeStartTag(e){const[t,i]=e.parts,s=[];for(;14===this._peek.type;)s.push(this._consumeAttr(this._advance()));const r=this._getElementFullName(t,i,this._getClosestParentElement());let o=!1;if(2===this._peek.type){this._advance(),o=!0;const h=this.getTagDefinition(r);h.canSelfClose||null!==q0(r)||h.isVoid||this.errors.push(es.create(r,e.sourceSpan,`Only void, custom and foreign elements can be self closed "${e.parts[1]}"`))}else 1===this._peek.type&&(this._advance(),o=!1);const a=this._peek.sourceSpan.fullStart,l=new $e(e.sourceSpan.start,a,e.sourceSpan.fullStart),c=new $e(e.sourceSpan.start,a,e.sourceSpan.fullStart),u=new zs(r,s,[],l,c,void 0),d=this._getContainer();this._pushContainer(u,d instanceof zs&&this.getTagDefinition(d.name).isClosedByChild(u.name)),o?this._popContainer(r,zs,l):4===e.type&&(this._popContainer(r,zs,null),this.errors.push(es.create(r,l,`Opening tag "${r}" not terminated.`)))}_pushContainer(e,t){t&&this._containerStack.pop(),this._addToParent(e),this._containerStack.push(e)}_consumeEndTag(e){const t=this._getElementFullName(e.parts[0],e.parts[1],this._getClosestParentElement());this.getTagDefinition(t).isVoid?this.errors.push(es.create(t,e.sourceSpan,`Void elements do not have end tags "${e.parts[1]}"`)):this._popContainer(t,zs,e.sourceSpan)||this.errors.push(es.create(t,e.sourceSpan,`Unexpected closing tag "${t}". It may happen when the tag has already been closed by another tag. For more info see https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags`))}_popContainer(e,t,i){let s=!1;for(let r=this._containerStack.length-1;r>=0;r--){const o=this._containerStack[r];if((o.name===e||null===e)&&o instanceof t)return o.endSourceSpan=i,o.sourceSpan.end=null!==i?i.end:o.sourceSpan.end,this._containerStack.splice(r,this._containerStack.length-r),!s;(o instanceof eo||o instanceof zs&&!this.getTagDefinition(o.name).closedByParent)&&(s=!0)}return!1}_consumeAttr(e){const t=G0(e.parts[0],e.parts[1]);let i=e.sourceSpan.end;15===this._peek.type&&this._advance();let s="";const r=[];let o,a;if(16===this._peek.type)for(o=this._peek.sourceSpan,a=this._peek.sourceSpan.end;16===this._peek.type||17===this._peek.type||9===this._peek.type;){const u=this._advance();r.push(u),s+=17===u.type?u.parts.join("").replace(/&([^;]+);/g,m$):9===u.type?u.parts[0]:u.parts.join(""),a=i=u.sourceSpan.end}15===this._peek.type&&(i=this._advance().sourceSpan.end);const c=o&&a&&new $e(o.start,a,o.fullStart);return new d_(t,s,new $e(e.sourceSpan.start,i,e.sourceSpan.fullStart),e.sourceSpan,c,r.length>0?r:void 0,void 0)}_consumeBlockOpen(e){const t=[];for(;27===this._peek.type;){const a=this._advance();t.push(new i$(a.parts[0],a.sourceSpan))}25===this._peek.type&&this._advance();const i=this._peek.sourceSpan.fullStart,s=new $e(e.sourceSpan.start,i,e.sourceSpan.fullStart),r=new $e(e.sourceSpan.start,i,e.sourceSpan.fullStart),o=new eo(e.parts[0],t,[],s,e.sourceSpan,r);this._pushContainer(o,!1)}_consumeBlockClose(e){this._popContainer(null,eo,e.sourceSpan)||this.errors.push(es.create(null,e.sourceSpan,'Unexpected closing block. The block may have been closed earlier. If you meant to write the } character, you should use the "&#125;" HTML entity instead.'))}_consumeIncompleteBlock(e){const t=[];for(;27===this._peek.type;){const a=this._advance();t.push(new i$(a.parts[0],a.sourceSpan))}const i=this._peek.sourceSpan.fullStart,s=new $e(e.sourceSpan.start,i,e.sourceSpan.fullStart),r=new $e(e.sourceSpan.start,i,e.sourceSpan.fullStart),o=new eo(e.parts[0],t,[],s,e.sourceSpan,r);this._pushContainer(o,!1),this._popContainer(null,eo,null),this.errors.push(es.create(e.parts[0],s,`Incomplete block "${e.parts[0]}". If you meant to write the @ character, you should use the "&#64;" HTML entity instead.`))}_getContainer(){return this._containerStack.length>0?this._containerStack[this._containerStack.length-1]:null}_getClosestParentElement(){for(let e=this._containerStack.length-1;e>-1;e--)if(this._containerStack[e]instanceof zs)return this._containerStack[e];return null}_addToParent(e){const t=this._getContainer();null===t?this.rootNodes.push(e):t.children.push(e)}_getElementFullName(e,t,i){if(""===e&&""===(e=this.getTagDefinition(t).implicitNamespacePrefix||"")&&null!=i){const s=Pi(i.name)[1];this.getTagDefinition(s).preventNamespaceInheritance||(e=q0(i.name))}return G0(e,t)}}function g$(n,e){return n.length>0&&n[n.length-1]===e}function m$(n,e){return void 0!==f_[e]?f_[e]||n:/^#x[a-f0-9]+$/i.test(e)?String.fromCodePoint(parseInt(e.slice(2),16)):/^#\d+$/.test(e)?String.fromCodePoint(parseInt(e.slice(1),10)):n}const v$=new Set(["iframe|srcdoc","*|innerhtml","*|outerhtml","embed|src","object|codebase","object|data"]);function y$(n,e){return n=n.toLowerCase(),e=e.toLowerCase(),v$.has(n+"|"+e)||v$.has("*|"+e)}const sle=(n,e)=>(n instanceof Md&&(e instanceof id&&n.i18n instanceof Oi&&(e.previousMessage=n.i18n),n.i18n=e),e);class _${constructor(e=Fs,t=!1,i=!1,s=MB){this.interpolationConfig=e,this.keepI18nAttrs=t,this.enableI18nLegacyMessageIdFormat=i,this.containerBlocks=s,this.hasI18nMeta=!1,this._errors=[]}_generateI18nMessage(e,t="",i){const{meaning:s,description:r,customId:o}=this._parseMetadata(t),l=function l$(n,e){const t=new $ae(Bae,n,e);return(i,s,r,o,a)=>t.toI18nMessage(i,s,r,o,a)}(this.interpolationConfig,this.containerBlocks)(e,s,r,o,i);return this._setMessageId(l,t),this._setLegacyIds(l,t),l}visitAllWithErrors(e){const t=e.map(i=>i.visit(this,null));return new zp(t,this._errors)}visitElement(e){let t;if(function lse(n){return n.attrs.some(e=>_B(e.name))}(e)){this.hasI18nMeta=!0;const i=[],s={};for(const r of e.attrs)if(r.name===vB)t=this._generateI18nMessage(e.children,e.i18n||r.value,sle),0===t.nodes.length&&(t=void 0),e.i18n=t;else if(r.name.startsWith(iI)){const o=r.name.slice(iI.length);y$(e.name,o)?this._reportError(r,`Translating attribute '${o}' is disallowed for security reasons.`):s[o]=r.value}else i.push(r);if(Object.keys(s).length)for(const r of i){const o=s[r.name];void 0!==o&&r.value&&(r.i18n=this._generateI18nMessage([r],r.i18n||o))}this.keepI18nAttrs||(e.attrs=i)}return me(this,e.children,t),e}visitExpansion(e,t){let i;const s=e.i18n;if(this.hasI18nMeta=!0,s instanceof id){const r=s.name;i=this._generateI18nMessage([e],s),sI(i).name=r,null!==t&&(t.placeholderToMessage[r]=i)}else i=this._generateI18nMessage([e],t||s);return e.i18n=i,e}visitText(e){return e}visitAttribute(e){return e}visitComment(e){return e}visitExpansionCase(e){return e}visitBlock(e,t){return me(this,e.children,t),e}visitBlockParameter(e,t){return e}_parseMetadata(e){return"string"==typeof e?function ale(n=""){let e,t,i;if(n=n.trim()){const s=n.indexOf(ole),r=n.indexOf(rle);let o;[o,e]=s>-1?[n.slice(0,s),n.slice(s+2)]:[n,""],[t,i]=r>-1?[o.slice(0,r),o.slice(r+1)]:["",o]}return{customId:e,meaning:t,description:i}}(e):e instanceof Oi?e:{}}_setMessageId(e,t){e.id||(e.id=t instanceof Oi&&t.id||function A0(n){return n.id||ML(n)}(e))}_setLegacyIds(e,t){if(this.enableI18nLegacyMessageIdFormat)e.legacyIds=[(n=e,function zne(n){fy??=new TextEncoder;const e=[...fy.encode(n)],t=function Wne(n,e){const t=n.length+3>>>2,i=[];for(let s=0;s<t;s++)i[s]=Qne(n,4*s,e);return i}(e,k0.Big),i=8*e.length,s=new Uint32Array(80);let r=1732584193,o=4023233417,a=2562383102,l=271733878,c=3285377520;t[i>>5]|=128<<24-i%32,t[15+(i+64>>9<<4)]=i;for(let u=0;u<t.length;u+=16){const d=r,h=o,f=a,p=l,g=c;for(let v=0;v<80;v++){s[v]=v<16?t[u+v]:M0(s[v-3]^s[v-8]^s[v-14]^s[v-16],1);const _=qne(v,o,a,l),E=_[0],b=_[1],T=[M0(r,5),E,c,b,s[v]].reduce(ju);c=l,l=a,a=M0(o,30),o=r,r=T}r=ju(r,d),o=ju(o,h),a=ju(a,f),l=ju(l,p),c=ju(c,g)}return ip(r)+ip(o)+ip(a)+ip(l)+ip(c)}(function jne(n){return n.map(e=>e.visit(Une,null))}(n.nodes).join("")+`[${n.meaning}]`)),ML(e)];else if("string"!=typeof t){const i=t instanceof Oi?t:t instanceof id?t.previousMessage:void 0;e.legacyIds=i?i.legacyIds:[]}var n}_reportError(e,t){this._errors.push(new Zo(e.sourceSpan,t))}}const rle="|",ole="@@",cle="goog.getMsg";function w$(n,e,t,i){const s=function hle(n){return n.nodes.map(e=>e.visit(dle,null)).join("")}(e),r=[w(s)];Object.keys(i).length&&(r.push(kd(gp(i,!0),!0)),r.push(kd({original_code:Gt(Object.keys(i).map(l=>({key:mp(l),quoted:!0,value:w(e.placeholders[l]?e.placeholders[l].sourceSpan.toString():e.placeholderToMessage[l].nodes.map(c=>c.sourceSpan.toString()).join(""))})))})));const o=t.set(te(cle).callFn(r)).toConstDecl();return o.addLeadingComment(function lle(n){const e=[];return e.push(n.description?{tagName:"desc",text:n.description}:{tagName:"suppress",text:"{msgDescriptions}"}),n.meaning&&e.push({tagName:"meaning",text:n.meaning}),function zL(n=[]){return new O0(n)}(e)}(e)),[o,new Tn(n.set(t))]}const dle=new class ule{formatPh(e){return`{$${mp(e)}}`}visitText(e){return e.value}visitContainer(e){return e.children.map(t=>t.visit(this)).join("")}visitIcu(e){return KV(e)}visitTagPlaceholder(e){return e.isVoid?this.formatPh(e.startName):`${this.formatPh(e.startName)}${e.children.map(t=>t.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitPlaceholder(e){return this.formatPh(e.name)}visitBlockPlaceholder(e){return`${this.formatPh(e.startName)}${e.children.map(t=>t.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitIcuPlaceholder(e,t){return this.formatPh(e.name)}};function E$(n,e,t){const{messageParts:i,placeHolders:s}=function ple(n){const e=[],t=new fle(n.placeholderToMessage,e);return n.nodes.forEach(i=>i.visit(t)),function mle(n){const e=[],t=[];n[0]instanceof sp&&e.push(QI(n[0].sourceSpan.start));for(let i=0;i<n.length;i++){const s=n[i];s instanceof Yu?e.push(s):(t.push(s),n[i-1]instanceof sp&&e.push(QI(n[i-1].sourceSpan.end)))}return n[n.length-1]instanceof sp&&e.push(QI(n[n.length-1].sourceSpan.end)),{messageParts:e,placeHolders:t}}(e)}(e),r=function gle(n){const e=n.nodes[0];return new $e(e.sourceSpan.fullStart,n.nodes[n.nodes.length-1].sourceSpan.end,e.sourceSpan.fullStart,e.sourceSpan.details)}(e),o=s.map(c=>t[c.text]),a=function qL(n,e,t,i,s){return new rp(n,e,t,i,s)}(e,i,s,o,r),l=n.set(a);return[new Tn(l)]}class fle{constructor(e,t){this.placeholderToMessage=e,this.pieces=t}visitText(e){if(this.pieces[this.pieces.length-1]instanceof Yu)this.pieces[this.pieces.length-1].text+=e.value;else{const t=new $e(e.sourceSpan.fullStart,e.sourceSpan.end,e.sourceSpan.fullStart,e.sourceSpan.details);this.pieces.push(new Yu(e.value,t))}}visitContainer(e){e.children.forEach(t=>t.visit(this))}visitIcu(e){this.pieces.push(new Yu(KV(e),e.sourceSpan))}visitTagPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.startName,e.startSourceSpan??e.sourceSpan)),e.isVoid||(e.children.forEach(t=>t.visit(this)),this.pieces.push(this.createPlaceholderPiece(e.closeName,e.endSourceSpan??e.sourceSpan)))}visitPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.name,e.sourceSpan))}visitBlockPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.startName,e.startSourceSpan??e.sourceSpan)),e.children.forEach(t=>t.visit(this)),this.pieces.push(this.createPlaceholderPiece(e.closeName,e.endSourceSpan??e.sourceSpan))}visitIcuPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.name,e.sourceSpan,this.placeholderToMessage[e.name]))}createPlaceholderPiece(e,t,i){return new sp(mp(e,!1),t,i)}}function QI(n){return new Yu("",new $e(n,n))}const b$="ngI18nClosureMode";function S$(n,e,t,i){const s=[],r=new Map;for(const c of i.subMessages){const u=t.get(c),{mainVar:d,statements:h}=S$(n,e,t,u);s.push(...h);const f=r.get(u.messagePlaceholder)??[];f.push(d),r.set(u.messagePlaceholder,f)}(function wle(n,e){for(const[t,i]of e)1===i.length?n.params.set(t,i[0]):(n.params.set(t,w(`\ufffdI18N_EXP_${t}\ufffd`)),n.postprocessingParams.set(t,le(i)))})(i,r),i.params=new Map([...i.params.entries()].sort());const o=te(n.pool.uniqueName("i18n_")),a=function Cle(n,e,t,i){let s;const r=t;if(i){const o=ky("EXTERNAL_"),a=n.uniqueName(r);s=`${o}${Qr(e)}$$${a}`}else{const o=ky(r);s=n.uniqueName(o)}return te(s)}(n.pool,i.message.id,e,n.i18nUseExternalIds);let l;if(i.needsPostprocessing||i.postprocessingParams.size>0){const u=gp(Object.fromEntries([...i.postprocessingParams.entries()].sort()),!1),d=[];i.postprocessingParams.size>0&&d.push(kd(u,!0)),l=h=>z(m.i18nPostprocess).callFn([h,...d])}return s.push(...function Ele(n,e,t,i,s){const r=Object.fromEntries(i),o=[bB(e),Ju(Ku(te(b$)).notIdentical(w("undefined",py)).and(te(b$)),w$(e,n,t,r),E$(e,n,gp(r,!1)))];return s&&o.push(new Tn(e.set(s(e)))),o}(i.message,o,a,i.params,l)),{mainVar:o,statements:s}}function xle(n){const e=[];for(const t of n)e.push(w(t.name),w(t.target));return le(e)}function I$(n){const e=[];let t=0,i=0,s=0,r=0,o=0,a=null;for(;t<n.length;)switch(n.charCodeAt(t++)){case 40:i++;break;case 41:i--;break;case 39:0===s?s=39:39===s&&92!==n.charCodeAt(t-1)&&(s=0);break;case 34:0===s?s=34:34===s&&92!==n.charCodeAt(t-1)&&(s=0);break;case 58:!a&&0===i&&0===s&&(a=YI(n.substring(o,t-1).trim()),r=t);break;case 59:if(a&&r>0&&0===i&&0===s){const c=n.substring(r,t-1).trim();e.push(a,c),o=t,r=0,a=null}}if(a&&r){const l=n.slice(r).trim();e.push(a,l)}return e}function YI(n){return n.replace(/[a-z][A-Z]/g,e=>e.charAt(0)+"-"+e.charAt(1)).toLowerCase()}function g_(n,e,t,i){null===n.fnName&&(n.fnName=n.job.pool.uniqueName(Qr(`${e}_${n.job.fnSuffix}`),!1));const s=new Map;for(const r of n.ops())switch(r.kind){case y.Property:case y.HostProperty:r.isAnimationTrigger&&(r.name="@"+r.name);break;case y.Listener:if(null!==r.handlerFnName)break;if(!r.hostListener&&null===r.targetSlot.slot)throw new Error("Expected a slot to be assigned");let o="";r.isAnimationListener&&(r.name=`@${r.name}.${r.animationPhase}`,o="animation"),r.handlerFnName=r.hostListener?`${e}_${o}${r.name}_HostBindingHandler`:`${n.fnName}_${r.tag.replace("-","_")}_${o}${r.name}_${r.targetSlot.slot}_listener`,r.handlerFnName=Qr(r.handlerFnName);break;case y.TwoWayListener:if(null!==r.handlerFnName)break;if(null===r.targetSlot.slot)throw new Error("Expected a slot to be assigned");r.handlerFnName=Qr(`${n.fnName}_${r.tag.replace("-","_")}_${r.name}_${r.targetSlot.slot}_listener`);break;case y.Variable:s.set(r.xref,Ale(n,r.variable,t));break;case y.RepeaterCreate:if(!(n instanceof Sd))throw new Error("AssertionError: must be compiling a component");if(null===r.handle.slot)throw new Error("Expected slot to be assigned");null!==r.emptyView&&g_(n.job.views.get(r.emptyView),`${e}_${r.functionNameSuffix}Empty_${r.handle.slot+2}`,t,i),g_(n.job.views.get(r.xref),`${e}_${r.functionNameSuffix}_${r.handle.slot+1}`,t,i);break;case y.Template:if(!(n instanceof Sd))throw new Error("AssertionError: must be compiling a component");const a=n.job.views.get(r.xref);if(null===r.handle.slot)throw new Error("Expected slot to be assigned");g_(a,`${e}${0===r.functionNameSuffix.length?"":`_${r.functionNameSuffix}`}_${r.handle.slot}`,t,i);break;case y.StyleProp:r.name=kle(r.name),i&&(r.name=x$(r.name));break;case y.ClassProp:i&&(r.name=x$(r.name))}for(const r of n.ops())Bi(r,o=>{if(o instanceof Jr&&null===o.name){if(!s.has(o.xref))throw new Error(`Variable ${o.xref} not yet named`);o.name=s.get(o.xref)}})}function Ale(n,e,t){if(null===e.name)switch(e.kind){case Bn.Context:e.name="ctx_r"+t.index++;break;case Bn.Identifier:e.name=n.job.compatibility===ys.TemplateDefinitionBuilder?`${e.identifier}_${"ctx"===e.identifier?"i":""}r${++t.index}`:`${e.identifier}_i${t.index++}`;break;default:e.name="_r"+ ++t.index}return e.name}function kle(n){return n.startsWith("--")?n:YI(n)}function x$(n){const e=n.indexOf("!important");return e>-1?n.substring(0,e):n}function T$(n){for(const e of n){if(!(e.kind===y.Statement&&e.statement instanceof Tn&&e.statement.expr instanceof Pp))continue;const t=e.statement.expr.steps;let i=!0;for(let s=e.next;s.kind!==y.ListEnd&&i;s=s.next)Bi(s,(r,o)=>{if(!Us(r))return r;if(i&&!(o&rt.InChildOperation))switch(r.kind){case ue.NextContext:r.steps+=t,U.remove(e),i=!1;break;case ue.GetCurrentView:case ue.Reference:i=!1}})}}function Ple(n,e){const t=n.get(e);if(void 0===t)throw new Error("All attributes should have an element-like target.");return t}function Ko(n){return e=>e.kind===n}function qp(n,e){return t=>t.kind===n&&e===t.expression instanceof Nn}const Vle=[{test:n=>n.kind===y.Listener&&n.hostListener&&n.isAnimationListener},{test:function Lle(n){return n.kind===y.Listener&&!(n.hostListener&&n.isAnimationListener)||n.kind===y.TwoWayListener}}],$le=[{test:Ko(y.StyleMap),transform:m_},{test:Ko(y.ClassMap),transform:m_},{test:Ko(y.StyleProp)},{test:Ko(y.ClassProp)},{test:qp(y.Attribute,!0)},{test:qp(y.Property,!0)},{test:function Ble(n){return!(n.kind!==y.Property&&n.kind!==y.TwoWayProperty||n.expression instanceof Nn)}},{test:qp(y.Attribute,!1)}],Ule=[{test:qp(y.HostProperty,!0)},{test:qp(y.HostProperty,!1)},{test:Ko(y.Attribute)},{test:Ko(y.StyleMap),transform:m_},{test:Ko(y.ClassMap),transform:m_},{test:Ko(y.StyleProp)},{test:Ko(y.ClassProp)}],D$=new Set([y.Listener,y.TwoWayListener,y.StyleMap,y.ClassMap,y.StyleProp,y.ClassProp,y.Property,y.TwoWayProperty,y.HostProperty,y.Attribute]);function A$(n,e){let t=[],i=null;for(const s of n){const r=DI(s)?s.target:null;(!D$.has(s.kind)||r!==i&&null!==i&&null!==r)&&(U.insertBefore(k$(t,e),s),t=[],i=null),D$.has(s.kind)&&(t.push(s),U.remove(s),i=r??i)}n.push(k$(t,e))}function k$(n,e){const t=Array.from(e,()=>new Array);for(const i of n)t[e.findIndex(r=>r.test(i))].push(i);return t.flatMap((i,s)=>{const r=e[s].transform;return r?r(i):i})}function m_(n){return n.slice(n.length-1)}function qle(n){return"select"===n.toLowerCase()}function Gle(n,e){const t=n.get(e);if(void 0===t)throw new Error("All attributes should have an slottable target.");return t}function Qle(n){for(const e of n.update)Bi(e,(t,i)=>{if(Us(t)&&t.kind===ue.PipeBinding){if(i&rt.InChildOperation)throw new Error("AssertionError: pipe bindings should not appear in child expressions");if(n.job.compatibility){if(null==e.target)throw new Error("AssertionError: expected slot handle to be assigned for pipe creation");Yle(n,e.target,t)}else n.create.push(FV(t.target,t.targetSlot,t.name))}})}function Yle(n,e,t){for(let i=n.create.head.next;i.kind!==y.ListEnd;i=i.next){if(!vd(i)||i.xref!==e)continue;for(;i.next.kind===y.Pipe;)i=i.next;const s=FV(t.target,t.targetSlot,t.name);return void U.insertBefore(s,i.next)}throw new Error(`AssertionError: unable to find insertion point for pipe ${t.name}`)}function M$(n,e){let t=null;for(const i of n.create)switch(i.kind){case y.I18nStart:i.subTemplateIndex=0===e?null:e,t=i;break;case y.I18nEnd:null===t.subTemplateIndex&&(e=0),t=null;break;case y.Template:e=XI(n.job.views.get(i.xref),t,i.i18nPlaceholder,e);break;case y.RepeaterCreate:e=XI(n.job.views.get(i.xref),t,i.i18nPlaceholder,e),null!==i.emptyView&&(e=XI(n.job.views.get(i.emptyView),t,i.emptyI18nPlaceholder,e))}return e}function XI(n,e,t,i){if(void 0!==t){if(null===e)throw Error("Expected template with i18n placeholder to be in an i18n block.");i++,function Kle(n,e){if(n.create.head.next?.kind!==y.I18nStart){const t=n.job.allocateXrefId();U.insertAfter(l_(t,e.message,e.root,null),n.create.head),U.insertBefore(c_(t,null),n.create.tail)}}(n,e)}return M$(n,i)}class ece extends ed{constructor(e){super(),this.numArgs=e}keyOf(e){return e instanceof ic?`param(${e.index})`:super.keyOf(e)}toSharedConstantDeclaration(e,t){const i=[];for(let r=0;r<this.numArgs;r++)i.push(new gt("a"+r));const s=J(t,r=>r instanceof ic?te("a"+r.index):r,rt.None);return new Zn(e,new Vo(i,s),void 0,Ln.Final)}}function nce(n){const e=[],t=[];for(const i of n.entries)if(i.isConstant())e.push(i);else{const s=t.length;t.push(i),e.push(new ic(s))}return new qa(le(e),t)}function ice(n){let e=[];const t=[];for(const i of n.entries)if(i.value.isConstant())e.push(i);else{const s=t.length;t.push(i.value),e.push(new Vl(i.key,new ic(s),i.quoted))}return new qa(Gt(e),t)}function sce(n,e,t,i,s){return v_(m.element,n,e,t,i,s)}function rce(n,e,t,i,s){return v_(m.elementStart,n,e,t,i,s)}function v_(n,e,t,i,s,r){const o=[w(e)];return null!==t&&o.push(w(t)),null!==s?o.push(w(i),w(s)):null!==i&&o.push(w(i)),Qe(n,o,r)}function oce(n){return Qe(m.elementEnd,[],n)}function ace(n,e,t,i){return v_(m.elementContainerStart,n,null,e,t,i)}function lce(n,e,t,i){return v_(m.elementContainer,n,null,e,t,i)}function uce(n,e,t,i,s,r,o,a){const l=[w(n),e,w(t),w(i),w(s),w(r)];for(null!==o&&(l.push(w(o)),l.push(z(m.templateRefExtractor)));l[l.length-1].isEquivalent($o);)l.pop();return Qe(m.templateCreate,l,a)}function fce(n,e,t,i,s){const r=[w(n),e];return null!==t&&(r.push(w(!1)),r.push(z(t))),Qe(i?m.syntheticHostListener:m.listener,r,s)}function N$(n,e){return z(m.twoWayBindingSet).callFn([n,e])}function pce(n,e,t){return Qe(m.twoWayListener,[w(n),e],t)}function gce(n,e){return Qe(m.pipe,[w(n),w(e)],null)}function _ce(n,e){return Qe(m.advance,n>1?[w(n)]:[],e)}function Ice(n,e,t){const i=[w(n,null)];return""!==e&&i.push(w(e)),Qe(m.text,i,t)}function xce(n,e,t,i,s,r,o,a,l,c){const u=[w(n),w(e),t??w(null),w(i),w(s),w(r),o??w(null),a??w(null),l?z(m.deferEnableTimerScheduling):w(null)];let d;for(;null!==(d=u[u.length-1])&&d instanceof pn&&null===d.value;)u.pop();return Qe(m.defer,u,c)}const Tce=new Map([[Ft.Idle,[m.deferOnIdle,m.deferPrefetchOnIdle]],[Ft.Immediate,[m.deferOnImmediate,m.deferPrefetchOnImmediate]],[Ft.Timer,[m.deferOnTimer,m.deferPrefetchOnTimer]],[Ft.Hover,[m.deferOnHover,m.deferPrefetchOnHover]],[Ft.Interaction,[m.deferOnInteraction,m.deferPrefetchOnInteraction]],[Ft.Viewport,[m.deferOnViewport,m.deferPrefetchOnViewport]]]);function Dce(n,e,t,i){const s=Tce.get(n);if(void 0===s)throw new Error(`Unable to determine instruction for trigger ${n}`);return Qe(t?s[1]:s[0],e.map(o=>w(o)),i)}function Ace(n){return Qe(m.projectionDef,n?[n]:[],null)}function kce(n,e,t,i){const s=[w(n)];return(0!==e||null!==t)&&(s.push(w(e)),null!==t&&s.push(t)),Qe(m.projection,s,i)}function Mce(n,e,t,i){const s=[w(n),w(e)];return null!==t&&s.push(w(t)),Qe(m.i18nStart,s,i)}function Nce(n,e,t,i,s,r,o,a,l,c,u,d,h,f){const p=[w(n),te(e),w(t),w(i),w(s),w(r),o];return(a||null!==l)&&(p.push(w(a)),null!==l&&(p.push(te(l),w(c),w(u)),(null!==d||null!==h)&&p.push(w(d)),null!==h&&p.push(w(h)))),Qe(m.repeaterCreate,p,f)}function Rce(n,e){return Qe(m.repeater,[n],e)}function Pce(n,e,t){return Qe(n?m.deferPrefetchWhen:m.deferWhen,[e],t)}function Oce(n,e,t,i){const s=[w(n),w(e)];return t&&s.push(w(t)),Qe(m.i18n,s,i)}function Fce(n){return Qe(m.i18nEnd,[],n)}function Lce(n,e){const t=[w(n),w(e)];return Qe(m.i18nAttributes,t,null)}function Bce(n,e,t,i){const s=[w(n),e];return null!==t&&s.push(t),Qe(m.property,s,i)}function Vce(n,e,t,i){const s=[w(n),e];return null!==t&&s.push(t),Qe(m.twoWayProperty,s,i)}function $ce(n,e,t,i){const s=[w(n),e];return(null!==t||null!==i)&&s.push(t??w(null)),null!==i&&s.push(w(i)),Qe(m.attribute,s,null)}function Uce(n,e,t,i){const s=[w(n),e];return null!==t&&s.push(w(t)),Qe(m.styleProp,s,i)}function jce(n,e,t){return Qe(m.classProp,[w(n),e],t)}function Hce(n,e){return Qe(m.styleMap,[n],e)}function zce(n,e){return Qe(m.classMap,[n],e)}const R$=[m.pipeBind1,m.pipeBind2,m.pipeBind3,m.pipeBind4];function Wce(n,e,t){if(n.length<1||e.length!==n.length-1)throw new Error("AssertionError: expected specific shape of args for strings/expressions in interpolation");const i=[];if(1===e.length&&""===n[0]&&""===n[1])i.push(e[0]);else{let s;for(s=0;s<e.length;s++)i.push(w(n[s]),e[s]);i.push(w(n[s]))}return Pd(rue,[],i,[],t)}function Qce(n,e){return Qe(m.i18nExp,[n],e)}function Yce(n,e){return Qe(m.i18nApply,[w(n)],e)}function Xce(n,e,t,i,s){const r=Gp(e,t),o=[];return null!==i&&o.push(i),Pd(oue,[w(n)],r,o,s)}function Zce(n,e,t,i,s){const r=Gp(e,t),o=[];return null!==i&&o.push(i),Pd(lue,[w(n)],r,o,s)}function Kce(n,e,t,i,s){const r=Gp(e,t),o=[];return null!==i&&o.push(w(i)),Pd(aue,[w(n)],r,o,s)}function Jce(n,e,t){const i=Gp(n,e);return Pd(cue,[],i,[],t)}function eue(n,e,t){const i=Gp(n,e);return Pd(uue,[],i,[],t)}function tue(n,e,t,i){const s=[w(n),e];return null!==t&&s.push(t),Qe(m.hostProperty,s,i)}function nue(n,e,t){return Qe(m.syntheticHostProperty,[w(n),e],t)}function Gp(n,e){if(n.length<1||e.length!==n.length-1)throw new Error("AssertionError: expected specific shape of args for strings/expressions in interpolation");const t=[];if(1===e.length&&""===n[0]&&""===n[1])t.push(e[0]);else{let i;for(i=0;i<e.length;i++)t.push(w(n[i]),e[i]);t.push(w(n[i]))}return t}function Qe(n,e,t){const i=z(n).callFn(e,t);return Zr(new Tn(i,t))}function sue(n,e,t,i){const s=[w(n),e];return null!==t&&s.push(t),Qe(m.conditional,s,i)}const rue={constant:[m.textInterpolate,m.textInterpolate1,m.textInterpolate2,m.textInterpolate3,m.textInterpolate4,m.textInterpolate5,m.textInterpolate6,m.textInterpolate7,m.textInterpolate8],variable:m.textInterpolateV,mapping:n=>{if(n%2==0)throw new Error("Expected odd number of arguments");return(n-1)/2}},oue={constant:[m.propertyInterpolate,m.propertyInterpolate1,m.propertyInterpolate2,m.propertyInterpolate3,m.propertyInterpolate4,m.propertyInterpolate5,m.propertyInterpolate6,m.propertyInterpolate7,m.propertyInterpolate8],variable:m.propertyInterpolateV,mapping:n=>{if(n%2==0)throw new Error("Expected odd number of arguments");return(n-1)/2}},aue={constant:[m.styleProp,m.stylePropInterpolate1,m.stylePropInterpolate2,m.stylePropInterpolate3,m.stylePropInterpolate4,m.stylePropInterpolate5,m.stylePropInterpolate6,m.stylePropInterpolate7,m.stylePropInterpolate8],variable:m.stylePropInterpolateV,mapping:n=>{if(n%2==0)throw new Error("Expected odd number of arguments");return(n-1)/2}},lue={constant:[m.attribute,m.attributeInterpolate1,m.attributeInterpolate2,m.attributeInterpolate3,m.attributeInterpolate4,m.attributeInterpolate5,m.attributeInterpolate6,m.attributeInterpolate7,m.attributeInterpolate8],variable:m.attributeInterpolateV,mapping:n=>{if(n%2==0)throw new Error("Expected odd number of arguments");return(n-1)/2}},cue={constant:[m.styleMap,m.styleMapInterpolate1,m.styleMapInterpolate2,m.styleMapInterpolate3,m.styleMapInterpolate4,m.styleMapInterpolate5,m.styleMapInterpolate6,m.styleMapInterpolate7,m.styleMapInterpolate8],variable:m.styleMapInterpolateV,mapping:n=>{if(n%2==0)throw new Error("Expected odd number of arguments");return(n-1)/2}},uue={constant:[m.classMap,m.classMapInterpolate1,m.classMapInterpolate2,m.classMapInterpolate3,m.classMapInterpolate4,m.classMapInterpolate5,m.classMapInterpolate6,m.classMapInterpolate7,m.classMapInterpolate8],variable:m.classMapInterpolateV,mapping:n=>{if(n%2==0)throw new Error("Expected odd number of arguments");return(n-1)/2}},due={constant:[m.pureFunction0,m.pureFunction1,m.pureFunction2,m.pureFunction3,m.pureFunction4,m.pureFunction5,m.pureFunction6,m.pureFunction7,m.pureFunction8],variable:m.pureFunctionV,mapping:n=>n};function P$(n,e,t,i,s){const r=n.mapping(t.length);if(r<n.constant.length)return z(n.constant[r]).callFn([...e,...t,...i],s);if(null!==n.variable)return z(n.variable).callFn([...e,le(t),...i],s);throw new Error("AssertionError: unable to call variadic function")}function Pd(n,e,t,i,s){return Zr(P$(n,e,t,i,s).toStmt())}const hue=new Map([["window",m.resolveWindow],["document",m.resolveDocument],["body",m.resolveBody]]);function pue(n,e){for(const t of e)switch(Kn(t,F$,rt.None),t.kind){case y.Text:U.replace(t,Ice(t.handle.slot,t.initialValue,t.sourceSpan));break;case y.ElementStart:U.replace(t,rce(t.handle.slot,t.tag,t.attributes,t.localRefs,t.startSourceSpan));break;case y.Element:U.replace(t,sce(t.handle.slot,t.tag,t.attributes,t.localRefs,t.wholeSourceSpan));break;case y.ElementEnd:U.replace(t,oce(t.sourceSpan));break;case y.ContainerStart:U.replace(t,ace(t.handle.slot,t.attributes,t.localRefs,t.startSourceSpan));break;case y.Container:U.replace(t,lce(t.handle.slot,t.attributes,t.localRefs,t.wholeSourceSpan));break;case y.ContainerEnd:U.replace(t,Qe(m.elementContainerEnd,[],null));break;case y.I18nStart:U.replace(t,Mce(t.handle.slot,t.messageIndex,t.subTemplateIndex,t.sourceSpan));break;case y.I18nEnd:U.replace(t,Fce(t.sourceSpan));break;case y.I18n:U.replace(t,Oce(t.handle.slot,t.messageIndex,t.subTemplateIndex,t.sourceSpan));break;case y.I18nAttributes:if(null===t.i18nAttributesConfig)throw new Error("AssertionError: i18nAttributesConfig was not set");U.replace(t,Lce(t.handle.slot,t.i18nAttributesConfig));break;case y.Template:if(!(n instanceof Sd))throw new Error("AssertionError: must be compiling a component");if(Array.isArray(t.localRefs))throw new Error("AssertionError: local refs array should have been extracted into a constant");const i=n.job.views.get(t.xref);U.replace(t,uce(t.handle.slot,te(i.fnName),i.decls,i.vars,t.tag,t.attributes,t.localRefs,t.startSourceSpan));break;case y.DisableBindings:U.replace(t,Qe(m.disableBindings,[],null));break;case y.EnableBindings:U.replace(t,Qe(m.enableBindings,[],null));break;case y.Pipe:U.replace(t,gce(t.handle.slot,t.name));break;case y.Listener:const s=L$(0,t.handlerFnName,t.handlerOps,t.consumesDollarEvent),r=t.eventTarget?hue.get(t.eventTarget):null;if(void 0===r)throw new Error(`Unexpected global target '${t.eventTarget}' defined for '${t.name}' event. Supported list of global targets: window,document,body.`);U.replace(t,fce(t.name,s,r,t.hostListener&&t.isAnimationListener,t.sourceSpan));break;case y.TwoWayListener:U.replace(t,pce(t.name,L$(0,t.handlerFnName,t.handlerOps,!0),t.sourceSpan));break;case y.Variable:if(null===t.variable.name)throw new Error(`AssertionError: unnamed variable ${t.xref}`);U.replace(t,Zr(new Zn(t.variable.name,t.initializer,void 0,Ln.Final)));break;case y.Namespace:switch(t.active){case fi.HTML:U.replace(t,Qe(m.namespaceHTML,[],null));break;case fi.SVG:U.replace(t,Qe(m.namespaceSVG,[],null));break;case fi.Math:U.replace(t,Qe(m.namespaceMathML,[],null))}break;case y.Defer:const o=!!t.loadingMinimumTime||!!t.loadingAfterTime||!!t.placeholderMinimumTime;U.replace(t,xce(t.handle.slot,t.mainSlot.slot,t.resolverFn,t.loadingSlot?.slot??null,t.placeholderSlot?.slot??null,t.errorSlot?.slot??null,t.loadingConfig,t.placeholderConfig,o,t.sourceSpan));break;case y.DeferOn:let a=[];switch(t.trigger.kind){case Ft.Idle:case Ft.Immediate:break;case Ft.Timer:a=[t.trigger.delay];break;case Ft.Interaction:case Ft.Hover:case Ft.Viewport:if(null==t.trigger.targetSlot?.slot||null===t.trigger.targetSlotViewSteps)throw new Error(`Slot or view steps not set in trigger reification for trigger kind ${t.trigger.kind}`);a=[t.trigger.targetSlot.slot],0!==t.trigger.targetSlotViewSteps&&a.push(t.trigger.targetSlotViewSteps);break;default:throw new Error(`AssertionError: Unsupported reification of defer trigger kind ${t.trigger.kind}`)}U.replace(t,Dce(t.trigger.kind,a,t.prefetch,t.sourceSpan));break;case y.ProjectionDef:U.replace(t,Ace(t.def));break;case y.Projection:if(null===t.handle.slot)throw new Error("No slot was assigned for project instruction");U.replace(t,kce(t.handle.slot,t.projectionSlotIndex,t.attributes,t.sourceSpan));break;case y.RepeaterCreate:if(null===t.handle.slot)throw new Error("No slot was assigned for repeater instruction");if(!(n instanceof Sd))throw new Error("AssertionError: must be compiling a component");const l=n.job.views.get(t.xref);if(null===l.fnName)throw new Error("AssertionError: expected repeater primary view to have been named");let c=null,u=null,d=null;if(null!==t.emptyView){const h=n.job.views.get(t.emptyView);if(void 0===h)throw new Error("AssertionError: repeater had empty view xref, but empty view was not found");if(null===h.fnName||null===h.decls||null===h.vars)throw new Error("AssertionError: expected repeater empty view to have been named and counted");c=h.fnName,u=h.decls,d=h.vars}U.replace(t,Nce(t.handle.slot,l.fnName,t.decls,t.vars,t.tag,t.attributes,t.trackByFn,t.usesComponentInstance,c,u,d,t.emptyTag,t.emptyAttributes,t.wholeSourceSpan));break;case y.Statement:break;default:throw new Error(`AssertionError: Unsupported reification of create op ${y[t.kind]}`)}}function O$(n,e){for(const t of e)switch(Kn(t,F$,rt.None),t.kind){case y.Advance:U.replace(t,_ce(t.delta,t.sourceSpan));break;case y.Property:U.replace(t,t.expression instanceof Nn?Xce(t.name,t.expression.strings,t.expression.expressions,t.sanitizer,t.sourceSpan):Bce(t.name,t.expression,t.sanitizer,t.sourceSpan));break;case y.TwoWayProperty:U.replace(t,Vce(t.name,t.expression,t.sanitizer,t.sourceSpan));break;case y.StyleProp:U.replace(t,t.expression instanceof Nn?Kce(t.name,t.expression.strings,t.expression.expressions,t.unit,t.sourceSpan):Uce(t.name,t.expression,t.unit,t.sourceSpan));break;case y.ClassProp:U.replace(t,jce(t.name,t.expression,t.sourceSpan));break;case y.StyleMap:U.replace(t,t.expression instanceof Nn?Jce(t.expression.strings,t.expression.expressions,t.sourceSpan):Hce(t.expression,t.sourceSpan));break;case y.ClassMap:U.replace(t,t.expression instanceof Nn?eue(t.expression.strings,t.expression.expressions,t.sourceSpan):zce(t.expression,t.sourceSpan));break;case y.I18nExpression:U.replace(t,Qce(t.expression,t.sourceSpan));break;case y.I18nApply:U.replace(t,Yce(t.handle.slot,t.sourceSpan));break;case y.InterpolateText:U.replace(t,Wce(t.interpolation.strings,t.interpolation.expressions,t.sourceSpan));break;case y.Attribute:U.replace(t,t.expression instanceof Nn?Zce(t.name,t.expression.strings,t.expression.expressions,t.sanitizer,t.sourceSpan):$ce(t.name,t.expression,t.sanitizer,t.namespace));break;case y.HostProperty:if(t.expression instanceof Nn)throw new Error("not yet handled");U.replace(t,t.isAnimationTrigger?nue(t.name,t.expression,t.sourceSpan):tue(t.name,t.expression,t.sanitizer,t.sourceSpan));break;case y.Variable:if(null===t.variable.name)throw new Error(`AssertionError: unnamed variable ${t.xref}`);U.replace(t,Zr(new Zn(t.variable.name,t.initializer,void 0,Ln.Final)));break;case y.Conditional:if(null===t.processed)throw new Error("Conditional test was not set.");if(null===t.targetSlot.slot)throw new Error("Conditional slot was not set.");U.replace(t,sue(t.targetSlot.slot,t.processed,t.contextValue,t.sourceSpan));break;case y.Repeater:U.replace(t,Rce(t.collection,t.sourceSpan));break;case y.DeferWhen:U.replace(t,Pce(t.prefetch,t.expr,t.sourceSpan));break;case y.Statement:break;default:throw new Error(`AssertionError: Unsupported reification of update op ${y[t.kind]}`)}}function F$(n){if(!Us(n))return n;switch(n.kind){case ue.NextContext:return function Ece(n){return z(m.nextContext).callFn(1===n?[]:[w(n)])}(n.steps);case ue.Reference:return function wce(n){return z(m.reference).callFn([w(n)])}(n.targetSlot.slot+1+n.offset);case ue.LexicalRead:throw new Error(`AssertionError: unresolved LexicalRead of ${n.name}`);case ue.TwoWayBindingSet:throw new Error("AssertionError: unresolved TwoWayBindingSet");case ue.RestoreView:if("number"==typeof n.view)throw new Error("AssertionError: unresolved RestoreView");return function Cce(n){return z(m.restoreView).callFn([n])}(n.view);case ue.ResetView:return function Sce(n){return z(m.resetView).callFn([n])}(n.expr);case ue.GetCurrentView:return function bce(){return z(m.getCurrentView).callFn([])}();case ue.ReadVariable:if(null===n.name)throw new Error(`Read of unnamed variable ${n.xref}`);return te(n.name);case ue.ReadTemporaryExpr:if(null===n.name)throw new Error(`Read of unnamed temporary ${n.xref}`);return te(n.name);case ue.AssignTemporaryExpr:if(null===n.name)throw new Error(`Assign of unnamed temporary ${n.xref}`);return te(n.name).set(n.expr);case ue.PureFunctionExpr:if(null===n.fn)throw new Error("AssertionError: expected PureFunctions to have been extracted");return function iue(n,e,t){return P$(due,[w(n),e],t,[],null)}(n.varOffset,n.fn,n.args);case ue.PureFunctionParameterExpr:throw new Error("AssertionError: expected PureFunctionParameterExpr to have been extracted");case ue.PipeBinding:return function qce(n,e,t){if(t.length<1||t.length>R$.length)throw new Error("pipeBind() argument count out of bounds");return z(R$[t.length-1]).callFn([w(n),w(e),...t])}(n.targetSlot.slot,n.varOffset,n.args);case ue.PipeBindingVariadic:return function Gce(n,e,t){return z(m.pipeBindV).callFn([w(n),w(e),t])}(n.targetSlot.slot,n.varOffset,n.args);case ue.SlotLiteralExpr:return w(n.slot.slot);default:throw new Error(`AssertionError: Unsupported reification of ir.Expression kind: ${ue[n.kind]}`)}}function L$(n,e,t,i){O$(0,t);const s=[];for(const o of t){if(o.kind!==y.Statement)throw new Error(`AssertionError: expected reified statements, but found op ${y[o.kind]}`);s.push(o.statement)}const r=[];return i&&r.push(new gt("$event")),dr(r,s,void 0,void 0,e)}function ZI(n,e){const t=new Map;t.set(n.xref,te("ctx"));for(const i of e)switch(i.kind){case y.Variable:i.variable.kind===Bn.Context&&t.set(i.variable.view,new Jr(i.xref));break;case y.Listener:case y.TwoWayListener:ZI(n,i.handlerOps)}n===n.job.root&&t.set(n.xref,te("ctx"));for(const i of e)Kn(i,s=>{if(s instanceof Kr){if(!t.has(s.view))throw new Error(`No context found for reference to view ${s.view} from view ${n.xref}`);return t.get(s.view)}return s},rt.None)}function B$(n){for(const e of n)(e.kind===y.Listener||e.kind===y.TwoWayListener)&&Kn(e,t=>t instanceof Ji&&"$event"===t.name?(e.kind===y.Listener&&(e.consumesDollarEvent=!0),new Ni(t.name)):t,rt.InChildOperation)}function Qa(n,e,t,i,s){let r=null,o=new Map;for(const a of e.create)switch(a.kind){case y.I18nStart:if(!a.context)throw Error("Could not find i18n context for i18n op");r={i18nBlock:a,i18nContext:t.get(a.context)};break;case y.I18nEnd:r=null;break;case y.ElementStart:if(void 0!==a.i18nPlaceholder){if(null===r)throw Error("i18n tag placeholder should only occur inside an i18n block");V$(a,r.i18nContext,r.i18nBlock,s),s&&a.i18nPlaceholder.closeName&&o.set(a.xref,s),s=void 0}break;case y.ElementEnd:const l=i.get(a.xref);if(l&&void 0!==l.i18nPlaceholder){if(null===r)throw Error("AssertionError: i18n tag placeholder should only occur inside an i18n block");$$(l,r.i18nContext,r.i18nBlock,o.get(a.xref)),o.delete(a.xref)}break;case y.Projection:if(void 0!==a.i18nPlaceholder){if(null===r)throw Error("i18n tag placeholder should only occur inside an i18n block");V$(a,r.i18nContext,r.i18nBlock,s),$$(a,r.i18nContext,r.i18nBlock,s),s=void 0}break;case y.Template:const c=n.views.get(a.xref);if(void 0===a.i18nPlaceholder)Qa(n,c,t,i);else{if(null===r)throw Error("i18n tag placeholder should only occur inside an i18n block");a.templateKind===_s.Structural?Qa(n,c,t,i,a):(KI(n,c,a.handle.slot,a.i18nPlaceholder,r.i18nContext,r.i18nBlock,s),Qa(n,c,t,i),JI(n,c,a.handle.slot,a.i18nPlaceholder,r.i18nContext,r.i18nBlock,s),s=void 0)}break;case y.RepeaterCreate:if(void 0!==s)throw Error("AssertionError: Unexpected structural directive associated with @for block");const u=a.handle.slot+1,d=n.views.get(a.xref);if(void 0===a.i18nPlaceholder)Qa(n,d,t,i);else{if(null===r)throw Error("i18n tag placeholder should only occur inside an i18n block");KI(n,d,u,a.i18nPlaceholder,r.i18nContext,r.i18nBlock,s),Qa(n,d,t,i),JI(n,d,u,a.i18nPlaceholder,r.i18nContext,r.i18nBlock,s),s=void 0}if(null!==a.emptyView){const h=a.handle.slot+2,f=n.views.get(a.emptyView);if(void 0===a.emptyI18nPlaceholder)Qa(n,f,t,i);else{if(null===r)throw Error("i18n tag placeholder should only occur inside an i18n block");KI(n,f,h,a.emptyI18nPlaceholder,r.i18nContext,r.i18nBlock,s),Qa(n,f,t,i),JI(n,f,h,a.emptyI18nPlaceholder,r.i18nContext,r.i18nBlock,s),s=void 0}}}}function V$(n,e,t,i){const{startName:s,closeName:r}=n.i18nPlaceholder;let o=Ct.ElementTag|Ct.OpenTag,a=n.handle.slot;void 0!==i&&(o|=Ct.TemplateTag,a={element:a,template:i.handle.slot}),r||(o|=Ct.CloseTag),Od(e.params,s,a,t.subTemplateIndex,o)}function $$(n,e,t,i){const{closeName:s}=n.i18nPlaceholder;if(s){let r=Ct.ElementTag|Ct.CloseTag,o=n.handle.slot;void 0!==i&&(r|=Ct.TemplateTag,o={element:o,template:i.handle.slot}),Od(e.params,s,o,t.subTemplateIndex,r)}}function KI(n,e,t,i,s,r,o){let{startName:a,closeName:l}=i,c=Ct.TemplateTag|Ct.OpenTag;l||(c|=Ct.CloseTag),void 0!==o&&Od(s.params,a,o.handle.slot,r.subTemplateIndex,c),Od(s.params,a,t,U$(0,r,e),c)}function JI(n,e,t,i,s,r,o){const{closeName:a}=i,l=Ct.TemplateTag|Ct.CloseTag;a&&(Od(s.params,a,t,U$(0,r,e),l),void 0!==o&&Od(s.params,a,o.handle.slot,r.subTemplateIndex,l))}function U$(n,e,t){for(const i of t.create)if(i.kind===y.I18nStart)return i.subTemplateIndex;return e.subTemplateIndex}function Od(n,e,t,i,s){const r=n.get(e)??[];r.push({value:t,subTemplateIndex:i,flags:s}),n.set(e,r)}function bue(n,e,t,i){if(null!==n.i18nPlaceholder){const s=t.get(n.context),r=n.resolutionTime===kp.Creation?s.params:s.postprocessingParams,o=r.get(n.i18nPlaceholder)||[];o.push(e),r.set(n.i18nPlaceholder,o)}null!==n.icuPlaceholder&&i.get(n.icuPlaceholder)?.expressionPlaceholders.push(e)}function ex(n,e,t){const i=new Map;for(const s of e)switch(s.kind){case y.Variable:switch(s.variable.kind){case Bn.Identifier:case Bn.Alias:if(i.has(s.variable.identifier))continue;i.set(s.variable.identifier,s.xref);break;case Bn.SavedView:t={view:s.variable.view,variable:s.xref}}break;case y.Listener:case y.TwoWayListener:ex(n,s.handlerOps,t)}for(const s of e)s.kind==y.Listener||s.kind===y.TwoWayListener||Kn(s,r=>{if(r instanceof Ji)return i.has(r.name)?new Jr(i.get(r.name)):new Xn(new Kr(n.job.root.xref),r.name);if(r instanceof Op&&"number"==typeof r.view){if(null===t||t.view!==r.view)throw new Error(`AssertionError: no saved view ${r.view} from view ${n.xref}`);return r.view=new Jr(t.variable),r}return r},rt.None);for(const s of e)Bi(s,r=>{if(r instanceof Ji)throw new Error(`AssertionError: no lexical reads should remain, but found read of ${r.name}`)})}const Sue=new Map([[qe.HTML,m.sanitizeHtml],[qe.RESOURCE_URL,m.sanitizeResourceUrl],[qe.SCRIPT,m.sanitizeScript],[qe.STYLE,m.sanitizeStyle],[qe.URL,m.sanitizeUrl]]),Iue=new Map([[qe.HTML,m.trustConstantHtml],[qe.RESOURCE_URL,m.trustConstantResourceUrl]]);function Tue(n){return n.kind===y.ElementStart&&"iframe"===n.tag?.toLowerCase()}function j$(n){if(Array.isArray(n)){if(n.length>1)throw Error("AssertionError: Ambiguous security context");return n[0]||qe.NONE}return n}function y_(n,e){return n instanceof Jr?N$(n,e):N$(n,e).or(n.set(e))}function __(n){return n instanceof Xn||n instanceof Rs||n instanceof Jr}function Aue(n,e){if(__(n))return y_(n,e);if(n instanceof Oe&&__(n.rhs))return new Oe(n.operator,n.lhs,y_(n.rhs,e));if(n instanceof Ri&&__(n.falseCase))return new Ri(n.condition,n.trueCase,y_(n.falseCase,e));if(n instanceof ur){let t=n.condition;for(;;){if(!(t instanceof ur)){if(__(t))return y_(t,e);break}t=t.condition}}throw new Error("Unsupported expression in two-way action binding.")}function Mue(n,e){e.handlerOps.prepend([yd(n.job.allocateXrefId(),{kind:Bn.Context,name:null,view:n.xref},new Op(n.xref),Xr.None)]);for(const t of e.handlerOps)t.kind===y.Statement&&t.statement instanceof ln&&(t.statement.value=new s_(t.statement.value))}function tx(n){let e=0,t=[];for(const i of n){const s=new Map;Bi(i,(c,u)=>{u&rt.InChildOperation||c instanceof Yo&&s.set(c.xref,c)});let r=0;const o=new Set,a=new Set,l=new Map;Bi(i,(c,u)=>{u&rt.InChildOperation||(c instanceof mr?(o.has(c.xref)||(o.add(c.xref),l.set(c.xref,`tmp_${e}_${r++}`)),H$(l,c)):c instanceof Yo&&(s.get(c.xref)===c&&(a.add(c.xref),r--),H$(l,c)))}),t.push(...Array.from(new Set(l.values())).map(c=>Zr(new Zn(c)))),e++,(i.kind===y.Listener||i.kind===y.TwoWayListener)&&i.handlerOps.prepend(tx(i.handlerOps))}return t}function H$(n,e){const t=n.get(e.xref);if(void 0===t)throw new Error(`Found xref with unassigned name: ${e.xref}`);e.name=t}function Lue(n,e){if(!(e instanceof Yn&&2===e.args.length&&e.receiver instanceof Xn&&e.receiver.receiver instanceof Kr&&e.receiver.receiver.view===n))return!1;const[t,i]=e.args;return!!(t instanceof Ni&&"$index"===t.name&&i instanceof Ni&&"$item"===i.name)}function $ue(n){let e;switch(n.kind){case y.Property:case y.HostProperty:case y.Attribute:return e=1,n.expression instanceof Nn&&!function Uue(n){return!(1!==n.expressions.length||2!==n.strings.length||""!==n.strings[0]||""!==n.strings[1])}(n.expression)&&(e+=n.expression.expressions.length),e;case y.TwoWayProperty:return 1;case y.StyleProp:case y.ClassProp:case y.StyleMap:case y.ClassMap:return e=2,n.expression instanceof Nn&&(e+=n.expression.expressions.length),e;case y.InterpolateText:return n.interpolation.expressions.length;case y.I18nExpression:case y.Conditional:case y.DeferWhen:return 1;case y.RepeaterCreate:return n.emptyView?1:0;default:throw new Error(`Unhandled op: ${y[n.kind]}`)}}function z$(n){switch(n.kind){case ue.PureFunctionExpr:case ue.PipeBinding:return 1+n.args.length;case ue.PipeBindingVariadic:return 1+n.numArgs;default:throw new Error(`AssertionError: unhandled ConsumesVarsTrait expression ${n.constructor.name}`)}}var Vn=function(n){return n[n.None=0]="None",n[n.ViewContextRead=1]="ViewContextRead",n[n.ViewContextWrite=2]="ViewContextWrite",n[n.SideEffectful=4]="SideEffectful",n}(Vn||{});function nx(n){const e=new Map;for(const t of n)t.kind===y.Variable&&t.flags&Xr.AlwaysInline&&(Bi(t,i=>{if(Us(i)&&sx(i)!==Vn.None)throw new Error("AssertionError: A context-sensitive variable was marked AlwaysInline")}),e.set(t.xref,t)),Kn(t,i=>i instanceof Jr&&e.has(i.xref)?e.get(i.xref).initializer.clone():i,rt.None);for(const t of e.values())U.remove(t)}function ix(n,e){const t=new Map,i=new Map,s=new Set,r=new Map;for(const c of n){if(c.kind===y.Variable){if(t.has(c.xref)||i.has(c.xref))throw new Error(`Should not see two declarations of the same variable: ${c.xref}`);t.set(c.xref,c),i.set(c.xref,0)}r.set(c,Hue(c)),zue(c,i,s)}let o=!1;for(const c of n.reversed()){const u=r.get(c);if(c.kind!==y.Variable||0!==i.get(c.xref))u.fences&Vn.ViewContextRead&&(o=!0);else{if(o&&u.fences&Vn.ViewContextWrite||u.fences&Vn.SideEffectful){const d=Zr(c.initializer.toStmt());r.set(d,u),U.replace(c,d)}else que(c,i),U.remove(c);r.delete(c),t.delete(c.xref),i.delete(c.xref)}}const a=[];for(const[c,u]of i){const h=!!(t.get(c).flags&Xr.AlwaysInline);1!==u||h||s.has(c)||a.push(c)}let l;for(;l=a.pop();){const c=t.get(l),u=r.get(c);if(c.flags&Xr.AlwaysInline)throw new Error("AssertionError: Found an 'AlwaysInline' variable after the always inlining pass.");for(let h=c.next;h.kind!==y.ListEnd;h=h.next){const f=r.get(h);if(f.variablesUsed.has(l)){if(e===ys.TemplateDefinitionBuilder&&!Wue(c,h))break;if(Gue(l,c.initializer,h,u.fences)){f.variablesUsed.delete(l);for(const p of u.variablesUsed)f.variablesUsed.add(p);f.fences|=u.fences,t.delete(l),i.delete(l),r.delete(c),U.remove(c)}break}if(!q$(f.fences,u.fences))break}}}function sx(n){switch(n.kind){case ue.NextContext:return Vn.ViewContextRead|Vn.ViewContextWrite;case ue.RestoreView:return Vn.ViewContextRead|Vn.ViewContextWrite|Vn.SideEffectful;case ue.Reference:return Vn.ViewContextRead;default:return Vn.None}}function Hue(n){let e=Vn.None;const t=new Set;return Bi(n,i=>{Us(i)&&(i.kind===ue.ReadVariable?t.add(i.xref):e|=sx(i))}),{fences:e,variablesUsed:t}}function zue(n,e,t){Bi(n,(i,s)=>{if(!Us(i)||i.kind!==ue.ReadVariable)return;const r=e.get(i.xref);void 0!==r&&(e.set(i.xref,r+1),s&rt.InChildOperation&&t.add(i.xref))})}function que(n,e){Bi(n,t=>{if(!Us(t)||t.kind!==ue.ReadVariable)return;const i=e.get(t.xref);if(void 0!==i){if(0===i)throw new Error(`Inaccurate variable count: ${t.xref} - found another read but count is already 0`);e.set(t.xref,i-1)}})}function q$(n,e){if(n&Vn.ViewContextWrite){if(e&Vn.ViewContextRead)return!1}else if(n&Vn.ViewContextRead&&e&Vn.ViewContextWrite)return!1;return!0}function Gue(n,e,t,i){let s=!1,r=!0;return Kn(t,(o,a)=>{if(!Us(o)||s||!r)return o;if(a&rt.InChildOperation&&i&Vn.ViewContextRead)return o;if(o.kind===ue.ReadVariable){if(o.xref===n)return s=!0,e}else{const l=sx(o);r=r&&q$(l,i)}return o},rt.None),s}function Wue(n,e){switch(n.variable.kind){case Bn.Identifier:return n.initializer instanceof Ni&&"ctx"===n.initializer.name;case Bn.Context:return e.kind===y.Variable;default:return!0}}const Yue=[{kind:ee.Tmpl,fn:function zle(n){for(const e of n.units){const t=PI(e);for(const i of e.ops())if(i.kind===y.Binding){const s=Gle(t,i.target);qle(i.name)&&s.kind===y.Projection&&U.remove(i)}}}},{kind:ee.Host,fn:function cae(n){for(const e of n.root.update)if(e.kind===y.Binding&&e.bindingKind===oe.Property)if(e.name.endsWith("!important")&&(e.name=e.name.substring(0,e.name.length-10)),e.name.startsWith("style.")){e.bindingKind=oe.StyleProperty,e.name=e.name.substring(6),uae(e.name)||(e.name=dae(e.name));const{property:t,suffix:i}=LI(e.name);e.name=t,e.unit=i}else e.name.startsWith("style!")?(e.bindingKind=oe.StyleProperty,e.name="style"):(e.name.startsWith("class.")||e.name.startsWith("class!"))&&(e.bindingKind=oe.ClassName,e.name=LI(e.name.substring(6)).property)}},{kind:ee.Tmpl,fn:function Tle(n){for(const e of n.units){let t=fi.HTML;for(const i of e.create)i.kind===y.ElementStart&&i.namespace!==t&&(U.insertBefore(Jre(i.namespace),i),t=i.namespace)}}},{kind:ee.Tmpl,fn:function Zle(n){M$(n.root,0)}},{kind:ee.Tmpl,fn:function Que(n){for(const e of n.units){let t=null,i=null;for(const s of e.create)switch(s.kind){case y.I18nStart:t=s;break;case y.I18nEnd:t=null;break;case y.IcuStart:null===t&&(i=n.allocateXrefId(),U.insertBefore(l_(i,s.message,void 0,null),s));break;case y.IcuEnd:null!==i&&(U.insertAfter(c_(i,null),s),i=null)}}}},{kind:ee.Both,fn:function Moe(n){const e=new Map;for(const t of n.units)for(const i of t.update.reversed())if(i.kind===y.Binding&&i.isTextAttribute){const s=e.get(i.target)||new Set;s.has(i.name)&&n.compatibility===ys.TemplateDefinitionBuilder&&("style"===i.name||"class"===i.name)&&U.remove(i),s.add(i.name),e.set(i.target,s)}}},{kind:ee.Both,fn:function Rue(n){for(const e of n.units)for(const t of e.update)if(t.kind===y.Binding)switch(t.bindingKind){case oe.ClassName:if(t.expression instanceof Nn)throw new Error("Unexpected interpolation in ClassName binding");U.replace(t,Vre(t.target,t.name,t.expression,t.sourceSpan));break;case oe.StyleProperty:U.replace(t,Bre(t.target,t.name,t.expression,t.unit,t.sourceSpan));break;case oe.Property:case oe.Template:"style"===t.name?U.replace(t,$re(t.target,t.expression,t.sourceSpan)):"class"===t.name&&U.replace(t,Ure(t.target,t.expression,t.sourceSpan))}}},{kind:ee.Both,fn:function voe(n){const e=new Map;for(const t of n.units)for(const i of t.create)Wa(i)&&e.set(i.xref,i);for(const t of n.units)for(const i of t.ops())if(i.kind===y.Binding)switch(i.bindingKind){case oe.Attribute:if("ngNonBindable"===i.name)U.remove(i),moe(e,i.target).nonBindable=!0;else{const[s,r]=Pi(i.name);U.replace(i,jre(i.target,s,r,i.expression,i.securityContext,i.isTextAttribute,i.isStructuralTemplateAttribute,i.templateKind,i.i18nMessage,i.sourceSpan))}break;case oe.Property:case oe.Animation:U.replace(i,n.kind===ee.Host?aoe(i.name,i.expression,i.bindingKind===oe.Animation,i.i18nContext,i.securityContext,i.sourceSpan):Fre(i.target,i.name,i.expression,i.bindingKind===oe.Animation,i.securityContext,i.isStructuralTemplateAttribute,i.templateKind,i.i18nContext,i.i18nMessage,i.sourceSpan));break;case oe.TwoWayProperty:if(!(i.expression instanceof lt))throw new Error(`Expected value of two-way property binding "${i.name}" to be an expression`);U.replace(i,Lre(i.target,i.name,i.expression,i.securityContext,i.isStructuralTemplateAttribute,i.templateKind,i.i18nContext,i.i18nMessage,i.sourceSpan));break;case oe.I18n:case oe.ClassName:case oe.StyleProperty:throw new Error(`Unhandled binding of kind ${oe[i.bindingKind]}`)}}},{kind:ee.Both,fn:function poe(n){for(const e of n.units){const t=PI(e);for(const i of e.ops())switch(i.kind){case y.Attribute:goe(e,i,t);break;case y.Property:if(!i.isAnimationTrigger){let s;s=null!==i.i18nMessage&&null===i.templateKind?oe.I18n:i.isStructuralTemplateAttribute?oe.Template:oe.Property,U.insertBefore(js(i.target,s,null,i.name,null,null,null,i.securityContext),Id(t,i.target))}break;case y.TwoWayProperty:U.insertBefore(js(i.target,oe.TwoWayProperty,null,i.name,null,null,null,i.securityContext),Id(t,i.target));break;case y.StyleProp:case y.ClassProp:e.job.compatibility===ys.TemplateDefinitionBuilder&&i.expression instanceof bd&&U.insertBefore(js(i.target,oe.Property,null,i.name,null,null,null,qe.STYLE),Id(t,i.target));break;case y.Listener:if(!i.isAnimationListener){const s=js(i.target,oe.Property,null,i.name,null,null,null,qe.NONE);if(n.kind===ee.Host){if(n.compatibility)break;e.create.push(s)}else U.insertBefore(s,Id(t,i.target))}break;case y.TwoWayListener:if(n.kind!==ee.Host){const s=js(i.target,oe.Property,null,i.name,null,null,null,qe.NONE);U.insertBefore(s,Id(t,i.target))}}}}},{kind:ee.Tmpl,fn:function koe(n){const e=new Map;for(const s of n.units)for(const r of s.ops())switch(r.kind){case y.Binding:case y.Property:case y.Attribute:case y.ExtractedAttribute:if(null===r.i18nMessage)continue;if(!e.has(r.i18nMessage)){const o=NI(tc.Attr,n.allocateXrefId(),null,r.i18nMessage,null);s.create.push(o),e.set(r.i18nMessage,o.xref)}r.i18nContext=e.get(r.i18nMessage)}const t=new Map;for(const s of n.units)for(const r of s.create)if(r.kind===y.I18nStart&&r.xref===r.root){const o=NI(tc.RootI18n,n.allocateXrefId(),r.xref,r.message,null);s.create.push(o),r.context=o.xref,t.set(r.xref,o)}for(const s of n.units)for(const r of s.create)if(r.kind===y.I18nStart&&r.xref!==r.root){const o=t.get(r.root);if(void 0===o)throw Error("AssertionError: Root i18n block i18n context should have been created.");r.context=o.xref,t.set(r.xref,o)}let i=null;for(const s of n.units)for(const r of s.create)switch(r.kind){case y.I18nStart:i=r;break;case y.I18nEnd:i=null;break;case y.IcuStart:if(null===i)throw Error("AssertionError: Unexpected ICU outside of an i18n block.");if(r.message.id!==i.message.id){const o=NI(tc.Icu,n.allocateXrefId(),i.root,r.message,null);s.create.push(o),r.context=o.xref}else r.context=i.context,t.get(i.xref).contextKind=tc.Icu}}},{kind:ee.Both,fn:function Hle(n){const e=new Map;for(const t of n.units)for(const i of t.create)Wa(i)&&e.set(i.xref,i);for(const t of n.units)for(const i of t.create)if(i.kind===y.ExtractedAttribute&&i.bindingKind===oe.Attribute&&RV(i.expression)){const s=e.get(i.target);if(void 0!==s&&s.kind===y.Template&&s.templateKind===_s.Structural)continue;if("style"===i.name){const r=I$(i.expression.value);for(let o=0;o<r.length-1;o+=2)U.insertBefore(js(i.target,oe.StyleProperty,null,r[o],w(r[o+1]),null,null,qe.STYLE),i);U.remove(i)}else if("class"===i.name){const r=i.expression.value.trim().split(/\s+/g);for(const o of r)U.insertBefore(js(i.target,oe.ClassName,null,o,null,null,null,qe.NONE),i);U.remove(i)}}}},{kind:ee.Tmpl,fn:function gue(n){for(const e of n.units)for(const t of e.update)switch(t.kind){case y.Attribute:case y.Binding:case y.ClassProp:case y.ClassMap:case y.Property:case y.StyleProp:case y.StyleMap:t.expression instanceof bd&&U.remove(t)}}},{kind:ee.Both,fn:function woe(n){for(const e of n.units)for(const t of e.update)t.kind===y.Attribute&&t.expression instanceof Nn&&2===t.expression.strings.length&&t.expression.strings.every(s=>""===s)&&(t.expression=t.expression.expressions[0])}},{kind:ee.Both,fn:function jle(n){for(const e of n.units)A$(e.create,Vle),A$(e.update,e.job.kind===ee.Host?Ule:$le)}},{kind:ee.Tmpl,fn:function Eoe(n){for(const e of n.units)for(const t of e.ops()){if(t.kind!==y.Conditional)continue;let i;const s=t.conditions.findIndex(o=>null===o.expr);if(s>=0){const o=t.conditions.splice(s,1)[0].targetSlot;i=new Fp(o)}else i=w(-1);let r=null==t.test?null:new mr(t.test,n.allocateXrefId());for(let o=t.conditions.length-1;o>=0;o--){let a=t.conditions[o];if(null!==a.expr){if(null!==r){const l=0===o?r:new Yo(r.xref);a.expr=new Oe(Y.Identical,l,a.expr)}else if(null!==a.alias){const l=n.allocateXrefId();a.expr=new mr(a.expr,l),t.contextValue=new Yo(l)}i=new Ri(a.expr,new Fp(a.targetSlot),i)}}t.processed=i,t.conditions=[]}}},{kind:ee.Tmpl,fn:function Wle(n){for(const e of n.units)Qle(e)}},{kind:ee.Tmpl,fn:function Noe(n){for(const e of n.units)for(const t of e.create)t.kind===y.Defer&&(null!==t.placeholderMinimumTime&&(t.placeholderConfig=new Cd(xd([t.placeholderMinimumTime]))),(null!==t.loadingMinimumTime||null!==t.loadingAfterTime)&&(t.loadingConfig=new Cd(xd([t.loadingMinimumTime,t.loadingAfterTime]))))}},{kind:ee.Tmpl,fn:function Sle(n){for(const e of n.units){let t=null,i=null;const s=new Map,r=new Map,o=new Map;for(const a of e.create)switch(a.kind){case y.I18nStart:if(null===a.context)throw Error("I18n op should have its context set.");t=a;break;case y.I18nEnd:t=null;break;case y.IcuStart:if(null===a.context)throw Error("Icu op should have its context set.");i=a;break;case y.IcuEnd:i=null;break;case y.Text:if(null!==t)if(s.set(a.xref,t),r.set(a.xref,i),null!==a.icuPlaceholder){const l=ooe(n.allocateXrefId(),a.icuPlaceholder,[a.initialValue]);U.replace(a,l),o.set(a.xref,l)}else U.remove(a)}for(const a of e.update)if(a.kind===y.InterpolateText){if(!s.has(a.target))continue;const l=s.get(a.target),c=r.get(a.target),u=o.get(a.target),d=c?c.context:l.context,h=c?kp.Postproccessing:kp.Creation,f=[];for(let p=0;p<a.interpolation.expressions.length;p++){const g=a.interpolation.expressions[p];f.push(xV(d,l.xref,l.xref,l.handle,g,u?.xref??null,a.interpolation.i18nPlaceholders[p]??null,h,md.I18nText,"",g.sourceSpan??a.sourceSpan))}U.replaceWithMany(a,f),void 0!==u&&(u.strings=a.interpolation.strings)}}}},{kind:ee.Tmpl,fn:function Doe(n){const e=new Map;for(const t of n.units){for(const i of t.create)i.kind===y.I18nAttributes&&e.set(i.target,i);for(const i of t.update)switch(i.kind){case y.Property:case y.Attribute:if(null===i.i18nContext||!(i.expression instanceof Nn))continue;const s=e.get(i.target);if(void 0===s)throw new Error("AssertionError: An i18n attribute binding instruction requires the owning element to have an I18nAttributes create instruction");if(s.target!==i.target)throw new Error("AssertionError: Expected i18nAttributes target element to match binding target element");const r=[];for(let o=0;o<i.expression.expressions.length;o++){const a=i.expression.expressions[o];if(i.expression.i18nPlaceholders.length!==i.expression.expressions.length)throw new Error(`AssertionError: An i18n attribute binding instruction requires the same number of expressions and placeholders, but found ${i.expression.i18nPlaceholders.length} placeholders and ${i.expression.expressions.length} expressions`);r.push(xV(i.i18nContext,s.target,s.xref,s.handle,a,null,i.expression.i18nPlaceholders[o],kp.Creation,md.I18nAttribute,i.name,i.sourceSpan))}U.replaceWithMany(i,r)}}}},{kind:ee.Tmpl,fn:function vue(n){for(const e of n.units){const t=new Set;for(const i of e.update)i.kind===y.I18nExpression&&t.add(i.i18nOwner);for(const i of e.create)if(i.kind===y.I18nAttributes){if(t.has(i.xref))continue;U.remove(i)}}}},{kind:ee.Tmpl,fn:function foe(n){for(const e of n.units){let t=e.update.head,i=[],s=null;for(const r of e.create){if(r.kind===y.I18nStart)s={blockXref:r.xref,lastSlotConsumer:r.xref};else if(r.kind===y.I18nEnd){for(const o of i)o.target=s.lastSlotConsumer,U.insertBefore(o,t);i.length=0,s=null}if(vd(r))for(null!==s&&(s.lastSlotConsumer=r.xref);null!==t.next;)if(null===s||t.kind!==y.I18nExpression||t.usage!==md.I18nText||t.i18nOwner!==s.blockXref){if(DI(t)&&t.target!==r.xref)break;t=t.next}else{const o=t;t=t.next,U.remove(o),i.push(o)}}}}},{kind:ee.Tmpl,fn:function doe(n){const e=new Map;for(const t of n.units)for(const i of t.create)i.kind===y.I18nContext&&e.set(i.xref,i);for(const t of n.units)for(const i of t.update)i.kind===y.I18nExpression&&hoe(e,i)&&U.insertAfter(Gre(i.i18nOwner,i.handle,null),i)}},{kind:ee.Tmpl,fn:function Xle(n){for(const e of n.units)for(const t of e.update)Kn(t,i=>!(i instanceof sc)||i.args.length<=4?i:new o_(i.target,i.targetSlot,i.name,le(i.args),i.args.length),rt.None)}},{kind:ee.Both,fn:function tce(n){for(const e of n.units)for(const t of e.update)Kn(t,(i,s)=>s&rt.InChildOperation?i:i instanceof Qi?nce(i):i instanceof gs?ice(i):i,rt.None)}},{kind:ee.Tmpl,fn:function sae(n){const e=n.compatibility===ys.TemplateDefinitionBuilder,t=[];let i=0;for(const s of n.units)for(const r of s.create)r.kind===y.Projection&&(t.push(r.selector),r.projectionSlotIndex=i++);if(t.length>0){let s=null;if(t.length>1||"*"!==t[0]){const r=t.map(o=>"*"===o?o:Uu(o));s=n.pool.getConstLiteral(xd(r),e)}n.contentSelectors=n.pool.getConstLiteral(xd(t),e),n.root.create.prepend([eoe(s)])}}},{kind:ee.Tmpl,fn:function rae(n){u_(n.root,null)}},{kind:ee.Tmpl,fn:function kue(n){for(const e of n.units){e.create.prepend([yd(e.job.allocateXrefId(),{kind:Bn.SavedView,name:null,view:e.xref},new i_,Xr.None)]);for(const t of e.create){if(t.kind!==y.Listener&&t.kind!==y.TwoWayListener)continue;let i=e!==n.root;if(!i)for(const s of t.handlerOps)Bi(s,r=>{r instanceof Np&&(i=!0)});i&&Mue(e,t)}}}},{kind:ee.Both,fn:function coe(n){for(const e of n.units)for(const t of e.ops())Kn(t,uoe,rt.None)}},{kind:ee.Both,fn:function _ue(n){for(const e of n.units)B$(e.create),B$(e.update)}},{kind:ee.Tmpl,fn:function Bue(n){for(const e of n.units)for(const t of e.create)t.kind===y.RepeaterCreate&&(t.track=J(t.track,i=>{if(i instanceof Ji){if(i.name===t.varNames.$index)return te("$index");if(i.name===t.varNames.$implicit)return te("$item")}return i},rt.None))}},{kind:ee.Both,fn:function Cue(n){for(const e of n.units)ex(e,e.create,null),ex(e,e.update,null)}},{kind:ee.Tmpl,fn:function Roe(n){const e=new Map;function t(s){if(e.has(s.xref))return e.get(s.xref);const r=new Poe;for(const o of s.create)if(Wa(o)&&null!==o.localRefs){if(!Array.isArray(o.localRefs))throw new Error("LocalRefs were already processed, but were needed to resolve defer targets.");for(const a of o.localRefs)""===a.target&&r.targets.set(a.name,{xref:o.xref,slot:o.handle})}return e.set(s.xref,r),r}function i(s,r,o){switch(r.trigger.kind){case Ft.Idle:case Ft.Immediate:case Ft.Timer:return;case Ft.Hover:case Ft.Interaction:case Ft.Viewport:if(null===r.trigger.targetName){if(null===o)throw new Error("defer on trigger with no target name must have a placeholder block");const c=n.views.get(o);if(null==c)throw new Error("AssertionError: could not find placeholder view for defer on trigger");for(const u of c.create)if(vd(u)&&(Wa(u)||u.kind===y.Projection))return r.trigger.targetXref=u.xref,r.trigger.targetView=o,r.trigger.targetSlotViewSteps=-1,void(r.trigger.targetSlot=u.handle);return}let a=null!==o?n.views.get(o):s,l=null!==o?-1:0;for(;null!==a;){const c=t(a);if(c.targets.has(r.trigger.targetName)){const{xref:u,slot:d}=c.targets.get(r.trigger.targetName);return r.trigger.targetXref=u,r.trigger.targetView=a.xref,r.trigger.targetSlotViewSteps=l,void(r.trigger.targetSlot=d)}a=null!==a.parent?n.views.get(a.parent):null,l++}break;default:throw new Error(`Trigger kind ${r.trigger.kind} not handled`)}}for(const s of n.units){const r=new Map;for(const o of s.create)switch(o.kind){case y.Defer:r.set(o.xref,o);break;case y.DeferOn:i(s,o,r.get(o.defer).placeholderView)}}}},{kind:ee.Tmpl,fn:function Due(n){for(const e of n.units)for(const t of e.create)t.kind===y.TwoWayListener&&Kn(t,i=>i instanceof r_?Aue(i.target,i.value):i,rt.InChildOperation)}},{kind:ee.Tmpl,fn:function Fue(n){for(const e of n.units)for(const t of e.create)t.kind===y.RepeaterCreate&&(t.track instanceof Ni&&"$index"===t.track.name?t.trackByFn=z(m.repeaterTrackByIndex):t.track instanceof Ni&&"$item"===t.track.name?t.trackByFn=z(m.repeaterTrackByIdentity):Lue(n.root.xref,t.track)?(t.usesComponentInstance=!0,t.track.receiver.receiver.view===e.xref?t.trackByFn=t.track.receiver:(t.trackByFn=z(m.componentInstance).callFn([]).prop(t.track.receiver.name),t.track=t.trackByFn)):t.track=J(t.track,i=>i instanceof Kr?(t.usesComponentInstance=!0,new Rp(i.view)):i,rt.None))}},{kind:ee.Both,fn:function yue(n){for(const e of n.units)ZI(e,e.create),ZI(e,e.update)}},{kind:ee.Both,fn:function xue(n){for(const e of n.units){const t=PI(e);if(n.kind!==ee.Host)for(const i of e.create)if(i.kind===y.ExtractedAttribute){const s=Iue.get(j$(i.securityContext))??null;i.trustedValueFn=null!==s?z(s):null}for(const i of e.update)switch(i.kind){case y.Property:case y.Attribute:case y.HostProperty:let s=null;if(s=Array.isArray(i.securityContext)&&2===i.securityContext.length&&i.securityContext.indexOf(qe.URL)>-1&&i.securityContext.indexOf(qe.RESOURCE_URL)>-1?m.sanitizeUrlOrResourceUrl:Sue.get(j$(i.securityContext))??null,i.sanitizer=null!==s?z(s):null,null===i.sanitizer){let r=!1;if(n.kind===ee.Host||i.kind===y.HostProperty)r=!0;else{const o=t.get(i.target);if(void 0===o||!Wa(o))throw Error("Property should have an element-like owner");r=Tue(o)}r&&bI(i.name)&&(i.sanitizer=z(m.validateIframeAttribute))}}}}},{kind:ee.Tmpl,fn:function Ile(n){for(const e of n.units)for(const t of e.create)switch(t.kind){case y.ElementStart:case y.Template:if(!Array.isArray(t.localRefs))throw new Error("AssertionError: expected localRefs to be an array still");if(t.numSlotsUsed+=t.localRefs.length,t.localRefs.length>0){const i=xle(t.localRefs);t.localRefs=n.addConst(i)}else t.localRefs=null}}},{kind:ee.Both,fn:function Fle(n){for(const e of n.units)for(const t of e.ops())Kn(t,i=>{if(!(i instanceof Oe)||i.operator!==Y.NullishCoalesce)return i;const s=new mr(i.lhs.clone(),n.allocateXrefId()),r=new Yo(s.xref);return new Ri(new Oe(Y.And,new Oe(Y.NotIdentical,s,$o),new Oe(Y.NotIdentical,r,new pn(void 0))),r.clone(),i.rhs)},rt.None)}},{kind:ee.Both,fn:function Boe(n){for(const e of n.units)for(const t of e.ops())Kn(t,i=>zoe(i,{job:n}),rt.None),Kn(t,qoe,rt.None)}},{kind:ee.Both,fn:function Pue(n){for(const e of n.units)e.create.prepend(tx(e.create)),e.update.prepend(tx(e.update))}},{kind:ee.Tmpl,fn:function Nue(n){const e=new Map;for(const t of n.units){let i=0;for(const s of t.create)vd(s)&&(s.handle.slot=i,e.set(s.xref,s.handle.slot),i+=s.numSlotsUsed);t.decls=i}for(const t of n.units)for(const i of t.ops())if(i.kind===y.Template||i.kind===y.RepeaterCreate){const s=n.views.get(i.xref);i.decls=s.decls}}},{kind:ee.Tmpl,fn:function wue(n){const e=new Map,t=new Map;for(const i of n.units)for(const s of i.create)switch(s.kind){case y.I18nContext:e.set(s.xref,s);break;case y.ElementStart:t.set(s.xref,s)}Qa(n,n.root,e,t)}},{kind:ee.Tmpl,fn:function Eue(n){const e=new Map,t=new Map,i=new Map;for(const o of n.units)for(const a of o.create)switch(a.kind){case y.I18nStart:e.set(a.xref,a.subTemplateIndex);break;case y.I18nContext:t.set(a.xref,a);break;case y.IcuPlaceholder:i.set(a.xref,a)}const s=new Map,r=o=>o.usage===md.I18nText?o.i18nOwner:o.context;for(const o of n.units)for(const a of o.update)if(a.kind===y.I18nExpression){const l=s.get(r(a))||0;bue(a,{value:l,subTemplateIndex:e.get(a.i18nOwner)??null,flags:Ct.ExpressionIndex},t,i),s.set(r(a),l+1)}}},{kind:ee.Tmpl,fn:function Joe(n){const e=new Map,t=new Map,i=new Map;for(const r of n.units)for(const o of r.create)switch(o.kind){case y.I18nContext:const a=eae(n,o);r.create.push(a),e.set(o.xref,a),i.set(o.xref,o);break;case y.I18nStart:t.set(o.xref,o)}let s=null;for(const r of n.units)for(const o of r.create)switch(o.kind){case y.IcuStart:s=o,U.remove(o);const a=i.get(o.context);if(a.contextKind!==tc.Icu)continue;const l=t.get(a.i18nBlock);if(l.context===a.xref)continue;const c=t.get(l.root),u=e.get(c.context);if(void 0===u)throw Error("AssertionError: ICU sub-message should belong to a root message.");const d=e.get(a.xref);d.messagePlaceholder=o.messagePlaceholder,u.subMessages.push(d.xref);break;case y.IcuEnd:s=null,U.remove(o);break;case y.IcuPlaceholder:if(null===s||null==s.context)throw Error("AssertionError: Unexpected ICU placeholder outside of i18n context");e.get(s.context).postprocessingParams.set(o.name,w(tae(o))),U.remove(o)}}},{kind:ee.Tmpl,fn:function Oue(n){for(const e of n.units)for(const t of e.create){if(t.kind!==y.RepeaterCreate||null!==t.trackByFn)continue;let s,i=!1;t.track=J(t.track,o=>{if(o instanceof sc||o instanceof o_)throw new Error("Illegal State: Pipes are not allowed in this context");return o instanceof Rp?(i=!0,te("this")):o},rt.None);const r=[new gt("$index"),new gt("$item")];s=i?new Bo(r,[new ln(t.track)]):jt(r,t.track),t.trackByFn=n.pool.getSharedFunctionReference(s,"_forTrack")}}},{kind:ee.Tmpl,fn:function _le(n){const e=n.relativeContextFilePath.replace(/[^A-Za-z0-9]/g,"_").toUpperCase()+"_",t=new Map,i=new Map,s=new Map,r=new Map;for(const l of n.units)for(const c of l.ops())if(c.kind===y.ExtractedAttribute&&null!==c.i18nContext){const u=t.get(c.i18nContext)??[];u.push(c),t.set(c.i18nContext,u)}else if(c.kind===y.I18nAttributes)i.set(c.target,c);else if(c.kind===y.I18nExpression&&c.usage===md.I18nAttribute){const u=s.get(c.target)??[];u.push(c),s.set(c.target,u)}else c.kind===y.I18nMessage&&r.set(c.xref,c);const o=new Map,a=new Map;for(const l of n.units)for(const c of l.create)if(c.kind===y.I18nMessage){if(null===c.messagePlaceholder){const{mainVar:u,statements:d}=S$(n,e,r,c);if(null!==c.i18nBlock){const h=n.addConst(u,d);a.set(c.i18nBlock,h)}else{n.constsInitializers.push(...d),o.set(c.i18nContext,u);const h=t.get(c.i18nContext);if(void 0!==h)for(const f of h)f.expression=u.clone()}}U.remove(c)}for(const l of n.units)for(const c of l.create)if(Wa(c)){const u=i.get(c.xref);if(void 0===u)continue;let d=s.get(c.xref);if(void 0===d)throw new Error("AssertionError: Could not find any i18n expressions associated with an I18nAttributes instruction");const h=new Set;d=d.filter(p=>{const g=h.has(p.name);return h.add(p.name),!g});const f=d.flatMap(p=>{const g=o.get(p.context);if(void 0===g)throw new Error("AssertionError: Could not find i18n expression's value");return[w(p.name),g]});u.i18nAttributesConfig=n.addConst(new Qi(f))}for(const l of n.units)for(const c of l.create)if(c.kind===y.I18nStart){const u=a.get(c.root);if(void 0===u)throw new Error("AssertionError: Could not find corresponding i18n block index for an i18n message op; was an i18n message incorrectly assumed to correspond to an attribute?");c.messageIndex=u}}},{kind:ee.Tmpl,fn:function aae(n){for(const e of n.units)for(const t of e.ops())Kn(t,i=>i instanceof Cd?w(n.addConst(i.expr)):i,rt.None)}},{kind:ee.Both,fn:function Ioe(n){const e=new Map;for(const t of n.units)for(const i of t.create)if(i.kind===y.ExtractedAttribute){const s=e.get(i.target)||new xoe(n.compatibility);e.set(i.target,s),s.add(i.bindingKind,i.name,i.expression,i.namespace,i.trustedValueFn),U.remove(i)}if(n instanceof RI)for(const t of n.units)for(const i of t.create)if(i.kind==y.Projection){const s=e.get(i.xref);if(void 0!==s){const r=OI(s);r.entries.length>0&&(i.attributes=r)}}else Wa(i)&&(i.attributes=zV(n,e,i.xref),i.kind===y.RepeaterCreate&&null!==i.emptyView&&(i.emptyAttributes=zV(n,e,i.emptyView)));else if(n instanceof UV)for(const[t,i]of e.entries()){if(t!==n.root.xref)throw new Error("An attribute would be const collected into the host binding's template function, but is not associated with the root xref.");const s=OI(i);s.entries.length>0&&(n.root.attributes=s)}}},{kind:ee.Tmpl,fn:function mue(n){for(const e of n.units)for(const t of e.create)switch(t.kind){case y.I18nContext:U.remove(t);break;case y.I18nStart:t.context=null}}},{kind:ee.Both,fn:function Vue(n){for(const e of n.units){let t=0;for(const i of e.ops())AI(i)&&(t+=$ue(i));for(const i of e.ops())Bi(i,s=>{Us(s)&&(n.compatibility===ys.TemplateDefinitionBuilder&&s instanceof qa||(SV(s)&&(s.varOffset=t),AI(s)&&(t+=z$(s))))});if(n.compatibility===ys.TemplateDefinitionBuilder)for(const i of e.ops())Bi(i,s=>{!Us(s)||!(s instanceof qa)||(SV(s)&&(s.varOffset=t),AI(s)&&(t+=z$(s)))});e.vars=t}if(n instanceof RI)for(const e of n.units)for(const t of e.create){if(t.kind!==y.Template&&t.kind!==y.RepeaterCreate)continue;const i=n.views.get(t.xref);t.vars=i.vars}}},{kind:ee.Tmpl,fn:function iae(n){for(const e of n.units){const t=new Map;for(const s of e.create)if(vd(s)){if(null===s.handle.slot)throw new Error("AssertionError: expected slots to have been allocated before generating advance() calls");t.set(s.xref,s.handle.slot)}let i=0;for(const s of e.update){if(!DI(s))continue;if(!t.has(s.target))throw new Error(`AssertionError: reference to unknown slot for target ${s.target}`);const r=t.get(s.target);if(i!==r){const o=r-i;if(o<0)throw new Error("AssertionError: slot counter should never need to move backwards");U.insertBefore(Hre(o,s.sourceSpan),s),i=r}}}}},{kind:ee.Both,fn:function jue(n){for(const e of n.units){nx(e.create),nx(e.update);for(const t of e.create)(t.kind===y.Listener||t.kind===y.TwoWayListener)&&nx(t.handlerOps);ix(e.create,n.compatibility),ix(e.update,n.compatibility);for(const t of e.create)(t.kind===y.Listener||t.kind===y.TwoWayListener)&&ix(t.handlerOps,n.compatibility)}}},{kind:ee.Both,fn:function Dle(n){g_(n.root,n.componentName,{index:0},n.compatibility===ys.TemplateDefinitionBuilder)}},{kind:ee.Tmpl,fn:function Aoe(n){for(const e of n.units)for(const t of e.create)if(t.kind===y.Defer){if(0===t.metadata.deps.length||null!==t.resolverFn)continue;const i=[];for(const o of t.metadata.deps)if(o.isDeferrable){const a=jt([new gt("m",Ms)],te("m").prop(o.isDefaultImport?"default":o.symbolName)),l=new Ba(o.importPath).prop("then").callFn([a]);i.push(l)}else i.push(o.type);const s=jt([],le(i));if(null===t.handle.slot)throw new Error("AssertionError: slot must be assigned bfore extracting defer deps functions");const r=e.fnName?.replace("_Template","");t.resolverFn=n.pool.getSharedFunctionReference(s,`${r}_Defer_${t.handle.slot}_DepsFn`,!1)}}},{kind:ee.Tmpl,fn:function Mle(n){for(const e of n.units){for(const t of e.create)(t.kind===y.Listener||t.kind===y.TwoWayListener)&&T$(t.handlerOps);T$(e.update)}}},{kind:ee.Tmpl,fn:function Rle(n){for(const e of n.units){const t=new Set;for(const i of e.create)i.kind===y.ElementStart&&"ng-container"===i.tag&&(i.kind=y.ContainerStart,t.add(i.xref)),i.kind===y.ElementEnd&&t.has(i.xref)&&(i.kind=y.ContainerEnd)}}},{kind:ee.Tmpl,fn:function Loe(n){for(const e of n.units)for(const t of e.create){const i=Ooe.get(t.kind);if(void 0===i)continue;const[s,r]=i;let o=t.prev;for(;null!==o&&Foe.has(o.kind);)o=o.prev;null!==o&&o.kind===s&&(o.kind=r,U.remove(t))}}},{kind:ee.Tmpl,fn:function Ole(n){const e=new Map;for(const t of n.units)for(const i of t.create)Wa(i)&&e.set(i.xref,i);for(const t of n.units)for(const i of t.create)(i.kind===y.ElementStart||i.kind===y.ContainerStart)&&i.nonBindable&&U.insertAfter(Zre(i.xref),i),(i.kind===y.ElementEnd||i.kind===y.ContainerEnd)&&Ple(e,i.xref).nonBindable&&U.insertBefore(Kre(i.xref),i)}},{kind:ee.Both,fn:function Jle(n){for(const e of n.units)for(const t of e.ops())Bi(t,i=>{if(!(i instanceof qa)||null===i.body)return;const s=new ece(i.args.length);i.fn=n.pool.getSharedConstant(s,i.body),i.body=null})}},{kind:ee.Both,fn:function fue(n){for(const e of n.units)pue(e,e.create),O$(0,e.update)}},{kind:ee.Both,fn:function _oe(n){for(const e of n.units)jV(e.create),jV(e.update)}}];function G$(n,e){for(const t of Yue)(t.kind===e||t.kind===ee.Both)&&t.fn(n)}function Xue(n,e){const t=Q$(n.root);return W$(n.root,e),t}function W$(n,e){for(const t of n.job.units){if(t.parent!==n.xref)continue;W$(t,e);const i=Q$(t);e.statements.push(i.toDeclStmt(i.name))}}function Q$(n){if(null===n.fnName)throw new Error(`AssertionError: view ${n.xref} is unnamed`);const e=[];for(const r of n.create){if(r.kind!==y.Statement)throw new Error(`AssertionError: expected all create ops to have been compiled, but got ${y[r.kind]}`);e.push(r.statement)}const t=[];for(const r of n.update){if(r.kind!==y.Statement)throw new Error(`AssertionError: expected all update ops to have been compiled, but got ${y[r.kind]}`);t.push(r.statement)}const i=w_(1,e),s=w_(2,t);return dr([new gt("rf"),new gt("ctx")],[...i,...s],void 0,void 0,n.fnName)}function w_(n,e){return 0===e.length?[]:[Ju(new Oe(Y.BitwiseAnd,te("rf"),w(n)),e)]}const Y$=ys.TemplateDefinitionBuilder,ac=new h_,lc="ng-template";function ede(n,e,t,i){let s;const r=e.expression.ast;s=r instanceof Mn?new Nn(r.strings,r.expressions.map(o=>Re(o,n,e.sourceSpan)),[]):Re(r,n,e.sourceSpan),n.root.update.push(nc(n.root.xref,t,e.name,s,null,i,!1,!1,null,null,e.sourceSpan))}function tde(n,e,t,i){const s=nc(n.root.xref,oe.Attribute,e,t,null,i,!0,!1,null,null,t.sourceSpan);n.root.update.push(s)}function nde(n,e){const[t,i]=1!==e.type?[null,e.targetOrPhase]:[e.targetOrPhase,null],s=MI(n.root.xref,new vr,e.name,null,ox(n.root,e.handler,e.handlerSpan),t,i,!0,e.sourceSpan);n.root.create.push(s)}function Ya(n,e){for(const t of e)if(t instanceof ms)ide(n,t);else if(t instanceof Ps)sde(n,t);else if(t instanceof fB)rde(n,t);else if(t instanceof jl)X$(n,t,null);else if(t instanceof cp)Z$(n,t,null);else if(t instanceof dB)ode(n,t);else if(t instanceof uB)ade(n,t);else if(t instanceof up)lde(n,t);else if(t instanceof J0)cde(n,t);else{if(!(t instanceof Ty))throw new Error(`Unsupported template node: ${t.constructor.name}`);ude(n,t)}}function ide(n,e){if(void 0!==e.i18n&&!(e.i18n instanceof Oi||e.i18n instanceof Va))throw Error(`Unhandled i18n metadata type for element: ${e.i18n.constructor.name}`);const t=n.job.allocateXrefId(),[i,s]=Pi(e.name),r=function Qre(n,e,t,i,s,r){return{kind:y.ElementStart,xref:e,tag:n,handle:new vr,attributes:null,localRefs:[],nonBindable:!1,namespace:t,i18nPlaceholder:i,startSourceSpan:s,wholeSourceSpan:r,...Qo,...Le}}(s,t,HV(i),e.i18n instanceof Va?e.i18n:void 0,e.startSourceSpan,e.sourceSpan);n.create.push(r),function hde(n,e,t){let i=new Array,s=new Set;for(const r of t.attributes){const o=ac.securityContext(t.name,r.name,!0);i.push(nc(e.xref,oe.Attribute,r.name,rx(n.job,r.value,r.i18n),null,o,!0,!1,null,Jo(r.i18n),r.sourceSpan)),r.i18n&&s.add(r.name)}for(const r of t.inputs)s.has(r.name)&&console.error(`On component ${n.job.componentName}, the binding ${r.name} is both an i18n attribute and a property. You may want to remove the property binding. This will become a compilation error in future versions of Angular.`),i.push(nc(e.xref,K$.get(r.type),r.name,rx(n.job,Wp(r.value),r.i18n),r.unit,r.securityContext,!1,!1,null,Jo(r.i18n)??null,r.sourceSpan));n.create.push(i.filter(r=>r?.kind===y.ExtractedAttribute)),n.update.push(i.filter(r=>r?.kind===y.Binding));for(const r of t.outputs){if(1===r.type&&null===r.phase)throw Error("Animation listener should have a phase");n.create.push(2===r.type?OV(e.xref,e.handle,r.name,e.tag,J$(n,r.handler,r.handlerSpan),r.sourceSpan):MI(e.xref,e.handle,r.name,e.tag,ox(n,r.handler,r.handlerSpan),r.phase,r.target,!1,r.sourceSpan))}null!==i.some(r=>r?.i18nMessage)&&n.create.push(LV(n.job.allocateXrefId(),new vr,e.xref))}(n,r,e),e3(r,e);let o=null;e.i18n instanceof Oi&&(o=n.job.allocateXrefId(),n.create.push(l_(o,e.i18n,void 0,e.startSourceSpan))),Ya(n,e.children);const a=function Xre(n,e){return{kind:y.ElementEnd,xref:n,sourceSpan:e,...Le}}(t,e.endSourceSpan??e.startSourceSpan);n.create.push(a),null!==o&&U.insertBefore(c_(o,e.endSourceSpan??e.startSourceSpan),a)}function sde(n,e){if(void 0!==e.i18n&&!(e.i18n instanceof Oi||e.i18n instanceof Va))throw Error(`Unhandled i18n metadata type for template: ${e.i18n.constructor.name}`);const t=n.job.allocateView(n.xref);let i=e.tagName,s="";e.tagName&&([s,i]=Pi(e.tagName));const r=e.i18n instanceof Va?e.i18n:void 0,o=HV(s),a=null===i?"":function Soe(n,e){return e===fi.HTML?n:`:${function Coe(n){const e=new Map([["svg",fi.SVG],["math",fi.Math]]);for(const[t,i]of e.entries())if(i===n)return t;return null}(e)}:${n}`}(i,o),l=function dde(n){return Pi(n.tagName??"")[1]===lc}(e)?_s.NgTemplate:_s.Structural,c=a_(t.xref,l,i,a,o,r,e.startSourceSpan,e.sourceSpan);n.create.push(c),function fde(n,e,t,i){let s=new Array;for(const r of t.templateAttrs)if(r instanceof Sy){const o=ac.securityContext(lc,r.name,!0);s.push(b_(n,e.xref,1,r.name,r.value,null,o,!0,i,Jo(r.i18n),r.sourceSpan))}else s.push(b_(n,e.xref,r.type,r.name,Wp(r.value),r.unit,r.securityContext,!0,i,Jo(r.i18n),r.sourceSpan));for(const r of t.attributes){const o=ac.securityContext(lc,r.name,!0);s.push(b_(n,e.xref,1,r.name,r.value,null,o,!1,i,Jo(r.i18n),r.sourceSpan))}for(const r of t.inputs)s.push(b_(n,e.xref,r.type,r.name,Wp(r.value),r.unit,r.securityContext,!1,i,Jo(r.i18n),r.sourceSpan));n.create.push(s.filter(r=>r?.kind===y.ExtractedAttribute)),n.update.push(s.filter(r=>r?.kind===y.Binding));for(const r of t.outputs){if(1===r.type&&null===r.phase)throw Error("Animation listener should have a phase");if(i===_s.NgTemplate&&n.create.push(2===r.type?OV(e.xref,e.handle,r.name,e.tag,J$(n,r.handler,r.handlerSpan),r.sourceSpan):MI(e.xref,e.handle,r.name,e.tag,ox(n,r.handler,r.handlerSpan),r.phase,r.target,!1,r.sourceSpan)),i===_s.Structural&&1!==r.type){const o=ac.securityContext(lc,r.name,!1);n.create.push(js(e.xref,oe.Property,null,r.name,null,null,null,o))}}null!==s.some(r=>r?.i18nMessage)&&n.create.push(LV(n.job.allocateXrefId(),new vr,e.xref))}(n,c,e,l),e3(c,e),Ya(t,e.children);for(const{name:u,value:d}of e.variables)t.contextVariables.set(u,""!==d?d:"$implicit");if(l===_s.NgTemplate&&e.i18n instanceof Oi){const u=n.job.allocateXrefId();U.insertAfter(l_(u,e.i18n,void 0,e.startSourceSpan),t.create.head),U.insertBefore(c_(u,e.endSourceSpan??e.startSourceSpan),t.create.tail)}}function rde(n,e){if(void 0!==e.i18n&&!(e.i18n instanceof Va))throw Error(`Unhandled i18n metadata type for element: ${e.i18n.constructor.name}`);const t=function toe(n,e,t,i){return{kind:y.Projection,xref:n,handle:new vr,selector:e,i18nPlaceholder:t,projectionSlotIndex:0,attributes:null,localRefs:[],sourceSpan:i,...Le,...Qo}}(n.job.allocateXrefId(),e.selector,e.i18n,e.sourceSpan);for(const i of e.attributes){const s=ac.securityContext(e.name,i.name,!0);n.update.push(nc(t.xref,oe.Attribute,i.name,w(i.value),null,s,!0,!1,null,Jo(i.i18n),i.sourceSpan))}n.create.push(t)}function X$(n,e,t){n.create.push(PV(n.job.allocateXrefId(),e.value,t,e.sourceSpan))}function Z$(n,e,t){let i=e.value;if(i instanceof Vs&&(i=i.ast),!(i instanceof Mn))throw new Error(`AssertionError: expected Interpolation for BoundText node, got ${i.constructor.name}`);if(void 0!==e.i18n&&!(e.i18n instanceof Os))throw Error(`Unhandled i18n metadata type for text interpolation: ${e.i18n?.constructor.name}`);const s=e.i18n instanceof Os?e.i18n.children.filter(a=>a instanceof Gr).map(a=>a.name):[];if(s.length>0&&s.length!==i.expressions.length)throw Error(`Unexpected number of i18n placeholders (${i.expressions.length}) for BoundText with ${i.expressions.length} expressions`);const r=n.job.allocateXrefId();n.create.push(PV(r,"",t,e.sourceSpan));const o=n.job.compatibility?null:e.sourceSpan;n.update.push(function Ore(n,e,t){return{kind:y.InterpolateText,target:n,interpolation:e,sourceSpan:t,...$s,...ws,...Le}}(r,new Nn(i.strings,i.expressions.map(a=>Re(a,n.job,o)),s),e.sourceSpan))}function ode(n,e){let t=null,i=null,s=[];for(let o=0;o<e.branches.length;o++){const a=e.branches[o],l=n.job.allocateView(n.xref);let u,c=null;if(0===o&&(c=ax(n,l.xref,a)),null!==a.expressionAlias&&l.contextVariables.set(a.expressionAlias.name,BV),void 0!==a.i18n){if(!(a.i18n instanceof Ho))throw Error(`Unhandled i18n metadata type for if block: ${a.i18n?.constructor.name}`);u=a.i18n}const d=a_(l.xref,_s.Block,c,"Conditional",fi.HTML,u,a.startSourceSpan,a.sourceSpan);n.create.push(d),null===t&&(t=l.xref,i=d.handle);const h=a.expression?Re(a.expression,n.job,null):null,f=new Lp(h,d.xref,d.handle,a.expressionAlias);s.push(f),Ya(l,a.children)}const r=IV(t,i,null,s,e.sourceSpan);n.update.push(r)}function ade(n,e){if(0===e.cases.length)return;let t=null,i=null,s=[];for(const o of e.cases){const a=n.job.allocateView(n.xref);let l;if(void 0!==o.i18n){if(!(o.i18n instanceof Ho))throw Error(`Unhandled i18n metadata type for switch block: ${o.i18n?.constructor.name}`);l=o.i18n}const c=a_(a.xref,_s.Block,null,"Case",fi.HTML,l,o.startSourceSpan,o.sourceSpan);n.create.push(c),null===t&&(t=a.xref,i=c.handle);const u=o.expression?Re(o.expression,n.job,e.startSourceSpan):null,d=new Lp(u,c.xref,c.handle);s.push(d),Ya(a,o.children)}const r=IV(t,i,Re(e.expression,n.job,null),s,e.sourceSpan);n.update.push(r)}function E_(n,e,t,i,s){if(void 0!==t&&!(t instanceof Ho))throw Error("Unhandled i18n metadata type for defer block");if(void 0===i)return null;const r=n.job.allocateView(n.xref);Ya(r,i);const o=a_(r.xref,_s.Block,null,`Defer${e}`,fi.HTML,t,s,s);return n.create.push(o),o}function lde(n,e){const t=n.job.deferBlocksMeta.get(e);if(void 0===t)throw new Error("AssertionError: unable to find metadata for deferred block");const i=E_(n,"",e.i18n,e.children,e.sourceSpan),s=E_(n,"Loading",e.loading?.i18n,e.loading?.children,e.loading?.sourceSpan),r=E_(n,"Placeholder",e.placeholder?.i18n,e.placeholder?.children,e.placeholder?.sourceSpan),o=E_(n,"Error",e.error?.i18n,e.error?.children,e.error?.sourceSpan),a=n.job.allocateXrefId(),l=function noe(n,e,t,i,s,r){return{kind:y.Defer,xref:n,handle:new vr,mainView:e,mainSlot:t,loadingView:null,loadingSlot:null,loadingConfig:null,loadingMinimumTime:null,loadingAfterTime:null,placeholderView:null,placeholderSlot:null,placeholderConfig:null,placeholderMinimumTime:null,errorView:null,errorSlot:null,metadata:i,resolverFn:s,sourceSpan:r,...Le,...Qo,numSlotsUsed:2}}(a,i.xref,i.handle,t,n.job.allDeferrableDepsFn,e.sourceSpan);l.placeholderView=r?.xref??null,l.placeholderSlot=r?.handle??null,l.loadingSlot=s?.handle??null,l.errorSlot=o?.handle??null,l.placeholderMinimumTime=e.placeholder?.minimumTime??null,l.loadingMinimumTime=e.loading?.minimumTime??null,l.loadingAfterTime=e.loading?.afterTime??null,n.create.push(l);let c=!1,u=[],d=[];for(const h of[e.triggers,e.prefetchTriggers]){if(void 0!==h.idle){const f=rc(a,{kind:Ft.Idle},c,h.idle.sourceSpan);u.push(f)}if(void 0!==h.immediate){const f=rc(a,{kind:Ft.Immediate},c,h.immediate.sourceSpan);u.push(f)}if(void 0!==h.timer){const f=rc(a,{kind:Ft.Timer,delay:h.timer.delay},c,h.timer.sourceSpan);u.push(f)}if(void 0!==h.hover){const f=rc(a,{kind:Ft.Hover,targetName:h.hover.reference,targetXref:null,targetSlot:null,targetView:null,targetSlotViewSteps:null},c,h.hover.sourceSpan);u.push(f)}if(void 0!==h.interaction){const f=rc(a,{kind:Ft.Interaction,targetName:h.interaction.reference,targetXref:null,targetSlot:null,targetView:null,targetSlotViewSteps:null},c,h.interaction.sourceSpan);u.push(f)}if(void 0!==h.viewport){const f=rc(a,{kind:Ft.Viewport,targetName:h.viewport.reference,targetXref:null,targetSlot:null,targetView:null,targetSlotViewSteps:null},c,h.viewport.sourceSpan);u.push(f)}if(void 0!==h.when){if(h.when.value instanceof Mn)throw new Error("Unexpected interpolation in defer block when trigger");const f=qre(a,Re(h.when.value,n.job,h.when.sourceSpan),c,h.when.sourceSpan);d.push(f)}0===u.length&&0===d.length&&u.push(rc(a,{kind:Ft.Idle},!1,null)),c=!0}n.create.push(u),n.update.push(d)}function cde(n,e){if(!(e.i18n instanceof Oi&&fp(e.i18n)))throw Error(`Unhandled i18n metadata type for ICU: ${e.i18n?.constructor.name}`);{const t=n.job.allocateXrefId();n.create.push(function soe(n,e,t,i){return{kind:y.IcuStart,xref:n,message:e,messagePlaceholder:t,context:null,sourceSpan:i,...Le}}(t,e.i18n,sI(e.i18n).name,null));for(const[i,s]of Object.entries({...e.vars,...e.placeholders}))s instanceof cp?Z$(n,s,i):X$(n,s,i);n.create.push(function roe(n){return{kind:y.IcuEnd,xref:n,...Le}}(t))}}function ude(n,e){const t=n.job.allocateView(n.xref);t.contextVariables.set(e.item.name,e.item.value),t.contextVariables.set(e.contextVariables.$index.name,e.contextVariables.$index.value),t.contextVariables.set(e.contextVariables.$count.name,e.contextVariables.$count.value);const i=`\u0275${e.contextVariables.$index.name}_${t.xref}`,s=`\u0275${e.contextVariables.$count.name}_${t.xref}`;t.contextVariables.set(i,e.contextVariables.$index.value),t.contextVariables.set(s,e.contextVariables.$count.value),t.aliases.add({kind:Bn.Alias,name:null,identifier:e.contextVariables.$first.name,expression:new Ji(i).identical(w(0))}),t.aliases.add({kind:Bn.Alias,name:null,identifier:e.contextVariables.$last.name,expression:new Ji(i).identical(new Ji(s).minus(w(1)))}),t.aliases.add({kind:Bn.Alias,name:null,identifier:e.contextVariables.$even.name,expression:new Ji(i).modulo(w(2)).identical(w(0))}),t.aliases.add({kind:Bn.Alias,name:null,identifier:e.contextVariables.$odd.name,expression:new Ji(i).modulo(w(2)).notIdentical(w(0))});const r=Jn(e.trackBy.span,e.sourceSpan),o=Re(e.trackBy,n.job,r);Ya(t,e.children);let a=null,l=null;null!==e.empty&&(a=n.job.allocateView(n.xref),Ya(a,e.empty.children),l=ax(n,a.xref,e.empty));const c={$index:e.contextVariables.$index.name,$count:e.contextVariables.$count.name,$first:e.contextVariables.$first.name,$last:e.contextVariables.$last.name,$even:e.contextVariables.$even.name,$odd:e.contextVariables.$odd.name,$implicit:e.item.name};if(void 0!==e.i18n&&!(e.i18n instanceof Ho))throw Error("AssertionError: Unhandled i18n metadata type or @for");if(void 0!==e.empty?.i18n&&!(e.empty.i18n instanceof Ho))throw Error("AssertionError: Unhandled i18n metadata type or @empty");const u=e.i18n,d=e.empty?.i18n,h=ax(n,t.xref,e),f=function Yre(n,e,t,i,s,r,o,a,l,c){return{kind:y.RepeaterCreate,attributes:null,xref:n,handle:new vr,emptyView:e,track:i,trackByFn:null,tag:t,emptyTag:r,emptyAttributes:null,functionNameSuffix:"For",namespace:fi.HTML,nonBindable:!1,localRefs:[],decls:null,vars:null,varNames:s,usesComponentInstance:!1,i18nPlaceholder:o,emptyI18nPlaceholder:a,startSourceSpan:l,wholeSourceSpan:c,...Qo,...Le,...ws,numSlotsUsed:null===e?2:3}}(t.xref,a?.xref??null,h,o,c,l,u,d,e.startSourceSpan,e.sourceSpan);n.create.push(f);const p=Re(e.expression,n.job,Jn(e.expression.span,e.sourceSpan)),g=function zre(n,e,t,i){return{kind:y.Repeater,target:n,targetSlot:e,collection:t,sourceSpan:i,...Le,...$s}}(f.xref,f.handle,p,e.sourceSpan);n.update.push(g)}function Re(n,e,t){if(n instanceof Vs)return Re(n.ast,e,t);if(n instanceof hi)return n.receiver instanceof Zi&&!(n.receiver instanceof dd)||n.receiver instanceof dd&&"$any"!==n.name&&"$event"!==n.name?new Ji(n.name):new Xn(Re(n.receiver,e,t),n.name,null,Jn(n.span,t));if(n instanceof zy)return n.receiver instanceof Zi?new La(new Kr(e.root.xref),n.name,Re(n.value,e,t),null,Jn(n.span,t)):new La(Re(n.receiver,e,t),n.name,Re(n.value,e,t),void 0,Jn(n.span,t));if(n instanceof Gy)return new Ll(Re(n.receiver,e,t),Re(n.key,e,t),Re(n.value,e,t),void 0,Jn(n.span,t));if(n instanceof Ha){if(n.receiver instanceof Zi)throw new Error("Unexpected ImplicitReceiver");return new Yn(Re(n.receiver,e,t),n.args.map(i=>Re(i,e,t)),void 0,Jn(n.span,t))}if(n instanceof Ki)return w(n.value,void 0,Jn(n.span,t));if(!(n instanceof Yr)){if(n instanceof Bs){const i=boe.get(n.operation);if(void 0===i)throw new Error(`AssertionError: unknown binary operator ${n.operation}`);return new Oe(i,Re(n.left,e,t),Re(n.right,e,t),void 0,Jn(n.span,t))}if(n instanceof dd)return new Kr(e.root.xref);if(n instanceof Jl)return new Rs(Re(n.receiver,e,t),Re(n.key,e,t),void 0,Jn(n.span,t));if(n instanceof hd)throw new Error("AssertionError: Chain in unknown context");if(n instanceof Wy){const i=n.keys.map((s,r)=>new Vl(s.key,Re(n.values[r],e,t),s.quoted));return new gs(i,void 0,Jn(n.span,t))}if(n instanceof Ip)return new Qi(n.expressions.map(i=>Re(i,e,t)));if(n instanceof bp)return new Ri(Re(n.condition,e,t),Re(n.trueExp,e,t),Re(n.falseExp,e,t),void 0,Jn(n.span,t));if(n instanceof Tp)return Re(n.expression,e,t);if(n instanceof Sp)return new sc(e.allocateXrefId(),new vr,n.name,[Re(n.exp,e,t),...n.args.map(i=>Re(i,e,t))]);if(n instanceof Cp)return new wd(Re(n.receiver,e,t),Re(n.key,e,t),Jn(n.span,t));if(n instanceof qy)return new _d(Re(n.receiver,e,t),n.name);if(n instanceof Dp)return new Ga(Re(n.receiver,e,t),n.args.map(i=>Re(i,e,t)));if(n instanceof Xi)return new bd(Jn(n.span,t));if(n instanceof xp)return F0(Re(n.expression,e,t),Jn(n.span,t));throw new Error(`Unhandled expression type "${n.constructor.name}" in file "${t?.start.file.url}"`)}switch(n.operator){case"+":return new jr(Oa.Plus,Re(n.expr,e,t),void 0,Jn(n.span,t));case"-":return new jr(Oa.Minus,Re(n.expr,e,t),void 0,Jn(n.span,t));default:throw new Error(`AssertionError: unknown unary operator ${n.operator}`)}}function rx(n,e,t,i){let s;return s=e instanceof Mn?new Nn(e.strings,e.expressions.map(r=>Re(r,n,i??null)),Object.keys(Jo(t)?.placeholders??{})):e instanceof mn?Re(e,n,i??null):w(e),s}const K$=new Map([[0,oe.Property],[5,oe.TwoWayProperty],[1,oe.Attribute],[2,oe.ClassName],[3,oe.StyleProperty],[4,oe.Animation]]);function Jo(n){if(null==n)return null;if(!(n instanceof Oi))throw Error(`Expected i18n meta to be a Message, but got: ${n.constructor.name}`);return n}function b_(n,e,t,i,s,r,o,a,l,c,u){const d="string"==typeof s;if(l===_s.Structural){if(!a)switch(t){case 0:case 2:case 3:return js(e,oe.Property,null,i,null,null,c,o);case 5:return js(e,oe.TwoWayProperty,null,i,null,null,c,o)}if(!d&&(1===t||4===t))return null}let h=K$.get(t);return l===_s.NgTemplate&&(2===t||3===t||1===t&&!d)&&(h=oe.Property),nc(e,h,i,rx(n.job,s,c),r,o,d,a,l,c,u)}function ox(n,e,t){e=Wp(e);const i=new Array;let s=e instanceof hd?e.expressions:[e];if(0===s.length)throw new Error("Expected listener to have non-empty expression list.");const r=s.map(a=>Re(a,n.job,t)),o=r.pop();return i.push(...r.map(a=>Zr(new Tn(a,a.sourceSpan)))),i.push(Zr(new ln(o,o.sourceSpan))),i}function J$(n,e,t){e=Wp(e);const i=new Array;if(e instanceof hd){if(1!==e.expressions.length)throw new Error("Expected two-way listener to have a single expression.");e=e.expressions[0]}const s=Re(e,n.job,t),r=new Ji("$event"),o=new r_(s,r);return i.push(Zr(new Tn(o))),i.push(Zr(new ln(r))),i}function Wp(n){return n instanceof Vs?n.ast:n}function e3(n,e){!function pde(n){if(!Array.isArray(n))throw new Error("AssertionError: expected an array")}(n.localRefs);for(const{name:t,value:i}of e.references)n.localRefs.push({name:t,target:i})}function Jn(n,e){if(null===e)return null;const t=e.start.moveBy(n.start),i=e.start.moveBy(n.end),s=e.fullStart.moveBy(n.start);return new $e(t,i,s)}function ax(n,e,t){let i=null;for(const s of t.children)if(!(s instanceof Cy)){if(null!==i)return null;(s instanceof ms||s instanceof Ps&&null!==s.tagName)&&(i=s)}if(null!==i){for(const r of i.attributes){const o=ac.securityContext(lc,r.name,!0);n.update.push(nc(e,oe.Attribute,r.name,w(r.value),null,o,!0,!1,null,Jo(r.i18n),r.sourceSpan))}for(const r of i.inputs)if(4!==r.type&&1!==r.type){const o=ac.securityContext(lc,r.name,!0);n.create.push(js(e,oe.Property,null,r.name,null,null,null,o))}const s=i instanceof ms?i.name:i.tagName;return s===lc?null:s}return null}const t3=!1;class n3 extends p${constructor(){super(o$)}parse(e,t,i){return super.parse(e,t,i)}}const i3="ngPreserveWhitespaces",gde=new Set(["pre","template","textarea","script","style"]),s3=" \f\n\r\t\v\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff",mde=new RegExp(`[^${s3}]`),vde=new RegExp(`[${s3}]{2,}`,"g");function r3(n){return n.replace(new RegExp(c$,"g")," ")}class o3{visitElement(e,t){return gde.has(e.name)||function yde(n){return n.some(e=>e.name===i3)}(e.attrs)?new zs(e.name,me(this,e.attrs),e.children,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n):new zs(e.name,e.attrs,l3(this,e.children),e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n)}visitAttribute(e,t){return e.name!==i3?e:null}visitText(e,t){if(e.value.match(mde)||t&&(t.prev instanceof Up||t.next instanceof Up)){const r=e.tokens.map(a=>5===a.type?function _de({type:n,parts:e,sourceSpan:t}){return{type:n,parts:[a3(e[0])],sourceSpan:t}}(a):a),o=a3(e.value);return new oc(o,e.sourceSpan,r,e.i18n)}return null}visitComment(e,t){return e}visitExpansion(e,t){return e}visitExpansionCase(e,t){return e}visitBlock(e,t){return new eo(e.name,e.parameters,l3(this,e.children),e.sourceSpan,e.nameSpan,e.startSourceSpan,e.endSourceSpan)}visitBlockParameter(e,t){return e}}function a3(n){return r3(n).replace(vde," ")}function l3(n,e){const t=[];return e.forEach((i,s)=>{const o=i.visit(n,{prev:e[s-1],next:e[s+1]});o&&t.push(o)}),t}class Sde{constructor(e,t,i,s){this._exprParser=e,this._interpolationConfig=t,this._schemaRegistry=i,this.errors=s}get interpolationConfig(){return this._interpolationConfig}createBoundHostProperties(e,t){const i=[];for(const s of Object.keys(e)){const r=e[s];"string"==typeof r?this.parsePropertyBinding(s,r,!0,!1,t,t.start.offset,void 0,[],i,t):this._reportError(`Value of the host property binding "${s}" needs to be a string representing an expression but got "${r}" (${typeof r})`,t)}return i}createDirectiveHostEventAsts(e,t){const i=[];for(const s of Object.keys(e)){const r=e[s];"string"==typeof r?this.parseEvent(s,r,!1,t,t,[],i,t):this._reportError(`Value of the host listener "${s}" needs to be a string representing an expression but got "${r}" (${typeof r})`,t)}return i}parseInterpolation(e,t,i){const s=t.start.toString(),r=t.fullStart.offset;try{const o=this._exprParser.parseInterpolation(e,s,r,i,this._interpolationConfig);return o&&this._reportExpressionParserErrors(o.errors,t),o}catch(o){return this._reportError(`${o}`,t),this._exprParser.wrapLiteralPrimitive("ERROR",s,r)}}parseInterpolationExpression(e,t){const i=t.start.toString(),s=t.start.offset;try{const r=this._exprParser.parseInterpolationExpression(e,i,s);return r&&this._reportExpressionParserErrors(r.errors,t),r}catch(r){return this._reportError(`${r}`,t),this._exprParser.wrapLiteralPrimitive("ERROR",i,s)}}parseInlineTemplateBinding(e,t,i,s,r,o,a,l){const u=this._parseTemplateBindings(e,t,i,i.start.offset+1,s);for(const d of u){const h=Xa(i,d.sourceSpan),f=d.key.source,p=Xa(i,d.key.span);if(d instanceof vI){const g=d.value?d.value.source:"$implicit",v=d.value?Xa(i,d.value.span):void 0;a.push(new Yse(f,g,h,p,v))}else if(d.value){const g=l?h:i,v=Xa(i,d.value.ast.sourceSpan);this._parsePropertyAst(f,d.value,!1,g,p,v,r,o)}else r.push([f,""]),this.parseLiteralAttr(f,null,p,s,void 0,r,o,p)}}_parseTemplateBindings(e,t,i,s,r){const o=i.start.toString();try{const a=this._exprParser.parseTemplateBindings(e,t,o,s,r);return this._reportExpressionParserErrors(a.errors,i),a.warnings.forEach(l=>{this._reportError(l,i,ja.WARNING)}),a.templateBindings}catch(a){return this._reportError(`${a}`,i),[]}}parseLiteralAttr(e,t,i,s,r,o,a,l){cx(e)?(e=e.substring(1),void 0!==l&&(l=Xa(l,new gr(l.start.offset+1,l.end.offset))),t&&this._reportError('Assigning animation triggers via @prop="exp" attributes with an expression is invalid. Use property bindings (e.g. [@prop]="exp") or use an attribute without a value (e.g. @prop) instead.',i,ja.ERROR),this._parseAnimation(e,t,i,s,l,r,o,a)):a.push(new _I(e,this._exprParser.wrapLiteralPrimitive(t,"",s),za.LITERAL_ATTR,i,l,r))}parsePropertyBinding(e,t,i,s,r,o,a,l,c,u){0===e.length&&this._reportError("Property name is missing in binding",r);let d=!1;e.startsWith("animate-")?(d=!0,e=e.substring(8),void 0!==u&&(u=Xa(u,new gr(u.start.offset+8,u.end.offset)))):cx(e)&&(d=!0,e=e.substring(1),void 0!==u&&(u=Xa(u,new gr(u.start.offset+1,u.end.offset)))),d?this._parseAnimation(e,t,r,o,u,a,l,c):this._parsePropertyAst(e,this.parseBinding(t,i,a||r,o),s,r,u,a,l,c)}parsePropertyInterpolation(e,t,i,s,r,o,a,l){const c=this.parseInterpolation(t,s||i,l);return!!c&&(this._parsePropertyAst(e,c,!1,i,a,s,r,o),!0)}_parsePropertyAst(e,t,i,s,r,o,a,l){a.push([e,t.source]),l.push(new _I(e,t,i?za.TWO_WAY:za.DEFAULT,s,r,o))}_parseAnimation(e,t,i,s,r,o,a,l){0===e.length&&this._reportError("Animation trigger is missing",i);const c=this.parseBinding(t||"undefined",!1,o||i,s);a.push([e,c.source]),l.push(new _I(e,c,za.ANIMATION,i,r,o))}parseBinding(e,t,i,s){const r=(i&&i.start||"(unknown)").toString();try{const o=t?this._exprParser.parseSimpleBinding(e,r,s,this._interpolationConfig):this._exprParser.parseBinding(e,r,s,this._interpolationConfig);return o&&this._reportExpressionParserErrors(o.errors,i),o}catch(o){return this._reportError(`${o}`,i),this._exprParser.wrapLiteralPrimitive("ERROR",r,s)}}createBoundElementProperty(e,t,i=!1,s=!0){if(t.isAnimation)return new rV(t.name,4,qe.NONE,t.expression,null,t.sourceSpan,t.keySpan,t.valueSpan);let o,r=null,a=null;const l=t.name.split(".");let c;if(l.length>1)if("attr"==l[0]){a=l.slice(1).join("."),i||this._validatePropertyOrAttributeName(a,t.sourceSpan,!0),c=ux(this._schemaRegistry,e,a,!0);const u=a.indexOf(":");if(u>-1){const d=a.substring(0,u),h=a.substring(u+1);a=G0(d,h)}o=1}else"class"==l[0]?(a=l[1],o=2,c=[qe.NONE]):"style"==l[0]&&(r=l.length>2?l[2]:null,a=l[1],o=3,c=[qe.STYLE]);if(null===a){const u=this._schemaRegistry.getMappedPropName(t.name);a=s?u:t.name,c=ux(this._schemaRegistry,e,u,!1),o=t.type===za.TWO_WAY?5:0,i||this._validatePropertyOrAttributeName(u,t.sourceSpan,!1)}return new rV(a,o,c[0],t.expression,r,t.sourceSpan,t.keySpan,t.valueSpan)}parseEvent(e,t,i,s,r,o,a,l){0===e.length&&this._reportError("Event name is missing in binding",s),cx(e)?(e=e.slice(1),void 0!==l&&(l=Xa(l,new gr(l.start.offset+1,l.end.offset))),this._parseAnimationEvent(e,t,s,r,a,l)):this._parseRegularEvent(e,t,i,s,r,o,a,l)}calcPossibleSecurityContexts(e,t,i){const s=this._schemaRegistry.getMappedPropName(t);return ux(this._schemaRegistry,e,s,i)}_parseAnimationEvent(e,t,i,s,r,o){const a=function vie(n,e){return XL(n,".",e)}(e,[e,""]),l=a[0],c=a[1].toLowerCase(),u=this._parseAction(t,s);r.push(new sV(l,c,1,u,i,s,o)),0===l.length&&this._reportError("Animation event name is missing in binding",i),c?"start"!==c&&"done"!==c&&this._reportError(`The provided animation output phase value "${c}" for "@${l}" is not supported (use start or done)`,i):this._reportError(`The animation trigger output event (@${l}) is missing its phase value name (start or done are currently supported)`,i)}_parseRegularEvent(e,t,i,s,r,o,a,l){const[c,u]=function mie(n,e){return XL(n,":",e)}(e,[null,e]),d=this.errors.length,h=this._parseAction(t,r),f=this.errors.length===d;o.push([e,h.source]),i&&f&&!this._isAllowedAssignmentEvent(h)&&this._reportError("Unsupported expression in a two-way binding",s),a.push(new sV(u,c,i?2:0,h,s,r,l))}_parseAction(e,t){const i=(t&&t.start||"(unknown").toString(),s=t&&t.start?t.start.offset:0;try{const r=this._exprParser.parseAction(e,i,s,this._interpolationConfig);return r&&this._reportExpressionParserErrors(r.errors,t),!r||r.ast instanceof Xi?(this._reportError("Empty expressions are not allowed",t),this._exprParser.wrapLiteralPrimitive("ERROR",i,s)):r}catch(r){return this._reportError(`${r}`,t),this._exprParser.wrapLiteralPrimitive("ERROR",i,s)}}_reportError(e,t,i=ja.ERROR){this.errors.push(new Fe(t,e,i))}_reportExpressionParserErrors(e,t){for(const i of e)this._reportError(i.message,t)}_validatePropertyOrAttributeName(e,t,i){const s=i?this._schemaRegistry.validateAttribute(e):this._schemaRegistry.validateProperty(e);s.error&&this._reportError(s.msg,t,ja.ERROR)}_isAllowedAssignmentEvent(e){return e instanceof Vs?this._isAllowedAssignmentEvent(e.ast):e instanceof Tp?this._isAllowedAssignmentEvent(e.expression):e instanceof hi||e instanceof Jl||(e instanceof Bs?("&&"===e.operation||"||"===e.operation||"??"===e.operation)&&(e.right instanceof hi||e.right instanceof Jl):e instanceof bp||e instanceof xp)}}function cx(n){return"@"==n[0]}function ux(n,e,t,i){const s=[];return Pa.parse(e).forEach(r=>{const o=r.element?[r.element]:n.allKnownElementNames(),a=new Set(r.notSelectors.filter(c=>c.isElementSelector()).map(c=>c.element)),l=o.filter(c=>!a.has(c));s.push(...l.map(c=>n.securityContext(c,t,i)))}),0===s.length?[qe.NONE]:Array.from(new Set(s)).sort()}function Xa(n,e){const t=e.start-n.start.offset,i=e.end-n.end.offset;return new $e(n.start.moveBy(t),n.end.moveBy(i),n.fullStart.moveBy(t),n.details)}const xde=/^([^:/?#]+):/;function u3(n){let e=null,t=null,i=null,s=!1,r="";n.attrs.forEach(l=>{const c=l.name.toLowerCase();"select"==c?e=l.value:"href"==c?t=l.value:"rel"==c?i=l.value:"ngNonBindable"==l.name?s=!0:"ngProjectAs"==l.name&&l.value.length>0&&(r=l.value)}),e=function Lde(n){return null===n||0===n.length?"*":n}(e);const o=n.name.toLowerCase();let a=Es.OTHER;return z0(o)?a=Es.NG_CONTENT:"style"==o?a=Es.STYLE:"script"==o?a=Es.SCRIPT:"link"==o&&"stylesheet"==i&&(a=Es.STYLESHEET),new Fde(a,e,t,s,r)}var Es=function(n){return n[n.NG_CONTENT=0]="NG_CONTENT",n[n.STYLE=1]="STYLE",n[n.STYLESHEET=2]="STYLESHEET",n[n.SCRIPT=3]="SCRIPT",n[n.OTHER=4]="OTHER",n}(Es||{});class Fde{constructor(e,t,i,s,r){this.type=e,this.selectAttr=t,this.hrefAttr=i,this.nonBindable=s,this.projectAs=r}}const Bde=/^\s*([0-9A-Za-z_$]*)\s+of\s+([\S\s]*)/,Vde=/^track\s+([\S\s]*)/,$de=/^(as\s)+(.*)/,dx=/^else[^\S\r\n]+if/,Ude=/^let\s+([\S\s]*)/,d3=/(\s*)(\S+)(\s*)/,hx=new Set(["$index","$first","$last","$even","$odd","$count"]);function h3(n){return"empty"===n}function f3(n){return"else"===n||dx.test(n)}function Gde(n,e,t,i,s){const r=e.split(",");let o=t.start;for(const a of r){const l=a.split("="),c=2===l.length?l[0].trim():"",u=2===l.length?l[1].trim():"";if(0===c.length||0===u.length)s.push(new Fe(n,'Invalid @for loop "let" parameter. Parameter should match the pattern "<name> = <variable name>"'));else if(hx.has(u))if(i.hasOwnProperty(u))s.push(new Fe(n,`Duplicate "let" parameter variable "${u}"`));else{const[,d,h]=l[0].match(d3)??[],f=void 0!==d&&2===l.length?new $e(o.moveBy(d.length),o.moveBy(d.length+h.length)):t;let p;if(2===l.length){const[,v,_]=l[1].match(d3)??[];p=void 0!==v?new $e(o.moveBy(l[0].length+1+v.length),o.moveBy(l[0].length+1+v.length+_.length)):void 0}const g=new $e(f.start,p?.end??f.end);i[u]=new zl(c,u,g,f,p)}else s.push(new Fe(n,`Unknown "let" parameter variable "${u}". The allowed variables are: ${Array.from(hx).join(", ")}`));o=o.moveBy(a.length+1)}}function Qp(n,e,t){let i,s;return"string"==typeof t?(i=Math.max(0,n.expression.lastIndexOf(t)),s=i+t.length):(i=0,s=n.expression.length),e.parseBinding(n.expression.slice(i,s),!1,n.sourceSpan,n.sourceSpan.start.offset+i)}function p3(n,e,t){if(0===n.parameters.length)return e.push(new Fe(n.sourceSpan,"Conditional block does not have an expression")),null;const i=Qp(n.parameters[0],t);let s=null;for(let r=1;r<n.parameters.length;r++){const o=n.parameters[r],a=o.expression.match($de);if(null===a)e.push(new Fe(o.sourceSpan,`Unrecognized conditional paramater "${o.expression}"`));else if("if"!==n.name)e.push(new Fe(o.sourceSpan,'"as" expression is only allowed on the primary @if block'));else if(null!==s)e.push(new Fe(o.sourceSpan,'Conditional can only have one "as" expression'));else{const l=a[2].trim(),c=o.sourceSpan.start.moveBy(a[1].length),u=new $e(c,c.moveBy(l.length));s=new zl(l,l,u,u)}}return{expression:i,expressionAlias:s}}const Xde=/^\d+\.?\d*(ms|s)?$/,Zde=/^\s$/,g3=new Map([[Wr,Yi],[91,93],[40,41]]);var ts=function(n){return n.IDLE="idle",n.TIMER="timer",n.INTERACTION="interaction",n.IMMEDIATE="immediate",n.HOVER="hover",n.VIEWPORT="viewport",n}(ts||{});function m3({expression:n,sourceSpan:e},t,i,s){const r=n.indexOf("when"),o=new $e(e.start.moveBy(r),e.start.moveBy(r+4)),a=y3(n,e);if(-1===r)s.push(new Fe(e,'Could not find "when" keyword in expression'));else{const l=Yp(n,r+1),c=t.parseBinding(n.slice(l),!1,e,e.start.offset+l);_3("when",i,s,new Vie(c,e,a,o))}}function v3({expression:n,sourceSpan:e},t,i,s){const r=n.indexOf("on"),o=new $e(e.start.moveBy(r),e.start.moveBy(r+2)),a=y3(n,e);if(-1===r)i.push(new Fe(e,'Could not find "on" keyword in expression'));else{const l=Yp(n,r+1);new Kde(n,l,e,t,i,s,a,o).parse()}}function y3(n,e){return n.startsWith("prefetch")?new $e(e.start,e.start.moveBy(8)):null}class Kde{constructor(e,t,i,s,r,o,a,l){this.expression=e,this.start=t,this.span=i,this.triggers=s,this.errors=r,this.placeholder=o,this.prefetchSpan=a,this.onSourceSpan=l,this.index=0,this.tokens=(new BI).tokenize(e.slice(t))}parse(){for(;this.tokens.length>0&&this.index<this.tokens.length;){const e=this.token();if(!e.isIdentifier()){this.unexpectedToken(e);break}if(this.isFollowedByOrLast(44))this.consumeTrigger(e,[]),this.advance();else if(this.isFollowedByOrLast(40)){this.advance();const t=this.errors.length,i=this.consumeParameters();if(this.errors.length!==t)break;this.consumeTrigger(e,i),this.advance()}else this.index<this.tokens.length-1&&this.unexpectedToken(this.tokens[this.index+1]);this.advance()}}advance(){this.index++}isFollowedByOrLast(e){return this.index===this.tokens.length-1||this.tokens[this.index+1].isCharacter(e)}token(){return this.tokens[Math.min(this.index,this.tokens.length-1)]}consumeTrigger(e,t){const i=this.span.start.moveBy(this.start+e.index-this.tokens[0].index),s=new $e(i,i.moveBy(e.strValue.length)),r=i.moveBy(this.token().end-e.index),o=0===e.index,a=o?this.onSourceSpan:null,l=o?this.prefetchSpan:null,c=new $e(o?this.span.start:i,r);try{switch(e.toString()){case ts.IDLE:this.trackTrigger("idle",function Jde(n,e,t,i,s){if(n.length>0)throw new Error(`"${ts.IDLE}" trigger cannot have parameters`);return new $ie(e,t,i,s)}(t,s,c,l,a));break;case ts.TIMER:this.trackTrigger("timer",function ehe(n,e,t,i,s){if(1!==n.length)throw new Error(`"${ts.TIMER}" trigger must have exactly one parameter`);const r=C_(n[0]);if(null===r)throw new Error(`Could not parse time value of trigger "${ts.TIMER}"`);return new jie(r,e,t,i,s)}(t,s,c,this.prefetchSpan,this.onSourceSpan));break;case ts.INTERACTION:this.trackTrigger("interaction",function ihe(n,e,t,i,s,r){return fx(ts.INTERACTION,n,r),new lB(n[0]??null,e,t,i,s)}(t,s,c,this.prefetchSpan,this.onSourceSpan,this.placeholder));break;case ts.IMMEDIATE:this.trackTrigger("immediate",function the(n,e,t,i,s){if(n.length>0)throw new Error(`"${ts.IMMEDIATE}" trigger cannot have parameters`);return new Uie(e,t,i,s)}(t,s,c,this.prefetchSpan,this.onSourceSpan));break;case ts.HOVER:this.trackTrigger("hover",function nhe(n,e,t,i,s,r){return fx(ts.HOVER,n,r),new aB(n[0]??null,e,t,i,s)}(t,s,c,this.prefetchSpan,this.onSourceSpan,this.placeholder));break;case ts.VIEWPORT:this.trackTrigger("viewport",function she(n,e,t,i,s,r){return fx(ts.VIEWPORT,n,r),new cB(n[0]??null,e,t,i,s)}(t,s,c,this.prefetchSpan,this.onSourceSpan,this.placeholder));break;default:throw new Error(`Unrecognized trigger type "${e}"`)}}catch(u){this.error(e,u.message)}}consumeParameters(){const e=[];if(!this.token().isCharacter(40))return this.unexpectedToken(this.token()),e;this.advance();const t=[];let i="";for(;this.index<this.tokens.length;){const s=this.token();if(s.isCharacter(41)&&0===t.length){i.length&&e.push(i);break}s.type===He.Character&&g3.has(s.numValue)&&t.push(g3.get(s.numValue)),t.length>0&&s.isCharacter(t[t.length-1])&&t.pop(),0===t.length&&s.isCharacter(44)&&i.length>0?(e.push(i),i="",this.advance()):(i+=this.tokenText(),this.advance())}return(!this.token().isCharacter(41)||t.length>0)&&this.error(this.token(),"Unexpected end of expression"),this.index<this.tokens.length-1&&!this.tokens[this.index+1].isCharacter(44)&&this.unexpectedToken(this.tokens[this.index+1]),e}tokenText(){return this.expression.slice(this.start+this.token().index,this.start+this.token().end)}trackTrigger(e,t){_3(e,this.triggers,this.errors,t)}error(e,t){const i=this.span.start.moveBy(this.start+e.index),s=i.moveBy(e.end-e.index);this.errors.push(new Fe(new $e(i,s),t))}unexpectedToken(e){this.error(e,`Unexpected token "${e}"`)}}function _3(n,e,t,i){e[n]?t.push(new Fe(i.sourceSpan,`Duplicate "${n}" trigger is not allowed`)):e[n]=i}function fx(n,e,t){if(e.length>1)throw new Error(`"${n}" trigger can only have zero or one parameters`);if(0===e.length){if(null===t)throw new Error(`"${n}" trigger with no parameters can only be placed on an @defer that has a @placeholder block`);if(1!==t.children.length||!(t.children[0]instanceof ms))throw new Error(`"${n}" trigger with no parameters can only be placed on an @defer that has a @placeholder block with exactly one root element node`)}}function Yp(n,e=0){let t=!1;for(let i=e;i<n.length;i++)if(Zde.test(n[i]))t=!0;else if(t)return i;return-1}function C_(n){const e=n.match(Xde);if(!e)return null;const[t,i]=e;return parseFloat(t)*("s"===i?1e3:1)}const rhe=/^prefetch\s+when\s/,ohe=/^prefetch\s+on\s/,w3=/^minimum\s/,ahe=/^after\s/,lhe=/^when\s/,che=/^on\s/;function px(n){return"placeholder"===n||"loading"===n||"error"===n}function hhe(n,e){let t=null;for(const i of n.parameters){if(!w3.test(i.expression))throw new Error(`Unrecognized parameter in @placeholder block: "${i.expression}"`);{if(null!=t)throw new Error('@placeholder block can only have one "minimum" parameter');const s=C_(i.expression.slice(Yp(i.expression)));if(null===s)throw new Error('Could not parse time value of parameter "minimum"');t=s}}return new W0(me(e,n.children,n.children),t,n.nameSpan,n.sourceSpan,n.startSourceSpan,n.endSourceSpan,n.i18n)}function fhe(n,e){let t=null,i=null;for(const s of n.parameters)if(ahe.test(s.expression)){if(null!=t)throw new Error('@loading block can only have one "after" parameter');const r=C_(s.expression.slice(Yp(s.expression)));if(null===r)throw new Error('Could not parse time value of parameter "after"');t=r}else{if(!w3.test(s.expression))throw new Error(`Unrecognized parameter in @loading block: "${s.expression}"`);{if(null!=i)throw new Error('@loading block can only have one "minimum" parameter');const r=C_(s.expression.slice(Yp(s.expression)));if(null===r)throw new Error('Could not parse time value of parameter "minimum"');i=r}}return new Q0(me(e,n.children,n.children),t,i,n.nameSpan,n.sourceSpan,n.startSourceSpan,n.endSourceSpan,n.i18n)}function phe(n,e){if(n.parameters.length>0)throw new Error("@error block cannot have parameters");return new Y0(me(e,n.children,n.children),n.nameSpan,n.sourceSpan,n.startSourceSpan,n.endSourceSpan,n.i18n)}const mhe=/^(?:(bind-)|(let-)|(ref-|#)|(on-)|(bindon-)|(@))(.*)$/,Za_BANANA_BOX={start:"[(",end:")]"},Za_PROPERTY={start:"[",end:"]"},Za_EVENT={start:"(",end:")"};class _he{constructor(e,t){this.bindingParser=e,this.options=t,this.errors=[],this.styles=[],this.styleUrls=[],this.ngContentSelectors=[],this.commentNodes=[],this.inI18nBlock=!1,this.processedNodes=new Set}visitElement(e){const t=hp(e.i18n);t&&(this.inI18nBlock&&this.reportError("Cannot mark an element as translatable inside of a translatable section. Please remove the nested i18n marker.",e.sourceSpan),this.inI18nBlock=!0);const i=u3(e);if(i.type===Es.SCRIPT)return null;if(i.type===Es.STYLE){const v=function She(n){return 1===n.children.length&&n.children[0]instanceof oc?n.children[0].value:null}(e);return null!==v&&this.styles.push(v),null}if(i.type===Es.STYLESHEET&&function Ide(n){if(null==n||0===n.length||"/"==n[0])return!1;const e=n.match(xde);return null===e||"package"==e[1]||"asset"==e[1]}(i.hrefAttr))return this.styleUrls.push(i.hrefAttr),null;const s=function Bie(n){return"ng-template"===Pi(n)[1]}(e.name),r=[],o=[],a=[],l=[],c=[],u={},d=[],h=[];let p,g,f=!1;for(const v of e.attrs){let _=!1;const E=T3(v.name);let b=!1;if(v.i18n&&(u[v.name]=v.i18n),E.startsWith("*")){f&&this.reportError("Can't have multiple template bindings on one element. Use only one attribute prefixed with *",v.sourceSpan),b=!0,f=!0;const T=v.value,V=E.substring(1),N=[];this.bindingParser.parseInlineTemplateBinding(V,T,v.sourceSpan,v.valueSpan?v.valueSpan.start.offset:v.sourceSpan.start.offset+v.name.length,[],d,N,!0),h.push(...N.map(D=>new zl(D.name,D.value,D.sourceSpan,D.keySpan,D.valueSpan)))}else _=this.parseAttribute(s,v,[],r,o,a,l);!_&&!b&&c.push(this.visitAttribute(v))}if(p=i.nonBindable?me(Ehe,e.children).flat(1/0):me(this,e.children,e.children),i.type===Es.NG_CONTENT){e.children&&!e.children.every(E=>function bhe(n){return n instanceof oc&&0==n.value.trim().length}(E)||function Che(n){return n instanceof Nd}(E))&&this.reportError("<ng-content> element cannot have content.",e.sourceSpan);const v=i.selectAttr,_=e.attrs.map(E=>this.visitAttribute(E));g=new fB(v,_,e.sourceSpan,e.i18n),this.ngContentSelectors.push(v)}else if(s){const v=this.extractAttributes(e.name,r,u);g=new Ps(e.name,c,v.bound,o,[],p,l,a,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n)}else{const v=this.extractAttributes(e.name,r,u);g=new ms(e.name,c,v.bound,o,p,l,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n)}if(f){const v=this.extractAttributes("ng-template",d,u),_=[];v.literal.forEach(V=>_.push(V)),v.bound.forEach(V=>_.push(V));const E=g instanceof ms?{attributes:g.attributes,inputs:g.inputs,outputs:g.outputs}:{attributes:[],inputs:[],outputs:[]};g=new Ps(g instanceof Ps?null:g.name,E.attributes,E.inputs,E.outputs,_,[g],[],h,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,s&&t?void 0:e.i18n)}return t&&(this.inI18nBlock=!1),g}visitAttribute(e){return new Sy(e.name,e.value,e.sourceSpan,e.keySpan,e.valueSpan,e.i18n)}visitText(e){return this.processedNodes.has(e)?null:this._visitTextWithInterpolation(e.value,e.sourceSpan,e.tokens,e.i18n)}visitExpansion(e){if(!e.i18n)return null;if(!hp(e.i18n))throw new Error(`Invalid type "${e.i18n.constructor}" for "i18n" property of ${e.sourceSpan.toString()}. Expected a "Message"`);const t=e.i18n,i={},s={};return Object.keys(t.placeholders).forEach(r=>{const o=t.placeholders[r];if(r.startsWith("VAR_")){const a=r.trim(),l=this.bindingParser.parseInterpolationExpression(o.text,o.sourceSpan);i[a]=new cp(l,o.sourceSpan)}else s[r]=this._visitTextWithInterpolation(o.text,o.sourceSpan,null)}),new J0(i,s,e.sourceSpan,t)}visitExpansionCase(e){return null}visitComment(e){return this.options.collectCommentNodes&&this.commentNodes.push(new Cy(e.value||"",e.sourceSpan)),null}visitBlockParameter(){return null}visitBlock(e,t){const i=Array.isArray(t)?t.indexOf(e):-1;if(-1===i)throw new Error("Visitor invoked incorrectly. Expecting visitBlock to be invoked siblings array as its context");if(this.processedNodes.has(e))return null;let s=null;switch(e.name){case"defer":s=function uhe(n,e,t,i){const s=[],{placeholder:r,loading:o,error:a}=function dhe(n,e,t){let i=null,s=null,r=null;for(const o of n)try{if(!px(o.name)){e.push(new Fe(o.startSourceSpan,`Unrecognized block "@${o.name}"`));break}switch(o.name){case"placeholder":null!==i?e.push(new Fe(o.startSourceSpan,"@defer block can only have one @placeholder block")):i=hhe(o,t);break;case"loading":null!==s?e.push(new Fe(o.startSourceSpan,"@defer block can only have one @loading block")):s=fhe(o,t);break;case"error":null!==r?e.push(new Fe(o.startSourceSpan,"@defer block can only have one @error block")):r=phe(o,t)}}catch(a){e.push(new Fe(o.startSourceSpan,a.message))}return{placeholder:i,loading:s,error:r}}(e,s,t),{triggers:l,prefetchTriggers:c}=function ghe(n,e,t,i){const s={},r={};for(const o of n)lhe.test(o.expression)?m3(o,e,s,t):che.test(o.expression)?v3(o,s,t,i):rhe.test(o.expression)?m3(o,e,r,t):ohe.test(o.expression)?v3(o,r,t,i):t.push(new Fe(o.sourceSpan,"Unrecognized trigger"));return{triggers:s,prefetchTriggers:r}}(n.parameters,i,s,r);let u=n.endSourceSpan,d=n.sourceSpan.end;if(e.length>0){const p=e[e.length-1];u=p.endSourceSpan,d=p.sourceSpan.end}const h=new $e(n.sourceSpan.start,d);return{node:new up(me(t,n.children,n.children),l,c,r,o,a,n.nameSpan,h,n.sourceSpan,n.startSourceSpan,u,n.i18n),errors:s}}(e,this.findConnectedBlocks(i,t,px),this,this.bindingParser);break;case"switch":s=function zde(n,e,t){const i=function Qde(n){const e=[];let t=!1;if(1!==n.parameters.length)return e.push(new Fe(n.sourceSpan,"@switch block must have exactly one parameter")),e;for(const i of n.children)if(!(i instanceof Nd||i instanceof oc&&0===i.value.trim().length)){if(!(i instanceof eo)||"case"!==i.name&&"default"!==i.name){e.push(new Fe(i.sourceSpan,"@switch block can only contain @case and @default blocks"));continue}"default"===i.name?(t?e.push(new Fe(i.sourceSpan,"@switch block can only have one @default block")):i.parameters.length>0&&e.push(new Fe(i.sourceSpan,"@default block cannot have parameters")),t=!0):"case"===i.name&&1!==i.parameters.length&&e.push(new Fe(i.sourceSpan,"@case block must have exactly one parameter"))}return e}(n),s=n.parameters.length>0?Qp(n.parameters[0],t):t.parseBinding("",!1,n.sourceSpan,0),r=[],o=[];let a=null;for(const l of n.children){if(!(l instanceof eo))continue;if(("case"!==l.name||0===l.parameters.length)&&"default"!==l.name){o.push(new hB(l.name,l.sourceSpan,l.nameSpan));continue}const c="case"===l.name?Qp(l.parameters[0],t):null,u=new X0(c,me(e,l.children,l.children),l.sourceSpan,l.startSourceSpan,l.endSourceSpan,l.nameSpan,l.i18n);null===c?a=u:r.push(u)}return null!==a&&r.push(a),{node:new uB(s,r,o,n.sourceSpan,n.startSourceSpan,n.endSourceSpan,n.nameSpan),errors:i}}(e,this,this.bindingParser);break;case"for":s=function Hde(n,e,t,i){const s=[],r=function qde(n,e,t){if(0===n.parameters.length)return e.push(new Fe(n.sourceSpan,"@for loop does not have an expression")),null;const[i,...s]=n.parameters,r=function Yde(n,e){const t=n.expression,i=/^\s$/;let s=0,r=0,o=t.length-1;for(let a=0;a<t.length;a++){const l=t[a];if("("!==l){if(i.test(l))continue;break}r=a+1,s++}if(0===s)return t;for(let a=t.length-1;a>-1;a--){const l=t[a];if(")"!==l){if(i.test(l))continue;break}if(o=a,s--,0===s)break}return 0!==s?(e.push(new Fe(n.sourceSpan,"Unclosed parentheses in expression")),null):t.slice(r,o)}(i,e)?.match(Bde);if(!r||0===r[2].trim().length)return e.push(new Fe(i.sourceSpan,'Cannot parse expression. @for loop expression must match the pattern "<identifier> of <expression>"')),null;const[,o,a]=r,l=i.expression.split(" ")[0],c=new $e(i.sourceSpan.start,i.sourceSpan.start.moveBy(l.length)),u={itemName:new zl(o,"$implicit",c,c),trackBy:null,expression:Qp(i,t,a),context:{}};for(const d of s){const h=d.expression.match(Ude);if(null!==h){const p=new $e(d.sourceSpan.start.moveBy(h[0].length-h[1].length),d.sourceSpan.end);Gde(d.sourceSpan,h[1],p,u.context,e);continue}const f=d.expression.match(Vde);if(null===f)e.push(new Fe(d.sourceSpan,`Unrecognized @for loop paramater "${d.expression}"`));else if(null!==u.trackBy)e.push(new Fe(d.sourceSpan,'@for loop can only have one "track" expression'));else{const p=Qp(d,t,f[1]);p.ast instanceof Xi&&e.push(new Fe(d.sourceSpan,'@for loop must have a "track" expression'));const g=new $e(d.sourceSpan.start,d.sourceSpan.start.moveBy(5));u.trackBy={expression:p,keywordSpan:g}}}for(const d of hx)if(!u.context.hasOwnProperty(d)){const h=new $e(n.startSourceSpan.end,n.startSourceSpan.end);u.context[d]=new zl(d,d,h,h)}return u}(n,s,i);let o=null,a=null;for(const l of e)"empty"===l.name?null!==a?s.push(new Fe(l.sourceSpan,"@for loop can only have one @empty block")):l.parameters.length>0?s.push(new Fe(l.sourceSpan,"@empty block cannot have parameters")):a=new Z0(me(t,l.children,l.children),l.sourceSpan,l.startSourceSpan,l.endSourceSpan,l.nameSpan,l.i18n):s.push(new Fe(l.sourceSpan,`Unrecognized @for loop block "${l.name}"`));if(null!==r)if(null===r.trackBy)s.push(new Fe(n.sourceSpan,'@for loop must have a "track" expression'));else{const l=a?.endSourceSpan??n.endSourceSpan,c=new $e(n.sourceSpan.start,l?.end??n.sourceSpan.end);o=new Ty(r.itemName,r.expression,r.trackBy.expression,r.trackBy.keywordSpan,r.context,me(t,n.children,n.children),a,c,n.sourceSpan,n.startSourceSpan,l,n.nameSpan,n.i18n)}return{node:o,errors:s}}(e,this.findConnectedBlocks(i,t,h3),this,this.bindingParser);break;case"if":s=function jde(n,e,t,i){const s=function Wde(n){const e=[];let t=!1;for(let i=0;i<n.length;i++){const s=n[i];"else"===s.name?(t?e.push(new Fe(s.sourceSpan,"Conditional can only have one @else block")):n.length>1&&i<n.length-1?e.push(new Fe(s.sourceSpan,"@else block must be last inside the conditional")):s.parameters.length>0&&e.push(new Fe(s.sourceSpan,"@else block cannot have parameters")),t=!0):dx.test(s.name)||e.push(new Fe(s.sourceSpan,`Unrecognized conditional block @${s.name}`))}return e}(e),r=[],o=p3(n,s,i);null!==o&&r.push(new dp(o.expression,me(t,n.children,n.children),o.expressionAlias,n.sourceSpan,n.startSourceSpan,n.endSourceSpan,n.nameSpan,n.i18n));for(const d of e)if(dx.test(d.name)){const h=p3(d,s,i);if(null!==h){const f=me(t,d.children,d.children);r.push(new dp(h.expression,f,h.expressionAlias,d.sourceSpan,d.startSourceSpan,d.endSourceSpan,d.nameSpan,d.i18n))}}else if("else"===d.name){const h=me(t,d.children,d.children);r.push(new dp(null,h,null,d.sourceSpan,d.startSourceSpan,d.endSourceSpan,d.nameSpan,d.i18n))}const l=r.length>0?r[r.length-1].endSourceSpan:n.endSourceSpan;let c=n.sourceSpan;const u=r[r.length-1];return void 0!==u&&(c=new $e((r.length>0?r[0].startSourceSpan:n.startSourceSpan).start,u.sourceSpan.end)),{node:new dB(r,c,n.startSourceSpan,l,n.nameSpan),errors:s}}(e,this.findConnectedBlocks(i,t,f3),this,this.bindingParser);break;default:let r;px(e.name)?(r=`@${e.name} block can only be used after an @defer block.`,this.processedNodes.add(e)):h3(e.name)?(r=`@${e.name} block can only be used after an @for block.`,this.processedNodes.add(e)):f3(e.name)?(r=`@${e.name} block can only be used after an @if or @else if block.`,this.processedNodes.add(e)):r=`Unrecognized block @${e.name}.`,s={node:new hB(e.name,e.sourceSpan,e.nameSpan),errors:[new Fe(e.sourceSpan,r)]}}return this.errors.push(...s.errors),s.node}findConnectedBlocks(e,t,i){const s=[];for(let r=e+1;r<t.length;r++){const o=t[r];if(o instanceof oc&&0===o.value.trim().length)this.processedNodes.add(o);else{if(!(o instanceof eo&&i(o.name)))break;s.push(o),this.processedNodes.add(o)}}return s}extractAttributes(e,t,i){const s=[],r=[];return t.forEach(o=>{const a=i[o.name];if(o.isLiteral)r.push(new Sy(o.name,o.expression.source||"",o.sourceSpan,o.keySpan,o.valueSpan,a));else{const l=this.bindingParser.createBoundElementProperty(e,o,!0,!1);s.push(Iy.fromBoundElementProperty(l,a))}}),{bound:s,literal:r}}parseAttribute(e,t,i,s,r,o,a){const l=T3(t.name),c=t.value,u=t.sourceSpan,d=t.valueSpan?t.valueSpan.start.offset:u.start.offset;function h(_,E,b){const V=_.start.moveBy(E.length+(t.name.length-l.length)),N=V.moveBy(b.length);return new $e(V,N,V,b)}const f=l.match(mhe);if(f){if(null!=f[1]){const _=f[7],E=h(u,f[1],_);this.bindingParser.parsePropertyBinding(_,c,!1,!1,u,d,t.valueSpan,i,s,E)}else if(f[2])if(e){const _=f[7],E=h(u,f[2],_);this.parseVariable(_,c,u,E,t.valueSpan,o)}else this.reportError('"let-" is only supported on ng-template elements.',u);else if(f[3]){const _=f[7],E=h(u,f[3],_);this.parseReference(_,c,u,E,t.valueSpan,a)}else if(f[4]){const _=[],E=f[7],b=h(u,f[4],E);this.bindingParser.parseEvent(E,c,!1,u,t.valueSpan||u,i,_,b),gx(_,r)}else if(f[5]){const _=f[7],E=h(u,f[5],_);this.bindingParser.parsePropertyBinding(_,c,!1,!0,u,d,t.valueSpan,i,s,E),this.parseAssignmentEvent(_,c,u,t.valueSpan,i,r,E)}else if(f[6]){const _=h(u,"",l);this.bindingParser.parseLiteralAttr(l,c,u,d,t.valueSpan,i,s,_)}return!0}let p=null;if(l.startsWith(Za_BANANA_BOX.start)?p=Za_BANANA_BOX:l.startsWith(Za_PROPERTY.start)?p=Za_PROPERTY:l.startsWith(Za_EVENT.start)&&(p=Za_EVENT),null!==p&&l.endsWith(p.end)&&l.length>p.start.length+p.end.length){const _=l.substring(p.start.length,l.length-p.end.length),E=h(u,p.start,_);if(p.start===Za_BANANA_BOX.start)this.bindingParser.parsePropertyBinding(_,c,!1,!0,u,d,t.valueSpan,i,s,E),this.parseAssignmentEvent(_,c,u,t.valueSpan,i,r,E);else if(p.start===Za_PROPERTY.start)this.bindingParser.parsePropertyBinding(_,c,!1,!1,u,d,t.valueSpan,i,s,E);else{const b=[];this.bindingParser.parseEvent(_,c,!1,u,t.valueSpan||u,i,b,E),gx(b,r)}return!0}const g=h(u,"",l);return this.bindingParser.parsePropertyInterpolation(l,c,u,t.valueSpan,i,s,g,t.valueTokens??null)}_visitTextWithInterpolation(e,t,i,s){const r=r3(e),o=this.bindingParser.parseInterpolation(r,t,i);return o?new cp(o,t,s):new jl(r,t)}parseVariable(e,t,i,s,r,o){e.indexOf("-")>-1?this.reportError('"-" is not allowed in variable names',i):0===e.length&&this.reportError("Variable does not have a name",i),o.push(new zl(e,t,i,s,r))}parseReference(e,t,i,s,r,o){e.indexOf("-")>-1?this.reportError('"-" is not allowed in reference names',i):0===e.length?this.reportError("Reference does not have a name",i):o.some(a=>a.name===e)&&this.reportError(`Reference "#${e}" is defined more than once`,i),o.push(new K0(e,t,i,s,r))}parseAssignmentEvent(e,t,i,s,r,o,a){const l=[];this.bindingParser.parseEvent(`${e}Change`,t,!0,i,s||i,r,l,a),gx(l,o)}reportError(e,t,i=ja.ERROR){this.errors.push(new Fe(t,e,i))}}const Ehe=new class whe{visitElement(e){const t=u3(e);if(t.type===Es.SCRIPT||t.type===Es.STYLE||t.type===Es.STYLESHEET)return null;const i=me(this,e.children,null);return new ms(e.name,me(this,e.attrs),[],[],i,[],e.sourceSpan,e.startSourceSpan,e.endSourceSpan)}visitComment(e){return null}visitAttribute(e){return new Sy(e.name,e.value,e.sourceSpan,e.keySpan,e.valueSpan,e.i18n)}visitText(e){return new jl(e.value,e.sourceSpan)}visitExpansion(e){return null}visitExpansionCase(e){return null}visitBlock(e,t){const i=[new jl(e.startSourceSpan.toString(),e.startSourceSpan),...me(this,e.children)];return null!==e.endSourceSpan&&i.push(new jl(e.endSourceSpan.toString(),e.endSourceSpan)),i}visitBlockParameter(e,t){return null}};function T3(n){return/^data-/i.test(n)?n.substring(5):n}function gx(n,e){e.push(...n.map(t=>xy.fromParsedEvent(t)))}var to=function(n){return n[n.ELEMENT=0]="ELEMENT",n[n.TEMPLATE=1]="TEMPLATE",n}(to||{});class mx{constructor(e,t,i=0,s=null,r,o){this.index=e,this.ref=t,this.level=i,this.templateIndex=s,this.meta=r,this.registry=o,this.bindings=new Set,this.placeholders=new Map,this.isEmitted=!1,this._unresolvedCtxCount=0,this._registry=o||function Ihe(){return{getUniqueId:use(),icus:new Map}}(),this.id=this._registry.getUniqueId()}appendTag(e,t,i,s){t.isVoid&&s||pp(this.placeholders,t.isVoid||!s?t.startName:t.closeName,{type:e,index:i,ctx:this.id,isVoid:t.isVoid,closed:s})}appendBlockPart(e,t,i){pp(this.placeholders,i?e.closeName:e.startName,{type:to.TEMPLATE,index:t,ctx:this.id,closed:i})}get icus(){return this._registry.icus}get isRoot(){return 0===this.level}get isResolved(){return 0===this._unresolvedCtxCount}getSerializedPlaceholders(){const e=new Map;return this.placeholders.forEach((t,i)=>e.set(i,t.map(xhe))),e}appendBinding(e){this.bindings.add(e)}appendIcu(e,t){pp(this._registry.icus,e,t)}appendBoundText(e){EB(e,this.bindings.size,this.id).forEach((i,s)=>pp(this.placeholders,s,...i))}appendTemplate(e,t){this.appendTag(to.TEMPLATE,e,t,!1),this.appendTag(to.TEMPLATE,e,t,!0),this._unresolvedCtxCount++}appendBlock(e,t){this.appendBlockPart(e,t,!1),this.appendBlockPart(e,t,!0),this._unresolvedCtxCount++}appendElement(e,t,i){this.appendTag(to.ELEMENT,e,t,i)}appendProjection(e,t){this.appendTag(to.ELEMENT,e,t,!1),this.appendTag(to.ELEMENT,e,t,!0)}forkChildContext(e,t,i){return new mx(e,this.ref,this.level+1,t,i,this._registry)}reconcileChildContext(e){["start","close"].forEach(i=>{const o=(this.placeholders.get(e.meta[`${i}Name`])||[]).find(A3(this.id,e.templateIndex));o&&(o.ctx=e.id)}),e.placeholders.forEach((i,s)=>{const r=this.placeholders.get(s);if(!r)return void this.placeholders.set(s,i);const o=r.findIndex(A3(e.id,e.templateIndex));if(o>=0){const a=s.startsWith("CLOSE");s.endsWith("NG-TEMPLATE")?r.splice(o+(a?0:1),0,...i):(i[a?i.length-1:0].tmpl=r[o],r.splice(o,1,...i))}else r.push(...i);this.placeholders.set(s,r)}),this._unresolvedCtxCount--}}function vx(n,e,t,i){return Ay(`${i?"/":""}${n}${e}`,t)}function D3(n,{index:e,ctx:t,isVoid:i},s){return i?vx(n,e,t)+vx(n,e,t,!0):vx(n,e,t,s)}function A3(n,e){return t=>"object"==typeof t&&t.type===to.TEMPLATE&&t.index===e&&t.ctx===n}function xhe(n){const e=(i,s)=>D3("#",i,s),t=(i,s)=>D3("*",i,s);switch(n.type){case to.ELEMENT:return n.closed?e(n,!0)+(n.tmpl?t(n.tmpl,!0):""):n.tmpl?t(n.tmpl)+e(n)+(n.isVoid?t(n.tmpl,!0):""):e(n);case to.TEMPLATE:return t(n,n.closed);default:return n}}const S_=2;class k3{constructor(e){this._directiveExpr=e,this._hasInitialValues=!1,this.hasBindings=!1,this.hasBindingsWithPipes=!1,this._classMapInput=null,this._styleMapInput=null,this._singleStyleInputs=null,this._singleClassInputs=null,this._lastStylingInput=null,this._firstStylingInput=null,this._stylesIndex=new Map,this._classesIndex=new Map,this._initialStyleValues=[],this._initialClassValues=[]}registerBoundInput(e){let t=null,i=e.name;switch(e.type){case 0:t=this.registerInputBasedOnName(i,e.value,e.sourceSpan);break;case 3:t=this.registerStyleInput(i,!1,e.value,e.sourceSpan,e.unit);break;case 2:t=this.registerClassInput(i,!1,e.value,e.sourceSpan)}return!!t}registerInputBasedOnName(e,t,i){let s=null;const r=e.substring(0,6),o="style"===e||"style."===r||"style!"===r;if(o||!o&&("class"===e||"class."===r||"class!"===r)){const l="."!==e.charAt(5),c=e.slice(l?5:6);s=o?this.registerStyleInput(c,l,t,i):this.registerClassInput(c,l,t,i)}return s}registerStyleInput(e,t,i,s,r){if(R3(i))return null;(function Mhe(n){return n.startsWith("--")})(e)||(e=YI(e));const{property:o,hasOverrideFlag:a,suffix:l}=N3(e),c={name:o,suffix:r="string"==typeof r&&0!==r.length?r:l,value:i,sourceSpan:s,hasOverrideFlag:a};return t?this._styleMapInput=c:((this._singleStyleInputs=this._singleStyleInputs||[]).push(c),M3(this._stylesIndex,o)),this._lastStylingInput=c,this._firstStylingInput=this._firstStylingInput||c,this._checkForPipes(i),this.hasBindings=!0,c}registerClassInput(e,t,i,s){if(R3(i))return null;const{property:r,hasOverrideFlag:o}=N3(e),a={name:r,value:i,sourceSpan:s,hasOverrideFlag:o,suffix:null};return t?this._classMapInput=a:((this._singleClassInputs=this._singleClassInputs||[]).push(a),M3(this._classesIndex,r)),this._lastStylingInput=a,this._firstStylingInput=this._firstStylingInput||a,this._checkForPipes(i),this.hasBindings=!0,a}_checkForPipes(e){e instanceof Vs&&e.ast instanceof Sp&&(this.hasBindingsWithPipes=!0)}registerStyleAttr(e){this._initialStyleValues=I$(e),this._hasInitialValues=!0}registerClassAttr(e){this._initialClassValues=e.trim().split(/\s+/g),this._hasInitialValues=!0}populateInitialStylingAttrs(e){if(this._initialClassValues.length){e.push(w(1));for(let t=0;t<this._initialClassValues.length;t++)e.push(w(this._initialClassValues[t]))}if(this._initialStyleValues.length){e.push(w(2));for(let t=0;t<this._initialStyleValues.length;t+=2)e.push(w(this._initialStyleValues[t]),w(this._initialStyleValues[t+1]))}}assignHostAttrs(e,t){this._directiveExpr&&(e.length||this._hasInitialValues)&&(this.populateInitialStylingAttrs(e),t.set("hostAttrs",le(e)))}buildClassMapInstruction(e){return this._classMapInput?this._buildMapBasedInstruction(e,!0,this._classMapInput):null}buildStyleMapInstruction(e){return this._styleMapInput?this._buildMapBasedInstruction(e,!1,this._styleMapInput):null}_buildMapBasedInstruction(e,t,i){let s=S_;const r=i.value.visit(e);let o;return r instanceof Mn?(s+=r.expressions.length,o=t?function Dhe(n){switch(Ql(n)){case 1:return m.classMap;case 3:return m.classMapInterpolate1;case 5:return m.classMapInterpolate2;case 7:return m.classMapInterpolate3;case 9:return m.classMapInterpolate4;case 11:return m.classMapInterpolate5;case 13:return m.classMapInterpolate6;case 15:return m.classMapInterpolate7;case 17:return m.classMapInterpolate8;default:return m.classMapInterpolateV}}(r):function Ahe(n){switch(Ql(n)){case 1:return m.styleMap;case 3:return m.styleMapInterpolate1;case 5:return m.styleMapInterpolate2;case 7:return m.styleMapInterpolate3;case 9:return m.styleMapInterpolate4;case 11:return m.styleMapInterpolate5;case 13:return m.styleMapInterpolate6;case 15:return m.styleMapInterpolate7;case 17:return m.styleMapInterpolate8;default:return m.styleMapInterpolateV}}(r)):o=t?m.classMap:m.styleMap,{reference:o,calls:[{supportsInterpolation:!0,sourceSpan:i.sourceSpan,allocateBindingSlots:s,params:a=>{const l=a(r);return Array.isArray(l)?l:[l]}}]}}_buildSingleInputs(e,t,i,s,r){const o=[];return t.forEach(a=>{const l=o[o.length-1],c=a.value.visit(i);let u=e,d=S_;c instanceof Mn&&(d+=c.expressions.length,s&&(u=s(c)));const h={sourceSpan:a.sourceSpan,allocateBindingSlots:d,supportsInterpolation:!!s,params:f=>{const p=[];p.push(w(a.name));const g=f(c);return Array.isArray(g)?p.push(...g):p.push(g),!r&&null!==a.suffix&&p.push(w(a.suffix)),p}};l&&l.reference===u?l.calls.push(h):o.push({reference:u,calls:[h]})}),o}_buildClassInputs(e){return this._singleClassInputs?this._buildSingleInputs(m.classProp,this._singleClassInputs,e,null,!0):[]}_buildStyleInputs(e){return this._singleStyleInputs?this._buildSingleInputs(m.styleProp,this._singleStyleInputs,e,khe,!1):[]}buildUpdateLevelInstructions(e){const t=[];if(this.hasBindings){const i=this.buildStyleMapInstruction(e);i&&t.push(i);const s=this.buildClassMapInstruction(e);s&&t.push(s),t.push(...this._buildStyleInputs(e)),t.push(...this._buildClassInputs(e))}return t}}function M3(n,e){n.has(e)||n.set(e,n.size)}function N3(n){let e=!1;const t=n.indexOf("!important");-1!==t&&(n=t>0?n.substring(0,t):"",e=!0);let i=null,s=n;const r=n.lastIndexOf(".");return r>0&&(i=n.slice(r+1),s=n.substring(0,r)),{property:s,suffix:i,hasOverrideFlag:e}}function khe(n){switch(Ql(n)){case 1:return m.styleProp;case 3:return m.stylePropInterpolate1;case 5:return m.stylePropInterpolate2;case 7:return m.stylePropInterpolate3;case 9:return m.stylePropInterpolate4;case 11:return m.stylePropInterpolate5;case 13:return m.stylePropInterpolate6;case 15:return m.stylePropInterpolate7;case 17:return m.stylePropInterpolate8;default:return m.stylePropInterpolateV}}function R3(n){return n instanceof Vs&&(n=n.ast),n instanceof Xi}const yx=new Set(["$event"]),I_="ng-template",_x=new Map([["window",m.resolveWindow],["document",m.resolveDocument],["body",m.resolveBody]]),Phe=[" ","\n","\r","\t"];function Ka(n,e){return Ju(te(vp).bitwiseAnd(w(n),null,!1),e)}function P3(n,e=null,t=null){const{type:i,name:s,target:r,phase:o,handler:a}=n;if(r&&!_x.has(r))throw new Error(`Unexpected global target '${r}' defined for '${s}' event.\n        Supported list of global targets: ${Array.from(_x.keys())}.`);const l="$event",c=new Set,u=null===t||0===t.bindingLevel?te(Fi):t.getOrCreateSharedContextVar(0),d=2===n.type?function Zse(n,e,t,i,s,r,o){n??=new EI(o);const a=new Ap(n,e,i,!1,s,r);let l=cV(t).visit(a,ct.Statement);if(!(l instanceof Tn))throw new Error("Illegal state: unsupported expression in two-way action binding.");l=function Kse(n){if(Yy(n))return Qy(n);if(n instanceof Oe&&Yy(n.rhs))return new Oe(n.operator,n.lhs,Qy(n.rhs));if(n instanceof Ri&&Yy(n.falseCase))return new Ri(n.condition,n.trueCase,Qy(n.falseCase));if(n instanceof ur){let e=n.condition;for(;;){if(!(e instanceof ur)){if(Yy(e))return Qy(e);break}e=e.condition}}throw new Error("Illegal state: unsupported expression in two-way action binding.")}(l.expr).toStmt();const c=[];return Xy(l,c),dV(a.temporaryCount,i,c),c.push(new ln(fd.event)),r?.add(fd.event.name),a.usesImplicitReceiver&&n.notifyImplicitReceiverUse(),c}(t,u,a,"b",n.handlerSpan,c,yx):function Xse(n,e,t,i,s,r,o){n??=new EI(o);const a=new Ap(n,e,i,!1,s,r),l=[];Xy(cV(t).visit(a,ct.Statement),l),dV(a.temporaryCount,i,l),a.usesImplicitReceiver&&n.notifyImplicitReceiverUse();const c=l.length-1;if(c>=0){const u=l[c];u instanceof Tn&&(l[c]=new ln(u.expr))}return l}(t,u,a,"b",n.handlerSpan,c,yx),h=[],f=t?.variableDeclarations(),p=t?.restoreViewStatement();if(f&&h.push(...f),h.push(...d),p){h.unshift(p);const T=h[h.length-1];T instanceof ln?h[h.length-1]=new ln(Wl(T.value.sourceSpan,m.resetView,[T.value])):h.push(new Tn(Wl(null,m.resetView,[])))}const g=1===i?function kie(n,e){return`${eB}${n}.${e}`}(s,o):s,v=e&&Qr(e),_=[];c.has(l)&&_.push(new gt(l,Ms));const E=dr(_,h,ui,null,v),b=[w(g),E];return r&&b.push(w(!1),z(_x.get(r))),b}class Fhe{constructor(e,t,i,s){this.name=e,this.index=t,this.scope=i,this.visitor=s}getConstCount(){return this.visitor.getConstCount()}getVarCount(){return this.visitor.getVarCount()}}class wx{constructor(e,t,i=0,s,r,o,a,l,c,u,d,h,f,p=function Ohe(){return{prepareStatements:[],constExpressions:[],i18nVarRefsCache:new Map}}()){this.constantPool=e,this.level=i,this.contextName=s,this.i18nContext=r,this.templateIndex=o,this.templateName=a,this._namespace=l,this.i18nUseExternalIds=u,this.deferBlocks=d,this.elementLocations=h,this.allDeferrableDepsFn=f,this._constants=p,this._dataIndex=0,this._bindingContext=0,this._prefixCode=[],this._creationCodeFns=[],this._updateCodeFns=[],this._currentIndex=0,this._tempVariables=[],this._controlFlowTempVariable=null,this._nestedTemplateFns=[],this.i18n=null,this._pureFunctionSlots=0,this._bindingSlots=0,this._ngContentReservedSlots=[],this._ngContentSelectorsOffset=0,this._implicitReceiverExpr=null,this.visitReference=vs,this.visitVariable=vs,this.visitTextAttribute=vs,this.visitBoundAttribute=vs,this.visitBoundEvent=vs,this.visitDeferredTrigger=vs,this.visitDeferredBlockError=vs,this.visitDeferredBlockLoading=vs,this.visitDeferredBlockPlaceholder=vs,this.visitIfBlockBranch=vs,this.visitSwitchBlockCase=vs,this.visitForLoopBlockEmpty=vs,this.visitUnknownBlock=vs,this._bindingScope=t.nestedScope(i),this.fileBasedI18nSuffix=c.replace(/[^A-Za-z0-9]/g,"_")+"_",this._valueConverter=new O3(e,()=>this.allocateDataSlot(),g=>this.allocatePureFunctionSlots(g),(g,v,_,E)=>{this._bindingScope.set(this.level,v,E),this.creationInstruction(null,m.pipe,[w(_),w(g)])})}buildTemplateFunction(e,t,i=0,s,r){this._ngContentSelectorsOffset=i,this._namespace!==m.namespaceHTML&&this.creationInstruction(null,this._namespace),t.forEach(p=>{const g=r?.[p.name];this.registerContextVariables(p.name,p.value),g&&this.registerContextVariables(g,p.value)});const o=this.i18nContext||hp(s)&&!fp(s)&&!(function Whe(n){return 1===n.length&&n[0]instanceof ms}(e)&&e[0].i18n===s),a=bx(e);if(o&&this.i18nStart(null,s,a),Ot(this,e),this._pureFunctionSlots+=this._bindingSlots,this._valueConverter.updatePipeSlotOffsets(this._bindingSlots),this._nestedTemplateFns.forEach(p=>p()),0===this.level&&this._ngContentReservedSlots.length){const p=[];if(this._ngContentReservedSlots.length>1||"*"!==this._ngContentReservedSlots[0]){const g=this._ngContentReservedSlots.map(v=>"*"!==v?Uu(v):v);p.push(this.constantPool.getConstLiteral(gn(g),!0))}this.creationInstruction(null,m.projectionDef,p,!0)}o&&this.i18nEnd(null,a);const l=My(this._creationCodeFns),c=My(this._updateCodeFns),u=this._bindingScope.viewSnapshotStatements(),d=this._bindingScope.variableDeclarations().concat(this._tempVariables),h=l.length>0?[Ka(1,u.concat(l))]:[],f=c.length>0?[Ka(2,d.concat(c))]:[];return dr([new gt(vp,zu),new gt(Fi,null)],[...this._prefixCode,...h,...f],ui,null,this.templateName)}getLocal(e){return this._bindingScope.get(e)}notifyImplicitReceiverUse(){this._bindingScope.notifyImplicitReceiverUse()}maybeRestoreView(){this._bindingScope.maybeRestoreView()}i18nTranslate(e,t={},i,s){const r=i||this.i18nGenerateMainBlockVar(),a=function Xhe(n,e,t,i={},s){i=Object.fromEntries(Object.entries(i).sort());const r=[bB(e),Ju(Ku(te(U3)).notIdentical(w("undefined",py)).and(te(U3)),w$(e,n,t,i),E$(e,n,gp(i,!1)))];return s&&r.push(new Tn(e.set(s(e)))),r}(e,r,this.i18nGenerateClosureVar(e.id),t,s);return this._constants.prepareStatements.push(...a),r}registerContextVariables(e,t){const i=this._bindingScope.freshReferenceName(),s=this.level,r=t===aI,o=te(e+i);this._bindingScope.set(s,e,a=>r&&a.bindingLevel===s&&!a.isListenerScope()?te(Fi):o,1,(a,l)=>{let c;if(a.bindingLevel===s)if(a.isListenerScope()&&a.hasRestoreViewVariable())c=te(CB),a.notifyRestoredViewContextUse();else{if(r)return[];c=te(Fi)}else c=a.getSharedContextName(s)||Ex(l);return[o.set(r?c:c.prop(t||"$implicit")).toConstDecl()]})}i18nAppendBindings(e){e.length>0&&e.forEach(t=>this.i18n.appendBinding(t))}i18nBindProps(e){const t={};return Object.keys(e).forEach(i=>{const s=e[i];if(s instanceof jl)t[i]=w(s.value);else{const r=s.value.visit(this._valueConverter);if(this.allocateBindingSlots(r),r instanceof Mn){const{strings:o,expressions:a}=r,{id:l,bindings:c}=this.i18n,u=function cse(n,e=0,t=0){if(!n.length)return"";let i="";const s=n.length-1;for(let r=0;r<s;r++)i+=`${n[r]}${Ay(e+r,t)}`;return i+=n[s],i}(o,c.size,l);this.i18nAppendBindings(a),t[i]=w(u)}}}),t}i18nGenerateMainBlockVar(){return te(this.constantPool.uniqueName("i18n_"))}i18nGenerateClosureVar(e){let t;const i=this.fileBasedI18nSuffix.toUpperCase();if(this.i18nUseExternalIds){const s=ky("EXTERNAL_"),r=this.constantPool.uniqueName(i);t=`${s}${Qr(e)}$$${r}`}else{const s=ky(i);t=this.constantPool.uniqueName(s)}return te(t)}i18nUpdateRef(e){const{icus:t,meta:i,isRoot:s,isResolved:r,isEmitted:o}=e;if(s&&r&&!o&&!fp(i)){e.isEmitted=!0;const a=e.getSerializedPlaceholders();let d,l={},c=a.size?wB(a):{};t.size&&t.forEach((h,f)=>{if(1===h.length)c[f]=h[0];else{const p=Ay(`I18N_EXP_${f}`);c[f]=w(p),l[f]=le(h)}}),(Array.from(a.values()).some(h=>h.length>1)||Object.keys(l).length)&&(d=h=>{const f=[h];return Object.keys(l).length&&f.push(kd(l,!0)),Wl(null,m.i18nPostprocess,f)}),this.i18nTranslate(i,c,e.ref,d)}}i18nStart(e=null,t,i){const s=this.allocateDataSlot();this.i18n=this.i18nContext?this.i18nContext.forkChildContext(s,this.templateIndex,t):new mx(s,this.i18nGenerateMainBlockVar(),0,this.templateIndex,t);const{id:r,ref:o}=this.i18n,a=[w(s),this.addToConsts(o)];r>0&&a.push(w(r)),this.creationInstruction(e,i?m.i18n:m.i18nStart,a)}i18nEnd(e=null,t){if(!this.i18n)throw new Error("i18nEnd is executed with no i18n context present");this.i18nContext?(this.i18nContext.reconcileChildContext(this.i18n),this.i18nUpdateRef(this.i18nContext)):this.i18nUpdateRef(this.i18n);const{index:i,bindings:s}=this.i18n;if(s.size){for(const r of s)this.updateInstructionWithAdvance(this.getConstCount()-1,e,m.i18nExp,()=>this.convertPropertyBinding(r));this.updateInstruction(e,m.i18nApply,[w(i)])}t||this.creationInstruction(e,m.i18nEnd),this.i18n=null}i18nAttributesInstruction(e,t,i){let s=!1;const r=[];if(t.forEach(o=>{const a=o.i18n,l=o.value.visit(this._valueConverter);if(this.allocateBindingSlots(l),l instanceof Mn){const u=wB(EB(a));r.push(w(o.name),this.i18nTranslate(a,u)),l.expressions.forEach(d=>{s=!0,this.updateInstructionWithAdvance(e,i,m.i18nExp,()=>this.convertPropertyBinding(d))})}}),r.length>0){const o=w(this.allocateDataSlot()),a=this.addToConsts(le(r));this.creationInstruction(i,m.i18nAttributes,[o,a]),s&&this.updateInstruction(i,m.i18nApply,[o])}}getNamespaceInstruction(e){switch(e){case"math":return m.namespaceMathML;case"svg":return m.namespaceSVG;default:return m.namespaceHTML}}addNamespaceInstruction(e,t){this._namespace=e,this.creationInstruction(t.startSourceSpan,e)}interpolatedUpdateInstruction(e,t,i,s,r,o){this.updateInstructionWithAdvance(t,s.sourceSpan,e,()=>[w(i),...this.getUpdateInstructionArguments(r),...o])}visitContent(e){const t=this.allocateDataSlot(),i=this._ngContentSelectorsOffset+this._ngContentReservedSlots.length,s=[w(t)];this._ngContentReservedSlots.push(e.selector);const r=e.attributes.filter(a=>"select"!==a.name.toLowerCase()),o=this.getAttributeExpressions(e.name,r,[],[]);o.length>0?s.push(w(i),le(o)):0!==i&&s.push(w(i)),this.creationInstruction(e.sourceSpan,m.projection,s),this.i18n&&this.i18n.appendProjection(e.i18n,t)}visitElement(e){const t=this.allocateDataSlot(),i=new k3(null);this.elementLocations.set(e,{index:t,level:this.level});let s=!1;const r=hp(e.i18n)&&!fp(e.i18n),o=[],[a,l]=Pi(e.name),c=H0(e.name);for(const L of e.attributes){const{name:ne,value:j}=L;"ngNonBindable"===ne?s=!0:"style"===ne?i.registerStyleAttr(j):"class"===ne?i.registerClassAttr(j):o.push(L)}const u=[w(t)];c||u.push(w(l));const d=[],h=[];e.inputs.forEach(L=>{i.registerBoundInput(L)||(0!==L.type&&5!==L.type||!L.i18n?d.push(L):h.push(L))});const f=this.getAttributeExpressions(e.name,o,d,e.outputs,i,[],h);u.push(this.addAttrsToConsts(f));const p=this.prepareRefsArray(e.references);u.push(this.addToConsts(p));const g=this._namespace,v=this.getNamespaceInstruction(a);v!==g&&this.addNamespaceInstruction(v,e),this.i18n&&this.i18n.appendElement(e.i18n,t);const _=!r&&this.i18n?!bx(e.children):e.children.length>0,E=!i.hasBindingsWithPipes&&0===e.outputs.length&&0===h.length&&!_,b=!E&&bx(e.children);if(E)this.creationInstruction(e.sourceSpan,c?m.elementContainer:m.element,sd(u));else{if(this.creationInstruction(e.startSourceSpan,c?m.elementContainerStart:m.elementStart,sd(u)),s&&this.creationInstruction(e.startSourceSpan,m.disableBindings),h.length>0&&this.i18nAttributesInstruction(t,h,e.startSourceSpan??e.sourceSpan),e.outputs.length>0)for(const L of e.outputs)this.creationInstruction(L.sourceSpan,2===L.type?m.twoWayListener:m.listener,this.prepareListenerParameter(e.name,L,t));r&&this.i18nStart(e.startSourceSpan,e.i18n,b)}const T=i.buildUpdateLevelInstructions(this._valueConverter),V=T.length-1;for(let L=0;L<=V;L++)this._bindingSlots+=this.processStylingUpdateInstruction(t,T[L]);const N=w(void 0),M=[],D=[];d.forEach(L=>{const ne=L.type;if(4===ne){const j=L.value.visit(this._valueConverter),X=!(j instanceof Ki&&!j.value);this.allocateBindingSlots(j),M.push({span:L.sourceSpan,reference:m.property,paramsOrFn:T_(()=>X?this.convertPropertyBinding(j):N,tB(L.name))})}else{if(L.i18n)return;const j=L.value.visit(this._valueConverter);if(void 0!==j){const X=[],[Ye,ot]=Pi(L.name);let Z=$3(L.securityContext,1===ne);if(Z||function Yhe(n){return"iframe"===n.toLowerCase()}(e.name)&&bI(L.name)&&(Z=z(m.validateIframeAttribute)),Z&&X.push(Z),Ye){const K=w(Ye);Z?X.push(K):X.push(w(null),K)}if(this.allocateBindingSlots(j),0===ne||5===ne)j instanceof Mn?this.interpolatedUpdateInstruction(B3(j),t,ot,L,j,X):M.push({span:L.sourceSpan,reference:5===ne?m.twoWayProperty:m.property,paramsOrFn:T_(()=>this.convertPropertyBinding(j),ot,X)});else if(1===ne)if(j instanceof Mn&&Ql(j)>1)this.interpolatedUpdateInstruction(function Hhe(n){switch(Ql(n)){case 3:return m.attributeInterpolate1;case 5:return m.attributeInterpolate2;case 7:return m.attributeInterpolate3;case 9:return m.attributeInterpolate4;case 11:return m.attributeInterpolate5;case 13:return m.attributeInterpolate6;case 15:return m.attributeInterpolate7;case 17:return m.attributeInterpolate8;default:return m.attributeInterpolateV}}(j),t,ot,L,j,X);else{const K=j instanceof Mn?j.expressions[0]:j;D.push({span:L.sourceSpan,paramsOrFn:T_(()=>this.convertPropertyBinding(K),ot,X)})}else this.updateInstructionWithAdvance(t,L.sourceSpan,m.classProp,()=>[w(t),w(ot),this.convertPropertyBinding(j),...X])}}});for(const L of M)this.updateInstructionWithAdvance(t,L.span,L.reference,L.paramsOrFn);for(const L of D)this.updateInstructionWithAdvance(t,L.span,m.attribute,L.paramsOrFn);if(Ot(this,e.children),!r&&this.i18n&&this.i18n.appendElement(e.i18n,t,!0),!E){const L=e.endSourceSpan??e.sourceSpan;r&&this.i18nEnd(L,b),s&&this.creationInstruction(L,m.enableBindings),this.creationInstruction(L,c?m.elementContainerEnd:m.elementEnd)}}prepareEmbeddedTemplateFn(e,t,i=[],s,r){const o=this.allocateDataSlot();this.i18n&&s&&(s instanceof Ho?this.i18n.appendBlock(s,o):this.i18n.appendTemplate(s,o));const a=`${this.contextName}${t}_${o}`,l=this.constantPool.uniqueName(`${a}_Template`,!1),c=new wx(this.constantPool,this._bindingScope,this.level+1,a,this.i18n,o,l,this._namespace,this.fileBasedI18nSuffix,this.i18nUseExternalIds,this.deferBlocks,this.elementLocations,this.allDeferrableDepsFn,this._constants);return this._nestedTemplateFns.push(()=>{const u=c.buildTemplateFunction(e,i,this._ngContentReservedSlots.length+this._ngContentSelectorsOffset,s,r);this.constantPool.statements.push(u.toDeclStmt(l)),c._ngContentReservedSlots.length&&this._ngContentReservedSlots.push(...c._ngContentReservedSlots)}),new Fhe(l,o,c._bindingScope,c)}createEmbeddedTemplateFn(e,t,i,s,r=[],o,a,l){const c=this.prepareEmbeddedTemplateFn(t,i,r,l),u=[w(c.index),te(c.name),w(e),this.addAttrsToConsts(o||null)];if(a&&a.length>0){const d=this.prepareRefsArray(a);u.push(this.addToConsts(d)),u.push(z(m.templateRefExtractor))}return this.creationInstruction(s,m.templateCreate,()=>(u.splice(2,0,w(c.getConstCount()),w(c.getVarCount())),sd(u))),c.index}visitTemplate(e){const t=e.tagName?Pi(e.tagName)[1]:e.tagName,i=e.tagName?"_"+Qr(e.tagName):"",s=this.getAttributeExpressions(I_,e.attributes,e.inputs,e.outputs,void 0,e.templateAttrs),r=this.createEmbeddedTemplateFn(t,e.children,i,e.sourceSpan,e.variables,s,e.references,e.i18n);if(this.templatePropertyBindings(r,e.templateAttrs),t===I_){const[o,a]=function Eie(n,e){const t=[],i=[];for(const s of n)(e(s)?t:i).push(s);return[t,i]}(e.inputs,ase);o.length>0&&this.i18nAttributesInstruction(r,o,e.startSourceSpan??e.sourceSpan),a.length>0&&this.templatePropertyBindings(r,a);for(const l of e.outputs)this.creationInstruction(l.sourceSpan,2===l.type?m.twoWayListener:m.listener,this.prepareListenerParameter("ng_template",l,r))}}visitBoundText(e){if(this.i18n){const s=e.value.visit(this._valueConverter);return this.allocateBindingSlots(s),void(s instanceof Mn&&(this.i18n.appendBoundText(e.i18n),this.i18nAppendBindings(s.expressions)))}const t=this.allocateDataSlot();this.creationInstruction(e.sourceSpan,m.text,[w(t)]);const i=e.value.visit(this._valueConverter);this.allocateBindingSlots(i),i instanceof Mn?this.updateInstructionWithAdvance(t,e.sourceSpan,function zhe(n){switch(Ql(n)){case 1:return m.textInterpolate;case 3:return m.textInterpolate1;case 5:return m.textInterpolate2;case 7:return m.textInterpolate3;case 9:return m.textInterpolate4;case 11:return m.textInterpolate5;case 13:return m.textInterpolate6;case 15:return m.textInterpolate7;case 17:return m.textInterpolate8;default:return m.textInterpolateV}}(i),()=>this.getUpdateInstructionArguments(i)):_y("Text nodes should be interpolated and never bound directly.")}visitText(e){this.i18n||this.creationInstruction(e.sourceSpan,m.text,[w(this.allocateDataSlot()),w(e.value)])}visitIcu(e){let t=!1;this.i18n||(t=!0,this.i18nStart(null,e.i18n,!0));const i=this.i18n,s=this.i18nBindProps(e.vars),r=this.i18nBindProps(e.placeholders),o=e.i18n,a=l=>{const u=gp(Object.fromEntries(Object.entries({...s,...r}).sort()),!1);return Wl(null,m.i18nPostprocess,[l,kd(u,!0)])};if(fp(i.meta))this.i18nTranslate(o,{},i.ref,a);else{const l=this.i18nTranslate(o,{},void 0,a);i.appendIcu(sI(o).name,l)}return t&&this.i18nEnd(null,!0),null}visitIfBlock(e){this.allocateBindingSlots(null);const t=e.branches.map((r,o)=>{const{expression:a,expressionAlias:l,children:c,sourceSpan:u}=r,d=null!==l?[new zl(l.name,aI,l.sourceSpan,l.keySpan)]:void 0;let f,h=null;if(0===o){const v=this.inferProjectionDataFromInsertionPoint(r);h=v.tagName,f=v.attrsExprs}return{index:this.createEmbeddedTemplateFn(h,c,"_Conditional",u,d,f,void 0,r.i18n),expression:null===a?null:a.visit(this._valueConverter),alias:l}}),i=t[0].index;this.updateInstructionWithAdvance(i,e.branches[0].sourceSpan,m.conditional,()=>{let r=null;const o=l=>{if(l>t.length-1)return w(-1);const{index:c,expression:u,alias:d}=t[l];if(null===u)return w(c);let h;return d?(r=this.allocateControlFlowTempVariable(),h=r.set(this.convertPropertyBinding(u))):h=this.convertPropertyBinding(u),h.conditional(w(c),o(l+1))},a=[w(i),o(0)];return null!==r&&a.push(r),a})}visitSwitchBlock(e){if(0===e.cases.length)return;const t=e.cases.map(r=>({index:this.createEmbeddedTemplateFn(null,r.children,"_Case",r.sourceSpan,void 0,void 0,void 0,r.i18n),expression:null===r.expression?null:r.expression.visit(this._valueConverter)})),i=t[0].index,s=e.expression.visit(this._valueConverter);this.allocateBindingSlots(null),this.updateInstructionWithAdvance(i,e.sourceSpan,m.conditional,()=>{const r=o=>{if(o>t.length-1)return w(-1);const{index:a,expression:l}=t[o];return null===l?w(a):(0===o?this.allocateControlFlowTempVariable().set(this.convertPropertyBinding(s)):this.allocateControlFlowTempVariable()).identical(this.convertPropertyBinding(l)).conditional(w(a),r(o+1))};return[w(i),r(0)]})}visitDeferredBlock(e){const{loading:t,placeholder:i,error:s,triggers:r,prefetchTriggers:o}=e,a=this.deferBlocks.get(e);if(!a)throw new Error("Could not resolve `defer` block metadata. Block may need to be analyzed.");const l=this.createEmbeddedTemplateFn(null,e.children,"_Defer",e.sourceSpan,void 0,void 0,void 0,e.i18n),c=t?this.createEmbeddedTemplateFn(null,t.children,"_DeferLoading",t.sourceSpan,void 0,void 0,void 0,t.i18n):null,u=t?sd([w(t.minimumTime),w(t.afterTime)]):null,d=i?this.createEmbeddedTemplateFn(null,i.children,"_DeferPlaceholder",i.sourceSpan,void 0,void 0,void 0,i.i18n):null,h=i&&null!==i.minimumTime?le([w(i.minimumTime)]):null,f=s?this.createEmbeddedTemplateFn(null,s.children,"_DeferError",s.sourceSpan,void 0,void 0,void 0,s.i18n):null,p=this.allocateDataSlot(),g=`${this.contextName}_Defer_${p}_DepsFn`;this.creationInstruction(e.sourceSpan,m.defer,sd([w(p),w(l),this.allDeferrableDepsFn??this.createDeferredDepsFunction(g,a),w(c),w(d),w(f),u?.length?this.addToConsts(le(u)):Uo,h?this.addToConsts(h):Uo,u?.length||h?z(m.deferEnableTimerScheduling):Uo])),this.allocateDataSlot(),this.createDeferTriggerInstructions(p,r,a,!1),this.createDeferTriggerInstructions(p,o,a,!0)}createDeferredDepsFunction(e,t){if(0===t.deps.length)return Uo;const i=[];for(const r of t.deps)if(r.isDeferrable){const o=jt([new gt("m",Ms)],te("m").prop(r.isDefaultImport?"default":r.symbolName)),a=new Ba(r.importPath).prop("then").callFn([o]);i.push(a)}else i.push(r.type);const s=jt([],le(i));return this.constantPool.statements.push(s.toDeclStmt(e,Ln.Final)),te(e)}createDeferTriggerInstructions(e,t,i,s){const{when:r,idle:o,immediate:a,timer:l,hover:c,interaction:u,viewport:d}=t;if(r){const h=r.value.visit(this._valueConverter);this.allocateBindingSlots(h),this.updateInstructionWithAdvance(e,r.sourceSpan,s?m.deferPrefetchWhen:m.deferWhen,()=>this.convertPropertyBinding(h))}(o||!s&&0===Object.keys(t).length)&&this.creationInstruction(o?.sourceSpan||null,s?m.deferPrefetchOnIdle:m.deferOnIdle),a&&this.creationInstruction(a.sourceSpan,s?m.deferPrefetchOnImmediate:m.deferOnImmediate),l&&this.creationInstruction(l.sourceSpan,s?m.deferPrefetchOnTimer:m.deferOnTimer,[w(l.delay)]),c&&this.domNodeBasedTrigger("hover",c,i,s?m.deferPrefetchOnHover:m.deferOnHover),u&&this.domNodeBasedTrigger("interaction",u,i,s?m.deferPrefetchOnInteraction:m.deferOnInteraction),d&&this.domNodeBasedTrigger("viewport",d,i,s?m.deferPrefetchOnViewport:m.deferOnViewport)}domNodeBasedTrigger(e,t,i,s){const r=i.triggerElements.get(t);r&&this.creationInstruction(t.sourceSpan,s,()=>{const o=this.elementLocations.get(r);if(!o)throw new Error(`Could not determine location of reference passed into '${e}' trigger. Template may not have been fully analyzed.`);const a=Math.max(this.level-o.level,-1),l=[w(o.index)];return 0!==a&&l.push(w(a)),l})}inferProjectionDataFromInsertionPoint(e){let s,t=null,i=null;for(const r of e.children)if(!(r instanceof Cy)){if(null!==t){t=null;break}(r instanceof ms||r instanceof Ps&&null!==r.tagName)&&(t=r)}if(null!==t){const r=t instanceof ms?t.name:t.tagName;i=r===I_?null:r,s=this.getAttributeExpressions(I_,t.attributes,t.inputs,[])}return{tagName:i,attrsExprs:s}}allocateDataSlot(){return this._dataIndex++}visitForLoopBlock(e){const t=this.allocateDataSlot(),{tagName:i,attrsExprs:s}=this.inferProjectionDataFromInsertionPoint(e),r=this.prepareEmbeddedTemplateFn(e.children,"_For",[e.item,e.contextVariables.$index,e.contextVariables.$count],e.i18n,{[e.contextVariables.$index.name]:this.getLevelSpecificVariableName("$index",this.level+1),[e.contextVariables.$count.name]:this.getLevelSpecificVariableName("$count",this.level+1)}),{expression:o,usesComponentInstance:a}=this.createTrackByFunction(e);let u,l=null,c=null;if(null!==e.empty){const h=this.inferProjectionDataFromInsertionPoint(e.empty);c=h.tagName,u=h.attrsExprs,l=this.prepareEmbeddedTemplateFn(e.empty.children,"_ForEmpty",void 0,e.empty.i18n),this.allocateBindingSlots(null)}this.registerComputedLoopVariables(e,r.scope),this.creationInstruction(e.sourceSpan,m.repeaterCreate,()=>{const h=[w(t),te(r.name),w(r.getConstCount()),w(r.getVarCount()),w(i),this.addAttrsToConsts(s||null),o];return null!==l?h.push(w(a),te(l.name),w(l.getConstCount()),w(l.getVarCount()),w(c),this.addAttrsToConsts(u||null)):a&&h.push(w(a)),sd(h)});const d=e.expression.visit(this._valueConverter);this.updateInstructionWithAdvance(t,e.sourceSpan,m.repeater,()=>[this.convertPropertyBinding(d)])}registerComputedLoopVariables(e,t){const i=t.bindingLevel;t.set(i,e.contextVariables.$odd.name,(s,r)=>this.getLevelSpecificForLoopVariable(e,s,r,"$index").modulo(w(2)).notIdentical(w(0))),t.set(i,e.contextVariables.$even.name,(s,r)=>this.getLevelSpecificForLoopVariable(e,s,r,"$index").modulo(w(2)).identical(w(0))),t.set(i,e.contextVariables.$first.name,(s,r)=>this.getLevelSpecificForLoopVariable(e,s,r,"$index").identical(w(0))),t.set(i,e.contextVariables.$last.name,(s,r)=>{const o=this.getLevelSpecificForLoopVariable(e,s,r,"$index"),a=this.getLevelSpecificForLoopVariable(e,s,r,"$count");return o.identical(a.minus(w(1)))})}getLevelSpecificVariableName(e,t){return`\u0275${e}_${t}`}getLevelSpecificForLoopVariable(e,t,i,s){const r=t.bindingLevel===i?e.contextVariables[s].name:this.getLevelSpecificVariableName(s,i);return t.get(r)}optimizeTrackByFunction(e){const t=e.contextVariables.$index.name,i=e.item.name,s=e.trackBy.ast;return s instanceof hi&&s.receiver instanceof Zi&&s.name===t?{expression:z(m.repeaterTrackByIndex),usesComponentInstance:!1}:s instanceof hi&&s.receiver instanceof Zi&&s.name===i?{expression:z(m.repeaterTrackByIdentity),usesComponentInstance:!1}:s instanceof Ha&&s.receiver instanceof hi&&s.receiver.receiver instanceof Zi&&2===s.args.length&&s.args[0]instanceof hi&&s.args[0].receiver instanceof Zi&&s.args[0].name===t&&s.args[1]instanceof hi&&s.args[1].receiver instanceof Zi&&s.args[1].name===i?{expression:(0===this.level?te(Fi):new cr(m.componentInstance).callFn([])).prop(s.receiver.name),usesComponentInstance:!1}:null}createTrackByFunction(e){const t=this.optimizeTrackByFunction(e);if(null!==t)return t;const i=e.contextVariables,s=new Uhe(this._bindingScope,{[i.$index.name]:"$index",[e.item.name]:"$item",[i.$count.name]:i.$count.name,[i.$first.name]:i.$first.name,[i.$last.name]:i.$last.name,[i.$even.name]:i.$even.name,[i.$odd.name]:i.$odd.name}),r=[new gt("$index"),new gt("$item")],o=function ere(n,e,t,i){const s=oV({createLiteralArrayConverter:()=>a=>le(a),createLiteralMapConverter:a=>l=>Gt(a.map((c,u)=>({key:c.key,value:l[u],quoted:c.quoted}))),createPipeConverter:()=>{throw new Error("Illegal State: Pipes are not allowed in this context")}},n),r=new Ap(e,t,i,!1),o=[];return Xy(s.visit(r,ct.Statement),o),o}(e.trackBy.ast,s,te(Fi),"track"),a=s.getComponentAccessCount()>0;let l;if(!a&&1===o.length&&o[0]instanceof Tn)l=jt(r,o[0].expr);else{if(o.length>0){const c=o[o.length-1];c instanceof Tn&&(o[o.length-1]=new ln(c.expr))}l=dr(r,o)}return{expression:this.constantPool.getSharedFunctionReference(l,"_forTrack"),usesComponentInstance:a}}getConstCount(){return this._dataIndex}getVarCount(){return this._pureFunctionSlots}getConsts(){return this._constants}getNgContentSelectors(){return this._ngContentReservedSlots.length?this.constantPool.getConstLiteral(gn(this._ngContentReservedSlots),!0):null}bindingContext(){return""+this._bindingContext++}templatePropertyBindings(e,t){const i=[];for(const s of t){if(!(s instanceof Iy))continue;const r=s.value.visit(this._valueConverter);if(void 0!==r)if(this.allocateBindingSlots(r),r instanceof Mn){const o=[];this.interpolatedUpdateInstruction(B3(r),e,s.name,s,r,o)}else i.push({span:s.sourceSpan,paramsOrFn:T_(()=>this.convertPropertyBinding(r),s.name)})}for(const s of i)this.updateInstructionWithAdvance(e,s.span,m.property,s.paramsOrFn)}instructionFn(e,t,i,s,r=!1){e[r?"unshift":"push"]({span:t,reference:i,paramsOrFn:s})}processStylingUpdateInstruction(e,t){let i=0;if(t)for(const s of t.calls)i+=s.allocateBindingSlots,this.updateInstructionWithAdvance(e,s.sourceSpan,t.reference,()=>s.params(r=>s.supportsInterpolation&&r instanceof Mn?this.getUpdateInstructionArguments(r):this.convertPropertyBinding(r)));return i}creationInstruction(e,t,i,s){this.instructionFn(this._creationCodeFns,e,t,i||[],s)}updateInstructionWithAdvance(e,t,i,s){this.addAdvanceInstructionIfNecessary(e,t),this.updateInstruction(t,i,s)}updateInstruction(e,t,i){this.instructionFn(this._updateCodeFns,e,t,i||[])}addAdvanceInstructionIfNecessary(e,t){if(e!==this._currentIndex){const i=e-this._currentIndex;if(i<1)throw new Error("advance instruction can only go forwards");this.instructionFn(this._updateCodeFns,t,m.advance,i>1?[w(i)]:[]),this._currentIndex=e}}allocatePureFunctionSlots(e){const t=this._pureFunctionSlots;return this._pureFunctionSlots+=e,t}allocateBindingSlots(e){this._bindingSlots+=e instanceof Mn?e.expressions.length:1}getImplicitReceiverExpr(){return this._implicitReceiverExpr?this._implicitReceiverExpr:this._implicitReceiverExpr=0===this.level?te(Fi):this._bindingScope.getOrCreateSharedContextVar(0)}convertPropertyBinding(e){const t=aV(this,this.getImplicitReceiverExpr(),e,this.bindingContext()),i=t.currValExpr;return this._tempVariables.push(...t.stmts),i}getUpdateInstructionArguments(e){const{args:t,stmts:i}=function tre(n,e,t,i){const s=new Ap(n,e,i,!0),r=s.visitInterpolation(t,ct.Expression);return s.usesImplicitReceiver&&n.notifyImplicitReceiverUse(),{stmts:lV(s,i),args:r.args}}(this,this.getImplicitReceiverExpr(),e,this.bindingContext());return this._tempVariables.push(...i),t}allocateControlFlowTempVariable(){if(null===this._controlFlowTempVariable){const e=`${this.contextName}_contFlowTmp`;this._tempVariables.push(new Zn(e)),this._controlFlowTempVariable=te(e)}return this._controlFlowTempVariable}getAttributeExpressions(e,t,i,s,r,o=[],a=[]){const l=new Set,c=[];let u;for(const h of t)if("ngProjectAs"===h.name&&(u=h),h.i18n){const{i18nVarRefsCache:f}=this._constants;let p;f.has(h.i18n)?p=f.get(h.i18n):(p=this.i18nTranslate(h.i18n),f.set(h.i18n,p)),c.push(w(h.name),p)}else c.push(...L3(h.name),Ghe(e,h));function d(h,f){"string"==typeof h?l.has(h)||(c.push(...L3(h)),void 0!==f&&c.push(f),l.add(h)):c.push(w(h))}if(u&&c.push(...function jhe(n){const e=Uu(n.value)[0];return[w(5),gn(e)]}(u)),r&&r.populateInitialStylingAttrs(c),i.length||s.length){const h=c.length;for(let f=0;f<i.length;f++){const p=i[f];4!==p.type&&1!==p.type&&d(p.name)}for(let f=0;f<s.length;f++){const p=s[f];1!==p.type&&d(p.name)}c.length!==h&&c.splice(h,0,w(3))}return o.length&&(c.push(w(4)),o.forEach(h=>d(h.name))),a.length&&(c.push(w(6)),a.forEach(h=>d(h.name))),c}addToConsts(e){if(L0(e))return Uo;const t=this._constants.constExpressions;for(let i=0;i<t.length;i++)if(t[i].isEquivalent(e))return w(i);return w(t.push(e)-1)}addAttrsToConsts(e){return null!==e&&e.length>0?this.addToConsts(le(e)):Uo}prepareRefsArray(e){return e&&0!==e.length?gn(e.flatMap(i=>{const s=this.allocateDataSlot(),r=this._bindingScope.freshReferenceName(),o=this.level,a=te(r);return this._bindingScope.set(o,i.name,a,0,(l,c)=>{const u=c>0?[Ex(c).toStmt()]:[],d=a.set(z(m.reference).callFn([w(s)]));return u.concat(d.toConstDecl())},!0),[i.name,i.value]})):Uo}prepareListenerParameter(e,t,i){return()=>{const s=t.name,r=1===t.type?nB(s,t.phase):Qr(s),o=`${this.templateName}_${e}_${r}_${i}_listener`,a=this._bindingScope.nestedScope(this._bindingScope.bindingLevel,yx);return P3(t,o,a)}}}class O3 extends Qse{constructor(e,t,i,s){super(),this.constantPool=e,this.allocateSlot=t,this.allocatePureFunctionSlots=i,this.definePipe=s,this._pipeBindExprs=[]}visitPipe(e,t){const i=this.allocateSlot(),s=`PIPE:${i}`,r=this.allocatePureFunctionSlots(2+e.args.length),o=new hi(e.span,e.sourceSpan,e.nameSpan,new Zi(e.span,e.sourceSpan),s),{identifier:a,isVarLength:l}=function Bhe(n){const e=Lhe[n.length];return{identifier:e||m.pipeBindV,isVarLength:!e}}(e.args);this.definePipe(e.name,s,i,z(a));const c=[e.exp,...e.args],u=this.visitAll(l?[new Ip(e.span,e.sourceSpan,c)]:c),d=new Ha(e.span,e.sourceSpan,o,[new Ki(e.span,e.sourceSpan,i),new Ki(e.span,e.sourceSpan,r),...u],null);return this._pipeBindExprs.push(d),d}updatePipeSlotOffsets(e){this._pipeBindExprs.forEach(t=>{t.args[1].value+=e})}visitLiteralArray(e,t){return new pd(e.span,e.sourceSpan,this.visitAll(e.expressions),i=>{const s=le(i);return F3(this.constantPool,s,this.allocatePureFunctionSlots)})}visitLiteralMap(e,t){return new pd(e.span,e.sourceSpan,this.visitAll(e.values),i=>{const s=Gt(i.map((r,o)=>({key:e.keys[o].key,value:r,quoted:e.keys[o].quoted})));return F3(this.constantPool,s,this.allocatePureFunctionSlots)})}}const Lhe=[m.pipeBind1,m.pipeBind2,m.pipeBind3,m.pipeBind4],Vhe=[m.pureFunction0,m.pureFunction1,m.pureFunction2,m.pureFunction3,m.pureFunction4,m.pureFunction5,m.pureFunction6,m.pureFunction7,m.pureFunction8];function Ex(n){return z(m.nextContext).callFn(n>1?[w(n)]:[])}function F3(n,e,t){const{literalFactory:i,literalFactoryArguments:s}=n.getLiteralFactory(e),r=t(1+s.length),{identifier:o,isVarLength:a}=function $he(n){const e=Vhe[n.length];return{identifier:e||m.pureFunctionV,isVarLength:!e}}(s),l=[w(r),i];return a?l.push(le(s)):l.push(...s),z(o).callFn(l)}function L3(n){const[e,t]=Pi(n),i=w(t);return e?[w(0),w(e),i]:[i]}const Fd="$$shared_ctx$$";class Zp{static createRootScope(){return new Zp}constructor(e=0,t=null,i){if(this.bindingLevel=e,this.parent=t,this.globals=i,this.map=new Map,this.referenceNameIndex=0,this.restoreViewVariable=null,this.usesRestoredViewContext=!1,void 0!==i)for(const s of i)this.set(0,s,te(s))}get(e){let t=this;for(;t;){let i=t.map.get(e);if(null!=i)return t!==this&&(i={retrievalLevel:i.retrievalLevel,lhs:i.lhs,declareLocalCallback:i.declareLocalCallback,declare:!1,priority:i.priority},this.map.set(e,i),this.maybeGenerateSharedContextVar(i),this.maybeRestoreView()),i.declareLocalCallback&&!i.declare&&(i.declare=!0),"function"==typeof i.lhs?i.lhs(this,i.retrievalLevel):i.lhs;t=t.parent}return 0===this.bindingLevel?null:this.getComponentProperty(e)}hasLocal(e){return this.map.has(e)}set(e,t,i,s=0,r,o){if(this.map.has(t)){if(o)return this;_y(`The name ${t} is already defined in scope to be ${this.map.get(t)}`)}return this.map.set(t,{retrievalLevel:e,lhs:i,declare:!1,declareLocalCallback:r,priority:s}),this}getLocal(e){return this.get(e)}notifyImplicitReceiverUse(){0!==this.bindingLevel&&(this.map.get(Fd+0).declare=!0)}nestedScope(e,t){const i=new Zp(e,this,t);return e>0&&i.generateSharedContextVar(0),i}getOrCreateSharedContextVar(e){const t=Fd+e;return this.map.has(t)||this.generateSharedContextVar(e),this.map.get(t).lhs}getSharedContextName(e){const t=this.map.get(Fd+e);return t&&t.declare?t.lhs:null}maybeGenerateSharedContextVar(e){if(1===e.priority&&e.retrievalLevel<this.bindingLevel){const t=this.map.get(Fd+e.retrievalLevel);t?t.declare=!0:this.generateSharedContextVar(e.retrievalLevel)}}generateSharedContextVar(e){const t=te(Fi+this.freshReferenceName());this.map.set(Fd+e,{retrievalLevel:e,lhs:t,declareLocalCallback:(i,s)=>[t.set(Ex(s)).toConstDecl()],declare:!1,priority:2})}getComponentProperty(e){const t=this.map.get(Fd+0);t.declare=!0,this.maybeRestoreView();const i="function"==typeof t.lhs?t.lhs(this,t.retrievalLevel):t.lhs;return e===aI?i:i.prop(e)}maybeRestoreView(){this.isListenerScope()&&(this.parent.restoreViewVariable||(this.parent.restoreViewVariable=te(this.parent.freshReferenceName())),this.restoreViewVariable=this.parent.restoreViewVariable)}restoreViewStatement(){if(this.restoreViewVariable){const e=Wl(null,m.restoreView,[this.restoreViewVariable]);return this.usesRestoredViewContext?te(CB).set(e).toConstDecl():e.toStmt()}return null}viewSnapshotStatements(){return this.restoreViewVariable?[this.restoreViewVariable.set(Wl(null,m.getCurrentView,[])).toConstDecl()]:[]}isListenerScope(){return this.parent&&this.parent.bindingLevel===this.bindingLevel}variableDeclarations(){let e=0;return Array.from(this.map.values()).filter(t=>t.declare).sort((t,i)=>i.retrievalLevel-t.retrievalLevel||i.priority-t.priority).reduce((t,i)=>{const s=this.bindingLevel-i.retrievalLevel,r=i.declareLocalCallback(this,s-e);return e=s,t.concat(r)},[])}freshReferenceName(){let e=this;for(;e.parent;)e=e.parent;return"_r"+e.referenceNameIndex++}hasRestoreViewVariable(){return!!this.restoreViewVariable}notifyRestoredViewContextUse(){this.usesRestoredViewContext=!0}}class Uhe extends Zp{constructor(e,t){super(e.bindingLevel+1,e),this.globalOverrides=t,this.componentAccessCount=0}get(e){if(this.globalOverrides.hasOwnProperty(e))return te(this.globalOverrides[e]);let t=this.parent;for(;t;){if(t.hasLocal(e))return null;t=t.parent}return this.componentAccessCount++,te("this").prop(e)}getComponentAccessCount(){return this.componentAccessCount}}function B3(n){switch(Ql(n)){case 1:return m.propertyInterpolate;case 3:return m.propertyInterpolate1;case 5:return m.propertyInterpolate2;case 7:return m.propertyInterpolate3;case 9:return m.propertyInterpolate4;case 11:return m.propertyInterpolate5;case 13:return m.propertyInterpolate6;case 15:return m.propertyInterpolate7;case 17:return m.propertyInterpolate8;default:return m.propertyInterpolateV}}const V3=new h_;function x_(n=Fs){return new Sde(new t$(new BI),n,V3,[])}function $3(n,e){switch(n){case qe.HTML:return z(m.sanitizeHtml);case qe.SCRIPT:return z(m.sanitizeScript);case qe.STYLE:return e?z(m.sanitizeStyle):null;case qe.URL:return z(m.sanitizeUrl);case qe.RESOURCE_URL:return z(m.sanitizeResourceUrl);default:return null}}function Ghe(n,e){const t=gn(e.value);if(!y$(n,e.name))return t;switch(V3.securityContext(n,e.name,!0)){case qe.HTML:return vy(z(m.trustConstantHtml),new Wu([new Qu(e.value)],[]),void 0,e.valueSpan);case qe.RESOURCE_URL:return vy(z(m.trustConstantResourceUrl),new Wu([new Qu(e.value)],[]),void 0,e.valueSpan);default:return t}}function Qhe(n){return n instanceof jl||n instanceof cp||n instanceof J0}function bx(n){return n.every(Qhe)}function T_(n,e,t){return()=>{const i=n(),s=Array.isArray(i)?i:[i];return t&&s.push(...t),e&&s.unshift(w(e)),s}}const U3="ngI18nClosureMode";function j3(n,e,t,i){const s=[];return void 0!==i&&s.push(...i),n.isSignal&&s.push(new Xn(te(Fi),n.propertyName)),s.push(function Jhe(n,e){if(Array.isArray(n.predicate)){let t=[];return n.predicate.forEach(i=>{const s=i.split(",").map(r=>w(r.trim()));t.push(...s)}),e.getConstLiteral(le(t),!0)}switch(n.predicate.forwardRef){case 0:case 2:return n.predicate.expression;case 1:return z(m.resolveForwardRef).callFn([n.predicate.expression])}}(n,e),w(function Khe(n){return(n.descendants?1:0)|(n.static?2:0)|(n.emitDistinctChangesOnly?4:0)}(n))),n.read&&s.push(n.read),z(n.isSignal?t.signalBased:t.nonSignal).callFn(s)}const Cx=Symbol("queryAdvancePlaceholder");function H3(n){const e=[];let t=0;const i=()=>{t>0&&(e.unshift(z(m.queryAdvance).callFn(1===t?[]:[w(t)]).toStmt()),t=0)};for(let s=n.length-1;s>=0;s--){const r=n[s];r===Cx?t++:(i(),e.unshift(r))}return i(),e}const nfe=/attr\.([^\]]+)/;function W3(n,e,t){const i=new kn,s=Uu(n.selector);return i.set("type",n.type.value),s.length>0&&i.set("selectors",gn(s)),n.queries.length>0&&i.set("contentQueries",function tfe(n,e,t){const i=[],s=[],r=SB(a=>s.push(a),oI);for(const a of n){if(i.push(j3(a,e,{nonSignal:m.contentQuery,signalBased:m.contentQuerySignal},[te("dirIndex")]).toStmt()),a.isSignal){s.push(Cx);continue}const l=r(),c=z(m.loadQuery).callFn([]),u=z(m.queryRefresh).callFn([l.set(c)]),d=te(Fi).prop(a.propertyName).set(a.first?l.prop("first"):l);s.push(u.and(d).toStmt())}const o=t?`${t}_ContentQueries`:null;return dr([new gt(vp,zu),new gt(Fi,null),new gt("dirIndex",null)],[Ka(1,i),Ka(2,H3(s))],ui,null,o)}(n.queries,e,n.name)),n.viewQueries.length&&i.set("viewQuery",function efe(n,e,t){const i=[],s=[],r=SB(a=>s.push(a),oI);n.forEach(a=>{const l=j3(a,e,{signalBased:m.viewQuerySignal,nonSignal:m.viewQuery});if(i.push(l.toStmt()),a.isSignal)return void s.push(Cx);const c=r(),u=z(m.loadQuery).callFn([]),d=z(m.queryRefresh).callFn([c.set(u)]),h=te(Fi).prop(a.propertyName).set(a.first?c.prop("first"):c);s.push(d.and(h).toStmt())});const o=t?`${t}_Query`:null;return dr([new gt(vp,zu),new gt(Fi,null)],[Ka(1,i),Ka(2,H3(s))],ui,null,o)}(n.viewQueries,e,n.name)),i.set("hostBindings",function ufe(n,e,t,i,s,r,o){const a=t.createBoundHostProperties(n.properties,e),l=t.createDirectiveHostEventAsts(n.listeners,e);if(t3||n.useTemplatePipeline){n.specialAttributes.styleAttr&&(n.attributes.style=w(n.specialAttributes.styleAttr)),n.specialAttributes.classAttr&&(n.attributes.class=w(n.specialAttributes.classAttr));const j=function Jue(n,e,t){const i=new UV(n.componentName,t,Y$);for(const s of n.properties??[]){let r=oe.Property;s.name.startsWith("attr.")&&(s.name=s.name.substring(5),r=oe.Attribute),s.isAnimation&&(r=oe.Animation),ede(i,s,r,e.calcPossibleSecurityContexts(n.componentSelector,s.name,r===oe.Attribute).filter(a=>a!==qe.NONE))}for(const[s,r]of Object.entries(n.attributes)??[])tde(i,s,r,e.calcPossibleSecurityContexts(n.componentSelector,s,!0).filter(a=>a!==qe.NONE));for(const s of n.events??[])nde(i,s);return i}({componentName:r,componentSelector:s,properties:a,events:l,attributes:n.attributes},t,i);G$(j,ee.Host),o.set("hostAttrs",j.root.attributes);const X=j.root.vars;return null!==X&&X>0&&o.set("hostVars",w(X)),function Zue(n){if(null===n.root.fnName)throw new Error("AssertionError: host binding function is unnamed");const e=[];for(const r of n.root.create){if(r.kind!==y.Statement)throw new Error(`AssertionError: expected all create ops to have been compiled, but got ${y[r.kind]}`);e.push(r.statement)}const t=[];for(const r of n.root.update){if(r.kind!==y.Statement)throw new Error(`AssertionError: expected all update ops to have been compiled, but got ${y[r.kind]}`);t.push(r.statement)}if(0===e.length&&0===t.length)return null;const i=w_(1,e),s=w_(2,t);return dr([new gt("rf"),new gt("ctx")],[...i,...s],void 0,void 0,n.root.fnName)}(j)}let c=0;const u=()=>""+c++,d=te(Fi),h=new k3(d),{styleAttr:f,classAttr:p}=n.specialAttributes;void 0!==f&&h.registerStyleAttr(f),void 0!==p&&h.registerClassAttr(p);const g=[],v=[],_=[],E=e;l&&l.length&&g.push(...function ffe(n,e){const t=[],i=[],s=[];for(const r of n){let o=r.name&&Qr(r.name);const a=1===r.type?nB(o,r.targetOrPhase):o,l=e&&o?`${e}_${a}_HostBindingHandler`:null,c=P3(xy.fromParsedEvent(r),l);1==r.type?i.push(c):t.push(c)}for(const r of i)s.push({reference:m.syntheticHostListener,paramsOrFn:r,span:null});for(const r of t)s.push({reference:m.listener,paramsOrFn:r,span:null});return s}(l,r));const b=[];let V,T=0;a&&a.forEach(j=>{h.registerInputBasedOnName(j.name,j.expression,E)?T+=S_:(b.push(j),T++)});const N=()=>(V||(V=new O3(i,()=>_y("Unexpected node"),X=>{const Ye=T;return T+=X,Ye},()=>_y("Unexpected pipe"))),V),M=[],D=[],L=[];for(const j of b){const X=j.expression.visit(N()),Ye=K3(d,X,u),{bindingName:ot,instruction:Rn,isAttribute:Z}=hfe(j),K=t.calcPossibleSecurityContexts(s,ot,Z).filter(Dt=>Dt!==qe.NONE);let re=null;K.length&&(re=2===K.length&&K.indexOf(qe.URL)>-1&&K.indexOf(qe.RESOURCE_URL)>-1?z(m.sanitizeUrlOrResourceUrl):$3(K[0],Z));const De=[w(ot),Ye.currValExpr];re?De.push(re):bI(ot)&&De.push(z(m.validateIframeAttribute)),_.push(...Ye.stmts),Rn===m.hostProperty?M.push(De):Rn===m.attribute?D.push(De):Rn===m.syntheticHostProperty?L.push(De):v.push({reference:Rn,paramsOrFn:De,span:null})}for(const j of M)v.push({reference:m.hostProperty,paramsOrFn:j,span:null});for(const j of D)v.push({reference:m.attribute,paramsOrFn:j,span:null});for(const j of L)v.push({reference:m.syntheticHostProperty,paramsOrFn:j,span:null});const ne=function afe(n){const e=[];for(let t of Object.getOwnPropertyNames(n)){const i=n[t];e.push(w(t),i)}return e}(n.attributes);if(h.assignHostAttrs(ne,o),h.hasBindings&&h.buildUpdateLevelInstructions(N()).forEach(j=>{for(const X of j.calls){T+=Math.max(X.allocateBindingSlots-S_,0);const{params:Ye,stmts:ot}=dfe(X,d,K3,u);_.push(...ot),v.push({reference:j.reference,paramsOrFn:Ye,span:null})}}),T&&o.set("hostVars",w(T)),g.length>0||v.length>0){const j=r?`${r}_HostBindings`:null,X=[];return g.length>0&&X.push(Ka(1,My(g))),v.length>0&&X.push(Ka(2,_.concat(My(v)))),dr([new gt(vp,zu),new gt(Fi,null)],X,ui,null,j)}return null}(n.host,n.typeSourceSpan,t,e,n.selector||"",n.name,i)),i.set("inputs",lI(n.inputs,!0)),i.set("outputs",lI(n.outputs)),null!==n.exportAs&&i.set("exportAs",le(n.exportAs.map(r=>w(r)))),n.isStandalone&&i.set("standalone",w(!0)),n.isSignal&&i.set("signals",w(!0)),i}function Q3(n,e){const t=[],i=e.providers,s=e.viewProviders,r=Object.keys(e.inputs);if(i||s){const o=[i||new Qi([])];s&&o.push(s),t.push(z(m.ProvidersFeature).callFn(o))}for(const o of r)if(null!==e.inputs[o].transformFunction){t.push(z(m.InputTransformsFeatureFeature));break}e.hostDirectives?.length&&t.push(z(m.HostDirectivesFeature).callFn([yfe(e.hostDirectives)])),e.usesInheritance&&t.push(z(m.InheritDefinitionFeature)),e.fullInheritance&&t.push(z(m.CopyDefinitionFeature)),e.lifecycle.usesOnChanges&&t.push(z(m.NgOnChangesFeature)),e.hasOwnProperty("template")&&e.isStandalone&&t.push(z(m.StandaloneFeature)),t.length&&n.set("features",le(t))}function Y3(n){const e=X3(n);return e.push(Ix(n.template.ngContentSelectors)),e.push(Dn(w(n.isStandalone))),e.push(J3(n)),n.isSignal&&e.push(Dn(w(n.isSignal))),Dn(z(m.ComponentDeclaration,e))}function lfe(n){return Dn(w(n))}function Sx(n){return Gt(Object.keys(n).map(t=>({key:t,value:w(Array.isArray(n[t])?n[t][0]:n[t]),quoted:!0})))}function Ix(n){return n.length>0?Dn(le(n.map(e=>w(e)))):Ns}function X3(n){const e=null!==n.selector?n.selector.replace(/\n/g,""):null;return[Ey(n.type.type,n.typeArgumentCount),null!==e?lfe(e):Ns,null!==n.exportAs?Ix(n.exportAs):Ns,Dn(cfe(n)),Dn(Sx(n.outputs)),Ix(n.queries.map(t=>t.propertyName))]}function cfe(n){return Gt(Object.keys(n.inputs).map(e=>{const t=n.inputs[e],i=[{key:"alias",value:w(t.bindingPropertyName),quoted:!0},{key:"required",value:w(t.required),quoted:!0}];return t.isSignal&&i.push({key:"isSignal",value:w(t.isSignal),quoted:!0}),{key:e,value:Gt(i),quoted:!0}}))}function Z3(n){const e=X3(n);return e.push(Ns),e.push(Dn(w(n.isStandalone))),e.push(J3(n)),n.isSignal&&e.push(Dn(w(n.isSignal))),Dn(z(m.DirectiveDeclaration,e))}function K3(n,e,t){return aV(null,n,e,t())}function dfe(n,e,t,i){const s=[];return{params:n.params(o=>{const a=t(e,o,i);return Array.isArray(a.stmts)&&a.stmts.length>0&&s.push(...a.stmts),a.currValExpr}),stmts:s}}function hfe(n){let t,e=n.name;const i=e.match(nfe);return i?(e=i[1],t=m.attribute):n.isAnimation?(e=tB(e),t=m.syntheticHostProperty):t=m.hostProperty,{bindingName:e,instruction:t,isAttribute:!!i}}const pfe=/^(?:\[([^\]]+)\])|(?:\(([^\)]+)\))$/;function J3(n){return n.hostDirectives?.length?Dn(le(n.hostDirectives.map(e=>Gt([{key:"directive",value:Ku(e.directive.type),quoted:!1},{key:"inputs",value:Sx(e.inputs||{}),quoted:!1},{key:"outputs",value:Sx(e.outputs||{}),quoted:!1}])))):Ns}function yfe(n){const e=[];let t=!1;for(const i of n){if(i.inputs||i.outputs){const s=[{key:"directive",value:i.directive.type,quoted:!1}];if(i.inputs){const r=D_(i.inputs);r&&s.push({key:"inputs",value:r,quoted:!1})}if(i.outputs){const r=D_(i.outputs);r&&s.push({key:"outputs",value:r,quoted:!1})}e.push(Gt(s))}else e.push(i.directive.type);i.isForwardReference&&(t=!0)}return t?new Bo([],[new ln(le(e))]):le(e)}function D_(n){const e=[];for(const t in n)n.hasOwnProperty(t)&&e.push(w(t),w(n[t]));return e.length>0?le(e):null}class _fe{constructor(e){this.directiveMatcher=e}bind(e){if(!e.template)throw new Error("Binding without a template not yet supported");const t=Kp.apply(e.template),i=function Efe(n){const e=new Map;function t(r){if(e.has(r.rootNode))return e.get(r.rootNode);const o=r.namedEntities;let a;return a=null!==r.parentScope?new Map([...t(r.parentScope),...o]):new Map(o),e.set(r.rootNode,a),a}const i=[n];for(;i.length>0;){const r=i.pop();for(const o of r.childScopes.values())i.push(o);t(r)}const s=new Map;for(const[r,o]of e)s.set(r,new Set(o.values()));return s}(t),{directives:s,eagerDirectives:r,bindings:o,references:a}=xx.apply(e.template,this.directiveMatcher),{expressions:l,symbols:c,nestingLevel:u,usedPipes:d,eagerPipes:h,deferBlocks:f}=A_.applyWithScope(e.template,t);return new wfe(e,s,r,o,a,l,c,u,i,d,h,f)}}class Kp{constructor(e,t){this.parentScope=e,this.rootNode=t,this.namedEntities=new Map,this.elementsInScope=new Set,this.childScopes=new Map,this.isDeferred=!(null===e||!e.isDeferred)||t instanceof up}static newRootScope(){return new Kp(null,null)}static apply(e){const t=Kp.newRootScope();return t.ingest(e),t}ingest(e){e instanceof Ps?(e.variables.forEach(t=>this.visitVariable(t)),e.children.forEach(t=>t.visit(this))):e instanceof dp?(null!==e.expressionAlias&&this.visitVariable(e.expressionAlias),e.children.forEach(t=>t.visit(this))):e instanceof Ty?(this.visitVariable(e.item),Object.values(e.contextVariables).forEach(t=>this.visitVariable(t)),e.children.forEach(t=>t.visit(this))):e instanceof X0||e instanceof Z0||e instanceof up||e instanceof Y0||e instanceof W0||e instanceof Q0?e.children.forEach(t=>t.visit(this)):e.forEach(t=>t.visit(this))}visitElement(e){e.references.forEach(t=>this.visitReference(t)),e.children.forEach(t=>t.visit(this)),this.elementsInScope.add(e)}visitTemplate(e){e.references.forEach(t=>this.visitReference(t)),this.ingestScopedNode(e)}visitVariable(e){this.maybeDeclare(e)}visitReference(e){this.maybeDeclare(e)}visitDeferredBlock(e){this.ingestScopedNode(e),e.placeholder?.visit(this),e.loading?.visit(this),e.error?.visit(this)}visitDeferredBlockPlaceholder(e){this.ingestScopedNode(e)}visitDeferredBlockError(e){this.ingestScopedNode(e)}visitDeferredBlockLoading(e){this.ingestScopedNode(e)}visitSwitchBlock(e){e.cases.forEach(t=>t.visit(this))}visitSwitchBlockCase(e){this.ingestScopedNode(e)}visitForLoopBlock(e){this.ingestScopedNode(e),e.empty?.visit(this)}visitForLoopBlockEmpty(e){this.ingestScopedNode(e)}visitIfBlock(e){e.branches.forEach(t=>t.visit(this))}visitIfBlockBranch(e){this.ingestScopedNode(e)}visitContent(e){}visitBoundAttribute(e){}visitBoundEvent(e){}visitBoundText(e){}visitText(e){}visitTextAttribute(e){}visitIcu(e){}visitDeferredTrigger(e){}visitUnknownBlock(e){}maybeDeclare(e){this.namedEntities.has(e.name)||this.namedEntities.set(e.name,e)}lookup(e){return this.namedEntities.has(e)?this.namedEntities.get(e):null!==this.parentScope?this.parentScope.lookup(e):null}getChildScope(e){const t=this.childScopes.get(e);if(void 0===t)throw new Error(`Assertion error: child scope for ${e} not found`);return t}ingestScopedNode(e){const t=new Kp(this,e);t.ingest(e),this.childScopes.set(e,t)}}class xx{constructor(e,t,i,s,r){this.matcher=e,this.directives=t,this.eagerDirectives=i,this.bindings=s,this.references=r,this.isInDeferBlock=!1}static apply(e,t){const i=new Map,s=new Map,r=new Map,o=[];return new xx(t,i,o,s,r).ingest(e),{directives:i,eagerDirectives:o,bindings:s,references:r}}ingest(e){e.forEach(t=>t.visit(this))}visitElement(e){this.visitElementOrTemplate(e)}visitTemplate(e){this.visitElementOrTemplate(e)}visitElementOrTemplate(e){const t=function mse(n){const e=n instanceof ms?n.name:"ng-template",t=function vse(n){const e={};return n instanceof Ps&&"ng-template"!==n.tagName?n.templateAttrs.forEach(t=>e[t.name]=""):(n.attributes.forEach(t=>{_B(t.name)||(e[t.name]=t.value)}),n.inputs.forEach(t=>{(0===t.type||5===t.type)&&(e[t.name]="")}),n.outputs.forEach(t=>{e[t.name]=""})),e}(n),i=new Pa,s=Pi(e)[1];return i.setElement(s),Object.getOwnPropertyNames(t).forEach(r=>{const o=Pi(r)[1],a=t[r];i.addAttribute(o,a),"class"===r.toLowerCase()&&a.trim().split(/\s+/).forEach(c=>i.addClassName(c))}),i}(e),i=[];this.matcher.match(t,(r,o)=>i.push(...o)),i.length>0&&(this.directives.set(e,i),this.isInDeferBlock||this.eagerDirectives.push(...i)),e.references.forEach(r=>{let o=null;if(""===r.value.trim())o=i.find(a=>a.isComponent)||null;else if(o=i.find(a=>null!==a.exportAs&&a.exportAs.some(l=>l===r.value))||null,null===o)return;this.references.set(r,null!==o?{directive:o,node:e}:e)});const s=(r,o)=>{const a=i.find(c=>c[o].hasBindingPropertyName(r.name));this.bindings.set(r,void 0!==a?a:e)};e.inputs.forEach(r=>s(r,"inputs")),e.attributes.forEach(r=>s(r,"inputs")),e instanceof Ps&&e.templateAttrs.forEach(r=>s(r,"inputs")),e.outputs.forEach(r=>s(r,"outputs")),e.children.forEach(r=>r.visit(this))}visitDeferredBlock(e){const t=this.isInDeferBlock;this.isInDeferBlock=!0,e.children.forEach(i=>i.visit(this)),this.isInDeferBlock=t,e.placeholder?.visit(this),e.loading?.visit(this),e.error?.visit(this)}visitDeferredBlockPlaceholder(e){e.children.forEach(t=>t.visit(this))}visitDeferredBlockError(e){e.children.forEach(t=>t.visit(this))}visitDeferredBlockLoading(e){e.children.forEach(t=>t.visit(this))}visitSwitchBlock(e){e.cases.forEach(t=>t.visit(this))}visitSwitchBlockCase(e){e.children.forEach(t=>t.visit(this))}visitForLoopBlock(e){e.item.visit(this),Object.values(e.contextVariables).forEach(t=>t.visit(this)),e.children.forEach(t=>t.visit(this)),e.empty?.visit(this)}visitForLoopBlockEmpty(e){e.children.forEach(t=>t.visit(this))}visitIfBlock(e){e.branches.forEach(t=>t.visit(this))}visitIfBlockBranch(e){e.expressionAlias?.visit(this),e.children.forEach(t=>t.visit(this))}visitContent(e){}visitVariable(e){}visitReference(e){}visitTextAttribute(e){}visitBoundAttribute(e){}visitBoundEvent(e){}visitBoundAttributeOrEvent(e){}visitText(e){}visitBoundText(e){}visitIcu(e){}visitDeferredTrigger(e){}visitUnknownBlock(e){}}class A_ extends yI{constructor(e,t,i,s,r,o,a,l,c){super(),this.bindings=e,this.symbols=t,this.usedPipes=i,this.eagerPipes=s,this.deferBlocks=r,this.nestingLevel=o,this.scope=a,this.rootNode=l,this.level=c,this.visitNode=u=>u.visit(this)}visit(e,t){e instanceof mn?e.visit(this,t):e.visit(this)}static applyWithScope(e,t){const i=new Map,s=new Map,r=new Map,o=new Set,a=new Set,l=e instanceof Ps?e:null,c=new Map;return new A_(i,s,o,a,c,r,t,l,0).ingest(e),{expressions:i,symbols:s,nestingLevel:r,usedPipes:o,eagerPipes:a,deferBlocks:c}}ingest(e){if(e instanceof Ps)e.variables.forEach(this.visitNode),e.children.forEach(this.visitNode),this.nestingLevel.set(e,this.level);else if(e instanceof dp)null!==e.expressionAlias&&this.visitNode(e.expressionAlias),e.children.forEach(this.visitNode),this.nestingLevel.set(e,this.level);else if(e instanceof Ty)this.visitNode(e.item),Object.values(e.contextVariables).forEach(t=>this.visitNode(t)),e.trackBy.visit(this),e.children.forEach(this.visitNode),this.nestingLevel.set(e,this.level);else if(e instanceof up){if(this.scope.rootNode!==e)throw new Error(`Assertion error: resolved incorrect scope for deferred block ${e}`);this.deferBlocks.set(e,this.scope),e.children.forEach(t=>t.visit(this)),this.nestingLevel.set(e,this.level)}else e instanceof X0||e instanceof Z0||e instanceof Y0||e instanceof W0||e instanceof Q0?(e.children.forEach(t=>t.visit(this)),this.nestingLevel.set(e,this.level)):e.forEach(this.visitNode)}visitElement(e){e.inputs.forEach(this.visitNode),e.outputs.forEach(this.visitNode),e.children.forEach(this.visitNode),e.references.forEach(this.visitNode)}visitTemplate(e){e.inputs.forEach(this.visitNode),e.outputs.forEach(this.visitNode),e.templateAttrs.forEach(this.visitNode),e.references.forEach(this.visitNode),this.ingestScopedNode(e)}visitVariable(e){null!==this.rootNode&&this.symbols.set(e,this.rootNode)}visitReference(e){null!==this.rootNode&&this.symbols.set(e,this.rootNode)}visitText(e){}visitContent(e){}visitTextAttribute(e){}visitUnknownBlock(e){}visitDeferredTrigger(){}visitIcu(e){Object.keys(e.vars).forEach(t=>e.vars[t].visit(this)),Object.keys(e.placeholders).forEach(t=>e.placeholders[t].visit(this))}visitBoundAttribute(e){e.value.visit(this)}visitBoundEvent(e){e.handler.visit(this)}visitDeferredBlock(e){this.ingestScopedNode(e),e.triggers.when?.value.visit(this),e.prefetchTriggers.when?.value.visit(this),e.placeholder&&this.visitNode(e.placeholder),e.loading&&this.visitNode(e.loading),e.error&&this.visitNode(e.error)}visitDeferredBlockPlaceholder(e){this.ingestScopedNode(e)}visitDeferredBlockError(e){this.ingestScopedNode(e)}visitDeferredBlockLoading(e){this.ingestScopedNode(e)}visitSwitchBlock(e){e.expression.visit(this),e.cases.forEach(this.visitNode)}visitSwitchBlockCase(e){e.expression?.visit(this),this.ingestScopedNode(e)}visitForLoopBlock(e){e.expression.visit(this),this.ingestScopedNode(e),e.empty?.visit(this)}visitForLoopBlockEmpty(e){this.ingestScopedNode(e)}visitIfBlock(e){e.branches.forEach(t=>t.visit(this))}visitIfBlockBranch(e){e.expression?.visit(this),this.ingestScopedNode(e)}visitBoundText(e){e.value.visit(this)}visitPipe(e,t){return this.usedPipes.add(e.name),this.scope.isDeferred||this.eagerPipes.add(e.name),super.visitPipe(e,t)}visitPropertyRead(e,t){return this.maybeMap(e,e.name),super.visitPropertyRead(e,t)}visitSafePropertyRead(e,t){return this.maybeMap(e,e.name),super.visitSafePropertyRead(e,t)}visitPropertyWrite(e,t){return this.maybeMap(e,e.name),super.visitPropertyWrite(e,t)}ingestScopedNode(e){const t=this.scope.getChildScope(e);new A_(this.bindings,this.symbols,this.usedPipes,this.eagerPipes,this.deferBlocks,this.nestingLevel,t,e,this.level+1).ingest(e)}maybeMap(e,t){if(!(e.receiver instanceof Zi))return;let i=this.scope.lookup(t);null!==i&&this.bindings.set(e,i)}}class wfe{constructor(e,t,i,s,r,o,a,l,c,u,d,h){this.target=e,this.directives=t,this.eagerDirectives=i,this.bindings=s,this.references=r,this.exprTargets=o,this.symbols=a,this.nestingLevel=l,this.scopedNodeEntities=c,this.usedPipes=u,this.eagerPipes=d,this.deferBlocks=h}getEntitiesInScope(e){return this.scopedNodeEntities.get(e)??new Set}getDirectivesOfNode(e){return this.directives.get(e)||null}getReferenceTarget(e){return this.references.get(e)||null}getConsumerOfBinding(e){return this.bindings.get(e)||null}getExpressionTarget(e){return this.exprTargets.get(e)||null}getDefinitionNodeOfSymbol(e){return this.symbols.get(e)||null}getNestingLevel(e){return this.nestingLevel.get(e)||0}getUsedDirectives(){const e=new Set;return this.directives.forEach(t=>t.forEach(i=>e.add(i))),Array.from(e.values())}getEagerlyUsedDirectives(){const e=new Set(this.eagerDirectives);return Array.from(e.values())}getUsedPipes(){return Array.from(this.usedPipes)}getEagerlyUsedPipes(){return Array.from(this.eagerPipes)}getDeferBlocks(){return Array.from(this.deferBlocks.keys())}getDeferredTriggerTarget(e,t){if(!(t instanceof lB||t instanceof cB||t instanceof aB))return null;const i=t.reference;if(null===i){let r=null;if(null!==e.placeholder)for(const o of e.placeholder.children)if(!(o instanceof Cy)){if(null!==r)return null;o instanceof ms&&(r=o)}return r}const s=this.findEntityInScope(e,i);if(s instanceof K0&&this.getDefinitionNodeOfSymbol(s)!==e){const r=this.getReferenceTarget(s);if(null!==r)return this.referenceTargetToElement(r)}if(null!==e.placeholder){const r=this.findEntityInScope(e.placeholder,i),o=r instanceof K0?this.getReferenceTarget(r):null;if(null!==o)return this.referenceTargetToElement(o)}return null}isDeferred(e){for(const t of this.deferBlocks.values()){const i=[t];for(;i.length>0;){const s=i.pop();if(s.elementsInScope.has(e))return!0;i.push(...s.childScopes.values())}}return!1}findEntityInScope(e,t){const i=this.getEntitiesInScope(e);for(const s of i)if(s.name===t)return s;return null}referenceTargetToElement(e){return e instanceof ms?e:e instanceof Ps?null:this.referenceTargetToElement(e.node)}}class bfe{}const k_=!0;class Cfe{constructor(e=new Bse){this.jitEvaluator=e,this.FactoryTarget=Hr,this.ResourceLoader=bfe,this.elementSchemaRegistry=new h_}compilePipe(e,t,i){const r=nV({name:i.name,type:An(i.type),typeArgumentCount:0,deps:null,pipeName:i.pipeName,pure:i.pure,isStandalone:i.isStandalone});return this.jitExpression(r.expression,e,t,[])}compilePipeDeclaration(e,t,i){const r=nV(function $fe(n){return{name:n.type.name,type:An(n.type),typeArgumentCount:0,pipeName:n.name,deps:null,pure:n.pure??!0,isStandalone:n.isStandalone??!1}}(i));return this.jitExpression(r.expression,e,t,[])}compileInjectable(e,t,i){const{expression:s,statements:r}=TB({name:i.name,type:An(i.type),typeArgumentCount:i.typeArgumentCount,providedIn:l8(i.providedIn),useClass:Ld(i,"useClass"),useFactory:a8(i,"useFactory"),useValue:Ld(i,"useValue"),useExisting:Ld(i,"useExisting"),deps:i.deps?.map(c8)},!0);return this.jitExpression(s,e,t,r)}compileInjectableDeclaration(e,t,i){const{expression:s,statements:r}=TB({name:i.type.name,type:An(i.type),typeArgumentCount:0,providedIn:l8(i.providedIn),useClass:Ld(i,"useClass"),useFactory:a8(i,"useFactory"),useValue:Ld(i,"useValue"),useExisting:Ld(i,"useExisting"),deps:i.deps?.map(u8)},!0);return this.jitExpression(s,e,t,r)}compileInjector(e,t,i){const r=JB({name:i.name,type:An(i.type),providers:i.providers&&i.providers.length>0?new Pe(i.providers):null,imports:i.imports.map(o=>new Pe(o))});return this.jitExpression(r.expression,e,t,[])}compileInjectorDeclaration(e,t,i){const s=function Ufe(n){return{name:n.type.name,type:An(n.type),providers:void 0!==n.providers&&n.providers.length>0?new Pe(n.providers):null,imports:void 0!==n.imports?n.imports.map(e=>new Pe(e)):[]}}(i),r=JB(s);return this.jitExpression(r.expression,e,t,[])}compileNgModule(e,t,i){const r=jse({kind:Wo.Global,type:An(i.type),bootstrap:i.bootstrap.map(An),declarations:i.declarations.map(An),publicDeclarationTypes:null,imports:i.imports.map(An),includeImportTypes:!0,exports:i.exports.map(An),selectorScopeMode:jy.Inline,containsForwardDecls:!1,schemas:i.schemas?i.schemas.map(An):null,id:i.id?new Pe(i.id):null});return this.jitExpression(r.expression,e,t,[])}compileNgModuleDeclaration(e,t,i){const s=function Hse(n){const e=new kn;return e.set("type",new Pe(n.type)),void 0!==n.bootstrap&&e.set("bootstrap",new Pe(n.bootstrap)),void 0!==n.declarations&&e.set("declarations",new Pe(n.declarations)),void 0!==n.imports&&e.set("imports",new Pe(n.imports)),void 0!==n.exports&&e.set("exports",new Pe(n.exports)),void 0!==n.schemas&&e.set("schemas",new Pe(n.schemas)),void 0!==n.id&&e.set("id",new Pe(n.id)),z(m.defineNgModule).callFn([e.toLiteralMap()])}(i);return this.jitExpression(s,e,t,[])}compileDirective(e,t,i){const s=i8(i);return this.compileDirectiveFromMeta(e,t,s)}compileDirectiveDeclaration(e,t,i){const r=s8(i,this.createParseSourceSpan("Directive",i.type.name,t));return this.compileDirectiveFromMeta(e,t,r)}compileDirectiveFromMeta(e,t,i){const s=new QL,o=function ife(n,e,t){const i=W3(n,e,t);return Q3(i,n),{expression:z(m.defineDirective).callFn([i.toLiteralMap()],void 0,!0),type:Z3(n),statements:[]}}(i,s,x_());return this.jitExpression(o.expression,e,t,s.statements)}compileComponent(e,t,i){const{template:s,interpolation:r,deferBlocks:o}=o8(i.template,i.name,t,i.preserveWhitespaces,i.interpolation),a={...i,...i8(i),selector:i.selector||this.elementSchemaRegistry.getDefaultComponentElementName(),template:s,declarations:i.declarations.map(Tfe),declarationListEmitMode:0,deferBlocks:o,deferrableTypes:new Map,deferrableDeclToImportDecl:new Map,deferBlockDepsEmitMode:0,styles:[...i.styles,...s.styles],encapsulation:i.encapsulation,interpolation:r,changeDetection:i.changeDetection??null,animations:null!=i.animations?new Pe(i.animations):null,viewProviders:null!=i.viewProviders?new Pe(i.viewProviders):null,relativeContextFilePath:"",i18nUseExternalIds:!0,useTemplatePipeline:k_};return this.compileComponentFromMeta(e,`ng:///${i.name}.js`,a)}compileComponentDeclaration(e,t,i){const r=function xfe(n,e,t){const{template:i,interpolation:s,deferBlocks:r}=o8(n.template,n.type.name,t,n.preserveWhitespaces??!1,n.interpolation),o=[];if(n.dependencies)for(const a of n.dependencies)switch(a.kind){case"directive":case"component":o.push(Tx(a));break;case"pipe":o.push(Afe(a))}else(n.components||n.directives||n.pipes)&&(n.components&&o.push(...n.components.map(a=>Tx(a,!0))),n.directives&&o.push(...n.directives.map(a=>Tx(a))),n.pipes&&o.push(...function Dfe(n){return n?Object.keys(n).map(e=>({kind:Kl.Pipe,name:e,type:new Pe(n[e])})):[]}(n.pipes)));return{...s8(n,e),template:i,styles:n.styles??[],declarations:o,viewProviders:void 0!==n.viewProviders?new Pe(n.viewProviders):null,animations:void 0!==n.animations?new Pe(n.animations):null,deferBlocks:r,deferrableTypes:new Map,deferrableDeclToImportDecl:new Map,deferBlockDepsEmitMode:0,changeDetection:n.changeDetection??np.Default,encapsulation:n.encapsulation??ar.Emulated,interpolation:s,declarationListEmitMode:2,relativeContextFilePath:"",i18nUseExternalIds:!0,useTemplatePipeline:k_}}(i,this.createParseSourceSpan("Component",i.type.name,t),t);return this.compileComponentFromMeta(e,t,r)}compileComponentFromMeta(e,t,i){const s=new QL,o=function rfe(n,e,t){const i=W3(n,e,t);Q3(i,n);const s=n.selector&&Pa.parse(n.selector),r=s&&s[0];if(r){const d=r.getAttrs();d.length&&i.set("attrs",e.getConstLiteral(le(d.map(h=>w(null!=h?h:void 0))),!0))}const o=n.name,a=o?`${o}_Template`:null;let l=null;if(n.deferBlocks.size>0&&n.deferrableTypes.size>0&&1===n.deferBlockDepsEmitMode&&(l=function sfe(n,e,t){const i=[];for(const[r,{importPath:o,isDefaultImport:a}]of t){const l=jt([new gt("m",Ms)],te("m").prop(a?"default":r)),c=new Ba(o).prop("then").callFn([l]);i.push(c)}const s=jt([],le(i));return n.statements.push(s.toDeclStmt(e,Ln.Final)),te(e)}(e,`${o}_DeferFn`,n.deferrableTypes)),t3||n.useTemplatePipeline){const d=function Kue(n,e,t,i,s,r,o){const a=new RI(n,t,Y$,i,s,r,o);return Ya(a.root,e),a}(n.name,n.template.nodes,e,n.relativeContextFilePath,n.i18nUseExternalIds,n.deferBlocks,l);G$(d,ee.Tmpl);const h=Xue(d,e);null!==d.contentSelectors&&i.set("ngContentSelectors",d.contentSelectors),i.set("decls",w(d.root.decls)),i.set("vars",w(d.root.vars)),d.consts.length>0&&i.set("consts",d.constsInitializers.length>0?jt([],[...d.constsInitializers,new ln(le(d.consts))]):le(d.consts)),i.set("template",h)}else{const d=n.template,h=new wx(e,Zp.createRootScope(),0,o,null,null,a,m.namespaceHTML,n.relativeContextFilePath,n.i18nUseExternalIds,n.deferBlocks,new Map,l),f=h.buildTemplateFunction(d.nodes,[]),p=h.getNgContentSelectors();p&&i.set("ngContentSelectors",p),i.set("decls",w(h.getConstCount())),i.set("vars",w(h.getVarCount()));const{constExpressions:g,prepareStatements:v}=h.getConsts();if(g.length>0){let _=le(g);v.length>0&&(_=jt([],[...v,new ln(_)])),i.set("consts",_)}i.set("template",f)}if(3!==n.declarationListEmitMode&&n.declarations.length>0)i.set("dependencies",function ofe(n,e){switch(e){case 0:return n;case 1:return jt([],n);case 2:return jt([],n.prop("map").callFn([z(m.resolveForwardRef)]));case 3:throw new Error("Unsupported with an array of pre-resolved dependencies")}}(le(n.declarations.map(d=>d.type)),n.declarationListEmitMode));else if(3===n.declarationListEmitMode){const d=[n.type.value];n.rawImports&&d.push(n.rawImports),i.set("dependencies",z(m.getComponentDepsFactory).callFn(d))}if(null===n.encapsulation&&(n.encapsulation=ar.Emulated),n.styles&&n.styles.length){const h=(n.encapsulation==ar.Emulated?function vfe(n,e,t){const i=new pV;return n.map(s=>i.shimCssText(s,e,t))}(n.styles,"_ngcontent-%COMP%","_nghost-%COMP%"):n.styles).reduce((f,p)=>(p.trim().length>0&&f.push(e.getConstLiteral(w(p))),f),[]);h.length>0&&i.set("styles",le(h))}else n.encapsulation===ar.Emulated&&(n.encapsulation=ar.None);return n.encapsulation!==ar.Emulated&&i.set("encapsulation",w(n.encapsulation)),null!==n.animations&&i.set("data",Gt([{key:"animation",value:n.animations,quoted:!1}])),null!==n.changeDetection&&("number"==typeof n.changeDetection&&n.changeDetection!==np.Default?i.set("changeDetection",w(n.changeDetection)):"object"==typeof n.changeDetection&&i.set("changeDetection",n.changeDetection)),{expression:z(m.defineComponent).callFn([i.toLiteralMap()],void 0,!0),type:Y3(n),statements:[]}}(i,s,x_(i.interpolation));return this.jitExpression(o.expression,e,t,s.statements)}compileFactory(e,t,i){const s=Ul({name:i.name,type:An(i.type),typeArgumentCount:i.typeArgumentCount,deps:(n=i.deps,null==n?null:n.map(c8)),target:i.target});var n;return this.jitExpression(s.expression,e,t,s.statements)}compileFactoryDeclaration(e,t,i){const s=Ul({name:i.type.name,type:An(i.type),typeArgumentCount:0,deps:Array.isArray(i.deps)?i.deps.map(u8):i.deps,target:i.target});return this.jitExpression(s.expression,e,t,s.statements)}createParseSourceSpan(e,t,i){return function Nse(n,e,t){const s=new pI("",`in ${n} ${e} in ${t}`);return new $e(new Zl(s,-1,-1,-1),new Zl(s,-1,-1,-1))}(e,t,i)}jitExpression(e,t,i,s){const r=[...s,new Zn("$def",e,void 0,Ln.Exported)];return this.jitEvaluator.evaluateStatements(i,r,new Use(t),!0).$def}}function e8(n){return{...n,isSignal:n.isSignal,predicate:n8(n.predicate),read:n.read?new Pe(n.read):null,static:n.static,emitDistinctChangesOnly:n.emitDistinctChangesOnly}}function t8(n){return{propertyName:n.propertyName,first:n.first??!1,predicate:n8(n.predicate),descendants:n.descendants??!1,read:n.read?new Pe(n.read):null,static:n.static??!1,emitDistinctChangesOnly:n.emitDistinctChangesOnly??!0,isSignal:!!n.isSignal}}function n8(n){return Array.isArray(n)?n:U0(new Pe(n),1)}function i8(n){const e=function Vfe(n){return n.reduce((e,t)=>{if("string"==typeof t){const[i,s]=f8(t);e[s]={bindingPropertyName:i,classPropertyName:s,required:!1,isSignal:!1,transformFunction:null}}else e[t.name]={bindingPropertyName:t.alias||t.name,classPropertyName:t.name,required:t.required||!1,isSignal:!1,transformFunction:null!=t.transform?new Pe(t.transform):null};return e},{})}(n.inputs||[]),t=Dx(n.outputs||[]),i=n.propMetadata,s={},r={};for(const a in i)i.hasOwnProperty(a)&&i[a].forEach(l=>{Ofe(l)?s[a]={bindingPropertyName:l.alias||a,classPropertyName:a,required:l.required||!1,isSignal:!!l.isSignal,transformFunction:null!=l.transform?new Pe(l.transform):null}:Ffe(l)&&(r[a]=l.alias||a)});const o=n.hostDirectives?.length?n.hostDirectives.map(a=>"function"==typeof a?{directive:An(a),inputs:null,outputs:null,isForwardReference:!1}:{directive:An(a.directive),isForwardReference:!1,inputs:a.inputs?Dx(a.inputs):null,outputs:a.outputs?Dx(a.outputs):null}):null;return{...n,typeArgumentCount:0,typeSourceSpan:n.typeSourceSpan,type:An(n.type),deps:null,host:{...Nfe(n.propMetadata,n.typeSourceSpan,n.host),useTemplatePipeline:k_},inputs:{...e,...s},outputs:{...t,...r},queries:n.queries.map(e8),providers:null!=n.providers?new Pe(n.providers):null,viewQueries:n.viewQueries.map(e8),fullInheritance:!1,hostDirectives:o}}function s8(n,e){const t=n.hostDirectives?.length?n.hostDirectives.map(i=>({directive:An(i.directive),isForwardReference:!1,inputs:i.inputs?r8(i.inputs):null,outputs:i.outputs?r8(i.outputs):null})):null;return{name:n.type.name,type:An(n.type),typeSourceSpan:e,selector:n.selector??null,inputs:n.inputs?Lfe(n.inputs):{},outputs:n.outputs??{},host:Sfe(n.host),queries:(n.queries??[]).map(t8),viewQueries:(n.viewQueries??[]).map(t8),providers:void 0!==n.providers?new Pe(n.providers):null,exportAs:n.exportAs??null,usesInheritance:n.usesInheritance??!1,lifecycle:{usesOnChanges:n.usesOnChanges??!1},deps:null,typeArgumentCount:0,fullInheritance:!1,isStandalone:n.isStandalone??!1,isSignal:n.isSignal??!1,hostDirectives:t}}function Sfe(n={}){return{attributes:Ife(n.attributes??{}),listeners:n.listeners??{},properties:n.properties??{},specialAttributes:{classAttr:n.classAttribute,styleAttr:n.styleAttribute},useTemplatePipeline:k_}}function r8(n){let e=null;for(let t=1;t<n.length;t+=2)e=e||{},e[n[t-1]]=n[t];return e}function Ife(n){const e={};for(const t of Object.keys(n))e[t]=new Pe(n[t]);return e}function Tfe(n){return{...n,type:new Pe(n.type)}}function Tx(n,e=null){return{kind:Kl.Directive,isComponent:e||"component"===n.kind,selector:n.selector,type:new Pe(n.type),inputs:n.inputs??[],outputs:n.outputs??[],exportAs:n.exportAs??null}}function Afe(n){return{kind:Kl.Pipe,name:n.name,type:new Pe(n.type)}}function o8(n,e,t,i,s){const r=s?Ny.fromArray(s):Fs,o=function qhe(n,e,t={}){const{interpolationConfig:i,preserveWhitespaces:s,enableI18nLegacyMessageIdFormat:r}=t,o=x_(i),l=(new n3).parse(n,e,{leadingTriviaChars:Phe,...t,tokenizeExpansionForms:!0,tokenizeBlocks:t.enableBlockSyntax??!0});if(!t.alwaysAttemptHtmlToR3AstConversion&&l.errors&&l.errors.length>0){const b={interpolationConfig:i,preserveWhitespaces:s,errors:l.errors,nodes:[],styleUrls:[],styles:[],ngContentSelectors:[]};return t.collectCommentNodes&&(b.commentNodes=[]),b}let c=l.rootNodes;const u=new _$(i,!s,r),d=u.visitAllWithErrors(c);if(!t.alwaysAttemptHtmlToR3AstConversion&&d.errors&&d.errors.length>0){const b={interpolationConfig:i,preserveWhitespaces:s,errors:d.errors,nodes:[],styleUrls:[],styles:[],ngContentSelectors:[]};return t.collectCommentNodes&&(b.commentNodes=[]),b}c=d.rootNodes,s||(c=me(new o3,c),u.hasI18nMeta&&(c=me(new _$(i,!1),c)));const{nodes:h,errors:f,styleUrls:p,styles:g,ngContentSelectors:v,commentNodes:_}=function yhe(n,e,t){const i=new _he(e,t),o={nodes:me(i,n,n),errors:e.errors.concat(i.errors),styleUrls:i.styleUrls,styles:i.styles,ngContentSelectors:i.ngContentSelectors};return t.collectCommentNodes&&(o.commentNodes=i.commentNodes),o}(c,o,{collectCommentNodes:!!t.collectCommentNodes});f.push(...l.errors,...d.errors);const E={interpolationConfig:i,preserveWhitespaces:s,errors:f.length>0?f:null,nodes:h,styleUrls:p,styles:g,ngContentSelectors:v};return t.collectCommentNodes&&(E.commentNodes=_),E}(n,t,{preserveWhitespaces:i,interpolationConfig:r});if(null!==o.errors){const c=o.errors.map(u=>u.toString()).join(", ");throw new Error(`Errors during JIT compilation of template for ${e}: ${c}`)}return{template:o,interpolation:r,deferBlocks:Mfe(new _fe(new tp).bind({template:o.nodes}))}}function Ld(n,e){if(n.hasOwnProperty(e))return U0(new Pe(n[e]),0)}function a8(n,e){if(n.hasOwnProperty(e))return new Pe(n[e])}function l8(n){return U0("function"==typeof n?new Pe(n):new pn(n??null),0)}function c8(n){const e=null!=n.attribute,t=null===n.token?null:new Pe(n.token);return d8(e?new Pe(n.attribute):t,e,n.host,n.optional,n.self,n.skipSelf)}function u8(n){const e=n.attribute??!1;return d8(null===n.token?null:new Pe(n.token),e,n.host??!1,n.optional??!1,n.self??!1,n.skipSelf??!1)}function d8(n,e,t,i,s,r){return{token:n,attributeNameType:e?w("unknown"):null,host:t,optional:i,self:s,skipSelf:r}}function Mfe(n){const e=n.getDeferBlocks(),t=new Map;for(const i of e){const s=new Map;h8(i,i.triggers,n,s),h8(i,i.prefetchTriggers,n,s),t.set(i,{deps:[],triggerElements:s})}return t}function h8(n,e,t,i){Object.keys(e).forEach(s=>{const r=e[s];i.set(r,t.getDeferredTriggerTarget(n,r))})}function Nfe(n,e,t){const i=function gfe(n){const e={},t={},i={},s={};for(const r of Object.keys(n)){const o=n[r],a=r.match(pfe);if(null===a)switch(r){case"class":if("string"!=typeof o)throw new Error("Class binding must be string");s.classAttr=o;break;case"style":if("string"!=typeof o)throw new Error("Style binding must be string");s.styleAttr=o;break;default:e[r]="string"==typeof o?w(o):o}else if(null!=a[1]){if("string"!=typeof o)throw new Error("Property binding must be string");i[a[1]]=o}else if(null!=a[2]){if("string"!=typeof o)throw new Error("Event binding must be string");t[a[2]]=o}}return{attributes:e,listeners:t,properties:i,specialAttributes:s}}(t||{}),s=function mfe(n,e){const t=x_();return t.createDirectiveHostEventAsts(n.listeners,e),t.createBoundHostProperties(n.properties,e),t.errors}(i,e);if(s.length)throw new Error(s.map(r=>r.msg).join("\n"));for(const r in n)n.hasOwnProperty(r)&&n[r].forEach(o=>{Rfe(o)?i.properties[o.hostPropertyName||r]=Mie("this",r):Pfe(o)&&(i.listeners[o.eventName||r]=`${r}(${(o.args||[]).join(",")})`)});return i}function Rfe(n){return"HostBinding"===n.ngMetadataName}function Pfe(n){return"HostListener"===n.ngMetadataName}function Ofe(n){return"Input"===n.ngMetadataName}function Ffe(n){return"Output"===n.ngMetadataName}function Lfe(n){return Object.keys(n).reduce((e,t)=>{const i=n[t];return e[t]="string"==typeof i||Array.isArray(i)?function Bfe(n){return"string"==typeof n?{bindingPropertyName:n,classPropertyName:n,transformFunction:null,required:!1,isSignal:!1}:{bindingPropertyName:n[0],classPropertyName:n[1],transformFunction:n[2]?new Pe(n[2]):null,required:!1,isSignal:!1}}(i):{bindingPropertyName:i.publicName,classPropertyName:t,transformFunction:null!==i.transformFunction?new Pe(i.transformFunction):null,required:i.isRequired,isSignal:i.isSignal},e},{})}function Dx(n){return n.reduce((e,t)=>{const[i,s]=f8(t);return e[s]=i,e},{})}function f8(n){const[e,t]=n.split(":",2).map(i=>i.trim());return[t??e,e]}new class wie{constructor(e){this.full=e;const t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}}("17.3.12"),new class Jfe{constructor(){this.closedByParent=!1,this.implicitNamespacePrefix=null,this.isVoid=!1,this.ignoreFirstLf=!1,this.canSelfClose=!0,this.preventNamespaceInheritance=!1}requireExtraParent(e){return!1}isClosedByChild(e){return!1}getContentType(){return zr.PARSABLE_DATA}},function jfe(n){(n.ng||(n.ng={})).\u0275compilerFacade=new Cfe}(ap);let nge=(()=>{class n{constructor(){this.COMMON_ERROR_MESSAGE="Oops! Something went wrong. Please try again after some time. If this issue persists, please contact your administrator.",this.errorStatus={errors:{wrongAPIUrl:"You have entered the wrong API URL..!",10403:"Entity search feature is disabled, please contact your administrator for support",10500:this.COMMON_ERROR_MESSAGE,10408:"I'm sorry, the request was canceled due to the configured HttpClient.Timeout of 90 seconds elapsing.",10502:this.COMMON_ERROR_MESSAGE,10406:"I'm sorry I'm still learning, I've not yet been trained on this area of GEMS. My knowledge is expanding all the time and we'll be adding support for this soon",10412:"I'm sorry I'm still learning, I've not yet been trained on this area of GEMS. My knowledge is expanding all the time and we'll be adding support for this soon.",10429:"Due to unexpected capacity constraint, Gems AI bot is unable to respond to your message, please try again soon.",10425:"Please wait, we are building screen and field information which is required to run an entity search, try after sometime.",11404:"I'm sorry, but this content is no longer available. Due to system policies, chat history is only stored for a limited time, and this message has expired. If you need assistance, please try re-entering your request.",10422:"The response was filtered due to the prompt triggering Azure OpenAI's content management policy. Please modify your prompt and retry.",12400:"Sorry, I couldn\u2019t process that request properly. could you try again?",12404:"The file with the provided Document ID does not exist in GEMS. Please check the ID and try again.",12415:"Unable to process the selected Document. Only PDF and DOCX formats are supported.",12401:"Please provide the target language for translation",12402:"One or more document fields are invalid. Please ensure 'documentId' is an numeric and both 'documentName' and 'documentType' are string",12405:"At least two documents are required to perform a comparison. Please select multiple documents and try again.",12406:"Oops! It looks like same documents are selected.",12430:"The requested language is not supported for translation. Please provide a different language.",11408:"This request took too long to process. Please try again later.",11422:"Your question seems unrelated to the selected data, would you like to start a new conversation or continue in Reasoning mode?",12429:"Your available token quota has been exhausted. Please contact support or upgrade your plan.",11429:"The system is currently handling a high volume of queries. Please try again in a few moments.",11423:"I'm here to help only with questions related to your entity data or compliance information.",11433:"This document exceeds the processing size limit. Please simplify or shorten the content and try again.",11415:"Invalid document - The document does not match the expected content format.",11403:"You do not have permission to access this resource for reasoning.",defaultError:"Something went wrong. Please try again",loginFailed:"Please login for more info.",refreshToken:"Your session has expired. We're retrying the request, please hold on a moment.",refreshTokenError:"Your login session has expired. To resolve this, please log out and log back in. If the issue persists, contact support for assistance.",apiError:"Something went wrong. Please try again",tokenBalanceError:"You have reached your AI monthly limit. Visit GEMS AI Token Management Area for More Details.",entityError:this.COMMON_ERROR_MESSAGE,feedbackMessage:"Thank You , Your feedback has been submitted.",negativeFeedbackIsAdminMessage:'\n                  Thanks for your feedback, this will help us improve the quality of our answers.\n                  Try to rephrase your question or alternatively view our <a href="https://gems.cgshelps.com/en/" target="_blank"> help center </a> or contact our <a id="IntercomChat" class="live-agent"> support team via Live Chat</a>.\n                ',negativeFeedbackIsNotAdminMessage:'Thanks for your feedback, this will help us improve the quality of our answers.\n                 Try to rephrase your question or alternatively view our <a href="https://gems.cgshelps.com/en/" target="_blank"> help center </a> or contact your GEMS administrator who maybe able to help you directly.'}}}getErrorMessage(t,i){return 10403===t?"Admin"===i?'This feature is disabled. Please <a id="IntercomChat" class="live-agent">talk to our live agent</a> for further assistance.':"This feature is disabled. Please contact your administrator for further assistance.":10404===t||10500===t||10502===t?"Admin"===i?'I\'m sorry, I could not find any relevant information. Please rephrase your question or <a id="IntercomChat" class="live-agent">talk to an agent</a>.':"I'm sorry, I could not find any relevant information. Please rephrase your question or contact your administrator.":10408===t?this.errorStatus.errors[10408]:10204===t?"Admin"===i?'I\'m sorry, I could not find any relevant information. Please rephrase your question or <a id="IntercomChat" class="live-agent">talk to an agent</a>.':"I'm sorry, I could not find any relevant information. Please rephrase your question or talk to your administrator.":10406===t?this.errorStatus.errors[10406]:10412===t?this.errorStatus.errors[10412]:10429===t?this.errorStatus.errors[10429]:10425===t?this.errorStatus.errors[10425]:11404===t?this.errorStatus.errors[11404]:10422===t?this.errorStatus.errors[10422]:12400===t?this.errorStatus.errors[12400]:12404===t?this.errorStatus.errors[12404]:12415===t?this.errorStatus.errors[12415]:12401===t?this.errorStatus.errors[12401]:12402===t?this.errorStatus.errors[12402]:12430===t?this.errorStatus.errors[12430]:12405===t?this.errorStatus.errors[12405]:12406===t?this.errorStatus.errors[12406]:11422===t?this.errorStatus.errors[11422]:12429===t?this.errorStatus.errors[12429]:11408===t?this.errorStatus.errors[11408]:11429===t?this.errorStatus.errors[11429]:11433===t?this.errorStatus.errors[11433]:11423===t?this.errorStatus.errors[11423]:11415===t?this.errorStatus.errors[11415]:12404===t?this.errorStatus.errors[12404]:11403===t?this.errorStatus.errors[11403]:this.errorStatus.errors[t]||this.errorStatus.errors.defaultError}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class A8 extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}}function Rx(n){}let rge=(()=>{class n{constructor(t){this.common=t,this.cancelSubject=new ye,this.controller=null}statusStream(t){this.widgetaccess=this.common.getFullAccessToken(),this.accessServer=this.widgetaccess?.BotApiServer;const s=this.accessServer+"/api/gems-ai/chat/StatusAPI";return new Ut(r=>{this.controller=new AbortController;const o=this.controller.signal;fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.widgetaccess?.AccessToken,"X-API-Type":"Web","X-Claims-Data":null==this.widgetaccess?.xclaimsdata?"null":this.widgetaccess?.xclaimsdata},body:JSON.stringify(t),signal:o}).then(a=>{if(!a.ok)throw new Error(`HTTP error! Status: ${a.status}`);const l=a.body?.getReader(),c=new TextDecoder,u=function ige(n){if("function"==typeof n)throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:e=Rx,onError:t=Rx,onRetry:i=Rx,onComment:s}=n;let a,r="",o=!0,l="",c="";function d(g){if(""===g)return void function f(){l.length>0&&e({id:a,event:c||void 0,data:l.endsWith("\n")?l.slice(0,-1):l}),a=void 0,l="",c=""}();if(g.startsWith(":"))return void(s&&s(g.slice(g.startsWith(": ")?2:1)));const v=g.indexOf(":");-1===v?h(g,"",g):h(g.slice(0,v),g.slice(v+(" "===g[v+1]?2:1)),g)}function h(g,v,_){switch(g){case"event":c=v;break;case"data":l=`${l}${v}\n`;break;case"id":a=v.includes("\0")?void 0:v;break;case"retry":/^\d+$/.test(v)?i(parseInt(v,10)):t(new A8(`Invalid \`retry\` value: "${v}"`,{type:"invalid-retry",value:v,line:_}));break;default:t(new A8(`Unknown field "${g.length>20?`${g.slice(0,20)}\u2026`:g}"`,{type:"unknown-field",field:g,value:v,line:_}))}}return{feed:function u(g){const v=o?g.replace(/^\xEF\xBB\xBF/,""):g,[_,E]=function sge(n){const e=[];let t="",i=0;for(;i<n.length;){const s=n.indexOf("\r",i),r=n.indexOf("\n",i);let o=-1;if(-1!==s&&-1!==r?o=Math.min(s,r):-1!==s?o=s:-1!==r&&(o=r),-1===o){t=n.slice(i);break}{const a=n.slice(i,o);e.push(a),i=o+1,"\r"===n[i-1]&&"\n"===n[i]&&i++}}return[e,t]}(`${r}${v}`);for(const b of _)d(b);r=E,o=!1},reset:function p(g={}){r&&g.consume&&d(r),o=!0,a=void 0,l="",c="",r=""}}}({onEvent:h=>{if("[DONE]"!==h.data)try{const f=JSON.parse(h.data);if(f.status){if(["named-search","kb-generation","search-api"].includes(f.status?.value))return;r.next({status:f.status})}}catch(f){r.error(f)}},onError:h=>{r.error(h)}});!function(){var h=cn(function*(){for(;;){const{value:f,done:p}=yield l.read();if(p)break;const g=c.decode(f,{stream:!0});u.feed(g)}r.complete()});return function(){return h.apply(this,arguments)}}()()}).catch(a=>{"AbortError"===a.name?(console.log("Fetch aborted!"),r.complete()):r.error(a)})})}cancelStatusRequest(){this.cancelSubject.next(),this.controller&&(this.controller.abort(),this.controller=null)}static{this.\u0275fac=function(i){return new(i||n)(P(Gf))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function oge(n,e){if(1&n){const t=ht();S(0,"div",12)(1,"span",13),ce("click",function(){const s=be(t).$implicit;return Ce(O(3).handlePromptClicked(s.Question,s.Id,s.Type))}),S(2,"div",8),$(3),x(),S(4,"div",10),$(5),x()()()}if(2&n){const t=e.$implicit;A(3),bt(t.Title),A(2),bt(t.Context)}}function age(n,e){if(1&n&&(S(0,"div",4)(1,"div",5)(2,"span",6)(3,"div",7)(4,"div",8),$(5,"Chat with Support"),x(),ve(6,"img",9),x(),S(7,"div",10),$(8,"Start a chat with a member of the support team."),x()()(),se(9,oge,6,2,"div",11),Tu(10,"slice"),x()),2&n){const t=O(2);A(9),B("ngForOf",YR(10,1,t.staticPrompts,0,3))}}function lge(n,e){if(1&n&&(S(0,"div"),se(1,age,11,5,"div",3),x()),2&n){const t=O();A(),B("ngIf",t.showCoPilotActions)}}function cge(n,e){if(1&n){const t=ht();S(0,"div",12)(1,"span",13),ce("click",function(){const s=be(t).$implicit;return Ce(O(3).handlePromptClicked(s.Question,s.Id,s.Type))}),S(2,"div",8),$(3),x(),S(4,"div",10),$(5),x()()()}if(2&n){const t=e.$implicit;A(3),bt(t.Title),A(2),bt(t.Context)}}function uge(n,e){if(1&n&&(S(0,"div",4),se(1,cge,6,2,"div",11),x()),2&n){const t=O(2);A(),B("ngForOf",t.staticPrompts)}}function dge(n,e){1&n&&se(0,uge,2,1,"div",3),2&n&&B("ngIf",O().showCoPilotActions)}let hge=(()=>{class n{constructor(t,i,s,r){this.api=t,this.common=i,this.toastr=s,this.log=r,this.staticPrompts=[],this.showCoPilotActions=!0,this.cardData={companyName:"AJM Capital Test CO",entityType:"Close Corporation",caseNumber:"NA",answerDueDate:"NA",dateReceived:"NA",recipient:"NA",daysDue:"NA",sopAssociated:"NA",sopAcknowledge:""},this.records=[{name:"AJM Capital Test CO",entityType:"Close Corporation",jurisdiction:"Ireland"},{name:"Bank Test Company LLC",entityType:"Close Corporation",jurisdiction:"Canada"},{name:"NY Test Company",entityType:"Close Corporation",jurisdiction:"New York"},{name:"LW Test New",entityType:"Close Corporation",jurisdiction:"Ireland"}],this.allRecords=[{name:"Bank Test Company LLC",entityType:"Close Corporation",jurisdiction:"Ireland"},{name:"AJM Capital Test CO",entityType:"Close Corporation",jurisdiction:"Canada"},{name:"NY Test Company",entityType:"Close Corporation",jurisdiction:"New York"},{name:"LW Test New",entityType:"Close Corporation",jurisdiction:"Canada"},{name:"Test New",entityType:"Close Corporation",jurisdiction:"New York"}]}ngOnInit(){this.fetchStaticPrompts()}fetchStaticPrompts(){this.widgetaccess=this.common.getFullAccessToken(),this.accessToken=this.widgetaccess?.AccessToken,this.accessToken&&this.api.getStaticPrompts().subscribe({next:t=>{this.staticPrompts=t.data,setTimeout(()=>{let i=JSON.parse(sessionStorage.getItem("initializeData")||"{}");this.userRole=i?.userRole,"string"==typeof this.userRole?this.userRole=this.userRole?.replace(/ .*/,""):this.log.info("userRole is not a string")},500)},error:t=>{this.log.error("Error fetching static prompts",t),404==t.status&&setTimeout(()=>{this.toastr.error("You have entered the wrong API URL..!","Major Error",{timeOut:5e3})},500)}})}handlePromptClicked(t,i,s){this.handlePromptSelected(t,i,s),sessionStorage.setItem("prompt",t),sessionStorage.setItem("id",i),sessionStorage.setItem("Type",s)}talktoagent(){const i=window.parent.$find("GEMSTabManager");i?(i.navigateToGemsArea("intercom/chat"),this.log.info("Element found:",i)):this.log.error("Element not found")}static{this.\u0275fac=function(i){return new(i||n)(k(ry),k(Gf),k(Bu),k(Lu))}}static{this.\u0275cmp=_i({type:n,selectors:[["app-static-prompts"]],inputs:{handlePromptSelected:"handlePromptSelected",showCoPilotActions:"showCoPilotActions"},decls:4,vars:2,consts:[["other_content",""],[1,""],[4,"ngIf","ngIfElse"],["class","co-pilot-actions",4,"ngIf"],[1,"co-pilot-actions"],["id","IntercomChat","onclick","window.parent.$find('GEMSTabManager').navigateToGemsArea('intercom/chat');",1,"prompt-action"],[1,"button"],[1,"flex-container"],[1,"prompt-header"],["src","assets/Icons/liveChat.svg","alt","Live Chat",1,"headset-icon"],[1,"prompt-content"],["class","prompt-action",4,"ngFor","ngForOf"],[1,"prompt-action"],["id","StaticPrompt",1,"button",3,"click"]],template:function(i,s){if(1&i&&(S(0,"div",1),se(1,lge,2,1,"div",2)(2,dge,1,1,"ng-template",null,0,If),x()),2&i){const r=Iu(3);A(),B("ngIf","Admin"==s.userRole)("ngIfElse",r)}},dependencies:[Vv,xa,R2]})}}return n})();function k8(n,e=0){return function fge(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function N_(n){return Array.isArray(n)?n:[n]}function vn(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Vd(n){return n instanceof tn?n.nativeElement:n}class pge extends wn{constructor(e,t){super()}schedule(e,t=0){return this}}const R_={setInterval(n,e,...t){const{delegate:i}=R_;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=R_;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class Px extends pge{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const s=this.id,r=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(r,s,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return R_.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&R_.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let s,i=!1;try{this.work(e)}catch(r){i=!0,s=r||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Pg(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const tg={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=tg;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const s=e(r=>{t=void 0,n(r)});return new wn(()=>t?.(s))},requestAnimationFrame(...n){const{delegate:e}=tg;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=tg;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},Ox={now:()=>(Ox.delegate||Date).now(),delegate:void 0};class ng{constructor(e,t=ng.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}ng.now=Ox.now;class Fx extends ng{constructor(e,t=ng.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}new class mge extends Fx{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let s;e=e||i.shift();do{if(s=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,s){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw s}}}(class gge extends Px{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=tg.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var s;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:r}=e;null!=t&&(null===(s=r[r.length-1])||void 0===s?void 0:s.id)!==t&&(tg.cancelAnimationFrame(t),e._scheduled=void 0)}});let Lx,yge=1;const P_={};function M8(n){return n in P_&&(delete P_[n],!0)}const _ge={setImmediate(n){const e=yge++;return P_[e]=!0,Lx||(Lx=Promise.resolve()),Lx.then(()=>M8(e)&&n()),e},clearImmediate(n){M8(n)}},{setImmediate:wge,clearImmediate:Ege}=_ge,O_={setImmediate(...n){const{delegate:e}=O_;return(e?.setImmediate||wge)(...n)},clearImmediate(n){const{delegate:e}=O_;return(e?.clearImmediate||Ege)(n)},delegate:void 0},Bx=(new class Cge extends Fx{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let s;e=e||i.shift();do{if(s=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,s){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw s}}}(class bge extends Px{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=O_.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var s;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:r}=e;null!=t&&(null===(s=r[r.length-1])||void 0===s?void 0:s.id)!==t&&(O_.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}}),new Fx(Px)),Ige=Bx;function N8(n=0,e,t=Ige){let i=-1;return null!=e&&(IO(e)?t=e:i=e),new Ut(s=>{let r=function Tge(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;r<0&&(r=0);let o=0;return t.schedule(function(){s.closed||(s.next(o++),0<=i?this.schedule(void 0,i):s.complete())},r)})}function R8(n,e=Bx){return function xge(n){return Jt((e,t)=>{let i=!1,s=null,r=null,o=!1;const a=()=>{if(r?.unsubscribe(),r=null,i){i=!1;const c=s;s=null,t.next(c)}o&&t.complete()},l=()=>{r=null,o&&t.complete()};e.subscribe(Ht(t,c=>{i=!0,s=c,r||xi(n(c)).subscribe(r=Ht(t,a,l))},()=>{o=!0,(!i||!r||r.closed)&&t.complete()}))})}(()=>N8(n,e))}let Vx;try{Vx=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Vx=!1}let ig,uc,$x,yr=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Nl(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Vx)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(i){return new(i||n)(P(Co))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function F_(n){return function Dge(){if(null==ig&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ig=!0}))}finally{ig=ig||!1}return ig}()?n:!!n.capture}function Age(){if(null==uc){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return uc=!1,uc;if("scrollBehavior"in document.documentElement.style)uc=!0;else{const n=Element.prototype.scrollTo;uc=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return uc}function Ux(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Ja(n){return n.composedPath?n.composedPath()[0]:n.target}function jx(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const Nge=new q("cdk-dir-doc",{providedIn:"root",factory:function Rge(){return H(it)}}),Pge=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Hx=(()=>{class n{constructor(t){this.value="ltr",this.change=new Et,t&&(this.value=function Oge(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?Pge.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(i){return new(i||n)(P(Nge,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),rg=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=en({type:n})}static{this.\u0275inj=Yt({})}}return n})(),Lge=(()=>{class n{constructor(t,i,s){this._ngZone=t,this._platform=i,this._scrolled=new ye,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Ut(i=>{this._globalSubscription||this._addGlobalListener();const s=t>0?this._scrolled.pipe(R8(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):we()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const s=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Fn(r=>!r||s.indexOf(r)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((s,r)=>{this._scrollableContainsElement(r,t)&&i.push(r)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let s=Vd(i),r=t.getElementRef().nativeElement;do{if(s==r)return!0}while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>cy(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(i){return new(i||n)(P(Ae),P(yr),P(it,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),O8=(()=>{class n{constructor(t,i,s){this._platform=t,this._change=new ye,this._changeListener=r=>{this._change.next(r)},this._document=s,i.runOutsideAngular(()=>{if(t.isBrowser){const r=this._getWindow();r.addEventListener("resize",this._changeListener),r.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:s}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+s,right:t.left+i,height:s,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),s=t.documentElement,r=s.getBoundingClientRect();return{top:-r.top||t.body.scrollTop||i.scrollY||s.scrollTop||0,left:-r.left||t.body.scrollLeft||i.scrollX||s.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(R8(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(i){return new(i||n)(P(yr),P(Ae),P(it,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),F8=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=en({type:n})}static{this.\u0275inj=Yt({})}}return n})(),L8=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=en({type:n})}static{this.\u0275inj=Yt({imports:[rg,F8,rg,F8]})}}return n})();const _r=new Ut(n=>n.complete());function qs(n){return n<=0?()=>_r:Jt((e,t)=>{let i=0;e.subscribe(Ht(t,s=>{++i<=n&&(t.next(s),n<=i&&t.complete())}))})}class zx{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class qx extends zx{constructor(e,t,i,s,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=s,this.projectableNodes=r}}class B8 extends zx{constructor(e,t,i,s){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=s}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class $ge extends zx{constructor(e){super(),this.element=e instanceof tn?e.nativeElement:e}}class Gx{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof qx?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof B8?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof $ge?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Uge extends Gx{constructor(e,t,i,s,r){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=s,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=r}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let s;return e.viewContainerRef?(s=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>s.destroy())):(s=i.create(e.injector||this._defaultInjector||Zt.NULL),this._appRef.attachView(s.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(s.hostView),s.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(s)),this._attachedPortal=e,s}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(s=>this.outletElement.appendChild(s)),i.detectChanges(),this.setDisposeFn(()=>{let s=t.indexOf(i);-1!==s&&t.remove(s)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Wx=(()=>{class n extends Gx{constructor(t,i,s){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new Et,this.attachDomPortal=r=>{const o=r.element,a=this._document.createComment("dom-portal");r.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=r,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=s}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,r=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(r,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static{this.\u0275fac=function(i){return new(i||n)(k(xo),k(qi),k(it))}}static{this.\u0275dir=ge({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[_t.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Je]})}}return n})(),B_=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=en({type:n})}static{this.\u0275inj=Yt({})}}return n})();function V_(n=1/0){return ci(ua,n)}function $_(...n){const e=Lf(n),t=function HJ(n,e){return"number"==typeof US(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?xi(i[0]):V_(t)(On(i,e)):_r}const V8=Age();class jge{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=vn(-this._previousScrollPosition.left),e.style.top=vn(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,s=this._document.body.style,r=i.scrollBehavior||"",o=s.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),V8&&(i.scrollBehavior=s.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),V8&&(i.scrollBehavior=r,s.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class Hge{constructor(e,t,i,s){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=s,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(Fn(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class $8{enable(){}disable(){}attach(){}}function Qx(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function U8(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class zge{constructor(e,t,i,s){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=s,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:s}=this._viewportRuler.getViewportSize();Qx(t,[{width:i,height:s,bottom:s,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let qge=(()=>{class n{constructor(t,i,s,r){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=s,this.noop=()=>new $8,this.close=o=>new Hge(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new jge(this._viewportRuler,this._document),this.reposition=o=>new zge(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=r}static{this.\u0275fac=function(i){return new(i||n)(P(Lge),P(O8),P(Ae),P(it))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class j8{constructor(e){if(this.scrollStrategy=new $8,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class Gge{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let H8=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static{this.\u0275fac=function(i){return new(i||n)(P(it))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Wge=(()=>{class n extends H8{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=s=>{const r=this._attachedOverlays;for(let o=r.length-1;o>-1;o--)if(r[o]._keydownEvents.observers.length>0){const a=r[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(s)):a.next(s);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(i){return new(i||n)(P(it),P(Ae,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Qge=(()=>{class n extends H8{constructor(t,i,s){super(t),this._platform=i,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=r=>{this._pointerDownEventTarget=Ja(r)},this._clickListener=r=>{const o=Ja(r),a="click"===r.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const d=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(r)):d.next(r)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(i){return new(i||n)(P(it),P(yr),P(Ae,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),U_=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||jx()){const s=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let r=0;r<s.length;r++)s[r].remove()}const i=this._document.createElement("div");i.classList.add(t),jx()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static{this.\u0275fac=function(i){return new(i||n)(P(it),P(yr))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class j_{constructor(e,t,i,s,r,o,a,l,c,u=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=s,this._ngZone=r,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new ye,this._attachments=new ye,this._detachments=new ye,this._locationChanges=wn.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new ye,this._outsidePointerEvents=new ye,s.scrollStrategy&&(this._scrollStrategy=s.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=s.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(qs(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=vn(this._config.width),e.height=vn(this._config.height),e.minWidth=vn(this._config.minWidth),e.minHeight=vn(this._config.minHeight),e.maxWidth=vn(this._config.maxWidth),e.maxHeight=vn(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const s=N_(t||[]).filter(r=>!!r);s.length&&(i?e.classList.add(...s):e.classList.remove(...s))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(As($_(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const z8="cdk-overlay-connected-position-bounding-box",Yge=/([A-Za-z%]+)$/;class Xge{get positions(){return this._preferredPositions}constructor(e,t,i,s,r){this._viewportRuler=t,this._document=i,this._platform=s,this._overlayContainer=r,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ye,this._resizeSubscription=wn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(z8),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,s=this._containerRect,r=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,s,a),c=this._getOverlayPoint(l,t,a),u=this._getOverlayFit(c,t,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,i)?r.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(r.length){let a=null,l=-1;for(const c of r){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&dc(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(z8),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let s,r;if("center"==i.originX)s=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;s="start"==i.originX?o:a}return t.left<0&&(s-=t.left),r="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(r-=t.top),{x:s,y:r}}_getOverlayPoint(e,t,i){let s,r;return s="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,r="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+s,y:e.y+r}}_getOverlayFit(e,t,i,s){const r=G8(t);let{x:o,y:a}=e,l=this._getOffset(s,"x"),c=this._getOffset(s,"y");l&&(o+=l),c&&(a+=c);let h=0-a,f=a+r.height-i.height,p=this._subtractOverflows(r.width,0-o,o+r.width-i.width),g=this._subtractOverflows(r.height,h,f),v=p*g;return{visibleArea:v,isCompletelyWithinViewport:r.width*r.height===v,fitsInViewportVertically:g===r.height,fitsInViewportHorizontally:p==r.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const s=i.bottom-t.y,r=i.right-t.x,o=q8(this._overlayRef.getConfig().minHeight),a=q8(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=s)&&(e.fitsInViewportHorizontally||null!=a&&a<=r)}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const s=G8(t),r=this._viewportRect,o=Math.max(e.x+s.width-r.width,0),a=Math.max(e.y+s.height-r.height,0),l=Math.max(r.top-i.top-e.y,0),c=Math.max(r.left-i.left-e.x,0);let u=0,d=0;return u=s.width<=r.width?c||-o:e.x<this._viewportMargin?r.left-i.left-e.x:0,d=s.height<=r.height?l||-a:e.y<this._viewportMargin?r.top-i.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){const i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!function Zge(n,e){return n===e||n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}(this._lastScrollVisibility,i)){const s=new Gge(e,i);this._positionChanges.next(s)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,s=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let r=0;r<t.length;r++)t[r].style.transformOrigin=`${i} ${s}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,s=this._isRtl();let r,o,a,u,d,h;if("top"===t.overlayY)o=e.y,r=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,r=i.height-a+this._viewportMargin;else{const f=Math.min(i.bottom-e.y+i.top,e.y),p=this._lastBoundingBoxSize.height;r=2*f,o=e.y-f,r>p&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-p/2)}if("end"===t.overlayX&&!s||"start"===t.overlayX&&s)h=i.width-e.x+2*this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!s||"end"===t.overlayX&&s)d=e.x,u=i.right-e.x;else{const f=Math.min(i.right-e.x+i.left,e.x),p=this._lastBoundingBoxSize.width;u=2*f,d=e.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-p/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:r}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const s={};if(this._hasExactPosition())s.top=s.left="0",s.bottom=s.right=s.maxHeight=s.maxWidth="",s.width=s.height="100%";else{const r=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;s.height=vn(i.height),s.top=vn(i.top),s.bottom=vn(i.bottom),s.width=vn(i.width),s.left=vn(i.left),s.right=vn(i.right),s.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",s.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",r&&(s.maxHeight=vn(r)),o&&(s.maxWidth=vn(o))}this._lastBoundingBoxSize=i,dc(this._boundingBox.style,s)}_resetBoundingBoxStyles(){dc(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){dc(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},s=this._hasExactPosition(),r=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(s){const u=this._viewportRuler.getViewportScrollPosition();dc(i,this._getExactOverlayY(t,e,u)),dc(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),o.maxHeight&&(s?i.maxHeight=vn(o.maxHeight):r&&(i.maxHeight="")),o.maxWidth&&(s?i.maxWidth=vn(o.maxWidth):r&&(i.maxWidth="")),dc(this._pane.style,i)}_getExactOverlayY(e,t,i){let s={top:"",bottom:""},r=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,i)),"bottom"===e.overlayY?s.bottom=this._document.documentElement.clientHeight-(r.y+this._overlayRect.height)+"px":s.top=vn(r.y),s}_getExactOverlayX(e,t,i){let o,s={left:"",right:""},r=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?s.right=this._document.documentElement.clientWidth-(r.x+this._overlayRect.width)+"px":s.left=vn(r.x),s}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(s=>s.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:U8(e,i),isOriginOutsideView:Qx(e,i),isOverlayClipped:U8(t,i),isOverlayOutsideView:Qx(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,s)=>i-Math.max(s,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&N_(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof tn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function dc(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function q8(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(Yge);return t&&"px"!==t?null:parseFloat(e)}return n||null}function G8(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const W8="cdk-global-overlay-wrapper";class Kge{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(W8),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:s,height:r,maxWidth:o,maxHeight:a}=i,l=!("100%"!==s&&"100vw"!==s||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==r&&"100vh"!==r||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,d=this._xOffset,h="rtl"===this._overlayRef.getConfig().direction;let f="",p="",g="";l?g="flex-start":"center"===u?(g="center",h?p=d:f=d):h?"left"===u||"end"===u?(g="flex-end",f=d):("right"===u||"start"===u)&&(g="flex-start",p=d):"left"===u||"start"===u?(g="flex-start",f=d):("right"===u||"end"===u)&&(g="flex-end",p=d),e.position=this._cssPosition,e.marginLeft=l?"0":f,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":p,t.justifyContent=g,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(W8),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let Jge=(()=>{class n{constructor(t,i,s,r){this._viewportRuler=t,this._document=i,this._platform=s,this._overlayContainer=r}global(){return new Kge}flexibleConnectedTo(t){return new Xge(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(i){return new(i||n)(P(O8),P(it),P(yr),P(U_))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),eme=0,ta=(()=>{class n{constructor(t,i,s,r,o,a,l,c,u,d,h,f){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=s,this._positionBuilder=r,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=d,this._outsideClickDispatcher=h,this._animationsModuleType=f}create(t){const i=this._createHostElement(),s=this._createPaneElement(i),r=this._createPortalOutlet(s),o=new j8(t);return o.direction=o.direction||this._directionality.value,new j_(r,i,s,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+eme++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(ir)),new Uge(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(i){return new(i||n)(P(qge),P(U_),P(xo),P(Jge),P(Wge),P(Zt),P(Ae),P(it),P(Hx),P(Ml),P(Qge),P(Ph,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const ime={provide:new q("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{const n=H(ta);return()=>n.scrollStrategies.reposition()}}),deps:[ta],useFactory:function nme(n){return()=>n.scrollStrategies.reposition()}};let Q8=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=en({type:n})}static{this.\u0275inj=Yt({providers:[ta,ime],imports:[rg,B_,L8,L8]})}}return n})();function Yx(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function Z8(n){return Fn((e,t)=>n<=t)}function K8(n,e=ua){return n=n??bme,Jt((t,i)=>{let s,r=!0;t.subscribe(Ht(i,o=>{const a=e(o);(r||!n(s,a))&&(r=!1,s=a,i.next(o))}))})}function bme(n,e){return n===e}let Cme=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Sme=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=en({type:n})}static{this.\u0275inj=Yt({providers:[Cme]})}}return n})();function Xx(...n){const e=Lf(n),t=xO(n),{args:i,keys:s}=SO(n);if(0===i.length)return On([],e);const r=new Ut(function Ime(n,e,t=ua){return i=>{J8(e,()=>{const{length:s}=n,r=new Array(s);let o=s,a=s;for(let l=0;l<s;l++)J8(e,()=>{const c=On(n[l],e);let u=!1;c.subscribe(Ht(i,d=>{r[l]=d,u||(u=!0,a--),a||i.next(t(r.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,s?o=>TO(s,o):ua));return t?r.pipe(jS(t)):r}function J8(n,e,t){n?Mo(t,n,e):e()}function H_(...n){return function xme(){return V_(1)}()(On(n,Lf(n)))}function og(...n){const e=Lf(n);return Jt((t,i)=>{(e?H_(n,t,e):H_(n,t)).subscribe(i)})}const eU=new Set;let hc,Tme=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Ame}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Dme(n,e){if(!eU.has(n))try{hc||(hc=document.createElement("style"),e&&hc.setAttribute("nonce",e),hc.setAttribute("type","text/css"),document.head.appendChild(hc)),hc.sheet&&(hc.sheet.insertRule(`@media ${n} {body{ }}`,0),eU.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static{this.\u0275fac=function(i){return new(i||n)(P(yr),P(ob,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ame(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let kme=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new ye}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return tU(N_(t)).some(s=>this._registerQuery(s).mql.matches)}observe(t){let r=Xx(tU(N_(t)).map(o=>this._registerQuery(o).observable));return r=H_(r.pipe(qs(1)),r.pipe(Z8(1),function X8(n,e=Bx){return Jt((t,i)=>{let s=null,r=null,o=null;const a=()=>{if(s){s.unsubscribe(),s=null;const c=r;r=null,i.next(c)}};function l(){const c=o+n,u=e.now();if(u<c)return s=this.schedule(void 0,c-u),void i.add(s);a()}t.subscribe(Ht(i,c=>{r=c,o=e.now(),s||(s=e.schedule(l,n),i.add(s))},()=>{a(),i.complete()},void 0,()=>{r=s=null}))})}(0))),r.pipe(Ve(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),r={observable:new Ut(o=>{const a=l=>this._zone.run(()=>o.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(og(i),Ve(({matches:o})=>({query:t,matches:o})),As(this._destroySubject)),mql:i};return this._queries.set(t,r),r}static{this.\u0275fac=function(i){return new(i||n)(P(Tme),P(Ae))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function tU(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let Zx=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function Ome(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function Pme(n){try{return n.frameElement}catch{return null}}(function Hme(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===rU(i)||!this.isVisible(i)))return!1;let s=t.nodeName.toLowerCase(),r=rU(t);return t.hasAttribute("contenteditable")?-1!==r:!("iframe"===s||"object"===s||this._platform.WEBKIT&&this._platform.IOS&&!function Ume(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===s?!!t.hasAttribute("controls")&&-1!==r:"video"===s?-1!==r&&(null!==r||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function jme(n){return!function Lme(n){return function Vme(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function Fme(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function Bme(n){return function $me(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||sU(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}static{this.\u0275fac=function(i){return new(i||n)(P(yr))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function sU(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function rU(n){if(!sU(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class oU{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,i,s,r=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=s,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,r||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const s=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(s)return s}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const s=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(s)return s}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(qs(1)).subscribe(e)}}let aU=(()=>{class n{constructor(t,i,s){this._checker=t,this._ngZone=i,this._document=s}create(t,i=!1){return new oU(t,this._checker,this._ngZone,this._document,i)}static{this.\u0275fac=function(i){return new(i||n)(P(Zx),P(Ae),P(it))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function lU(n){return 0===n.buttons||0===n.detail}function cU(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const zme=new q("cdk-input-modality-detector-options"),qme={ignoreKeys:[18,17,224,91,16]},Ud=F_({passive:!0,capture:!0});let Gme=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,s,r){this._platform=t,this._mostRecentTarget=null,this._modality=new is(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Ja(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(lU(o)?"keyboard":"mouse"),this._mostRecentTarget=Ja(o))},this._onTouchstart=o=>{cU(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ja(o))},this._options={...qme,...r},this.modalityDetected=this._modality.pipe(Z8(1)),this.modalityChanged=this.modalityDetected.pipe(K8()),t.isBrowser&&i.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,Ud),s.addEventListener("mousedown",this._onMousedown,Ud),s.addEventListener("touchstart",this._onTouchstart,Ud)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ud),document.removeEventListener("mousedown",this._onMousedown,Ud),document.removeEventListener("touchstart",this._onTouchstart,Ud))}static{this.\u0275fac=function(i){return new(i||n)(P(yr),P(Ae),P(it),P(zme,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var z_=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(z_||{});const Qme=new q("cdk-focus-monitor-default-options"),q_=F_({passive:!0,capture:!0});let dU=(()=>{class n{constructor(t,i,s,r,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ye,this._rootNodeFocusAndBlurListener=a=>{for(let c=Ja(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=r,this._detectionMode=o?.detectionMode||z_.IMMEDIATE}monitor(t,i=!1){const s=Vd(t);if(!this._platform.isBrowser||1!==s.nodeType)return we();const r=function Mge(n){if(function kge(){if(null==$x){const n=typeof document<"u"?document.head:null;$x=!(!n||!n.createShadowRoot&&!n.attachShadow)}return $x}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(s)||this._getDocument(),o=this._elementInfo.get(s);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new ye,rootNode:r};return this._elementInfo.set(s,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=Vd(t),s=this._elementInfo.get(i);s&&(s.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(s))}focusVia(t,i,s){const r=Vd(t);r===this._getDocument().activeElement?this._getClosestElementsInfo(r).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof r.focus&&r.focus(s))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===z_.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,this._detectionMode===z_.IMMEDIATE&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const s=this._elementInfo.get(i),r=Ja(t);!s||!s.checkChildren&&i!==r||this._originChanged(i,this._getFocusOrigin(r),s)}_onBlur(t,i){const s=this._elementInfo.get(i);!s||s.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(s,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,s=this._rootNodeFocusListenerCount.get(i)||0;s||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,q_),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,q_)}),this._rootNodeFocusListenerCount.set(i,s+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(As(this._stopInputModalityDetector)).subscribe(r=>{this._setOrigin(r,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const s=this._rootNodeFocusListenerCount.get(i);s>1?this._rootNodeFocusListenerCount.set(i,s-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,q_),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,q_),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,s){this._setClasses(t,i),this._emitOrigin(s,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((s,r)=>{(r===t||s.checkChildren&&r.contains(t))&&i.push([r,s])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:s}=this._inputModalityDetector;if("mouse"!==s||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const r=t.labels;if(r)for(let o=0;o<r.length;o++)if(r[o].contains(i))return!0;return!1}static{this.\u0275fac=function(i){return new(i||n)(P(Ae),P(yr),P(Gme),P(it,8),P(Qme,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var fc=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(fc||{});const hU="cdk-high-contrast-black-on-white",fU="cdk-high-contrast-white-on-black",Kx="cdk-high-contrast-active";let pU=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=H(kme).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return fc.NONE;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,s=i&&i.getComputedStyle?i.getComputedStyle(t):null,r=(s&&s.backgroundColor||"").replace(/ /g,"");switch(t.remove(),r){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return fc.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return fc.BLACK_ON_WHITE}return fc.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Kx,hU,fU),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();i===fc.BLACK_ON_WHITE?t.add(Kx,hU):i===fc.WHITE_ON_BLACK&&t.add(Kx,fU)}}static{this.\u0275fac=function(i){return new(i||n)(P(yr),P(it))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Yme=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}static{this.\u0275fac=function(i){return new(i||n)(P(pU))}}static{this.\u0275mod=en({type:n})}static{this.\u0275inj=Yt({imports:[Sme]})}}return n})();function G_(n){return new Ut(e=>{xi(n()).subscribe(e)})}function Xme(n,e){}class W_{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let gU=(()=>{class n extends Gx{constructor(t,i,s,r,o,a,l,c){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=r,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=l,this._focusMonitor=c,this._platform=H(yr),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=H(Do),this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const d=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),d},this._document=s,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(t){this._ariaLabelledByQueue.push(t),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(t){const i=this._ariaLabelledByQueue.indexOf(t);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const s=()=>{t.removeEventListener("blur",s),t.removeEventListener("mousedown",s),t.removeAttribute("tabindex")};t.addEventListener("blur",s),t.addEventListener("mousedown",s)})),t.focus(i)}_focusByCssSelector(t,i){let s=this._elementRef.nativeElement.querySelector(t);s&&this._forceFocus(s,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const s=Ux(),r=this._elementRef.nativeElement;(!s||s===this._document.body||s===r||r.contains(s))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=Ux();return t===i||t.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Ux()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static{this.\u0275fac=function(i){return new(i||n)(k(tn),k(aU),k(it,8),k(W_),k(Zx),k(Ae),k(j_),k(dU))}}static{this.\u0275cmp=_i({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,s){if(1&i&&hv(Wx,7),2&i){let r;wf(r=Ef())&&(s._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,s){2&i&&zn("id",s._config.id||null)("role",s._config.role)("aria-modal",s._config.ariaModal)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null)},standalone:!0,features:[Je,ba],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,s){1&i&&se(0,Xme,0,0,"ng-template",0)},dependencies:[Wx],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}}return n})();class Jx{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new ye,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!Yx(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const mU=new q("DialogScrollStrategy",{providedIn:"root",factory:()=>{const n=H(ta);return()=>n.scrollStrategies.block()}}),Zme=new q("DialogData"),Kme=new q("DefaultDialogConfig");let eve=0,vU=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,i,s,r,o,a){this._overlay=t,this._injector=i,this._defaultOptions=s,this._parentDialog=r,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ye,this._afterOpenedAtThisLevel=new ye,this._ariaHiddenElements=new Map,this.afterAllClosed=G_(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(og(void 0))),this._scrollStrategy=a}open(t,i){(i={...this._defaultOptions||new W_,...i}).id=i.id||"cdk-dialog-"+eve++,i.id&&this.getDialogById(i.id);const r=this._getOverlayConfig(i),o=this._overlay.create(r),a=new Jx(o,i),l=this._attachContainer(o,a,i);return a.containerInstance=l,this._attachDialogContent(t,a,l,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){eT(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){eT(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),eT(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new j8({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,s){const r=s.injector||s.viewContainerRef?.injector,o=[{provide:W_,useValue:s},{provide:Jx,useValue:i},{provide:j_,useValue:t}];let a;s.container?"function"==typeof s.container?a=s.container:(a=s.container.type,o.push(...s.container.providers(s))):a=gU;const l=new qx(a,s.viewContainerRef,Zt.create({parent:r||this._injector,providers:o}),s.componentFactoryResolver);return t.attach(l).instance}_attachDialogContent(t,i,s,r){if(t instanceof Nr){const o=this._createInjector(r,i,s,void 0);let a={$implicit:r.data,dialogRef:i};r.templateContext&&(a={...a,..."function"==typeof r.templateContext?r.templateContext():r.templateContext}),s.attachTemplatePortal(new B8(t,null,a,o))}else{const o=this._createInjector(r,i,s,this._injector),a=s.attachComponentPortal(new qx(t,r.viewContainerRef,o,r.componentFactoryResolver));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(t,i,s,r){const o=t.injector||t.viewContainerRef?.injector,a=[{provide:Zme,useValue:t.data},{provide:Jx,useValue:i}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(i,t,s)):a.push(...t.providers)),t.direction&&(!o||!o.get(Hx,null,{optional:!0}))&&a.push({provide:Hx,useValue:{value:t.direction,change:we()}}),Zt.create({parent:o||r,providers:a})}_removeOpenDialog(t,i){const s=this.openDialogs.indexOf(t);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,o)=>{r?o.setAttribute("aria-hidden",r):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let s=i.length-1;s>-1;s--){const r=i[s];r!==t&&"SCRIPT"!==r.nodeName&&"STYLE"!==r.nodeName&&!r.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static{this.\u0275fac=function(i){return new(i||n)(P(ta),P(Zt),P(Kme,8),P(n,12),P(U_),P(mU))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function eT(n,e){let t=n.length;for(;t--;)e(n[t])}let tve=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=en({type:n})}static{this.\u0275inj=Yt({providers:[vU],imports:[Q8,B_,Yme,B_]})}}return n})();const ive=new q("mat-sanity-checks",{providedIn:"root",factory:function nve(){return!0}});let wU=(()=>{class n{constructor(t,i,s){this._sanityChecks=i,this._document=s,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!jx()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static{this.\u0275fac=function(i){return new(i||n)(P(pU),P(ive,8),P(it))}}static{this.\u0275mod=en({type:n})}static{this.\u0275inj=Yt({imports:[rg,rg]})}}return n})();var Gs=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Gs||{});class uve{constructor(e,t,i,s=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=s,this.state=Gs.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}}const EU=F_({passive:!0,capture:!0});class dve{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=Ja(e);t&&this._events.get(e.type)?.forEach((i,s)=>{(s===t||s.contains(t))&&i.forEach(r=>r.handleEvent(e))})}}addHandler(e,t,i,s){const r=this._events.get(t);if(r){const o=r.get(i);o?o.add(s):r.set(i,new Set([s]))}else this._events.set(t,new Map([[i,new Set([s])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,EU)})}removeHandler(e,t,i){const s=this._events.get(e);if(!s)return;const r=s.get(t);r&&(r.delete(i),0===r.size&&s.delete(t),0===s.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,EU)))}}const bU={enterDuration:225,exitDuration:150},CU=F_({passive:!0,capture:!0}),SU=["mousedown","touchstart"],IU=["mouseup","mouseleave","touchend","touchcancel"];class tT{static{this._eventManager=new dve}constructor(e,t,i,s){this._target=e,this._ngZone=t,this._platform=s,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,s.isBrowser&&(this._containerElement=Vd(i))}fadeInRipple(e,t,i={}){const s=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),r={...bU,...i.animation};i.centered&&(e=s.left+s.width/2,t=s.top+s.height/2);const o=i.radius||function fve(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),s=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+s*s)}(e,t,s),a=e-s.left,l=t-s.top,c=r.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const d=window.getComputedStyle(u),f=d.transitionDuration,p="none"===d.transitionProperty||"0s"===f||"0s, 0s"===f||0===s.width&&0===s.height,g=new uve(this,u,i,p);u.style.transform="scale3d(1, 1, 1)",g.state=Gs.FADING_IN,i.persistent||(this._mostRecentTransientRipple=g);let v=null;return!p&&(c||r.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const _=()=>this._finishRippleTransition(g),E=()=>this._destroyRipple(g);u.addEventListener("transitionend",_),u.addEventListener("transitioncancel",E),v={onTransitionEnd:_,onTransitionCancel:E}}),this._activeRipples.set(g,v),(p||!c)&&this._finishRippleTransition(g),g}fadeOutRipple(e){if(e.state===Gs.FADING_OUT||e.state===Gs.HIDDEN)return;const t=e.element,i={...bU,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=Gs.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Vd(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,SU.forEach(i=>{tT._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{IU.forEach(t=>{this._triggerElement.addEventListener(t,this,CU)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Gs.FADING_IN?this._startFadeOutTransition(e):e.state===Gs.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=Gs.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Gs.HIDDEN,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=lU(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!cU(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(e.state===Gs.VISIBLE||e.config.terminateOnPointerUp&&e.state===Gs.FADING_IN)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(SU.forEach(t=>tT._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(IU.forEach(t=>e.removeEventListener(t,this,CU)),this._pointerUpEventsRegistered=!1))}}function pve(n,e){}class nT{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const iT="mdc-dialog--open",xU="mdc-dialog--opening",TU="mdc-dialog--closing";let DU=(()=>{class n extends gU{constructor(t,i,s,r,o,a,l,c,u){super(t,i,s,r,o,a,l,u),this._animationMode=c,this._animationStateChanged=new Et,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._actionSectionCount=0,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?kU(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?kU(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(AU,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(xU,iT)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(iT),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(iT),this._animationsEnabled?(this._hostElement.style.setProperty(AU,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(TU)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(t){this._actionSectionCount+=t,this._changeDetectorRef.markForCheck()}_clearAnimationClasses(){this._hostElement.classList.remove(xU,TU)}_waitForAnimationToComplete(t,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}attachComponentPortal(t){const i=super.attachComponentPortal(t);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static{this.\u0275fac=function(i){return new(i||n)(k(tn),k(aU),k(it,8),k(nT),k(Zx),k(Ae),k(j_),k(Ph,8),k(dU))}}static{this.\u0275cmp=_i({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,s){2&i&&(av("id",s._config.id),zn("aria-modal",s._config.ariaModal)("role",s._config.role)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null),qn("_mat-animation-noopable",!s._animationsEnabled)("mat-mdc-dialog-container-with-actions",s._actionSectionCount>0))},standalone:!0,features:[Je,ba],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,s){1&i&&(S(0,"div",0)(1,"div",1),se(2,pve,0,0,"ng-template",2),x()())},dependencies:[Wx],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0;transform:scale(0.8)}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--closing .mdc-dialog__surface{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{opacity:1}.mdc-dialog--open .mdc-dialog__surface{transform:none}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{width:100%;height:100%}.mat-mdc-dialog-component-host{display:contents}.mat-mdc-dialog-container{--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition:opacity linear var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container .mdc-dialog__surface{transition:transform var(--mat-dialog-transition-duration, 0ms) 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container,.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__surface{transition:none}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 80vw);min-width:var(--mat-dialog-container-min-width, 0)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, 80vw)}}.mat-mdc-dialog-title{padding:var(--mat-dialog-headline-padding, 0 24px 9px)}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{padding:var(--mat-dialog-actions-padding, 8px);justify-content:var(--mat-dialog-actions-alignment, start)}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}}return n})();const AU="--mat-dialog-transition-duration";function kU(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?k8(n.substring(0,n.length-2)):n.endsWith("s")?1e3*k8(n.substring(0,n.length-1)):"0"===n?0:null}var Q_=function(n){return n[n.OPEN=0]="OPEN",n[n.CLOSING=1]="CLOSING",n[n.CLOSED=2]="CLOSED",n}(Q_||{});class Y_{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new ye,this._beforeClosed=new ye,this._state=Q_.OPEN,this.disableClose=t.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(Fn(s=>"opened"===s.state),qs(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Fn(s=>"closed"===s.state),qs(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),$_(this.backdropClick(),this.keydownEvents().pipe(Fn(s=>27===s.keyCode&&!this.disableClose&&!Yx(s)))).subscribe(s=>{this.disableClose||(s.preventDefault(),function MU(n,e,t){return n._closeInteractionType=e,n.close(t)}(this,"keydown"===s.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Fn(t=>"closing"===t.state),qs(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=Q_.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=Q_.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const NU=new q("MatMdcDialogData"),vve=new q("mat-mdc-dialog-default-options"),RU=new q("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{const n=H(ta);return()=>n.scrollStrategies.block()}});let _ve=0,X_=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,i,s,r,o,a,l,c){this._overlay=t,this._defaultOptions=r,this._scrollStrategy=o,this._parentDialog=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ye,this._afterOpenedAtThisLevel=new ye,this.dialogConfigClass=nT,this.afterAllClosed=G_(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(og(void 0))),this._dialog=i.get(vU),this._dialogRefConstructor=Y_,this._dialogContainerType=DU,this._dialogDataToken=NU}open(t,i){let s;(i={...this._defaultOptions||new nT,...i}).id=i.id||"mat-mdc-dialog-"+_ve++,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const r=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:W_,useValue:i}]},templateContext:()=>({dialogRef:s}),providers:(o,a,l)=>(s=new this._dialogRefConstructor(o,i,l),s.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:s}])});return s.componentRef=r.componentRef,s.componentInstance=r.componentInstance,this.openDialogs.push(s),this.afterOpened.next(s),s.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(s);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}static{this.\u0275fac=function(i){return new(i||n)(P(ta),P(Zt),P(Ml,8),P(vve,8),P(RU),P(n,12),P(U_),P(Ph,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wve=0,PU=(()=>{class n{constructor(t,i,s){this._dialogRef=t,this._elementRef=i,this._dialog=s}ngOnInit(){this._dialogRef||(this._dialogRef=function BU(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static{this.\u0275fac=function(i){return new(i||n)(k(Y_,8),k(tn),k(X_))}}static{this.\u0275dir=ge({type:n,standalone:!0})}}return n})(),OU=(()=>{class n extends PU{constructor(){super(...arguments),this.id="mat-mdc-dialog-title-"+wve++}_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static{this.\u0275fac=(()=>{let t;return function(s){return(t||(t=dn(n)))(s||n)}})()}static{this.\u0275dir=ge({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,s){2&i&&av("id",s.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0,features:[Je]})}}return n})(),FU=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=ge({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0})}}return n})(),LU=(()=>{class n extends PU{_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static{this.\u0275fac=(()=>{let t;return function(s){return(t||(t=dn(n)))(s||n)}})()}static{this.\u0275dir=ge({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(i,s){2&i&&qn("mat-mdc-dialog-actions-align-start","start"===s.align)("mat-mdc-dialog-actions-align-center","center"===s.align)("mat-mdc-dialog-actions-align-end","end"===s.align)},inputs:{align:"align"},standalone:!0,features:[Je]})}}return n})();let bve=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=en({type:n})}static{this.\u0275inj=Yt({providers:[X_],imports:[tve,Q8,B_,wU,wU]})}}return n})(),Cve=(()=>{class n{constructor(t,i){this.dialogRef=t,this.data=i}onConfirm(){this.dialogRef.close(!0)}onCancel(){this.dialogRef.close(!1)}static{this.\u0275fac=function(i){return new(i||n)(k(Y_),k(NU))}}static{this.\u0275cmp=_i({type:n,selectors:[["app-confirm-dialog"]],decls:9,vars:0,consts:[["mat-dialog-title",""],["align","end"],["mat-button","",1,"customButton",3,"click"],["mat-button","","color","warn",1,"customButton","fill",3,"click"]],template:function(i,s){1&i&&(S(0,"h2",0),$(1,"Confirm Deletion"),x(),S(2,"mat-dialog-content"),$(3," Are you sure you want to delete this prompt? "),x(),S(4,"mat-dialog-actions",1)(5,"span",2),ce("click",function(){return s.onCancel()}),$(6,"Cancel"),x(),S(7,"span",3),ce("click",function(){return s.onConfirm()}),$(8,"Delete"),x()())},dependencies:[OU,LU,FU],styles:[".customButton[_ngcontent-%COMP%]{margin:20px 24px!important;background-color:#fff;color:#16666f;border:2px solid #16666F;padding:8px 16px;border-radius:5px;font-weight:700;cursor:pointer;border-width:1px;font-size:14px}.customButton.fill[_ngcontent-%COMP%]{background:#16666f;color:#fff}"]})}}return n})();function Z_(n,e){const t=at(n)?n:()=>n,i=s=>s.error(t());return new Ut(e?s=>e.schedule(i,0,s):i)}function sT(){return Jt((n,e)=>{let t=null;n._refCount++;const i=Ht(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,r=t;t=null,s&&(!r||s===r)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class $U extends Ut{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ND(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new wn;const t=this.getSubject();e.add(this.source.subscribe(Ht(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=wn.EMPTY)}return e}refCount(){return sT()(this)}}function K_(n){return Jt((e,t)=>{let i=!1;e.subscribe(Ht(t,s=>{i=!0,t.next(s)},()=>{i||t.next(n),t.complete()}))})}function UU(n=Ive){return Jt((e,t)=>{let i=!1;e.subscribe(Ht(t,s=>{i=!0,t.next(s)},()=>i?t.complete():t.error(n())))})}function Ive(){return new Yf}function el(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Fn((s,r)=>n(s,r,i)):ua,qs(1),t?K_(e):UU(()=>new Yf))}function rT(n){return n<=0?()=>_r:Jt((e,t)=>{let i=[];e.subscribe(Ht(t,s=>{i.push(s),n<i.length&&i.shift()},()=>{for(const s of i)t.next(s);t.complete()},void 0,()=>{i=null}))})}function jU(n){return Ve(()=>n)}const je="primary",lg=Symbol("RouteTitle");class Ave{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function jd(n){return new Ave(n)}function kve(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const s={};for(let r=0;r<i.length;r++){const o=i[r],a=n[r];if(o.startsWith(":"))s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:s}}function io(n,e){const t=n?oT(n):void 0,i=e?oT(e):void 0;if(!t||!i||t.length!=i.length)return!1;let s;for(let r=0;r<t.length;r++)if(s=t[r],!HU(n[s],e[s]))return!1;return!0}function oT(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function HU(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((s,r)=>i[r]===s)}return n===e}function zU(n){return n.length>0?n[n.length-1]:null}function tl(n){return function Sve(n){return!!n&&(n instanceof Ut||at(n.lift)&&at(n.subscribe))}(n)?n:Df(n)?On(Promise.resolve(n)):we(n)}const Nve={exact:function WU(n,e,t){if(!pc(n.segments,e.segments)||!J_(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!WU(n.children[i],e.children[i],t))return!1;return!0},subset:QU},qU={exact:function Rve(n,e){return io(n,e)},subset:function Pve(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>HU(n[t],e[t]))},ignored:()=>!0};function GU(n,e,t){return Nve[t.paths](n.root,e.root,t.matrixParams)&&qU[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function QU(n,e,t){return YU(n,e,e.segments,t)}function YU(n,e,t,i){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!pc(s,t)||e.hasChildren()||!J_(s,t,i))}if(n.segments.length===t.length){if(!pc(n.segments,t)||!J_(n.segments,t,i))return!1;for(const s in e.children)if(!n.children[s]||!QU(n.children[s],e.children[s],i))return!1;return!0}{const s=t.slice(0,n.segments.length),r=t.slice(n.segments.length);return!!(pc(n.segments,s)&&J_(n.segments,s,i)&&n.children[je])&&YU(n.children[je],e,r,i)}}function J_(n,e,t){return e.every((i,s)=>qU[t](n[s].parameters,i.parameters))}class Hd{constructor(e=new xt([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=jd(this.queryParams),this._queryParamMap}toString(){return Lve.serialize(this)}}class xt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ew(this)}}class cg{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=jd(this.parameters),this._parameterMap}toString(){return KU(this)}}function pc(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let zd=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>new aT,providedIn:"root"})}}return n})();class aT{parse(e){const t=new Qve(e);return new Hd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ug(e.root,!0)}`,i=function $ve(n){const e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(s=>`${tw(t)}=${tw(s)}`).join("&"):`${tw(t)}=${tw(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function Bve(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Lve=new aT;function ew(n){return n.segments.map(e=>KU(e)).join("/")}function ug(n,e){if(!n.hasChildren())return ew(n);if(e){const t=n.children[je]?ug(n.children[je],!1):"",i=[];return Object.entries(n.children).forEach(([s,r])=>{s!==je&&i.push(`${s}:${ug(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function Fve(n,e){let t=[];return Object.entries(n.children).forEach(([i,s])=>{i===je&&(t=t.concat(e(s,i)))}),Object.entries(n.children).forEach(([i,s])=>{i!==je&&(t=t.concat(e(s,i)))}),t}(n,(i,s)=>s===je?[ug(n.children[je],!1)]:[`${s}:${ug(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[je]?`${ew(n)}/${t[0]}`:`${ew(n)}/(${t.join("//")})`}}function XU(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function tw(n){return XU(n).replace(/%3B/gi,";")}function lT(n){return XU(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function nw(n){return decodeURIComponent(n)}function ZU(n){return nw(n.replace(/\+/g,"%20"))}function KU(n){return`${lT(n.path)}${function Vve(n){return Object.entries(n).map(([e,t])=>`;${lT(e)}=${lT(t)}`).join("")}(n.parameters)}`}const Uve=/^[^\/()?;#]+/;function cT(n){const e=n.match(Uve);return e?e[0]:""}const jve=/^[^\/()?;=#]+/,zve=/^[^=?&#]+/,Gve=/^[^&#]+/;class Qve{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xt([],{}):new xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[je]=new xt(e,t)),i}parseSegment(){const e=cT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new R(4009,!1);return this.capture(e),new cg(nw(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Hve(n){const e=n.match(jve);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const s=cT(this.remaining);s&&(i=s,this.capture(i))}e[nw(t)]=nw(i)}parseQueryParam(e){const t=function qve(n){const e=n.match(zve);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function Wve(n){const e=n.match(Gve);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const s=ZU(t),r=ZU(i);if(e.hasOwnProperty(s)){let o=e[s];Array.isArray(o)||(o=[o],e[s]=o),o.push(r)}else e[s]=r}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=cT(this.remaining),s=this.remaining[i.length];if("/"!==s&&")"!==s&&";"!==s)throw new R(4010,!1);let r;i.indexOf(":")>-1?(r=i.slice(0,i.indexOf(":")),this.capture(r),this.capture(":")):e&&(r=je);const o=this.parseChildren();t[r]=1===Object.keys(o).length?o[je]:new xt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new R(4011,!1)}}function JU(n){return n.segments.length>0?new xt([],{[je]:n}):n}function ej(n){const e={};for(const[i,s]of Object.entries(n.children)){const r=ej(s);if(i===je&&0===r.segments.length&&r.hasChildren())for(const[o,a]of Object.entries(r.children))e[o]=a;else(r.segments.length>0||r.hasChildren())&&(e[i]=r)}return function Yve(n){if(1===n.numberOfChildren&&n.children[je]){const e=n.children[je];return new xt(n.segments.concat(e.segments),e.children)}return n}(new xt(n.segments,e))}function qd(n){return n instanceof Hd}function tj(n){let e;const s=JU(function t(r){const o={};for(const l of r.children){const c=t(l);o[l.outlet]=c}const a=new xt(r.url,o);return r===n&&(e=a),a}(n.root));return e??s}function nj(n,e,t,i){let s=n;for(;s.parent;)s=s.parent;if(0===e.length)return uT(s,s,s,t,i);const r=function Zve(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new sj(!0,0,n);let e=0,t=!1;const i=n.reduce((s,r,o)=>{if("object"==typeof r&&null!=r){if(r.outlets){const a={};return Object.entries(r.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...s,{outlets:a}]}if(r.segmentPath)return[...s,r.segmentPath]}return"string"!=typeof r?[...s,r]:0===o?(r.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&s.push(a))}),s):[...s,r]},[]);return new sj(t,e,i)}(e);if(r.toRoot())return uT(s,s,new xt([],{}),t,i);const o=function Kve(n,e,t){if(n.isAbsolute)return new sw(e,!0,0);if(!t)return new sw(e,!1,NaN);if(null===t.parent)return new sw(t,!0,0);const i=iw(n.commands[0])?0:1;return function Jve(n,e,t){let i=n,s=e,r=t;for(;r>s;){if(r-=s,i=i.parent,!i)throw new R(4005,!1);s=i.segments.length}return new sw(i,!1,s-r)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(r,s,n),a=o.processChildren?hg(o.segmentGroup,o.index,r.commands):rj(o.segmentGroup,o.index,r.commands);return uT(s,o.segmentGroup,a,t,i)}function iw(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function dg(n){return"object"==typeof n&&null!=n&&n.outlets}function uT(n,e,t,i,s){let o,r={};i&&Object.entries(i).forEach(([l,c])=>{r[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=n===e?t:ij(n,e,t);const a=JU(ej(o));return new Hd(a,r,s)}function ij(n,e,t){const i={};return Object.entries(n.children).forEach(([s,r])=>{i[s]=r===e?t:ij(r,e,t)}),new xt(n.segments,i)}class sj{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&iw(i[0]))throw new R(4003,!1);const s=i.find(dg);if(s&&s!==zU(i))throw new R(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sw{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function rj(n,e,t){if(n??=new xt([],{}),0===n.segments.length&&n.hasChildren())return hg(n,e,t);const i=function tye(n,e,t){let i=0,s=e;const r={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(i>=t.length)return r;const o=n.segments[s],a=t[i];if(dg(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(s>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!aj(l,c,o))return r;i+=2}else{if(!aj(l,{},o))return r;i++}s++}return{match:!0,pathIndex:s,commandIndex:i}}(n,e,t),s=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const r=new xt(n.segments.slice(0,i.pathIndex),{});return r.children[je]=new xt(n.segments.slice(i.pathIndex),n.children),hg(r,0,s)}return i.match&&0===s.length?new xt(n.segments,{}):i.match&&!n.hasChildren()?dT(n,e,t):i.match?hg(n,0,s):dT(n,e,t)}function hg(n,e,t){if(0===t.length)return new xt(n.segments,{});{const i=function eye(n){return dg(n[0])?n[0].outlets:{[je]:n}}(t),s={};if(Object.keys(i).some(r=>r!==je)&&n.children[je]&&1===n.numberOfChildren&&0===n.children[je].segments.length){const r=hg(n.children[je],e,t);return new xt(n.segments,r.children)}return Object.entries(i).forEach(([r,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(s[r]=rj(n.children[r],e,o))}),Object.entries(n.children).forEach(([r,o])=>{void 0===i[r]&&(s[r]=o)}),new xt(n.segments,s)}}function dT(n,e,t){const i=n.segments.slice(0,e);let s=0;for(;s<t.length;){const r=t[s];if(dg(r)){const l=nye(r.outlets);return new xt(i,l)}if(0===s&&iw(t[0])){i.push(new cg(n.segments[e].path,oj(t[0]))),s++;continue}const o=dg(r)?r.outlets[je]:`${r}`,a=s<t.length-1?t[s+1]:null;o&&a&&iw(a)?(i.push(new cg(o,oj(a))),s+=2):(i.push(new cg(o,{})),s++)}return new xt(i,{})}function nye(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=dT(new xt([],{}),0,i))}),e}function oj(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function aj(n,e,t){return n==t.path&&io(e,t.parameters)}const fg="imperative";var Ke=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ke||{});class so{constructor(e,t){this.id=e,this.url=t}}class hT extends so{constructor(e,t,i="imperative",s=null){super(e,t),this.type=Ke.NavigationStart,this.navigationTrigger=i,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class gc extends so{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=Ke.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var bs=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(bs||{}),fT=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(fT||{});class Gd extends so{constructor(e,t,i,s){super(e,t),this.reason=i,this.code=s,this.type=Ke.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class pg extends so{constructor(e,t,i,s){super(e,t),this.reason=i,this.code=s,this.type=Ke.NavigationSkipped}}class rw extends so{constructor(e,t,i,s){super(e,t),this.error=i,this.target=s,this.type=Ke.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class lj extends so{constructor(e,t,i,s){super(e,t),this.urlAfterRedirects=i,this.state=s,this.type=Ke.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iye extends so{constructor(e,t,i,s){super(e,t),this.urlAfterRedirects=i,this.state=s,this.type=Ke.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sye extends so{constructor(e,t,i,s,r){super(e,t),this.urlAfterRedirects=i,this.state=s,this.shouldActivate=r,this.type=Ke.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class rye extends so{constructor(e,t,i,s){super(e,t),this.urlAfterRedirects=i,this.state=s,this.type=Ke.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oye extends so{constructor(e,t,i,s){super(e,t),this.urlAfterRedirects=i,this.state=s,this.type=Ke.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aye{constructor(e){this.route=e,this.type=Ke.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class lye{constructor(e){this.route=e,this.type=Ke.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class cye{constructor(e){this.snapshot=e,this.type=Ke.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uye{constructor(e){this.snapshot=e,this.type=Ke.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dye{constructor(e){this.snapshot=e,this.type=Ke.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hye{constructor(e){this.snapshot=e,this.type=Ke.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pT{}class gT{constructor(e){this.url=e}}class fye{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new gg,this.attachRef=null}}let gg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const s=this.getOrCreateContext(t);s.outlet=i,this.contexts.set(t,s)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new fye,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class cj{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=mT(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=mT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=vT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return vT(e,this._root).map(t=>t.value)}}function mT(n,e){if(n===e.value)return e;for(const t of e.children){const i=mT(n,t);if(i)return i}return null}function vT(n,e){if(n===e.value)return[e];for(const t of e.children){const i=vT(n,t);if(i.length)return i.unshift(e),i}return[]}class wr{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Wd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class uj extends cj{constructor(e,t){super(e),this.snapshot=t,wT(this,e)}toString(){return this.snapshot.toString()}}function dj(n){const e=function pye(n){const r=new _T([],{},{},"",{},je,n,null,{});return new hj("",new wr(r,[]))}(n),t=new is([new cg("",{})]),i=new is({}),s=new is({}),r=new is({}),o=new is(""),a=new Qd(t,i,r,o,s,je,n,e.root);return a.snapshot=e.root,new uj(new wr(a,[]),e)}class Qd{constructor(e,t,i,s,r,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=s,this.dataSubject=r,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Ve(c=>c[lg]))??we(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=s,this.data=r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ve(e=>jd(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ve(e=>jd(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function yT(n,e,t="emptyOnly"){let i;const{routeConfig:s}=n;return i=null===e||"always"!==t&&""!==s?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...s?.data,...n._resolvedData}},s&&pj(s)&&(i.resolve[lg]=s.title),i}class _T{get title(){return this.data?.[lg]}constructor(e,t,i,s,r,o,a,l,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=s,this.data=r,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=jd(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=jd(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class hj extends cj{constructor(e,t){super(t),this.url=e,wT(this,t)}toString(){return fj(this._root)}}function wT(n,e){e.value._routerState=n,e.children.forEach(t=>wT(n,t))}function fj(n){const e=n.children.length>0?` { ${n.children.map(fj).join(", ")} } `:"";return`${n.value}${e}`}function ET(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,io(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),io(e.params,t.params)||n.paramsSubject.next(t.params),function Mve(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!io(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),io(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function bT(n,e){const t=io(n.params,e.params)&&function Ove(n,e){return pc(n,e)&&n.every((t,i)=>io(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||bT(n.parent,e.parent))}function pj(n){return"string"==typeof n.title||null===n.title}let gj=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=je,this.activateEvents=new Et,this.deactivateEvents=new Et,this.attachEvents=new Et,this.detachEvents=new Et,this.parentContexts=H(gg),this.location=H(qi),this.changeDetector=H(Do),this.environmentInjector=H(as),this.inputBinder=H(ow,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:s}=t.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new R(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new R(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new R(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new R(4013,!1);this._activatedRoute=t;const s=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new CT(t,a,s.injector);this.activated=s.createComponent(o,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=ge({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ri]})}}return n})();class CT{__ngOutletInjector(e){return new CT(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Qd?this.route:e===gg?this.childContexts:this.parent.get(e,t)}}const ow=new q("");function mg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const s=function mye(n,e,t){return e.children.map(i=>{for(const s of t.children)if(n.shouldReuseRoute(i.value,s.value.snapshot))return mg(n,i,s);return mg(n,i)})}(n,e,t);return new wr(i,s)}{if(n.shouldAttach(e.value)){const r=n.retrieve(e.value);if(null!==r){const o=r.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>mg(n,a)),o}}const i=function vye(n){return new Qd(new is(n.url),new is(n.params),new is(n.queryParams),new is(n.fragment),new is(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(r=>mg(n,r));return new wr(i,s)}}const vj="ngNavigationCancelingError";function yj(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=qd(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=_j(!1,bs.Redirect);return s.url=t,s.navigationBehaviorOptions=i,s}function _j(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[vj]=!0,t.cancellationCode=e,t}function wj(n){return!!n&&n[vj]}let Ej=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_i({type:n,selectors:[["ng-component"]],standalone:!0,features:[ba],decls:1,vars:0,template:function(i,s){1&i&&ve(0,"router-outlet")},dependencies:[gj],encapsulation:2})}}return n})();function ST(n){const e=n.children&&n.children.map(ST),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==je&&(t.component=Ej),t}function ro(n){return n.outlet||je}function vg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Iye{constructor(e,t,i,s,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=s,this.inputBindingEnabled=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),ET(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const s=Wd(t);e.children.forEach(r=>{const o=r.value.outlet;this.deactivateRoutes(r,s[o],i),delete s[o]}),Object.values(s).forEach(r=>{this.deactivateRouteAndItsChildren(r,i)})}deactivateRoutes(e,t,i){const s=e.value,r=t?t.value:null;if(s===r)if(s.component){const o=i.getContext(s.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else r&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),s=i&&e.value.component?i.children:t,r=Wd(e);for(const o of Object.values(r))this.deactivateRouteAndItsChildren(o,s);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),s=i&&e.value.component?i.children:t,r=Wd(e);for(const o of Object.values(r))this.deactivateRouteAndItsChildren(o,s);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const s=Wd(t);e.children.forEach(r=>{this.activateRoutes(r,s[r.value.outlet],i),this.forwardEvent(new hye(r.value.snapshot))}),e.children.length&&this.forwardEvent(new uye(e.value.snapshot))}activateRoutes(e,t,i){const s=e.value,r=t?t.value:null;if(ET(s),s===r)if(s.component){const o=i.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(s.component){const o=i.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),ET(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=vg(s.snapshot);o.attachRef=null,o.route=s,o.injector=a,o.outlet&&o.outlet.activateWith(s,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class bj{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class aw{constructor(e,t){this.component=e,this.route=t}}function xye(n,e,t){const i=n._root;return yg(i,e?e._root:null,t,[i.value])}function Yd(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function C4(n){return null!==$g(n)}(n)?e.get(n):n:i}function yg(n,e,t,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const r=Wd(e);return n.children.forEach(o=>{(function Dye(n,e,t,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const r=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&r.routeConfig===o.routeConfig){const l=function Aye(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!pc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!pc(n.url,e.url)||!io(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bT(n,e)||!io(n.queryParams,e.queryParams);default:return!bT(n,e)}}(o,r,r.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new bj(i)):(r.data=o.data,r._resolvedData=o._resolvedData),yg(n,e,r.component?a?a.children:null:t,i,s),l&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new aw(a.outlet.component,o))}else o&&_g(e,a,s),s.canActivateChecks.push(new bj(i)),yg(n,null,r.component?a?a.children:null:t,i,s)})(o,r[o.value.outlet],t,i.concat([o.value]),s),delete r[o.value.outlet]}),Object.entries(r).forEach(([o,a])=>_g(a,t.getContext(o),s)),s}function _g(n,e,t){const i=Wd(n),s=n.value;Object.entries(i).forEach(([r,o])=>{_g(o,s.component?e?e.children.getContext(r):null:e,t)}),t.canDeactivateChecks.push(new aw(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function wg(n){return"function"==typeof n}function Cj(n){return n instanceof Yf||"EmptyError"===n?.name}const lw=Symbol("INITIAL_VALUE");function Xd(){return ps(n=>Xx(n.map(e=>e.pipe(qs(1),og(lw)))).pipe(Ve(e=>{for(const t of e)if(!0!==t){if(t===lw)return lw;if(!1===t||t instanceof Hd)return t}return!0}),Fn(e=>e!==lw),qs(1)))}function Sj(n){return function f4(...n){return AD(n)}(Qn(e=>{if(qd(e))throw yj(0,e)}),Ve(e=>!0===e))}class IT{constructor(e){this.segmentGroup=e||null}}class xT extends Error{constructor(e){super(),this.urlTree=e}}function Zd(n){return Z_(new IT(n))}class Qye{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],s=t.root;for(;;){if(i=i.concat(s.segments),0===s.numberOfChildren)return we(i);if(s.numberOfChildren>1||!s.children[je])return Z_(new R(4e3,!1));s=s.children[je]}}applyRedirectCommands(e,t,i){const s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t.startsWith("/"))throw new xT(s);return s}applyRedirectCreateUrlTree(e,t,i,s){const r=this.createSegmentGroup(e,t.root,i,s);return new Hd(r,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([s,r])=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,s){const r=this.createSegments(e,t.segments,i,s);let o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,i,s)}),new xt(r,o)}createSegments(e,t,i,s){return t.map(r=>r.path.startsWith(":")?this.findPosParam(e,r,s):this.findOrReturn(r,i))}findPosParam(e,t,i){const s=i[t.path.substring(1)];if(!s)throw new R(4001,!1);return s}findOrReturn(e,t){let i=0;for(const s of t){if(s.path===e.path)return t.splice(i),s;i++}return e}}const TT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Yye(n,e,t,i,s){const r=DT(n,e,t);return r.matched?(i=function _ye(n,e){return n.providers&&!n._injector&&(n._injector=yC(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function qye(n,e,t,i){const s=e.canMatch;return s&&0!==s.length?we(s.map(o=>{const a=Yd(o,n);return tl(function Oye(n){return n&&wg(n.canMatch)}(a)?a.canMatch(e,t):_o(n,()=>a(e,t)))})).pipe(Xd(),Sj()):we(!0)}(i,e,t).pipe(Ve(o=>!0===o?r:{...TT}))):we(r)}function DT(n,e,t){if("**"===e.path)return function Xye(n){return{matched:!0,parameters:n.length>0?zU(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...TT}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||kve)(t,n,e);if(!s)return{...TT};const r={};Object.entries(s.posParams??{}).forEach(([a,l])=>{r[a]=l.path});const o=s.consumed.length>0?{...r,...s.consumed[s.consumed.length-1].parameters}:r;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:o,positionalParamSegments:s.posParams??{}}}function Ij(n,e,t,i){return t.length>0&&function Jye(n,e,t){return t.some(i=>cw(n,e,i)&&ro(i)!==je)}(n,t,i)?{segmentGroup:new xt(e,Kye(i,new xt(t,n.children))),slicedSegments:[]}:0===t.length&&function e_e(n,e,t){return t.some(i=>cw(n,e,i))}(n,t,i)?{segmentGroup:new xt(n.segments,Zye(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new xt(n.segments,n.children),slicedSegments:t}}function Zye(n,e,t,i){const s={};for(const r of t)if(cw(n,e,r)&&!i[ro(r)]){const o=new xt([],{});s[ro(r)]=o}return{...i,...s}}function Kye(n,e){const t={};t[je]=e;for(const i of n)if(""===i.path&&ro(i)!==je){const s=new xt([],{});t[ro(i)]=s}return t}function cw(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class i_e{}class o_e{constructor(e,t,i,s,r,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=s,this.urlTree=r,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Qye(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new R(4002,`'${e.segmentGroup}'`)}recognize(){const e=Ij(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ve(t=>{const i=new _T([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},je,this.rootComponentType,null,{}),s=new wr(i,t),r=new hj("",s),o=function Xve(n,e,t=null,i=null){return nj(tj(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,r.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(r._root,null),{state:r,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,je).pipe(No(i=>{if(i instanceof xT)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof IT?this.noMatchError(i):i}))}inheritParamsAndData(e,t){const i=e.value,s=yT(i,t,this.paramsInheritanceStrategy);i.params=Object.freeze(s.params),i.data=Object.freeze(s.data),e.children.forEach(r=>this.inheritParamsAndData(r,i))}processSegmentGroup(e,t,i,s){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,s,!0).pipe(Ve(r=>r instanceof wr?[r]:[]))}processChildren(e,t,i){const s=[];for(const r of Object.keys(i.children))"primary"===r?s.unshift(r):s.push(r);return On(s).pipe(jf(r=>{const o=i.children[r],a=function Cye(n,e){const t=n.filter(i=>ro(i)===e);return t.push(...n.filter(i=>ro(i)!==e)),t}(t,r);return this.processSegmentGroup(e,a,o,r)}),function Tve(n,e){return Jt(function xve(n,e,t,i,s){return(r,o)=>{let a=t,l=e,c=0;r.subscribe(Ht(o,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),i&&o.next(l)},s&&(()=>{a&&o.next(l),o.complete()})))}}(n,e,arguments.length>=2,!0))}((r,o)=>(r.push(...o),r)),K_(null),function Dve(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Fn((s,r)=>n(s,r,i)):ua,rT(1),t?K_(e):UU(()=>new Yf))}(),ci(r=>{if(null===r)return Zd(i);const o=xj(r);return function a_e(n){n.sort((e,t)=>e.value.outlet===je?-1:t.value.outlet===je?1:e.value.outlet.localeCompare(t.value.outlet))}(o),we(o)}))}processSegment(e,t,i,s,r,o){return On(t).pipe(jf(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,i,s,r,o).pipe(No(l=>{if(l instanceof IT)return we(null);throw l}))),el(a=>!!a),No(a=>{if(Cj(a))return function n_e(n,e,t){return 0===e.length&&!n.children[t]}(i,s,r)?we(new i_e):Zd(i);throw a}))}processSegmentAgainstRoute(e,t,i,s,r,o,a){return function t_e(n,e,t,i){return!!(ro(n)===i||i!==je&&cw(e,t,n))&&DT(e,n,t).matched}(i,s,r,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,s,i,r,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,s,t,i,r,o):Zd(s):Zd(s)}expandSegmentAgainstRouteUsingRedirect(e,t,i,s,r,o){const{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:u}=DT(t,s,r);if(!a)return Zd(t);s.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const d=this.applyRedirects.applyRedirectCommands(l,s.redirectTo,c);return this.applyRedirects.lineralizeSegments(s,d).pipe(ci(h=>this.processSegment(e,i,t,h.concat(u),o,!1)))}matchSegmentAgainstRoute(e,t,i,s,r){const o=Yye(t,i,s,e);return"**"===i.path&&(t.children={}),o.pipe(ps(a=>a.matched?this.getChildConfig(e=i._injector??e,i,s).pipe(ps(({routes:l})=>{const c=i._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new _T(u,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function c_e(n){return n.data||{}}(i),ro(i),i.component??i._loadedComponent??null,i,function u_e(n){return n.resolve||{}}(i)),{segmentGroup:p,slicedSegments:g}=Ij(t,u,d,l);if(0===g.length&&p.hasChildren())return this.processChildren(c,l,p).pipe(Ve(_=>null===_?null:new wr(f,_)));if(0===l.length&&0===g.length)return we(new wr(f,[]));const v=ro(i)===r;return this.processSegment(c,l,p,g,v?je:r,!0).pipe(Ve(_=>new wr(f,_ instanceof wr?[_]:[])))})):Zd(t)))}getChildConfig(e,t,i){return t.children?we({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?we({routes:t._loadedRoutes,injector:t._loadedInjector}):function zye(n,e,t,i){const s=e.canLoad;return void 0===s||0===s.length?we(!0):we(s.map(o=>{const a=Yd(o,n);return tl(function Mye(n){return n&&wg(n.canLoad)}(a)?a.canLoad(e,t):_o(n,()=>a(e,t)))})).pipe(Xd(),Sj())}(e,t,i).pipe(ci(s=>s?this.configLoader.loadChildren(e,t).pipe(Qn(r=>{t._loadedRoutes=r.routes,t._loadedInjector=r.injector})):function Wye(n){return Z_(_j(!1,bs.GuardRejected))}())):we({routes:[],injector:e})}}function l_e(n){const e=n.value.routeConfig;return e&&""===e.path}function xj(n){const e=[],t=new Set;for(const i of n){if(!l_e(i)){e.push(i);continue}const s=e.find(r=>i.value.routeConfig===r.value.routeConfig);void 0!==s?(s.children.push(...i.children),t.add(s)):e.push(i)}for(const i of t){const s=xj(i.children);e.push(new wr(i.value,s))}return e.filter(i=>!t.has(i))}function Tj(n){const e=n.children.map(t=>Tj(t)).flat();return[n,...e]}function AT(n){return ps(e=>{const t=n(e);return t?On(t).pipe(Ve(()=>e)):we(e)})}let Dj=(()=>{class n{buildTitle(t){let i,s=t.root;for(;void 0!==s;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(r=>r.outlet===je);return i}getResolvedTitleForRoute(t){return t.data[lg]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>H(m_e),providedIn:"root"})}}return n})(),m_e=(()=>{class n extends Dj{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(P(JK))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Eg=new q("",{providedIn:"root",factory:()=>({})}),uw=new q("");let Aj=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=H(kY)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return we(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=tl(t.loadComponent()).pipe(Ve(kj),Qn(r=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=r}),Ou(()=>{this.componentLoaders.delete(t)})),s=new $U(i,()=>new ye).pipe(sT());return this.componentLoaders.set(t,s),s}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return we({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const r=function v_e(n,e,t,i){return tl(n.loadChildren()).pipe(Ve(kj),ci(s=>s instanceof FM||Array.isArray(s)?we(s):On(e.compileModuleAsync(s))),Ve(s=>{i&&i(n);let r,o,a=!1;return Array.isArray(s)?(o=s,!0):(r=s.create(t).injector,o=r.get(uw,[],{optional:!0,self:!0}).flat()),{routes:o.map(ST),injector:r}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(Ou(()=>{this.childrenLoaders.delete(i)})),o=new $U(r,()=>new ye).pipe(sT());return this.childrenLoaders.set(i,o),o}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function kj(n){return function y_e(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let kT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>H(__e),providedIn:"root"})}}return n})(),__e=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Mj=new q("");let dw=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ye,this.transitionAbortSubject=new ye,this.configLoader=H(Aj),this.environmentInjector=H(as),this.urlSerializer=H(zd),this.rootContexts=H(gg),this.location=H(Ml),this.inputBindingEnabled=null!==H(ow,{optional:!0}),this.titleStrategy=H(Dj),this.options=H(Eg,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=H(kT),this.createViewTransition=H(Mj,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>we(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new lye(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new aye(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t,i,s){return this.transitions=new is({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:fg,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Fn(r=>0!==r.id),Ve(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),ps(r=>{let o=!1,a=!1;return we(r).pipe(ps(l=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",bs.SupersededByNewNavigation),_r;this.currentTransition=r,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!c&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const d="";return this.events.next(new pg(l.id,this.urlSerializer.serialize(l.rawUrl),d,fT.IgnoredSameUrlNavigation)),l.resolve(null),_r}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return we(l).pipe(ps(d=>{const h=this.transitions?.getValue();return this.events.next(new hT(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?_r:Promise.resolve(d)}),function d_e(n,e,t,i,s,r){return ci(o=>function s_e(n,e,t,i,s,r,o="emptyOnly"){return new o_e(n,e,t,i,s,o,r).recognize()}(n,e,t,i,o.extractedUrl,s,r).pipe(Ve(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Qn(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects};const h=new lj(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:d,extractedUrl:h,source:f,restoredState:p,extras:g}=l,v=new hT(d,this.urlSerializer.serialize(h),f,p);this.events.next(v);const _=dj(this.rootComponentType).snapshot;return this.currentTransition=r={...l,targetSnapshot:_,urlAfterRedirects:h,extras:{...g,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=h,we(r)}{const d="";return this.events.next(new pg(l.id,this.urlSerializer.serialize(l.extractedUrl),d,fT.IgnoredByUrlHandlingStrategy)),l.resolve(null),_r}}),Qn(l=>{const c=new iye(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),Ve(l=>(this.currentTransition=r={...l,guards:xye(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},r)),function Fye(n,e){return ci(t=>{const{targetSnapshot:i,currentSnapshot:s,guards:{canActivateChecks:r,canDeactivateChecks:o}}=t;return 0===o.length&&0===r.length?we({...t,guardsResult:!0}):function Lye(n,e,t,i){return On(n).pipe(ci(s=>function Hye(n,e,t,i,s){const r=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return r&&0!==r.length?we(r.map(a=>{const l=vg(e)??s,c=Yd(a,l);return tl(function Pye(n){return n&&wg(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,i):_o(l,()=>c(n,e,t,i))).pipe(el())})).pipe(Xd()):we(!0)}(s.component,s.route,t,e,i)),el(s=>!0!==s,!0))}(o,i,s,n).pipe(ci(a=>a&&function kye(n){return"boolean"==typeof n}(a)?function Bye(n,e,t,i){return On(e).pipe(jf(s=>H_(function $ye(n,e){return null!==n&&e&&e(new cye(n)),we(!0)}(s.route.parent,i),function Vye(n,e){return null!==n&&e&&e(new dye(n)),we(!0)}(s.route,i),function jye(n,e,t){const i=e[e.length-1],r=e.slice(0,e.length-1).reverse().map(o=>function Tye(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>G_(()=>we(o.guards.map(l=>{const c=vg(o.node)??t,u=Yd(l,c);return tl(function Rye(n){return n&&wg(n.canActivateChild)}(u)?u.canActivateChild(i,n):_o(c,()=>u(i,n))).pipe(el())})).pipe(Xd())));return we(r).pipe(Xd())}(n,s.path,t),function Uye(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return we(!0);const s=i.map(r=>G_(()=>{const o=vg(e)??t,a=Yd(r,o);return tl(function Nye(n){return n&&wg(n.canActivate)}(a)?a.canActivate(e,n):_o(o,()=>a(e,n))).pipe(el())}));return we(s).pipe(Xd())}(n,s.route,t))),el(s=>!0!==s,!0))}(i,r,n,e):we(a)),Ve(a=>({...t,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),Qn(l=>{if(r.guardsResult=l.guardsResult,qd(l.guardsResult))throw yj(0,l.guardsResult);const c=new sye(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),Fn(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",bs.GuardRejected),!1)),AT(l=>{if(l.guards.canActivateChecks.length)return we(l).pipe(Qn(c=>{const u=new rye(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),ps(c=>{let u=!1;return we(c).pipe(function h_e(n,e){return ci(t=>{const{targetSnapshot:i,guards:{canActivateChecks:s}}=t;if(!s.length)return we(t);const r=new Set(s.map(l=>l.route)),o=new Set;for(const l of r)if(!o.has(l))for(const c of Tj(l))o.add(c);let a=0;return On(o).pipe(jf(l=>r.has(l)?function f_e(n,e,t,i){const s=n.routeConfig,r=n._resolve;return void 0!==s?.title&&!pj(s)&&(r[lg]=s.title),function p_e(n,e,t,i){const s=oT(n);if(0===s.length)return we({});const r={};return On(s).pipe(ci(o=>function g_e(n,e,t,i){const s=vg(e)??i,r=Yd(n,s);return tl(r.resolve?r.resolve(e,t):_o(s,()=>r(e,t)))}(n[o],e,t,i).pipe(el(),Qn(a=>{r[o]=a}))),rT(1),jU(r),No(o=>Cj(o)?_r:Z_(o)))}(r,n,e,i).pipe(Ve(o=>(n._resolvedData=o,n.data=yT(n,n.parent,t).resolve,null)))}(l,i,n,e):(l.data=yT(l,l.parent,n).resolve,we(void 0))),Qn(()=>a++),rT(1),ci(l=>a===o.size?we(t):_r))})}(this.paramsInheritanceStrategy,this.environmentInjector),Qn({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",bs.NoDataFromResolver)}}))}),Qn(c=>{const u=new oye(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),AT(l=>{const c=u=>{const d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(Qn(h=>{u.component=h}),Ve(()=>{})));for(const h of u.children)d.push(...c(h));return d};return Xx(c(l.targetSnapshot.root)).pipe(K_(null),qs(1))}),AT(()=>this.afterPreactivation()),ps(()=>{const{currentSnapshot:l,targetSnapshot:c}=r,u=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return u?On(u).pipe(Ve(()=>r)):we(r)}),Ve(l=>{const c=function gye(n,e,t){const i=mg(n,e._root,t?t._root:void 0);return new uj(i,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=r={...l,targetRouterState:c},this.currentNavigation.targetRouterState=c,r}),Qn(()=>{this.events.next(new pT)}),((n,e,t,i)=>Ve(s=>(new Iye(e,s.targetRouterState,s.currentRouterState,t,i).activate(n),s)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),qs(1),Qn({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new gc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),As(this.transitionAbortSubject.pipe(Qn(l=>{throw l}))),Ou(()=>{!o&&!a&&this.cancelNavigationTransition(r,"",bs.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),No(l=>{if(a=!0,wj(l))this.events.next(new Gd(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode)),function yye(n){return wj(n)&&qd(n.url)}(l)?this.events.next(new gT(l.url)):r.resolve(!1);else{this.events.next(new rw(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0));try{r.resolve(t.errorHandler(l))}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return _r}))}))}cancelNavigationTransition(t,i,s){const r=new Gd(t.id,this.urlSerializer.serialize(t.extractedUrl),i,s);this.events.next(r),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function b_e(n){return n!==fg}let C_e=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>H(I_e),providedIn:"root"})}}return n})();class S_e{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let I_e=(()=>{class n extends S_e{static{this.\u0275fac=(()=>{let t;return function(s){return(t||(t=dn(n)))(s||n)}})()}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Rj=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>H(x_e),providedIn:"root"})}}return n})(),x_e=(()=>{class n extends Rj{constructor(){super(...arguments),this.location=H(Ml),this.urlSerializer=H(zd),this.options=H(Eg,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=H(kT),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Hd,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=dj(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{"popstate"===i.type&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof hT)this.stateMemento=this.createStateMemento();else if(t instanceof pg)this.rawUrlTree=i.initialUrl;else if(t instanceof lj){if("eager"===this.urlUpdateStrategy&&!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else t instanceof pT?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):t instanceof Gd&&(t.code===bs.GuardRejected||t.code===bs.NoDataFromResolver)?this.restoreHistory(i):t instanceof rw?this.restoreHistory(i,!0):t instanceof gc&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){const s=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(s,"",o)}else{const r={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(s,"",r)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-this.browserPageId;0!==r?this.location.historyGo(r):this.currentUrlTree===t.finalUrl&&0===r&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(s){return(t||(t=dn(n)))(s||n)}})()}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var bg=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(bg||{});function T_e(n){throw n}const D_e={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},A_e={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let oo=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=H(dP),this.stateManager=H(Rj),this.options=H(Eg,{optional:!0})||{},this.pendingTasks=H(_a),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=H(dw),this.urlSerializer=H(zd),this.location=H(Ml),this.urlHandlingStrategy=H(kT),this._events=new ye,this.errorHandler=this.options.errorHandler||T_e,this.navigated=!1,this.routeReuseStrategy=H(C_e),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=H(uw,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!H(ow,{optional:!0}),this.eventsSubscription=new wn,this.isNgZoneEnabled=H(Ae)instanceof Ae&&Ae.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const s=this.navigationTransitions.currentTransition,r=this.navigationTransitions.currentNavigation;if(null!==s&&null!==r)if(this.stateManager.handleRouterEvent(i,r),i instanceof Gd&&i.code!==bs.Redirect&&i.code!==bs.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof gc)this.navigated=!0;else if(i instanceof gT){const o=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),a={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||b_e(s.source)};this.scheduleNavigation(o,fg,null,a,{resolve:s.resolve,reject:s.reject,promise:s.promise})}(function M_e(n){return!(n instanceof pT||n instanceof gT)})(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),fg,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,s){const r={replaceUrl:!0},o=s?.navigationId?s:null;if(s){const l={...s};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(r.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,i,o,r)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(ST),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:s,queryParams:r,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o;let d,u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...r};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}null!==u&&(u=this.removeEmptyProps(u));try{d=tj(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),d=this.currentUrlTree.root}return nj(d,t,u,c??null)}navigateByUrl(t,i={skipLocationChange:!1}){const s=qd(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(r,fg,null,i)}navigate(t,i={skipLocationChange:!1}){return function k_e(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new R(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let s;if(s=!0===i?{...D_e}:!1===i?{...A_e}:i,qd(t))return GU(this.currentUrlTree,t,s);const r=this.parseUrl(t);return GU(this.currentUrlTree,r,s)}removeEmptyProps(t){return Object.entries(t).reduce((i,[s,r])=>(null!=r&&(i[s]=r),i),{})}scheduleNavigation(t,i,s,r,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,l=h});const u=this.pendingTasks.add();return function Pj(n,e){n.events.pipe(Fn(t=>t instanceof gc||t instanceof Gd||t instanceof rw||t instanceof pg),Ve(t=>t instanceof gc||t instanceof pg?bg.COMPLETE:t instanceof Gd&&(t.code===bs.Redirect||t.code===bs.SupersededByNewNavigation)?bg.REDIRECTING:bg.FAILED),Fn(t=>t!==bg.REDIRECTING),qs(1)).subscribe(()=>{e()})}(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:r,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function V_e(n,e){if(1&n){const t=ht();S(0,"button",9),ce("click",function(){const s=be(t).$implicit;return Ce(O().setActive(s))}),$(1),x()}if(2&n){const t=e.$implicit,i=O();qn("active",i.activeTab===t),B("disabled",i.showInitialLoader),A(),Ci(" ",t," ")}}function $_e(n,e){if(1&n&&(S(0,"p"),$(1),x()),2&n){const t=O().$implicit;A(),Ci("Name: ",t.SearchName,"")}}function U_e(n,e){if(1&n&&(S(0,"small"),$(1),x()),2&n){const t=O().$implicit;A(),Ci("Saved by: ",t.savedBy,"")}}function j_e(n,e){if(1&n){const t=ht();S(0,"div",15)(1,"img",16),ce("click",function(){be(t);const s=O().$implicit;return Ce(O().deletePrompt(s))}),x()()}}function H_e(n,e){if(1&n){const t=ht();S(0,"div",10),ve(1,"img",11),S(2,"div",12),ce("click",function(){const s=be(t).$implicit;return Ce(O().handlePromptClicked(s))}),se(3,$_e,2,1,"p",13),S(4,"span"),$(5),x(),se(6,U_e,2,1,"small",13),x(),se(7,j_e,2,0,"div",14),x()}if(2&n){const t=e.$implicit,i=O();A(),B("src",i.getIconSrc(t.queryType),yl),A(2),B("ngIf",t.SearchName.length>0),A(2),bt(t.Question),A(),B("ngIf",t.savedBy.length>0),A(),B("ngIf",i.userDetails.userId==t.userId)}}function z_e(n,e){1&n&&(S(0,"div",17),ve(1,"div",18),x())}function q_e(n,e){1&n&&(S(0,"div",19),$(1," No results found. "),x())}let G_e=(()=>{class n{setActive(t){if(this.showInitialLoader)return;this.prompts=[],this.activeTab=t,console.log("tab::",t);let i=t.toLowerCase();"GEMS"===t&&(i="reserved"),this.prompts="All prompts"===t?this.allPrompts:this.allPrompts.filter(s=>s.queryType===i)}backPage(){this.toggleBackFromLib()}getIconSrc(t){return{private:"assets/Icons/private.svg",public:"assets/Icons/public.svg",reserved:"assets/Icons/reserved.svg"}[t]||"assets/Icons/reserved.svg"}handlePromptClicked(t){this.backPage(),this.ExecutePromptSelected(t)}constructor(t,i,s,r,o){this.router=t,this.api=i,this.cdr=s,this.toaster=r,this.dialog=o,this.tabs=["All prompts","Private","Public","GEMS"],this.activeTab=this.tabs[0],this.userDetails="",this.showInitialLoader=!1,this.prompts=[],this.allPrompts=[],this.userDetails=JSON.parse(sessionStorage.getItem("initializeData")||"{}")}ngOnInit(){this.fetchPrompts()}showToastMessage(t){this.toaster.success(t,"",{timeOut:5e3})}fetchPrompts(t=""){this.showInitialLoader=!0,this.api.getSavedPrompts(t.toLowerCase()).subscribe({next:i=>{this.allPrompts=i?.data,this.prompts=i?.data,this.showInitialLoader=!1},error:i=>{this.showInitialLoader=!1,console.error("Error fetching prompts:",i)}})}deletePromptApi(t){this.api.deleteSavedPrompt(t).subscribe({next:i=>{this.showToastMessage("Deleted Saved Prompt Successfully!"),this.allPrompts=this.allPrompts.filter(s=>s.id!=t),console.log("this.activeTab::",this.activeTab),this.prompts="All prompts"!=this.activeTab&&"all prompts"!=this.activeTab?this.allPrompts.filter(s=>s.queryType===this.activeTab.toLowerCase()):this.allPrompts},error:i=>{console.error("Error fetching prompts:",i)}})}getIcon(t){return{location:"place",building:"apartment",face:"sentiment_satisfied"}[t]||"help"}savePrompt(t){console.log("Saved:",t)}deletePrompt(t){console.log("Deleted:",t),this.dialog.open(Cve,{width:"300px"}).afterClosed().subscribe(s=>{s&&this.deletePromptApi(t.id)})}static{this.\u0275fac=function(i){return new(i||n)(k(oo),k(ry),k(Do),k(Bu),k(X_))}}static{this.\u0275cmp=_i({type:n,selectors:[["app-gems-prompt-library"]],inputs:{toggleBackFromLib:"toggleBackFromLib",ExecutePromptSelected:"ExecutePromptSelected"},decls:12,vars:4,consts:[[1,"container"],[1,"user-icon"],["src","assets/Icons/arrow-left.svg","alt","User Icon",1,"back-icon",3,"click"],[1,"tabs"],[3,"active","disabled","click",4,"ngFor","ngForOf"],[1,"prompt-list"],["class","prompt",4,"ngFor","ngForOf"],["class","loadingSec customWidth",4,"ngIf"],["class","no-results",4,"ngIf"],[3,"click","disabled"],[1,"prompt"],["alt","Prompt Icon",1,"icons-img",3,"src"],[1,"text",3,"click"],[4,"ngIf"],["class","icons",4,"ngIf"],[1,"icons"],["src","assets/Icons/delete-bin-fill.svg","alt","Delete Icon",3,"click"],[1,"loadingSec","customWidth"],[1,"loaderBar"],[1,"no-results"]],template:function(i,s){1&i&&(S(0,"div",0)(1,"header")(2,"div",1)(3,"img",2),ce("click",function(){return s.backPage()}),x()(),S(4,"h5"),$(5,"Saved Prompts"),x()(),S(6,"nav",3),se(7,V_e,2,4,"button",4),x(),S(8,"div",5),se(9,H_e,8,5,"div",6)(10,z_e,2,0,"div",7),x(),se(11,q_e,2,0,"div",8),x()),2&i&&(A(7),B("ngForOf",s.tabs),A(2),B("ngForOf",s.prompts),A(),B("ngIf",s.showInitialLoader),A(),B("ngIf",!s.showInitialLoader&&0===s.prompts.length))},dependencies:[Vv,xa],styles:[".container[_ngcontent-%COMP%]{width:90%;max-width:600px;margin:20px auto;background:#fff;padding:20px;border-radius:10px;box-shadow:0 0 10px #0000001a;height:calc(100vh - 140px)}header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px}h5[_ngcontent-%COMP%]{font-family:Open Sans;font-weight:700!important;font-size:16px!important;line-height:22px;letter-spacing:0%!important;margin:7px 0 0 5px!important;text-align:right}.user-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:16px;height:20px;border-radius:50%}.tabs[_ngcontent-%COMP%]{display:flex;overflow-x:auto;gap:10px;margin-bottom:20px;padding-bottom:4px;scrollbar-width:thin;scrollbar-color:#ccc transparent}.tabs[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.tabs[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#ccc;border-radius:3px}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-shrink:0;padding:10px;border:1px solid #D3D3D3!important;background:#f8f9fd!important;cursor:pointer;border-radius:4px;height:43px!important;min-width:110px!important;text-align:center;display:block;line-height:20px;white-space:nowrap}.tabs[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background:#93186c!important;color:#fff}.prompt-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;overflow-y:auto;max-height:calc(100vh - 280px)}.prompt[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;border-radius:10px;padding:7px 10px;border:1px solid #F3F3F3;background:#f8f9fd;gap:10px;cursor:pointer}.prompt[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.prompt[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.prompt[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.prompt.saved[_ngcontent-%COMP%]{background:#e3f2fd}.icons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .back-icon[_ngcontent-%COMP%]{cursor:pointer}.savedBy[_ngcontent-%COMP%]{font-family:Open Sans;font-weight:600!important;font-size:14px!important;line-height:19px;letter-spacing:0%}.text[_ngcontent-%COMP%]{display:flex;flex-direction:column}.text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#272323}.text[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:12px;color:gray}.loadingSec.customWidth[_ngcontent-%COMP%]{width:calc(100% - 100px);height:calc(100% - 275px)}.no-results[_ngcontent-%COMP%]{text-align:center;color:#888;padding:1rem;font-size:1rem}"]})}}return n})();class Uj extends ye{constructor(e=1/0,t=1/0,i=Ox){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:s,_timestampProvider:r,_windowTime:o}=this;t||(i.push(e),!s&&i.push(r.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:s}=this,r=s.slice();for(let o=0;o<r.length&&!e.closed;o+=i?1:2)e.next(r[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:s}=this,r=(s?1:2)*e;if(e<1/0&&r<i.length&&i.splice(0,i.length-r),!s){const o=t.now();let a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}}function PT(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new Dc({next:()=>{i.unsubscribe(),n()}});return xi(e(...t)).subscribe(i)}let mc={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function jj(n){mc=n}const Hj=/[&<>"']/,Y_e=new RegExp(Hj.source,"g"),zj=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,X_e=new RegExp(zj.source,"g"),Z_e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},qj=n=>Z_e[n];function Cs(n,e){if(e){if(Hj.test(n))return n.replace(Y_e,qj)}else if(zj.test(n))return n.replace(X_e,qj);return n}const K_e=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,ewe=/(^|[^\[])\^/g;function vt(n,e){n="string"==typeof n?n:n.source,e=e||"";const t={replace:(i,s)=>(s=(s="object"==typeof s&&"source"in s?s.source:s).replace(ewe,"$1"),n=n.replace(i,s),t),getRegex:()=>new RegExp(n,e)};return t}function Gj(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const hw={exec:()=>null};function Wj(n,e){const i=n.replace(/\|/g,(r,o,a)=>{let l=!1,c=o;for(;--c>=0&&"\\"===a[c];)l=!l;return l?"|":" |"}).split(/ \|/);let s=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;s<i.length;s++)i[s]=i[s].trim().replace(/\\\|/g,"|");return i}function fw(n,e,t){const i=n.length;if(0===i)return"";let s=0;for(;s<i;){const r=n.charAt(i-s-1);if(r!==e||t){if(r===e||!t)break;s++}else s++}return n.slice(0,i-s)}function Qj(n,e,t,i){const s=e.href,r=e.title?Cs(e.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if("!"!==n[0].charAt(0)){i.state.inLink=!0;const a={type:"link",raw:t,href:s,title:r,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,a}return{type:"image",raw:t,href:s,title:r,text:Cs(o)}}class pw{options;rules;lexer;constructor(e){this.options=e||mc}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:fw(i,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const i=t[0],s=function nwe(n,e){const t=n.match(/^(\s+)(?:```)/);if(null===t)return e;const i=t[1];return e.split("\n").map(s=>{const r=s.match(/^\s+/);if(null===r)return s;const[o]=r;return o.length>=i.length?s.slice(i.length):s}).join("\n")}(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:s}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){const s=fw(i,"#");(this.options.pedantic||!s||/ $/.test(s))&&(i=s.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const i=fw(t[0].replace(/^ *>[ \t]?/gm,""),"\n"),s=this.lexer.state.top;this.lexer.state.top=!0;const r=this.lexer.blockTokens(i);return this.lexer.state.top=s,{type:"blockquote",raw:t[0],tokens:r,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i=t[1].trim();const s=i.length>1,r={type:"list",raw:"",ordered:s,start:s?+i.slice(0,-1):"",loose:!1,items:[]};i=s?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=s?i:"[*+-]");const o=new RegExp(`^( {0,3}${i})((?:[\t ][^\\n]*)?(?:\\n|$))`);let a="",l="",c=!1;for(;e;){let u=!1;if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let d=t[2].split("\n",1)[0].replace(/^\t+/,_=>" ".repeat(3*_.length)),h=e.split("\n",1)[0],f=0;this.options.pedantic?(f=2,l=d.trimStart()):(f=t[2].search(/[^ ]/),f=f>4?1:f,l=d.slice(f),f+=t[1].length);let p=!1;if(!d&&/^ *$/.test(h)&&(a+=h+"\n",e=e.substring(h.length+1),u=!0),!u){const _=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),E=new RegExp(`^ {0,${Math.min(3,f-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),b=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:\`\`\`|~~~)`),T=new RegExp(`^ {0,${Math.min(3,f-1)}}#`);for(;e;){const V=e.split("\n",1)[0];if(h=V,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),b.test(h)||T.test(h)||_.test(h)||E.test(e))break;if(h.search(/[^ ]/)>=f||!h.trim())l+="\n"+h.slice(f);else{if(p||d.search(/[^ ]/)>=4||b.test(d)||T.test(d)||E.test(d))break;l+="\n"+h}!p&&!h.trim()&&(p=!0),a+=V+"\n",e=e.substring(V.length+1),d=h.slice(f)}}r.loose||(c?r.loose=!0:/\n *\n *$/.test(a)&&(c=!0));let v,g=null;this.options.gfm&&(g=/^\[[ xX]\] /.exec(l),g&&(v="[ ] "!==g[0],l=l.replace(/^\[[ xX]\] +/,""))),r.items.push({type:"list_item",raw:a,task:!!g,checked:v,loose:!1,text:l,tokens:[]}),r.raw+=a}r.items[r.items.length-1].raw=a.trimEnd(),r.items[r.items.length-1].text=l.trimEnd(),r.raw=r.raw.trimEnd();for(let u=0;u<r.items.length;u++)if(this.lexer.state.top=!1,r.items[u].tokens=this.lexer.blockTokens(r.items[u].text,[]),!r.loose){const d=r.items[u].tokens.filter(f=>"space"===f.type),h=d.length>0&&d.some(f=>/\n.*\n/.test(f.raw));r.loose=h}if(r.loose)for(let u=0;u<r.items.length;u++)r.items[u].loose=!0;return r}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const i=t[1].toLowerCase().replace(/\s+/g," "),s=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:i,raw:t[0],href:s,title:r}}}table(e){const t=this.rules.block.table.exec(e);if(t){if(!/[:|]/.test(t[2]))return;const i={type:"table",raw:t[0],header:Wj(t[1]).map(s=>({text:s,tokens:[]})),align:t[2].replace(/^\||\| *$/g,"").split("|"),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(i.header.length===i.align.length){let r,o,a,l,s=i.align.length;for(r=0;r<s;r++){const c=i.align[r];c&&(i.align[r]=/^ *-+: *$/.test(c)?"right":/^ *:-+: *$/.test(c)?"center":/^ *:-+ *$/.test(c)?"left":null)}for(s=i.rows.length,r=0;r<s;r++)i.rows[r]=Wj(i.rows[r],i.header.length).map(c=>({text:c,tokens:[]}));for(s=i.header.length,o=0;o<s;o++)i.header[o].tokens=this.lexer.inline(i.header[o].text);for(s=i.rows.length,o=0;o<s;o++)for(l=i.rows[o],a=0;a<l.length;a++)l[a].tokens=this.lexer.inline(l[a].text);return i}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const i="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Cs(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const o=fw(i.slice(0,-1),"\\");if((i.length-o.length)%2==0)return}else{const o=function twe(n,e){if(-1===n.indexOf(e[1]))return-1;let t=0;for(let i=0;i<n.length;i++)if("\\"===n[i])i++;else if(n[i]===e[0])t++;else if(n[i]===e[1]&&(t--,t<0))return i;return-1}(t[2],"()");if(o>-1){const l=(0===t[0].indexOf("!")?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let s=t[2],r="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);o&&(s=o[1],r=o[3])}else r=t[3]?t[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(s=this.options.pedantic&&!/>$/.test(i)?s.slice(1):s.slice(1,-1)),Qj(t,{href:s&&s.replace(this.rules.inline._escapes,"$1"),title:r&&r.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let s=(i[2]||i[1]).replace(/\s+/g," ");if(s=t[s.toLowerCase()],!s){const r=i[0].charAt(0);return{type:"text",raw:r,text:r}}return Qj(i,s,i[0],this.lexer)}}emStrong(e,t,i=""){let s=this.rules.inline.emStrong.lDelim.exec(e);if(!(!s||s[3]&&i.match(/[\p{L}\p{N}]/u))&&(!s[1]&&!s[2]||!i||this.rules.inline.punctuation.exec(i))){const o=[...s[0]].length-1;let a,l,c=o,u=0;const d="*"===s[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(d.lastIndex=0,t=t.slice(-1*e.length+o);null!=(s=d.exec(t));){if(a=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!a)continue;if(l=[...a].length,s[3]||s[4]){c+=l;continue}if((s[5]||s[6])&&o%3&&!((o+l)%3)){u+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+u);const h=[...s[0]][0].length,f=e.slice(0,o+s.index+h+l);if(Math.min(o,l)%2){const g=f.slice(1,-1);return{type:"em",raw:f,text:g,tokens:this.lexer.inlineTokens(g)}}const p=f.slice(2,-2);return{type:"strong",raw:f,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," ");const s=/[^ ]/.test(i),r=/^ /.test(i)&&/ $/.test(i);return s&&r&&(i=i.substring(1,i.length-1)),i=Cs(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let i,s;return"@"===t[2]?(i=Cs(t[1]),s="mailto:"+i):(i=Cs(t[1]),s=i),{type:"link",raw:t[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let i,s;if("@"===t[2])i=Cs(t[0]),s="mailto:"+i;else{let r;do{r=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])[0]}while(r!==t[0]);i=Cs(t[0]),s="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let i;return i=this.lexer.state.inRawBlock?t[0]:Cs(t[0]),{type:"text",raw:t[0],text:i}}}}const fe={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:hw,lheading:/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};fe.def=vt(fe.def).replace("label",fe._label).replace("title",fe._title).getRegex(),fe.bullet=/(?:[*+-]|\d{1,9}[.)])/,fe.listItemStart=vt(/^( *)(bull) */).replace("bull",fe.bullet).getRegex(),fe.list=vt(fe.list).replace(/bull/g,fe.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+fe.def.source+")").getRegex(),fe._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",fe._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,fe.html=vt(fe.html,"i").replace("comment",fe._comment).replace("tag",fe._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),fe.lheading=vt(fe.lheading).replace(/bull/g,fe.bullet).getRegex(),fe.paragraph=vt(fe._paragraph).replace("hr",fe.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fe._tag).getRegex(),fe.blockquote=vt(fe.blockquote).replace("paragraph",fe.paragraph).getRegex(),fe.normal={...fe},fe.gfm={...fe.normal,table:"^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},fe.gfm.table=vt(fe.gfm.table).replace("hr",fe.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fe._tag).getRegex(),fe.gfm.paragraph=vt(fe._paragraph).replace("hr",fe.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",fe.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fe._tag).getRegex(),fe.pedantic={...fe.normal,html:vt("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",fe._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:hw,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:vt(fe.normal._paragraph).replace("hr",fe.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",fe.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const ie={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:hw,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:hw,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/,_punctuation:"\\p{P}$+<=>`^|~"};ie.punctuation=vt(ie.punctuation,"u").replace(/punctuation/g,ie._punctuation).getRegex(),ie.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,ie.anyPunctuation=/\\[punct]/g,ie._escapes=/\\([punct])/g,ie._comment=vt(fe._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),ie.emStrong.lDelim=vt(ie.emStrong.lDelim,"u").replace(/punct/g,ie._punctuation).getRegex(),ie.emStrong.rDelimAst=vt(ie.emStrong.rDelimAst,"gu").replace(/punct/g,ie._punctuation).getRegex(),ie.emStrong.rDelimUnd=vt(ie.emStrong.rDelimUnd,"gu").replace(/punct/g,ie._punctuation).getRegex(),ie.anyPunctuation=vt(ie.anyPunctuation,"gu").replace(/punct/g,ie._punctuation).getRegex(),ie._escapes=vt(ie._escapes,"gu").replace(/punct/g,ie._punctuation).getRegex(),ie._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,ie._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,ie.autolink=vt(ie.autolink).replace("scheme",ie._scheme).replace("email",ie._email).getRegex(),ie._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,ie.tag=vt(ie.tag).replace("comment",ie._comment).replace("attribute",ie._attribute).getRegex(),ie._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ie._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,ie._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,ie.link=vt(ie.link).replace("label",ie._label).replace("href",ie._href).replace("title",ie._title).getRegex(),ie.reflink=vt(ie.reflink).replace("label",ie._label).replace("ref",fe._label).getRegex(),ie.nolink=vt(ie.nolink).replace("ref",fe._label).getRegex(),ie.reflinkSearch=vt(ie.reflinkSearch,"g").replace("reflink",ie.reflink).replace("nolink",ie.nolink).getRegex(),ie.normal={...ie},ie.pedantic={...ie.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:vt(/^!?\[(label)\]\((.*?)\)/).replace("label",ie._label).getRegex(),reflink:vt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ie._label).getRegex()},ie.gfm={...ie.normal,escape:vt(ie.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ie.gfm.url=vt(ie.gfm.url,"i").replace("email",ie.gfm._extended_email).getRegex(),ie.breaks={...ie.gfm,br:vt(ie.br).replace("{2,}","*").getRegex(),text:vt(ie.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class lo{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||mc,this.options.tokenizer=this.options.tokenizer||new pw,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:fe.normal,inline:ie.normal};this.options.pedantic?(t.block=fe.pedantic,t.inline=ie.pedantic):this.options.gfm&&(t.block=fe.gfm,t.inline=this.options.breaks?ie.breaks:ie.gfm),this.tokenizer.rules=t}static get rules(){return{block:fe,inline:ie}}static lex(e,t){return new lo(t).lex(e)}static lexInline(e,t){return new lo(t).inlineTokens(e)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let i,s,r,o;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(a,l,c)=>l+"    ".repeat(c.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(i=a.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),1===i.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),s=t[t.length-1],!s||"paragraph"!==s.type&&"text"!==s.type?t.push(i):(s.raw+="\n"+i.raw,s.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),s=t[t.length-1],!s||"paragraph"!==s.type&&"text"!==s.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(s.raw+="\n"+i.raw,s.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text);continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(r=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},l),"number"==typeof c&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(r=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(r))){s=t[t.length-1],o&&"paragraph"===s.type?(s.raw+="\n"+i.raw,s.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(i),o=r.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),s=t[t.length-1],s&&"text"===s.type?(s.raw+="\n"+i.raw,s.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(i);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let i,s,r,a,l,c,o=e;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(o));)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(o));)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.anyPunctuation.exec(o));)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>!!(i=u.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),s=t[t.length-1],s&&"text"===i.type&&"text"===s.type?(s.raw+=i.raw,s.text+=i.text):t.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),s=t[t.length-1],s&&"text"===i.type&&"text"===s.type?(s.raw+=i.raw,s.text+=i.text):t.push(i);continue}if(i=this.tokenizer.emStrong(e,o,c)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.autolink(e)){e=e.substring(i.raw.length),t.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e))){e=e.substring(i.raw.length),t.push(i);continue}if(r=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const d=e.slice(1);let h;this.options.extensions.startInline.forEach(f=>{h=f.call({lexer:this},d),"number"==typeof h&&h>=0&&(u=Math.min(u,h))}),u<1/0&&u>=0&&(r=e.substring(0,u+1))}if(i=this.tokenizer.inlineText(r)){e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(c=i.raw.slice(-1)),l=!0,s=t[t.length-1],s&&"text"===s.type?(s.raw+=i.raw,s.text+=i.text):t.push(i);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}throw new Error(u)}}return t}}class vc{options;constructor(e){this.options=e||mc}code(e,t,i){const s=(t||"").match(/^\S*/)?.[0];return e=e.replace(/\n$/,"")+"\n",s?'<pre><code class="language-'+Cs(s)+'">'+(i?e:Cs(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:Cs(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e,t){return e}heading(e,t,i){return`<h${t}>${e}</h${t}>\n`}hr(){return"<hr>\n"}list(e,t,i){const s=t?"ol":"ul";return"<"+s+(t&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+s+">\n"}listitem(e,t,i){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>\n`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,t){const i=t.header?"th":"td";return(t.align?`<${i} align="${t.align}">`:`<${i}>`)+e+`</${i}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,i){const s=Gj(e);if(null===s)return i;let r='<a href="'+(e=s)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+i+"</a>",r}image(e,t,i){const s=Gj(e);if(null===s)return i;let r=`<img src="${e=s}" alt="${i}"`;return t&&(r+=` title="${t}"`),r+=">",r}text(e){return e}}class FT{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,i){return""+i}image(e,t,i){return""+i}br(){return""}}class co{options;renderer;textRenderer;constructor(e){this.options=e||mc,this.options.renderer=this.options.renderer||new vc,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new FT}static parse(e,t){return new co(t).parse(e)}static parseInline(e,t){return new co(t).parseInline(e)}parse(e,t=!0){let i="";for(let s=0;s<e.length;s++){const r=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){const o=r,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(!1!==a||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){i+=a||"";continue}}switch(r.type){case"space":continue;case"hr":i+=this.renderer.hr();continue;case"heading":{const o=r;i+=this.renderer.heading(this.parseInline(o.tokens),o.depth,this.parseInline(o.tokens,this.textRenderer).replace(K_e,(e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""));continue}case"code":i+=this.renderer.code(r.text,r.lang,!!r.escaped);continue;case"table":{const o=r;let a="",l="";for(let u=0;u<o.header.length;u++)l+=this.renderer.tablecell(this.parseInline(o.header[u].tokens),{header:!0,align:o.align[u]});a+=this.renderer.tablerow(l);let c="";for(let u=0;u<o.rows.length;u++){const d=o.rows[u];l="";for(let h=0;h<d.length;h++)l+=this.renderer.tablecell(this.parseInline(d[h].tokens),{header:!1,align:o.align[h]});c+=this.renderer.tablerow(l)}i+=this.renderer.table(a,c);continue}case"blockquote":{const a=this.parse(r.tokens);i+=this.renderer.blockquote(a);continue}case"list":{const o=r,a=o.ordered,l=o.start,c=o.loose;let u="";for(let d=0;d<o.items.length;d++){const h=o.items[d],f=h.checked,p=h.task;let g="";if(h.task){const v=this.renderer.checkbox(!!f);c?h.tokens.length>0&&"paragraph"===h.tokens[0].type?(h.tokens[0].text=v+" "+h.tokens[0].text,h.tokens[0].tokens&&h.tokens[0].tokens.length>0&&"text"===h.tokens[0].tokens[0].type&&(h.tokens[0].tokens[0].text=v+" "+h.tokens[0].tokens[0].text)):h.tokens.unshift({type:"text",text:v+" "}):g+=v+" "}g+=this.parse(h.tokens,c),u+=this.renderer.listitem(g,p,!!f)}i+=this.renderer.list(u,a,l);continue}case"html":i+=this.renderer.html(r.text,r.block);continue;case"paragraph":i+=this.renderer.paragraph(this.parseInline(r.tokens));continue;case"text":{let o=r,a=o.tokens?this.parseInline(o.tokens):o.text;for(;s+1<e.length&&"text"===e[s+1].type;)o=e[++s],a+="\n"+(o.tokens?this.parseInline(o.tokens):o.text);i+=t?this.renderer.paragraph(a):a;continue}default:{const o='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return i}parseInline(e,t){t=t||this.renderer;let i="";for(let s=0;s<e.length;s++){const r=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){const o=this.options.extensions.renderers[r.type].call({parser:this},r);if(!1!==o||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){i+=o||"";continue}}switch(r.type){case"escape":case"text":i+=t.text(r.text);break;case"html":i+=t.html(r.text);break;case"link":i+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break;case"image":i+=t.image(r.href,r.title,r.text);break;case"strong":i+=t.strong(this.parseInline(r.tokens,t));break;case"em":i+=t.em(this.parseInline(r.tokens,t));break;case"codespan":i+=t.codespan(r.text);break;case"br":i+=t.br();break;case"del":i+=t.del(this.parseInline(r.tokens,t));break;default:{const o='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return i}}class gw{options;constructor(e){this.options=e||mc}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(e){return e}postprocess(e){return e}}const yc=new class iwe{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.#e(lo.lex,co.parse);parseInline=this.#e(lo.lexInline,co.parseInline);Parser=co;Renderer=vc;TextRenderer=FT;Lexer=lo;Tokenizer=pw;Hooks=gw;constructor(...e){this.use(...e)}walkTokens(e,t){let i=[];for(const s of e)switch(i=i.concat(t.call(this,s)),s.type){case"table":{const r=s;for(const o of r.header)i=i.concat(this.walkTokens(o.tokens,t));for(const o of r.rows)for(const a of o)i=i.concat(this.walkTokens(a.tokens,t));break}case"list":i=i.concat(this.walkTokens(s.items,t));break;default:{const r=s;this.defaults.extensions?.childTokens?.[r.type]?this.defaults.extensions.childTokens[r.type].forEach(o=>{i=i.concat(this.walkTokens(r[o],t))}):r.tokens&&(i=i.concat(this.walkTokens(r.tokens,t)))}}return i}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{const s={...i};if(s.async=this.defaults.async||s.async||!1,i.extensions&&(i.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){const o=t.renderers[r.name];t.renderers[r.name]=o?function(...a){let l=r.renderer.apply(this,a);return!1===l&&(l=o.apply(this,a)),l}:r.renderer}if("tokenizer"in r){if(!r.level||"block"!==r.level&&"inline"!==r.level)throw new Error("extension level must be 'block' or 'inline'");const o=t[r.level];o?o.unshift(r.tokenizer):t[r.level]=[r.tokenizer],r.start&&("block"===r.level?t.startBlock?t.startBlock.push(r.start):t.startBlock=[r.start]:"inline"===r.level&&(t.startInline?t.startInline.push(r.start):t.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(t.childTokens[r.name]=r.childTokens)}),s.extensions=t),i.renderer){const r=this.defaults.renderer||new vc(this.defaults);for(const o in i.renderer){const a=i.renderer[o],c=r[o];r[o]=(...u)=>{let d=a.apply(r,u);return!1===d&&(d=c.apply(r,u)),d||""}}s.renderer=r}if(i.tokenizer){const r=this.defaults.tokenizer||new pw(this.defaults);for(const o in i.tokenizer){const a=i.tokenizer[o],c=r[o];r[o]=(...u)=>{let d=a.apply(r,u);return!1===d&&(d=c.apply(r,u)),d}}s.tokenizer=r}if(i.hooks){const r=this.defaults.hooks||new gw;for(const o in i.hooks){const a=i.hooks[o],c=r[o];r[o]=gw.passThroughHooks.has(o)?u=>{if(this.defaults.async)return Promise.resolve(a.call(r,u)).then(h=>c.call(r,h));const d=a.call(r,u);return c.call(r,d)}:(...u)=>{let d=a.apply(r,u);return!1===d&&(d=c.apply(r,u)),d}}s.hooks=r}if(i.walkTokens){const r=this.defaults.walkTokens,o=i.walkTokens;s.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),r&&(l=l.concat(r.call(this,a))),l}}this.defaults={...this.defaults,...s}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return lo.lex(e,t??this.defaults)}parser(e,t){return co.parse(e,t??this.defaults)}#e(e,t){return(i,s)=>{const r={...s},o={...this.defaults,...r};!0===this.defaults.async&&!1===r.async&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const a=this.#t(!!o.silent,!!o.async);if(typeof i>"u"||null===i)return a(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof i)return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(i):i).then(l=>e(l,o)).then(l=>o.walkTokens?Promise.all(this.walkTokens(l,o.walkTokens)).then(()=>l):l).then(l=>t(l,o)).then(l=>o.hooks?o.hooks.postprocess(l):l).catch(a);try{o.hooks&&(i=o.hooks.preprocess(i));const l=e(i,o);o.walkTokens&&this.walkTokens(l,o.walkTokens);let c=t(l,o);return o.hooks&&(c=o.hooks.postprocess(c)),c}catch(l){return a(l)}}}#t(e,t){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const s="<p>An error occurred:</p><pre>"+Cs(i.message+"",!0)+"</pre>";return t?Promise.resolve(s):s}if(t)return Promise.reject(i);throw i}}};function ut(n,e){return yc.parse(n,e)}ut.options=ut.setOptions=function(n){return yc.setOptions(n),jj(ut.defaults=yc.defaults),ut},ut.getDefaults=function OT(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},ut.defaults=mc,ut.use=function(...n){return yc.use(...n),jj(ut.defaults=yc.defaults),ut},ut.walkTokens=function(n,e){return yc.walkTokens(n,e)},ut.parseInline=yc.parseInline,ut.Parser=co,ut.parser=co.parse,ut.Renderer=vc,ut.TextRenderer=FT,ut.Lexer=lo,ut.lexer=lo.lex,ut.Tokenizer=pw,ut.Hooks=gw,ut.parse=ut;const swe=["*"];let Yj=(()=>{class n{constructor(){this._buttonClick$=new ye,this.copied$=this._buttonClick$.pipe(ps(()=>$_(we(!0),N8(3e3).pipe(jU(!1)))),K8(),function Q_e(n,e,t){let i,s=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):i=n??1/0,function W_e(n={}){const{connector:e=(()=>new ye),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:s=!0}=n;return r=>{let o,a,l,c=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=l=void 0,u=d=!1},p=()=>{const g=o;f(),g?.unsubscribe()};return Jt((g,v)=>{c++,!d&&!u&&h();const _=l=l??e();v.add(()=>{c--,0===c&&!d&&!u&&(a=PT(p,s))}),_.subscribe(v),!o&&c>0&&(o=new Dc({next:E=>_.next(E),error:E=>{d=!0,h(),a=PT(f,t,E),_.error(E)},complete:()=>{u=!0,h(),a=PT(f,i),_.complete()}}),xi(g).subscribe(o))})(r)}}({connector:()=>new Uj(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}(1)),this.copiedText$=this.copied$.pipe(og(!1),Ve(t=>t?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_i({type:n,selectors:[["markdown-clipboard"]],standalone:!0,features:[ba],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,s){1&i&&(S(0,"button",0),Tu(1,"async"),ce("click",function(){return s.onCopyToClipboardClick()}),$(2),Tu(3,"async"),x()),2&i&&(qn("copied",Cf(1,3,s.copied$)),A(2),bt(Cf(3,5,s.copiedText$)))},dependencies:[k2],encapsulation:2,changeDetection:0})}}return n})();const awe=new q("CLIPBOARD_OPTIONS");var LT=function(n){return n.CommandLine="command-line",n.LineHighlight="line-highlight",n.LineNumbers="line-numbers",n}(LT||{});const Xj=new q("MARKED_EXTENSIONS"),cwe=new q("MARKED_OPTIONS"),Zj=new q("SECURITY_CONTEXT");let BT=(()=>{class n{get options(){return this._options}set options(t){this._options={...this.DEFAULT_MARKED_OPTIONS,...t}}get renderer(){return this.options.renderer}set renderer(t){this.options.renderer=t}constructor(t,i,s,r,o,a,l){this.clipboardOptions=t,this.extensions=i,this.platform=r,this.securityContext=o,this.http=a,this.sanitizer=l,this.DEFAULT_MARKED_OPTIONS={renderer:new vc},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new ye,this.reload$=this._reload$.asObservable(),this.options=s}parse(t,i=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:s,inline:r,emoji:o,mermaid:a,disableSanitizer:l}=i,c={...this.options,...i.markedOptions},u=c.renderer||this.renderer||new vc;this.extensions&&(this.renderer=this.extendsRendererForExtensions(u)),a&&(this.renderer=this.extendsRendererForMermaid(u));const d=this.trimIndentation(t),h=s?this.decodeHtml(d):d,f=o?this.parseEmoji(h):h,p=this.parseMarked(f,c,r);return(l?p:this.sanitizer.sanitize(this.securityContext,p))||""}render(t,i=this.DEFAULT_RENDER_OPTIONS,s){const{clipboard:r,clipboardOptions:o,katex:a,katexOptions:l,mermaid:c,mermaidOptions:u}=i;a&&this.renderKatex(t,{...this.DEFAULT_KATEX_OPTIONS,...l}),c&&this.renderMermaid(t,{...this.DEFAULT_MERMAID_OPTIONS,...u}),r&&this.renderClipboard(t,s,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...o}),this.highlight(t)}reload(){this._reload$.next()}getSource(t){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(t,{responseType:"text"}).pipe(Ve(i=>this.handleExtension(t,i)))}highlight(t){if(!Nl(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;t||(t=document);const i=t.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,s=>s.classList.add("language-none")),Prism.highlightAllUnder(t)}decodeHtml(t){if(!Nl(this.platform))return t;const i=document.createElement("textarea");return i.innerHTML=t,i.value}extendsRendererForExtensions(t){const i=t;return!0===i.\u0275NgxMarkdownRendererExtendedForExtensions||(this.extensions?.length>0&&ut.use(...this.extensions),i.\u0275NgxMarkdownRendererExtendedForExtensions=!0),t}extendsRendererForMermaid(t){const i=t;if(!0===i.\u0275NgxMarkdownRendererExtendedForMermaid)return t;const s=t.code;return t.code=function(r,o,a){return"mermaid"===o?`<div class="mermaid">${r}</div>`:s.call(this,r,o,a)},i.\u0275NgxMarkdownRendererExtendedForMermaid=!0,t}handleExtension(t,i){const s=t.lastIndexOf("://"),r=s>-1?t.substring(s+4):t,o=r.lastIndexOf("/"),a=o>-1?r.substring(o+1).split("?")[0]:"",l=a.lastIndexOf("."),c=l>-1?a.substring(l+1):"";return c&&"md"!==c?"```"+c+"\n"+i+"\n```":i}parseMarked(t,i,s=!1){if(i.renderer){const r={...i.renderer};delete r.\u0275NgxMarkdownRendererExtendedForExtensions,delete r.\u0275NgxMarkdownRendererExtendedForMermaid,delete i.renderer,ut.use({renderer:r})}return s?ut.parseInline(t,i):ut.parse(t,i)}parseEmoji(t){if(!Nl(this.platform))return t;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(t)}renderKatex(t,i){if(Nl(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(t,i)}}renderClipboard(t,i,s){if(!Nl(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!i)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:r,buttonTemplate:o}=s,a=t.querySelectorAll("pre");for(let l=0;l<a.length;l++){const c=a.item(l),u=document.createElement("div");u.style.position="relative",c.parentNode.insertBefore(u,c),u.appendChild(c);const d=document.createElement("div");let h,f;if(d.style.position="absolute",d.style.top=".5em",d.style.right=".5em",d.style.opacity="0",d.style.transition="opacity 250ms ease-out",d.style.zIndex="1",u.insertAdjacentElement("beforeend",d),c.onmouseover=()=>d.style.opacity="1",c.onmouseout=()=>d.style.opacity="0",r){const p=i.createComponent(r);h=p.hostView,p.changeDetectorRef.markForCheck()}else if(o)h=i.createEmbeddedView(o);else{const p=i.createComponent(Yj);h=p.hostView,p.changeDetectorRef.markForCheck()}h.rootNodes.forEach(p=>{p.onmouseover=()=>d.style.opacity="1",d.appendChild(p),f=new ClipboardJS(p,{text:()=>c.innerText})}),h.onDestroy(()=>f.destroy())}}renderMermaid(t,i=this.DEFAULT_MERMAID_OPTIONS){if(!Nl(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const s=t.querySelectorAll(".mermaid");0!==s.length&&(mermaid.initialize(i),mermaid.run({nodes:s}))}trimIndentation(t){if(!t)return"";let i;return t.split("\n").map(s=>{let r=i;return s.length>0&&(r=isNaN(r)?s.search(/\S|$/):Math.min(s.search(/\S|$/),r)),isNaN(i)&&(i=r),r?s.substring(r):s}).join("\n")}static{this.\u0275fac=function(i){return new(i||n)(P(awe,8),P(Xj,8),P(cwe,8),P(Co),P(Zj),P(p0,8),P(Of))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),Kj=(()=>{class n{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(t){this._disableSanitizer=this.coerceBooleanProperty(t)}get inline(){return this._inline}set inline(t){this._inline=this.coerceBooleanProperty(t)}get clipboard(){return this._clipboard}set clipboard(t){this._clipboard=this.coerceBooleanProperty(t)}get emoji(){return this._emoji}set emoji(t){this._emoji=this.coerceBooleanProperty(t)}get katex(){return this._katex}set katex(t){this._katex=this.coerceBooleanProperty(t)}get mermaid(){return this._mermaid}set mermaid(t){this._mermaid=this.coerceBooleanProperty(t)}get lineHighlight(){return this._lineHighlight}set lineHighlight(t){this._lineHighlight=this.coerceBooleanProperty(t)}get lineNumbers(){return this._lineNumbers}set lineNumbers(t){this._lineNumbers=this.coerceBooleanProperty(t)}get commandLine(){return this._commandLine}set commandLine(t){this._commandLine=this.coerceBooleanProperty(t)}constructor(t,i,s){this.element=t,this.markdownService=i,this.viewContainerRef=s,this.error=new Et,this.load=new Et,this.ready=new Et,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new ye}ngOnChanges(){this.loadContent()}loadContent(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(As(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(t){var i=this;return cn(function*(s,r=!1){const o={decodeHtml:r,inline:i.inline,emoji:i.emoji,mermaid:i.mermaid,disableSanitizer:i.disableSanitizer},a={clipboard:i.clipboard,clipboardOptions:{buttonComponent:i.clipboardButtonComponent,buttonTemplate:i.clipboardButtonTemplate},katex:i.katex,katexOptions:i.katexOptions,mermaid:i.mermaid,mermaidOptions:i.mermaidOptions},l=yield i.markdownService.parse(s,o);i.element.nativeElement.innerHTML=l,i.handlePlugins(),i.markdownService.render(i.element.nativeElement,a,i.viewContainerRef),i.ready.emit()}).apply(this,arguments)}coerceBooleanProperty(t){return null!=t&&"false"!=`${String(t)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:t=>{this.render(t).then(()=>{this.load.emit(t)})},error:t=>this.error.emit(t)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,LT.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,LT.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(t,i){const s=t.querySelectorAll("pre");for(let r=0;r<s.length;r++){const o=i instanceof Array?i:[i];s.item(r).classList.add(...o)}}setPluginOptions(t,i){const s=t.querySelectorAll("pre");for(let r=0;r<s.length;r++)Object.keys(i).forEach(o=>{const a=i[o];if(a){const l=this.toLispCase(o);s.item(r).setAttribute(l,a.toString())}})}toLispCase(t){const i=t.match(/([A-Z])/g);if(!i)return t;let s=t.toString();for(let r=0,o=i.length;r<o;r++)s=s.replace(new RegExp(i[r]),"-"+i[r].toLowerCase());return"-"===s.slice(0,1)&&(s=s.slice(1)),s}static{this.\u0275fac=function(i){return new(i||n)(k(tn),k(BT),k(qi))}}static{this.\u0275cmp=_i({type:n,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},standalone:!0,features:[ri,ba],ngContentSelectors:swe,decls:1,vars:0,template:function(i,s){1&i&&(function hR(n){const e=F()[Xt][ni];if(!e.projection){const i=e.projection=function Gg(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}(n?n.length:1,null),s=i.slice();let r=e.child;for(;null!==r;){const o=n?YW(r,n):0;null!==o&&(s[o]?s[o].projectionNext=r:i[o]=r,s[o]=r),r=r.next}}}(),function fR(n,e=0,t){const i=F(),s=Ge(),r=iu(s,Me+n,16,null,t||null);null===r.projection&&(r.projection=e),BE(),(!i[ls]||Gc())&&32&~r.flags&&function Jq(n,e,t){mk(e[Se],0,e,t,Mb(n,t,e),uk(t.parent||e[ni],t,e))}(s,i,r)}(0))},encapsulation:2})}}return n})();function vwe(n){return[BT,n?.loader??[],n?.clipboardOptions??[],n?.markedOptions??[],{provide:Xj,useValue:n?.markedExtensions??[]},{provide:Zj,useValue:n?.sanitize??Hi.HTML}]}let Jj=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[vwe(t)]}}static forChild(){return{ngModule:n}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=en({type:n})}static{this.\u0275inj=Yt({imports:[P2]})}}return n})();var eH;function ywe(n,e){if(1&n&&(S(0,"div",1),ve(1,"markdown",2),x()),2&n){const t=O();A(),B("data",t.processedMarkdown)}}!function(n){let e;var s;let t,i;(s=e=n.SecurityLevel||(n.SecurityLevel={})).Strict="strict",s.Loose="loose",s.Antiscript="antiscript",s.Sandbox="sandbox",function(s){s.Base="base",s.Forest="forest",s.Dark="dark",s.Default="default",s.Neutral="neutral"}(t=n.Theme||(n.Theme={})),function(s){s[s.Debug=1]="Debug",s[s.Info=2]="Info",s[s.Warn=3]="Warn",s[s.Error=4]="Error",s[s.Fatal=5]="Fatal"}(i=n.LogLevel||(n.LogLevel={}))}(eH||(eH={}));let _we=(()=>{class n{constructor(){this.assistantMessage="",this.isLoading=!1,this.processedMarkdown="",this.isMarkdown=!1,this.error=""}ngOnInit(){this.processMarkdown()}ngOnChanges(t){t.assistantMessage&&this.processMarkdown()}processMarkdown(){try{if(this.error="",!this.assistantMessage)return void(this.processedMarkdown="");let i=!0;this.processedMarkdown=this.assistantMessage,this.isMarkdown=i}catch(t){this.error="Failed to process content",console.error("Content processing error:",t)}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_i({type:n,selectors:[["app-markdown-renderer"]],inputs:{assistantMessage:"assistantMessage",isLoading:"isLoading"},features:[ri],decls:2,vars:1,consts:[["class","markdown-body",4,"ngIf"],[1,"markdown-body"],[1,"markdown-content",3,"data"]],template:function(i,s){1&i&&(S(0,"div"),se(1,ywe,2,1,"div",0),x()),2&i&&(A(),B("ngIf",s.isMarkdown))},dependencies:[xa,Kj],styles:[".markdown-body[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]{padding:10px;background-color:transparent!important}.markdown-body[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:disc!important;margin-left:1.5rem}.markdown-body[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{list-style:decimal!important;margin-left:1.5rem}.markdown-body[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0!important}.markdown-body[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0!important}.markdown-body[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:list-item!important;padding-left:5px!important;padding-top:5px!important}.markdown-body[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:list-item!important;padding-left:3px!important;padding-top:5px!important}"]})}}return n})(),wwe=(()=>{class n{transform(t){const i=new Date(t),s=new Date,r=new Date(i.getTime()-6e4*i.getTimezoneOffset()),o=s.getTime()-r.getTime(),a=Math.floor(o/6e4),l=Math.floor(a/60),c=Math.floor(l/24);return a<1?"just now":a<60?`${a}m ago`:l<24?`${l}h ago`:`${c}d ago`}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275pipe=jn({name:"date",type:n,pure:!0})}}return n})();const Ewe=["scrollMe"],bwe=["messageInput"],Cwe=n=>({borderBB:n}),Swe=n=>({firstTable:n});function Iwe(n,e){1&n&&(S(0,"p"),$(1,"GEMS AI"),x())}function xwe(n,e){1&n&&(Gn(0),S(1,"div",19),ve(2,"img",20),S(3,"span"),$(4,"Live Chat"),x(),S(5,"div",15),$(6,"Live Chat"),x()(),Wn())}function Twe(n,e){if(1&n){const t=ht();S(0,"div",21)(1,"span",22),ce("click",function(){return be(t),Ce(O().newchatFunction())}),zE(),S(2,"svg",23),ve(3,"path",24)(4,"path",25),x()(),qE(),S(5,"div",15),$(6,"New chat"),x()()}}function Dwe(n,e){1&n&&ve(0,"div",26)}function Awe(n,e){1&n&&ve(0,"img",42),2&n&&B("src",O(6).messageReceivedFrom.img,yl)}function kwe(n,e){if(1&n&&(S(0,"span",43),$(1),x()),2&n){const t=O(6);A(),bt(t.userName)}}function Mwe(n,e){if(1&n&&(S(0,"div",39),se(1,Awe,1,1,"img",40)(2,kwe,2,1,"span",41),x()),2&n){const t=O(2).$implicit;A(),B("ngIf","You"!==t.user),A(),B("ngIf","You"===t.user)}}function Nwe(n,e){1&n&&ve(0,"span",46),2&n&&B("innerHTML",O(3).$implicit.documentHtml,vl)}function Rwe(n,e){if(1&n&&(S(0,"div",44),se(1,Nwe,1,1,"span",45),x()),2&n){const t=O(2).$implicit;A(),B("ngIf",t.documentHtml)}}function Pwe(n,e){1&n&&(S(0,"span")(1,"i",48),$(2,"\u2705"),x()())}function Owe(n,e){1&n&&(S(0,"span"),ve(1,"img",49),x())}function Fwe(n,e){if(1&n&&(S(0,"div")(1,"strong")(2,"i"),$(3),x()(),se(4,Pwe,3,0,"span",10)(5,Owe,2,0,"span",10),x()),2&n){const t=O(3).$implicit;A(3),bt(t.statusList[0].text),A(),B("ngIf",t.statusList[0].completed),A(),B("ngIf",!t.statusList[0].completed)}}function Lwe(n,e){if(1&n&&(Gn(0),S(1,"div",50),ve(2,"p",51),x(),Wn()),2&n){const t=O(3).index,i=O(3);A(2),B("innerHTML",null==i.messages[t+1]?null:i.messages[t+1].text,vl)}}function Bwe(n,e){if(1&n&&(Gn(0),S(1,"div",47),se(2,Fwe,6,3,"div",10),x(),se(3,Lwe,3,1,"ng-container",10),Wn()),2&n){const t=O(2),i=t.$implicit,s=t.index,r=O(3);A(),qn("hidden",!(null!=i.statusList&&i.statusList.length)),A(),B("ngIf",null==i.statusList?null:i.statusList.length),A(),B("ngIf","status"!==(null==r.messages[s+1]?null:r.messages[s+1].type))}}function Vwe(n,e){1&n&&ve(0,"app-markdown-renderer",54),2&n&&B("assistantMessage",O(3).$implicit.summary)}function $we(n,e){1&n&&ve(0,"p",51),2&n&&B("innerHTML",O(3).$implicit.text,vl)}function Uwe(n,e){1&n&&ve(0,"app-markdown-renderer",54),2&n&&B("assistantMessage",O(3).$implicit.text)}function jwe(n,e){if(1&n&&(Gn(0),S(1,"div",50),se(2,Vwe,1,1,"app-markdown-renderer",52)(3,$we,1,1,"p",53)(4,Uwe,1,1,"app-markdown-renderer",52),x(),Wn()),2&n){const t=O(2).$implicit;A(2),B("ngIf",t.summary),A(),B("ngIf",!t.markdown),A(),B("ngIf",t.markdown)}}function Hwe(n,e){1&n&&(Gn(0),S(1,"div",55),ve(2,"hr"),S(3,"span",56),$(4,"Continuing in Analyze mode"),x(),ve(5,"hr"),x(),Wn())}function zwe(n,e){1&n&&(Gn(0),S(1,"div",55),ve(2,"hr"),S(3,"span",56),$(4,"Starting a new conversation"),x(),ve(5,"hr"),x(),Wn())}function qwe(n,e){if(1&n){const t=ht();S(0,"img",73),ce("click",function(){be(t);const s=O(3).index;return Ce(O(3).onCopyClick(s))}),x()}}function Gwe(n,e){if(1&n){const t=ht();S(0,"img",74),ce("click",function(){be(t);const s=O(3).index;return Ce(O(3).onCopyClick(s))}),x()}}function Wwe(n,e){if(1&n&&(S(0,"tr")(1,"td"),$(2),x(),S(3,"td"),$(4),x(),S(5,"td"),$(6),x()()),2&n){const t=e.$implicit;A(2),bt(null==t?null:t.screenName),A(2),bt(null==t?null:t.alias),A(2),bt(null==t?null:t.fieldId)}}function Qwe(n,e){if(1&n&&(Gn(0),S(1,"table",88)(2,"thead")(3,"tr")(4,"th"),$(5,"Screen Name"),x(),S(6,"th"),$(7,"Field Name"),x(),S(8,"th"),$(9,"Field Id"),x()()(),S(10,"tbody"),se(11,Wwe,7,3,"tr",31),x()(),Wn()),2&n){const t=O(6).$implicit;A(11),B("ngForOf",null==t||null==t.info?null:t.info.searchFields)}}function Ywe(n,e){1&n&&(S(0,"span",89),$(1,"No search available."),x())}function Xwe(n,e){if(1&n&&(S(0,"tr")(1,"td"),$(2),x(),S(3,"td"),$(4),x(),S(5,"td"),$(6),x(),S(7,"td"),$(8),x(),S(9,"td"),$(10),x(),S(11,"td"),$(12),x(),S(13,"td"),$(14),x(),S(15,"td"),$(16),x()()),2&n){const t=e.$implicit;A(2),bt(null==t?null:t.action),A(2),bt(1==(null==t?null:t.leftBrackets)?"(":2==(null==t?null:t.leftBrackets)?"((":3==(null==t?null:t.leftBrackets)?"(((":""),A(2),bt(null==t?null:t.screenName),A(2),bt(null==t?null:t.alias),A(2),bt(null==t?null:t.fieldId),A(2),bt(null==t?null:t.operator),A(2),bt(null==t?null:t.value),A(2),bt(1==(null==t?null:t.rightBrackets)?")":2==(null==t?null:t.rightBrackets)?"))":3==(null==t?null:t.rightBrackets)?")))":"")}}function Zwe(n,e){if(1&n&&(Gn(0),S(1,"table",88)(2,"thead")(3,"tr")(4,"th"),$(5,"Action"),x(),S(6,"th"),$(7," ( "),x(),S(8,"th"),$(9,"Screen Name"),x(),S(10,"th"),$(11,"Field Name"),x(),S(12,"th"),$(13,"Field Id"),x(),S(14,"th"),$(15,"Operator"),x(),S(16,"th"),$(17,"Value"),x(),S(18,"th"),$(19,")"),x()()(),S(20,"tbody"),se(21,Xwe,17,8,"tr",31),x()(),Wn()),2&n){const t=O(6).$implicit;A(21),B("ngForOf",null==t||null==t.info?null:t.info.searchCriteria)}}function Kwe(n,e){1&n&&(S(0,"span",89),$(1,"No search criteria available."),x())}function Jwe(n,e){if(1&n&&(S(0,"tr")(1,"td"),$(2),x(),S(3,"td"),$(4),x(),S(5,"td"),$(6),x(),S(7,"td"),$(8),x(),S(9,"td"),$(10),x()()),2&n){const t=e.$implicit;A(2),bt(null==t?null:t.screenName),A(2),bt(null==t?null:t.alias),A(2),bt(null==t?null:t.fieldId),A(2),bt(null==t?null:t.sortIndex),A(2),bt(null==t?null:t.sortDirection)}}function eEe(n,e){if(1&n&&(Gn(0),S(1,"table",88)(2,"thead")(3,"tr")(4,"th"),$(5,"Screen Name"),x(),S(6,"th"),$(7,"Field Name"),x(),S(8,"th"),$(9,"Field Id"),x(),S(10,"th"),$(11,"Sort Index"),x(),S(12,"th"),$(13,"Sort Direction"),x()()(),S(14,"tbody"),se(15,Jwe,11,5,"tr",31),x()(),Wn()),2&n){const t=O(6).$implicit;A(15),B("ngForOf",null==t||null==t.info?null:t.info.searchSorting)}}function tEe(n,e){1&n&&(S(0,"span",89),$(1,"No sorting available."),x())}function nEe(n,e){if(1&n&&(S(0,"div",85),ve(1,"br"),S(2,"h4"),$(3,"Display Fields"),x(),se(4,Qwe,12,1,"ng-container",86)(5,Ywe,2,0,"ng-template",null,2,If),S(7,"h4",87),$(8,"Criteria"),x(),se(9,Zwe,22,1,"ng-container",86)(10,Kwe,2,0,"ng-template",null,3,If),S(12,"h4",87),$(13,"Order By"),x(),se(14,eEe,16,1,"ng-container",86)(15,tEe,2,0,"ng-template",null,4,If),x()),2&n){const t=Iu(6),i=Iu(11),s=Iu(16),r=O(5).$implicit;A(4),B("ngIf",(null==r||null==r.info||null==r.info.searchFields?null:r.info.searchFields.length)>0)("ngIfElse",t),A(5),B("ngIf",(null==r||null==r.info||null==r.info.searchCriteria?null:r.info.searchCriteria.length)>0)("ngIfElse",i),A(5),B("ngIf",(null==r||null==r.info||null==r.info.searchSorting?null:r.info.searchSorting.length)>0)("ngIfElse",s)}}function iEe(n,e){if(1&n&&(S(0,"div",85),ve(1,"br"),$(2),Tu(3,"json"),x()),2&n){const t=O(5).$implicit;A(2),Ci(" ",Cf(3,1,null==t?null:t.info)," ")}}function sEe(n,e){if(1&n){const t=ht();S(0,"span",79)(1,"ul",80)(2,"li",81)(3,"a",82),ce("click",function(){return be(t),Ce(O(7).showTextInfo())}),$(4,"Text"),x()(),S(5,"li",81)(6,"a",82),ce("click",function(){return be(t),Ce(O(7).showJSONInfo())}),$(7,"JSON"),x()()(),S(8,"div",83),se(9,nEe,17,6,"div",84)(10,iEe,4,3,"div",84),x()()}if(2&n){const t=O(7);B("ngClass",WC(7,Swe,t.infoIndex)),A(3),qn("active",t.showText),A(3),qn("active",t.showJSON),A(3),B("ngIf",t.showText),A(),B("ngIf",t.showJSON)}}function rEe(n,e){1&n&&(S(0,"div",15),$(1,"Info"),x())}function oEe(n,e){if(1&n){const t=ht();S(0,"div",75)(1,"img",76),ce("click",function(){be(t);const s=O(3),r=s.$implicit,o=s.index;return Ce(O(3).toggleTooltip(o,r))}),x(),se(2,sEe,11,9,"span",77)(3,rEe,2,0,"div",78),x()}if(2&n){const t=O(3).$implicit;A(2),B("ngIf",t.clickedTooltip),A(),B("ngIf",!t.clickedTooltip)}}function aEe(n,e){if(1&n){const t=ht();S(0,"div",90)(1,"img",91),ce("click",function(){be(t);const s=O(3),r=s.$implicit,o=s.index;return Ce(O(3).toggleTooltip(o,r))}),x()()}}function lEe(n,e){1&n&&(S(0,"div",92),$(1," GEMS AI Search is in public preview. AI-generated results may be inaccurate and must be reviewed "),x())}function cEe(n,e){1&n&&(S(0,"div",93),$(1," AI generated content may be inaccurate and must be reviewed "),x())}function uEe(n,e){if(1&n){const t=ht();S(0,"img",100),ce("click",function(){be(t);const s=O(4),r=s.$implicit,o=s.index;return Ce(O(3).savePopToggle(r,o))}),x()}}function dEe(n,e){1&n&&(S(0,"div",115),ve(1,"img",116),x())}function hEe(n,e){if(1&n){const t=ht();S(0,"div",101)(1,"div",102)(2,"div",103)(3,"span"),$(4,"Save this Prompt?"),x(),S(5,"span",104),ce("click",function(){return be(t),Ce(O(7).savePopToggle())}),ve(6,"img",105),x()(),S(7,"div",106),$(8,"Prompt Visibility"),x(),S(9,"div",107)(10,"label")(11,"input",108),Dl("ngModelChange",function(s){be(t);const r=O(7);return xu(r.savePromptVisibility,s)||(r.savePromptVisibility=s),Ce(s)}),x(),$(12," Private"),x(),S(13,"label")(14,"input",109),Dl("ngModelChange",function(s){be(t);const r=O(7);return xu(r.savePromptVisibility,s)||(r.savePromptVisibility=s),Ce(s)}),x(),$(15," Public"),x()(),S(16,"div",106),$(17,"Name"),x(),S(18,"input",110),Dl("ngModelChange",function(s){be(t);const r=O(7);return xu(r.savePromptName,s)||(r.savePromptName=s),Ce(s)}),x(),S(19,"div",111)(20,"span",112),ce("click",function(){be(t);const s=O(7);return Ce(!s.showSaveLoader&&s.savePopToggle())}),$(21,"Cancel"),x(),S(22,"span",113),ce("click",function(){be(t);const s=O(7);return Ce(!s.showSaveLoader&&s.saveQuery())}),$(23,"Save"),x()(),se(24,dEe,2,0,"div",114),x()()}if(2&n){const t=O(7);A(11),Tl("ngModel",t.savePromptVisibility),A(3),Tl("ngModel",t.savePromptVisibility),A(4),Tl("ngModel",t.savePromptName),A(2),qn("disabled",t.showSaveLoader),A(2),qn("disabled",t.showSaveLoader),A(2),B("ngIf",t.showSaveLoader)}}function fEe(n,e){1&n&&ve(0,"img",117)}function pEe(n,e){if(1&n&&(S(0,"div",94)(1,"div",95),se(2,uEe,1,0,"img",96),S(3,"div",15),$(4,"Save"),x(),se(5,hEe,25,8,"div",97),x(),S(6,"div",98),se(7,fEe,1,0,"img",99),S(8,"div",15),$(9,"Saved"),x()()()),2&n){const t=O(3).$implicit,i=O(3);A(2),B("ngIf",t.saveQuery),A(3),B("ngIf",i.showSaveToggle),A(2),B("ngIf",t.savedQuery)}}function gEe(n,e){if(1&n){const t=ht();S(0,"div",118),ce("click",function(){be(t);const s=O(3).$implicit;return Ce(O(3).reGenerateQuery(s))}),zE(),S(1,"svg",119),ve(2,"path",120),x(),qE(),S(3,"div",15),$(4,"Query regenerate"),x()()}}function mEe(n,e){if(1&n){const t=ht();S(0,"img",123),ce("click",function(){be(t);const s=O(4),r=s.$implicit,o=s.index;return Ce(O(3).sendUserSatisfaction(r.completionId,1,r,o))}),x()}}function vEe(n,e){if(1&n&&(S(0,"div",121),se(1,mEe,1,0,"img",122),S(2,"div",15),$(3,"Like"),x()()),2&n){const t=O(3).$implicit;A(),B("ngIf",t.like)}}function yEe(n,e){1&n&&ve(0,"img",126)}function _Ee(n,e){if(1&n&&(S(0,"div",124),se(1,yEe,1,0,"img",125),S(2,"div",15),$(3,"Liked"),x()()),2&n){const t=O(3).$implicit;A(),B("ngIf",t.liked)}}function wEe(n,e){if(1&n){const t=ht();S(0,"img",130),ce("click",function(){be(t);const s=O(4),r=s.$implicit,o=s.index;return Ce(O(3).sendUserSatisfaction(r.completionId,-1,r,o))}),x()}}function EEe(n,e){if(1&n){const t=ht();S(0,"div",131)(1,"div",132)(2,"h3"),$(3,"Submit Feedback"),x(),S(4,"textarea",133),Dl("ngModelChange",function(s){be(t);const r=O(7);return xu(r.feedbackText,s)||(r.feedbackText=s),Ce(s)}),ce("input",function(){return be(t),Ce(O(7).checkFeedback())}),x(),S(5,"div",134)(6,"span",135),ce("click",function(s){return be(t),Ce(O(7).submitFeedbackModal(s))}),$(7,"Cancel"),x(),S(8,"span",136),ce("click",function(s){return be(t),Ce(O(7).submitFeedbackModal(s))}),$(9,"Submit"),x()()()()}if(2&n){const t=O(7);A(4),Tl("ngModel",t.feedbackText),A(4),qn("feedbackSubmitdisabled",!t.feedbackText.trim())}}function bEe(n,e){if(1&n&&(S(0,"div",127),se(1,wEe,1,0,"img",128)(2,EEe,10,3,"div",129),S(3,"div",15),$(4,"Dislike"),x()()),2&n){const t=O(3).$implicit,i=O(3);A(),B("ngIf",t.dislike),A(),B("ngIf",i.showFeedbackModal)}}function CEe(n,e){1&n&&ve(0,"img",139)}function SEe(n,e){if(1&n&&(S(0,"div",137),se(1,CEe,1,0,"img",138),S(2,"div",15),$(3,"Disliked"),x()()),2&n){const t=O(3).$implicit;A(),B("ngIf",t.disliked)}}function IEe(n,e){if(1&n&&(S(0,"div",140),ve(1,"img",141),$(2),x()),2&n){const t=O(3).$implicit;A(2),Ci(" ",t.toastMessage," ")}}function xEe(n,e){if(1&n){const t=ht();Gn(0),S(1,"div",57)(2,"div",58),ce("click",function(){be(t),O();const s=Iu(6),r=O().$implicit;return Ce(O(3).copyMessage(r.text,r,s))}),se(3,qwe,1,0,"img",59)(4,Gwe,1,0,"img",60),S(5,"div",15),$(6,"Copy"),x()(),se(7,oEe,4,2,"div",61)(8,aEe,2,0,"div",62)(9,lEe,2,0,"div",63)(10,cEe,2,0,"div",64),S(11,"div",65),se(12,pEe,10,3,"div",66)(13,gEe,5,0,"div",67)(14,vEe,4,1,"div",68)(15,_Ee,4,1,"div",69)(16,bEe,5,2,"div",70)(17,SEe,4,1,"div",71),x(),se(18,IEe,3,1,"div",72),x(),Wn()}if(2&n){const t=O(2).$implicit,i=O(3);A(3),B("ngIf",!t.clicked&&t.copy),A(),B("ngIf",t.clicked&&t.copy),A(3),B("ngIf",t.showTooltip),A(),B("ngIf",!t.showTooltip&&t.copy),A(),B("ngIf",t.showTooltip),A(),B("ngIf",!t.showTooltip&&t.copy),A(2),B("ngIf",t.showTooltip),A(),B("ngIf",t.isRegenerate&&i.refresh),A(),B("ngIf",t.like),A(),B("ngIf",t.liked),A(),B("ngIf",t.dislike),A(),B("ngIf",t.disliked),A(),B("ngIf",t.showToast)}}function TEe(n,e){if(1&n){const t=ht();S(0,"li",35),ce("click",function(){be(t);const s=O().index;return Ce(O(3).setClickedIndex(s))}),se(1,Mwe,3,2,"div",36)(2,Rwe,2,1,"div",37),S(3,"div",38),se(4,Bwe,4,4,"ng-container",10),S(5,"div",null,1),se(7,jwe,5,3,"ng-container",10),x(),se(8,Hwe,6,0,"ng-container",10)(9,zwe,6,0,"ng-container",10)(10,xEe,19,13,"ng-container",10),x()()}if(2&n){const t=O(),i=t.$implicit,s=t.index,r=O(3);Fr("You"===i.user?"sent":"replies"),B("hidden","You"!==i.user&&r.iserror),A(),B("ngIf",!(null!=i&&i.stopApi)),A(),B("ngIf","You"===i.user),A(2),B("ngIf","status"===i.type&&!r.stopApi),A(3),B("ngIf","status"!==i.type&&"status"!==(null==r.messages[s-1]?null:r.messages[s-1].type)),A(),B("ngIf",i.isContinue),A(),B("ngIf",i.isStartingNew),A(),B("ngIf","GEMS AI"===i.user&&i.ShowFeedbackActions)}}function DEe(n,e){if(1&n){const t=ht();S(0,"div",142)(1,"div",143)(2,"button",144),ce("click",function(){be(t);const s=O().index;return Ce(O(3).continueReasoningMode(s))}),$(3,"Continue in Analyze mode"),x(),S(4,"button",145),ce("click",function(){return be(t),Ce(O(4).newchatFunction(!0))}),$(5,"Start a new conversation"),x()()()}}function AEe(n,e){if(1&n&&(Gn(0),se(1,TEe,11,10,"li",33)(2,DEe,6,0,"div",34),Wn()),2&n){const t=e.$implicit,i=e.index,s=O(3);A(),B("ngIf","status"===t.type||"status"!==t.type&&"status"!==(null==s.messages[i-1]?null:s.messages[i-1].type)),A(),B("ngIf","GEMS AI"===t.user&&t.reasoningButtons)}}function kEe(n,e){1&n&&(S(0,"li",146)(1,"div",147),ve(2,"img",148),S(3,"div",149)(4,"p"),ve(5,"img",150),x()()()())}function MEe(n,e){if(1&n&&(S(0,"ul"),se(1,AEe,3,2,"ng-container",31)(2,kEe,6,0,"li",32),x()),2&n){const t=O(2);A(),B("ngForOf",t.messages),A(),B("ngIf",t.isTyping)}}function NEe(n,e){if(1&n){const t=ht();S(0,"div",157),ce("click",function(){return be(t),Ce(O(4).lastConversation())}),S(1,"div",158),ve(2,"img",159),x(),S(3,"div",160)(4,"h6"),$(5," Recent Message "),S(6,"span"),$(7),Tu(8,"date"),x()(),S(9,"p"),$(10),x()(),S(11,"div",161),ve(12,"img",162),x()()}if(2&n){const t=O(4);A(7),bt(Cf(8,2,null==t.lastQuestion?null:t.lastQuestion.CreatedAt)),A(3),bt(t.decodeHTML(null==t.lastQuestion?null:t.lastQuestion.UserPrompt))}}function REe(n,e){if(1&n&&(Gn(0),se(1,NEe,13,4,"div",156),Wn()),2&n){const t=O(3);A(),B("ngIf",t.lastQuestion)}}function PEe(n,e){if(1&n&&(S(0,"div",151)(1,"div",152),ve(2,"img",153),x(),S(3,"div",154),$(4,"Welcome to GEMS AI"),x(),S(5,"div",155),$(6,"Hey, How can I help you today?"),x(),se(7,REe,2,1,"ng-container",10),x()),2&n){const t=O(2);A(7),B("ngIf",t.showHistory)}}function OEe(n,e){if(1&n&&(S(0,"ul"),ve(1,"app-gems-prompt-library",163),x()),2&n){const t=O(2);A(),B("ExecutePromptSelected",t.ExecutePromptSelected.bind(t))("toggleBackFromLib",t.toggleBackFromLib.bind(t))}}function FEe(n,e){if(1&n){const t=ht();S(0,"button",183),ce("click",function(){const s=be(t).$implicit;return Ce(O(5).onNudgeButtonClick(s))}),ve(1,"img",184),S(2,"span",185),$(3),x()()}if(2&n){const t=e.$implicit,i=O(5);B("disabled",i.isTyping||i.isSendingMessage||!i.isDocumentValidationValid),A(),B("src",i.getIconPath(t.nudgeValue),yl),A(2),bt(i.getButtonText(t.nudgeValue))}}function LEe(n,e){if(1&n&&(S(0,"div",181),se(1,FEe,4,3,"button",182),x()),2&n){const t=O(4);A(),B("ngForOf",t.contextDefaultNudges)}}function BEe(n,e){if(1&n&&(S(0,"div",176),ve(1,"div",177),S(2,"div",178),ve(3,"div",179),se(4,LEe,2,1,"div",180),x()()),2&n){const t=O(3);A(3),B("innerHTML",t.contextMessage,vl),A(),B("ngIf",t.contextDefaultNudges.length>0)}}function VEe(n,e){if(1&n){const t=ht();S(0,"input",186,5),Dl("ngModelChange",function(s){be(t);const r=O(3);return xu(r.newMessage,s)||(r.newMessage=s),Ce(s)}),ce("keyup.enter",function(s){return be(t),Ce(O(3).addNewMessageEnter(s))})("input",function(s){return be(t),Ce(O(3).addNewMessageChange(s))})("focus",function(){return be(t),Ce(O(3).onFocus())})("blur",function(){return be(t),Ce(O(3).onBlur())}),x()}2&n&&Tl("ngModel",O(3).newMessage)}function $Ee(n,e){if(1&n){const t=ht();S(0,"span",189),ce("click",function(){const s=be(t).index;return Ce(O(4).handlePlaceholderClick(s))})("dblclick",function(){const s=be(t).index;return Ce(O(4).handleDoubleClick(s))})("beforeinput",function(s){const r=be(t).index;return Ce(O(4).handleInput(s,r))})("keydown",function(s){const r=be(t).index;return Ce(O(4).handleKeyDown(s,r))})("blur",function(){const s=be(t).index;return Ce(O(4).handleBlur(s))}),$(1),x()}if(2&n){const t=e.$implicit;qn("placeholder",t.isPlaceholder),A(),Ci(" ",t.text," ")}}function UEe(n,e){if(1&n&&(S(0,"div",187),se(1,$Ee,2,3,"span",188),x()),2&n){const t=O(3);A(),B("ngForOf",t.parsedMessage)}}function jEe(n,e){if(1&n){const t=ht();S(0,"span",190),ce("click",function(s){return be(t),Ce(O(3).addNewMessageClick(s))}),S(1,"div",191),ve(2,"img",192),S(3,"div",15),$(4,"Send"),x()()()}if(2&n){const t=O(3);qn("disabled",t.isSendingMessage||!t.newMessage.trim()||!t.validateMessage()||t.isReasoningSendingMessage)}}function HEe(n,e){1&n&&(S(0,"span",193),ve(1,"img",194),x())}function zEe(n,e){if(1&n){const t=ht();S(0,"span",195),ce("click",function(){return be(t),Ce(O(3).stopAPI())}),ve(1,"img",194),x()}}function qEe(n,e){if(1&n){const t=ht();S(0,"div",164),se(1,BEe,5,2,"div",165),S(2,"div",166),se(3,VEe,2,1,"input",167)(4,UEe,2,1,"div",168),S(5,"span",169),ce("click",function(){return be(t),Ce(O(2).onMicClick())}),ve(6,"img",170),S(7,"div",15),$(8,"Mic"),x()(),se(9,jEe,5,2,"span",171)(10,HEe,2,0,"span",172)(11,zEe,2,0,"span",173),x(),S(12,"div",174)(13,"span"),$(14,"Powered by generative AI technology \u2013 "),x(),S(15,"a",175),$(16," Find Out More "),x()()()}if(2&n){const t=O(2);A(),B("ngIf",t.showContextSection),A(2),B("ngIf",!t.IsPromptClicked),A(),B("ngIf",t.IsPromptClicked),A(2),B("src",t.isListening?"assets/Icons/mic-fill.svg":"assets/Icons/mic-line.svg",yl),A(3),B("ngIf",!t.isSendingMessage&&!t.isReasoningSendingMessage),A(),B("ngIf",t.isReasoningSendingMessage),A(),B("ngIf",t.isSendingMessage&&!t.isReasoningSendingMessage)}}function GEe(n,e){if(1&n&&(S(0,"section")(1,"div",27,0)(3,"ul"),se(4,MEe,3,2,"ul",10)(5,PEe,8,1,"div",28),x(),se(6,OEe,2,2,"ul",10),ve(7,"app-static-prompts",29),x(),se(8,qEe,17,7,"div",30),x()),2&n){const t=O();A(3),qn("disable-clicks",t.streamStatus||t.isTyping),A(),B("ngIf",!t.newChat&&!t.showPromptLibrary||t.reasoningPayload),A(),B("ngIf",t.showGmsLogo),A(),B("ngIf",t.showPromptLibrary),A(),B("handlePromptSelected",t.handlePromptSelected.bind(t))("showCoPilotActions",t.showCoPilotActions),A(),B("ngIf",!t.showPromptLibrary)}}function WEe(n,e){1&n&&(S(0,"div",196),ve(1,"div",197),x())}let QEe=(()=>{class n{constructor(t,i,s,r,o,a,l,c,u){this.cdr=t,this.sanitizer=i,this.api=s,this.common=r,this.errorMsg=o,this.toastr=a,this.log=l,this.stream=c,this.ngZone=u,this.closePanel=new Et,this.messageReceivedFrom={img:"../../assets/Icons/chatbot-avatar.png",name:"Media bot"},this.isstreaming=!1,this.isMinimized=!1,this.newMessage="",this.isTyping=!1,this.newChat=!1,this.unsubscribe$=new ye,this.showAvatar=!1,this.showGmsLogo=!0,this.showCoPilotActions=!0,this.showToast=!1,this.toastMessage="",this.colDefs=[],this.rowData=[],this.chatId=null,this.conversationId=null,this.messages=[],this.maximize=!0,this.issError=!1,this.isInnerError=!1,this.featureSelected=null,this.primarySchema=[],this.secondarySelection=[],this.rowHeight=40,this.isMiniPlayer=!1,this.totalItems=0,this.responseData={},this.shouldScroll=!0,this.lastconversation=!1,this.hideActios=!1,this.speechText=new uL,this.isListening=!1,this.isFocused=!1,this.showDivider=!1,this.fullDocSearchResult={},this.isTooltipVisible=!1,this.isSendingMessage=!1,this.isShowTooltip=!1,this.iserror=!1,this.isOnlyInfo=!1,this.isApiCallActive=!0,this.showText=!0,this.showJSON=!1,this.isHistoryChat=!1,this.isReasoningSendingMessage=!1,this.showContextData=!1,this.feedbackToast=!0,this.isWithinTwoMinutes=null,this.messageChunks=[],this.userHasTyped=!1,this.initialChunk="",this.showFeedbackModal=!1,this.feedbackText="",this.feedbackSubmit=!1,this.showPromptLibrary=!1,this.parsedMessage=[],this.IsPromptClicked=!1,this.currentPlaceholderIndex=0,this.OriginalText="",this.entityObject=[],this.isBookmarkClicked=!0,this.showSaveToggle=!1,this.savePromptVisibility="private",this.savePromptName="",this.callExecuteApi=!1,this.executeApiPayload=null,this.selectedConversation=null,this.doubleClicked=!1,this.showLoader=!0,this.screenView=!1,this.streamStatus=!1,this.isFirstInfo=!1,this.countdown=30,this.refreshlastCalledTime=new Date,this.doCheckCalled=!1,this.ShowFeedbackActions=!0,this.documentAnalysis=null,this.stopApi=!1,this.openedFromDefaultNudge=!1,this.isEntityMatch=!1,this.historyTimeOut=!1,this.clickChat=!1,this.widgetContextHandled=!1,this.initailLoaderOnrefresh=!1,this.chatClicked=!1,this.scrollToBtm=!1,this.isreRun=!1,this.showSaveLoader=!1,this.reasoningPayload=!1,this.isProcessing=!1,this.isMarkDown=!1,this.contextMessage="",this.showContextSection=!1,this.contextSelectionItems=[],this.contextDefaultNudges=[],this.documentValidationErrors=[],this.isDocumentValidationValid=!0,this.prevChatPayloadAttachment=Ns,this.apiCallCache=new Map,this.CACHE_DURATION=3e4,this.verifyEntityObjectsSelection=(f,p)=>function Jte(n,e){const t="object"==typeof e;return new Promise((i,s)=>{const r=new Dc({next:o=>{i(o),r.unsubscribe()},error:s,complete:()=>{t?i(e.defaultValue):s(new Yf)}});n.subscribe(r)})}(this.api.getEntityVerification({chatId:this.chatId,conversationId:p,entityObject:f}).pipe(Fn(v=>v.type===$r.Response),Ve(v=>{try{return!!JSON.parse(v.body)?.data?.isMatched}catch{return!1}}),No(v=>we(!1)))),window.handleNavigation=this.handleNavigation.bind(this),window.newchatFunction=this.newchatFunction.bind(this);const d=this;window.publishWidgetContext=function(f){console.log("Received context data via JS bridge:",f),d.handleWidgetContextUpdate(f)},this.widgetaccessKey=this.common.getFullAccessToken(),this.activeUser=new ane("H","",[]),this.widgetaccess=JSON.parse(sessionStorage.getItem("initializeData")||"{}");let h=this.widgetaccess?.name;this.userName=(h=this.widgetaccess?.name)?h.substring(0,1):"U",this.closeModal=this.closeModal.bind(this),this.selectScreen=this.selectScreen.bind(this),this.callUserQuery=this.callUserQuery.bind(this),this.selectFeature=this.selectFeature.bind(this),this.selectEntity=this.selectEntity.bind(this),window.openInMinimizedWindow=function(f){window.open(f,"NewWin","toolbar=no,status=no,width=800,height=500,left=100,top=100")},this.speechText=new uL,this.speechText.setInterimCallback(f=>{this.newMessage=this.speechText.getFinalTranscript()+f,this.autoScrollInput(),this.cdr.detectChanges()}),this.speechText.setFinalCallback(f=>{this.newMessage=f,this.cdr.detectChanges()}),this.speechText.setOnStopCallback(()=>{this.isListening=!1,!this.isFocused&&!this.isSendingMessage&&(this.log.info("stop listinging"),setTimeout(()=>{this.isApiCallActive=!0,this.addNewMessage(),this.cdr.detectChanges()},5e3)),this.cdr.detectChanges()})}ngOnInit(){const t=this,i=function(s){console.log("Received context data via JS bridge:",s),t.handleWidgetContextUpdate(s)};window.publishWidgetContext=i;try{window.parent&&window.parent!==window&&(window.parent.publishWidgetContext=i)}catch(s){console.log("Cannot access parent window:",s)}if(window.callUserSuggestionQuery=this.callUserSuggestionQuery.bind(this),this.widgetaccessKey?.AccessToken){let s=JSON.parse(sessionStorage.getItem("initializeData")||"{}");if(s&&Object.keys(s).length>0){const r=document.getElementById("Bookmark");r&&(r.style.display="false"==s?.accessApiFeature.toLowerCase()?"none":"block");const o=document.getElementById("QuerySave");o&&(o.style.display="false"==s?.accessApiFeature.toLowerCase()?"none":"block")}if(this.showHistory=!0,this.newChat=!1,0==this.newChat){let r=JSON.parse(sessionStorage.getItem("widgetcontextdata")||"{}");const o=r?.ContextData?.defaultNudge?.nudgeType||"",a=r?.ContextData?.defaultNudge?.nudgeValue||"";if("action"===o&&"View Saved Prompts"===a&&a&&Object.keys(r).length>0)return void this.toggleToPromptLib();this.checkClickTime(),this.getLastConversation()}}this.storageEventSubscription=cy(window,"storage").subscribe(s=>{this.lastUpdatedKey=s.key,this.newValue=s.newValue,console.log("Storage event detected:",s)}),document.addEventListener("click",s=>{if(s.target.classList.contains("clarify-link")){s.preventDefault();const r=s.target.innerText;console.log("Clarification question clicked:",r),this.callUserSuggestionQuery(r)}})}handleWidgetContextUpdate(t){var i=this;return cn(function*(){console.log("Received context update:",t),i.contextDefaultNudges=[],i.contextSelectionItems=[],i.showContextSection=!1,i.contextMessage="",i.documentValidationErrors=[],i.isDocumentValidationValid=!0,t?.ContextData?.contextualNudges?(i.contextDefaultNudges=t.ContextData.contextualNudges,console.log("Updated contextDefaultNudges:",i.contextDefaultNudges)):console.log("No contextualNudges found, cleared contextDefaultNudges");const s=t?.ContextData?.selectionItems;if(Array.isArray(s)&&s.length>0){const r=s.filter((o,a,l)=>a===l.findIndex(c=>c.documentId===o.documentId));i.contextSelectionItems=r,i.showContextSection=!0,console.log("Processed selection items:",r),yield i.validateDocumentsOnLoad(),i.cdr.detectChanges()}else console.log("No selection items found, context section hidden"),i.cdr.detectChanges()})()}onNudgeButtonClick(t){console.log("Nudge button clicked:",t),this.createNewChatForNudge(t)}validateDocumentsOnLoad(){var t=this;return cn(function*(){t.documentValidationErrors=[],t.isDocumentValidationValid=!0,t.contextMessage=`Context: you have ${t.contextSelectionItems.length} document${t.contextSelectionItems.length>1?"s":""} selected`;try{const i=window.parent;if(i?.$find){const s=i.$find("GEMSTabManager");if(s?.validateAiSelectedDocument){let r=1;if(t.contextDefaultNudges&&t.contextDefaultNudges.length>0){const c=t.contextDefaultNudges[0]?.nudgeValue?.toLowerCase()||"";"translate"===c?r=5:"summarize"===c?r=6:"compare"===c&&(r=7)}const o=t.contextSelectionItems||[],a=yield s.validateAiSelectedDocument(r,o);console.log("Initial validation result:",a),!1===a?.isValid&&(t.isDocumentValidationValid=!1,t.documentValidationErrors=a.errors||[],t.displayValidationErrors())}}}catch(i){console.error("Error validating documents on load:",i)}})()}displayValidationErrors(){if(this.documentValidationErrors.length>0){const t=this.contextSelectionItems.length;this.contextMessage=`<div style="color: red; font-weight: bold;">Context: you have selected ${t} document${t>1?"s":""}</div><div style="color: red;">${this.documentValidationErrors[0]||""}</div>`}}createNewChatForNudge(t){var i=this;return cn(function*(){i.showHistory=!1,i.messages=[],i.showPromptLibrary=!1,i.showAvatar=!1,i.conversationId=null,i.questionID=null,i.featureSelected=null,i.primarySchema=[],i.secondarySelection=[],i.entityObject=[];const s=window.parent;try{const u=yield s.$find("GEMSTabManager").getGEMSTokenValidation();if(!u.HasSufficientTokens)return i.messages.push({user:"GEMS AI",text:u.InsufficientTokenError||i.errorMsg.errorStatus.errors.tokenBalanceError,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:!1}),i.showDivider=!0,void i.cdr.detectChanges()}catch(c){console.error("Error while trying to call GEMSTabManager.getGEMSTokenBalance:",c)}yield i.getChatID();let r="";const o=t.nudgeValue||"";r="summarize"===o.toLowerCase()?"Summarize the document":"translate"===o.toLowerCase()?"Translate the document":"compare"===o.toLowerCase()?"Compare the documents":o;let a="Conversation";"summarize"===o.toLowerCase()?a="summarize":"translate"===o.toLowerCase()?a="translate":"compare"===o.toLowerCase()&&(a="compare");const l={selectionType:"Document",selectionItems:i.contextSelectionItems||[],selectionAction:a,actionspecificParameters:{},contextQuery:r};if(i.documentAnalysis={selectionType:l.selectionType,selectionItems:l.selectionItems,selectionAction:l.selectionAction},console.log("Nudge documentAnalysis:",i.documentAnalysis),i.contextSelectionItems&&i.contextSelectionItems.length>0){const c="../../assets/Icons/pdf.png",u="../../assets/Icons/docx.png",d=i.contextSelectionItems.map(f=>{const p=f?.documentName||"";return`\n          <div style="display: flex; align-items: center; margin-left: 10px; background-color:white; margin-bottom: 8px;">\n            <img src="${"pdf"===(f?.documentType||"").toLowerCase()?c:u}" alt="Document Icon" style="width: 27px; height: 37px;aspect-ratio: 27/37; margin-right: 10px;">\n            <div>${p}</div>\n          </div>`}).join("");i.messages.push({user:"GEMS AI",text:i.sanitizer.bypassSecurityTrustHtml(`<div>You have selected the following document${i.contextSelectionItems.length>1?"s":""}:</div>${d}`),clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:i.info,isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==i.ShowFeedbackActions})}i.showContextSection=!1,i.contextMessage="",i.contextDefaultNudges=[],i.contextSelectionItems=[],i.newMessage=r,i.newMessage&&i.newMessage.trim().length>0&&(yield i.addNewMessage())})()}getIconPath(t){switch(t.toLowerCase()){case"summarize":default:return"assets/Icons/summarize.svg";case"compare":return"assets/Icons/compare.svg";case"translate":return"assets/Icons/translate.svg"}}getButtonText(t){switch(t.toLowerCase()){case"summarize":return"Summarise Document";case"compare":return"Compare Documents";case"translate":return"Translate Document";default:return t}}ngOnDestroy(){sessionStorage.removeItem("widgetcontextdata"),this.storageEventSubscription&&this.storageEventSubscription.unsubscribe()}ngAfterViewChecked(){const t=new Date;(t.getTime()-this.refreshlastCalledTime.getTime())/1e3>30&&(console.log("AfterViewChecked"),this.refreshPortal(),this.refreshlastCalledTime=t),this.scrollToBtm&&(this.scrollToBottom(),this.scrollToBtm=!1)}refreshPortal(){this.refreshlastCalledTime=new Date,console.log("Calling keep Gems Session Alive");try{const t=window.parent;if(t&&"function"==typeof t.$find){const i=t.$find("GEMSTabManager");i&&"function"==typeof i.keepGemsSessionAlive?(i.keepGemsSessionAlive(),console.log("Session keep-alive triggered successfully.")):console.warn("keepGemsSessionAlive function not found.")}else console.warn("$find function not available on parent window.")}catch(t){console.error("Error accessing parent window:",t)}}checkFeedback(){this.feedbackText=this.feedbackText.trimStart()}openFeedbackModal(){this.showFeedbackModal=!0,this.feedbackText="",this.feedbackSubmit=!0}toggleToPromptLib(){if(1==this.isTyping||this.streamStatus)this.toastr.info("Your prompt is processing, Please wait untill that completes","",{timeOut:5e3});else if(!this.showPromptLibrary){this.oldState={showDivider:this.showDivider,maximize:this.maximize,newChat:this.newChat,showGmsLogo:this.showGmsLogo,showPromptLibrary:this.showPromptLibrary,showCoPilotActions:this.showCoPilotActions};let t=JSON.parse(sessionStorage.getItem("widgetcontextdata")||"{}");this.openedFromDefaultNudge=!!(t?.ContextData?.defaultNudge?.nudgeValue&&Object.keys(t).length>0),this.showPromptLibrary=!0,this.newChat=!1,this.showCoPilotActions=!1,this.showGmsLogo=!1}}toggleBackFromLib(){this.showPromptLibrary=!1,this.showDivider=this.oldState.showDivider,this.maximize=this.oldState.maximize,this.newChat=this.oldState.newChat,this.showGmsLogo=this.oldState.showGmsLogo,this.showPromptLibrary=this.oldState.showPromptLibrary,this.showCoPilotActions=this.oldState.showCoPilotActions,this.openedFromDefaultNudge&&(this.getLastConversation(),this.openedFromDefaultNudge=!1)}closeFeedbackModal(){this.showFeedbackModal=!1,this.feedbackText="",this.feedbackSubmit=!0}submitFeedbackModal(t){setTimeout(()=>{const i=t.target.innerText.trim();if(this.feedbackSubmit){let s;"cancel"==i.toLowerCase()?s={completionId:this.currentCompletionId,userSatisfaction:-1,note:""}:"submit"==i.toLowerCase()&&(s={completionId:this.currentCompletionId,userSatisfaction:-1,note:this.feedbackText}),this.showFeedbackModal=!1,sessionStorage.setItem("storeUserFeedback",s),this.api.sendUserSatisfaction(s).subscribe({next:r=>{this.feedbackSubmit=!1,this.messages[this.currentMessageIndex].dislike=!1,this.messages[this.currentMessageIndex].disliked=!0,this.messages[this.currentMessageIndex].liked=!1,this.messages[this.currentMessageIndex].like=!0,this.cdr.detectChanges(),sessionStorage.removeItem("storeUserFeedback"),this.showToastMessage(this.errorMsg.errorStatus.errors.feedbackMessage,this.currentMsg)},error:r=>{("G202005"==r?.error?.code||"G202005"==r?.code)&&this.refreshToken(),this.isTyping=!1,this.log.error(r,"user satisfaction error")}})}},500)}decodeHTML(t){const i=document.createElement("textarea");return i.innerHTML=t,i.value}handleNavigation(t){if(this.common.scrolltoclick(),this.log.info("Navigating to:",t),console.log("Navigating to:",t),t.startsWith("javascript:")){const i=t?.replace("javascript:","").trim();try{new Function(i)()}catch(s){this.log.error("Error executing JavaScript link:",s)}}else this.log.info(t,"link"),window.open(t,"_blank")}restoreScroll(){const t=document.querySelector("#messagesContainer");this.savedScrollPosition=sessionStorage.getItem("scrollPosition"),t&&this.savedScrollPosition&&(t.scrollTop=parseInt(this.savedScrollPosition,10),setTimeout(()=>{sessionStorage.removeItem("scrollPosition")},1e4))}swapElements(){const t=document.querySelectorAll(".moreText.first"),i=document.querySelectorAll(".linkText");t.forEach((s,r)=>{const o=i[r];s&&o&&s.parentNode&&s.parentNode.insertBefore(o,s)})}autoScrollInput(){const t=this.messageInput.nativeElement;t.scrollLeft=t.scrollWidth}showTextInfo(){this.showText=!0,this.showJSON=!1}showJSONInfo(){this.showText=!1,this.showJSON=!0}onMicClick(){this.isListening?(this.log.info("listinging"),this.speechText.stopListening(),this.isListening=!1):(this.log.info("not listinging"),this.speechText.startListening(),this.isListening=!0),this.cdr.detectChanges()}stopApiCall(){this.api.cancelRequest(),this.isApiCallActive=!1,this.isSendingMessage=!1,this.isTyping=!1,this.isReasoningSendingMessage=!1,this.cdr.detectChanges()}cancelStatusAPICall(){this.stream.cancelStatusRequest(),this.isApiCallActive=!1,this.isSendingMessage=!1,this.isTyping=!1,this.cdr.detectChanges()}stopAPI(){this.stopApiCall(),this.cancelStatusAPICall(),this.streamStatus=!1,this.isTyping=!1,this.stopApi=!0,this.callExecuteApi=!1}talktoagent(){window.parent.$find("GEMSTabManager").navigateToGemsArea("intercom/chat")}onFilterTextBoxChanged(){this.gridApi.setGridOption("quickFilterText",document.getElementById("filter-text-box").value)}onCellClicked(t){const i=t.event.target.closest(".ag-cell");i&&i.classList.toggle("expanded")}onQuickFilterChanged(t){this.gridApi.setQuickFilter(t.target.value)}continueReasoningMode(t){this.messages[t].reasoningButtons=!1,this.messages[t].isContinue=!0,this.isSendingMessage=!1,this.isReasoningSendingMessage=!1,this.messages.push({user:"GEMS AI",text:"What would you like to know?",clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:this.info,isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions})}savePopToggle(t=null,i=0){1==this.isTyping||this.streamStatus?this.toastr.info("Your prompt is processing, Please wait untill that completes","",{timeOut:5e3}):(this.showSaveToggle=!this.showSaveToggle,this.savePromptName="",this.savePromptVisibility="private",t&&(t.selectedIndex=i,this.selectedConversation=t))}saveQuery(){let t=this.selectedConversation.completionId,i=this.selectedConversation.selectedIndex;if(this.shouldScroll=!1,t){const s={Name:this.savePromptName,ConversationId:t,IsPrivate:"private"===this.savePromptVisibility,ChatId:this.chatId};this.showSaveLoader=!0,this.api.savePromptQuery(s).subscribe({next:r=>{this.showSaveLoader=!1,10200===r?.statusCode?(this.savePopToggle(),this.messages[i].saveQuery=!1,this.messages[i].savedQuery=!0,this.isBookmarkClicked=!1,this.showToastMessage("Your prompt has been saved.",this.messages[i]),this.cdr.detectChanges()):10200===r?.statusCode?(this.messages[i].saveQuery=!1,this.messages[i].savedQuery=!0,this.isBookmarkClicked=!1,this.showToastMessage("Prompt already exists in your saved list.",this.messages[i]),this.cdr.detectChanges()):10205===r?.statusCode?this.toastr.info("Similar name or query already exists.","",{timeOut:5e3}):10400===r?.statusCode?this.toastr.info("Saved Prompt name already exists.","",{timeOut:5e3}):10422===r?.statusCode?this.toastr.info("Navigation response cannot be saved.","",{timeOut:5e3}):(this.savePopToggle(),this.showSaveToggle=!1,this.isTyping=!1,this.isBookmarkClicked=!0,this.showToastMessage("Error while saving prompt.",this.messages[i]))},error:r=>{this.showSaveLoader=!1,this.savePopToggle(),this.showSaveToggle=!1,this.isTyping=!1,this.log.error(r,"saved prompt error"),this.isBookmarkClicked=!0}})}else this.showToastMessage("Unable to get Conversation Id",this.messages[i]),this.cdr.detectChanges()}sendUserSatisfaction(t,i,s,r){if(this.shouldScroll=!1,1==this.isTyping||this.streamStatus)this.toastr.info("Your prompt is processing, Please wait untill that completes","",{timeOut:5e3});else if(1==i){const o={completionId:t,userSatisfaction:i};sessionStorage.setItem("storeUserFeedback",o),this.api.sendUserSatisfaction(o).subscribe({next:a=>{s.clicked||(this.messages[r].like=!1,this.messages[r].liked=!0,this.messages[r].dislike=!0,this.messages[r].disliked=!1,this.showToastMessage(this.errorMsg.errorStatus.errors.feedbackMessage,s),sessionStorage.removeItem("storeUserFeedback"),this.cdr.detectChanges())},error:a=>{("G202005"==a?.error?.code||"G202005"==a?.code)&&this.refreshToken(),this.isTyping=!1,this.log.error(a,"user satisfaction error")}})}else-1==i&&(this.currentCompletionId=t,this.currentMessageIndex=r,this.currentMsg=s,this.feedbackSubmit=!0,this.feedbackText="",this.openFeedbackModal())}extractBrackets(t){this.parsedMessage=[];const i=[],r=t.split(/{{(.*?)}}/g);for(let o=0;o<r.length;o++)""!==r[o].trim()&&i.push({text:r[o],isPlaceholder:o%2==1});return this.parsedMessage=i,this.parsedMessage}handlePromptSelected(t,i,s){var r=this;return cn(function*(){r.chatClicked=!0,r.newChat=!1,r.questionID=i,"doc"===s.toLowerCase()?((null==r.chatId||null==r.chatId)&&(yield r.getChatID()),r.newMessage=t,r.IsPromptClicked=!1,r.isApiCallActive=!0,r.addNewMessage()):(r.isApiCallActive=!0,r.extractBrackets(t),r.IsPromptClicked=!0)})()}ExecutePromptSelected(t){"reserved"==t.queryType?(this.questionID=t.id,this.handlePromptSelected(t.Title,this.questionID,"NER")):(this.callExecuteApi=!0,this.executeApiPayload={chatId:this.chatId?this.chatId:null,savedSearchId:t.id,prompt:t.Question},this.shouldScroll=!0,this.newChat=!1,this.newMessage=t.Question,this.IsPromptClicked=!1,this.addNewMessage(),this.scrollToBottom(),this.shouldScroll=!1)}focusNextPlaceholder(){const t=this.parsedMessage.findIndex(i=>i.isPlaceholder);-1!==t&&(this.parsedMessage[t].isPlaceholder=!1,setTimeout(()=>{document.getElementById("CustomMessageBox")?.children[t]?.focus()}))}handlePlaceholderClick(t){this.doubleClicked=!1,this.parsedMessage[t].isPlaceholder&&this.focusOn(t)}handleDoubleClick(t){if(!this.parsedMessage[t].isPlaceholder){this.doubleClicked=!0;const i=document.createRange(),s=window.getSelection(),r=document.getElementById("CustomMessageBox");r&&s&&(i.selectNodeContents(r),s.removeAllRanges(),s.addRange(i))}}focusOn(t){setTimeout(()=>{const i=document.getElementById("CustomMessageBox")?.children[t];i&&(i.focus(),this.parsedMessage[t].isPlaceholder&&(this.OriginalText=this.parsedMessage[t].text,i.innerText="",this.parsedMessage[t].text="",this.parsedMessage[t].isPlaceholder=!1))})}handleInput(t,i){const s=t.target;setTimeout(()=>{const r=s.innerText;this.parsedMessage[i].isPlaceholder&&(this.parsedMessage[i].text="",this.parsedMessage[i].isPlaceholder=!1),this.parsedMessage[i].text=r},0)}handleKeyDown(t,i){const s=this.parsedMessage.every(r=>!r.isPlaceholder&&""!==r.text.trim());"Tab"===t.key?(t.preventDefault(),s||this.moveToNextPlaceholder(i)):"Enter"===t.key?(t.preventDefault(),s?(this.newMessage=this.parsedMessage.map(r=>r.text).join(" "),console.log("All placeholders filled. Triggering API call..."),this.addNewMessage()):(this.moveToNextPlaceholder(i),console.log("Some placeholders are still empty. Waiting..."))):"Backspace"===t.key&&this.doubleClicked&&(t.preventDefault(),this.IsPromptClicked=!1,this.doubleClicked=!1)}moveToNextPlaceholder(t){const i=this.parsedMessage.findIndex(r=>r.isPlaceholder),s=this.parsedMessage.filter(r=>r.isPlaceholder);-1===i?1!==s.length||console.log("One placeholder left. Waiting for user input..."):this.focusOn(i)}handleFocus(){this.focusNextPlaceholder()}handleBlur(t){const i=this.parsedMessage[t],s=document.getElementById("CustomMessageBox")?.children[t];""===i.text.trim()&&(i.text=this.OriginalText,i.isPlaceholder=!0,s.innerText=this.OriginalText),this.OriginalText="",this.doubleClicked=!1}addNewMessageEnter(t){const i=t;if(!this.isReasoningSendingMessage&&(this.clearRegenerateFlags(),"Enter"===i.key)){if(this.scrollToBtm=!0,this.screenView){this.statusList=[];const s=this.messages.findIndex(r=>"status"===r.type);s>-1&&this.messages.splice(s,1),setTimeout(()=>{const r=this.messages.findIndex(o=>"status"===o.type);r>-1&&this.messages.splice(r,1)},1e3),console.log("status hidden 10")}this.screenView=!1,this.newChat=!1,this.disableButtons(),this.isSendingMessage?t.preventDefault():(t.preventDefault(),this.isApiCallActive=!0,this.addNewMessage(),this.shouldScroll=!0)}}simulateBlurForAll(){document.querySelectorAll('#CustomMessageBox span[contenteditable="true"]').forEach((i,s)=>{i.dispatchEvent(new Event("blur"))})}addNewMessageClick(t){if(sessionStorage.removeItem("widgetcontextdata"),t.preventDefault(),this.clearRegenerateFlags(),this.scrollToBtm=!0,this.screenView){this.statusList=[];const i=this.messages.findIndex(s=>"status"===s.type);i>-1&&this.messages.splice(i,1),setTimeout(()=>{const s=this.messages.findIndex(r=>"status"===r.type);s>-1&&this.messages.splice(s,1)},1e3),console.log("status hidden 11")}if(this.screenView=!1,this.newChat=!1,this.disableButtons(),this.IsPromptClicked){if(this.simulateBlurForAll(),!this.validateMessage())return void console.log("Fill all placeholders before sending.");this.newMessage=this.parsedMessage.map(i=>i.text).join("")}this.isApiCallActive=!0,console.log("Sending message:",this.newMessage),this.addNewMessage()}validateMessage(){return this.parsedMessage.every(t=>!t.isPlaceholder&&""!==t.text.trim())}disableButtons(){const t=document.querySelectorAll('.radio-button input[type="radio"]'),i=document.querySelector(".search-button");t.forEach(s=>{s.disabled=!0,s.checked=!1}),i&&(i.disabled=!0)}addNewMessage(){var t=this;return cn(function*(){const i=t.newMessage.trim();!i||t.isSendingMessage||(t.activeUser.messages.push(new one("sent",i)),t.featureSelected=null,t.primarySchema=[],t.entityObject=[],t.secondarySelection=[],t.toggleVisibility(),t.isSendingMessage=!0,(null==t.chatId||null==t.chatId)&&(yield t.getChatID()),t.addReplyMessage(!1,""),t.speechText.stopListening(),t.isListening=!1,t.newMessage="",t.parsedMessage=[],t.IsPromptClicked=!1,console.log(t.newMessage,"addNewMessage===="))})()}lastConversation(){const t=(new Date).toISOString();sessionStorage.setItem("clickTimeUTC",t),this.log.info(`Click time stored in UTC: ${t}`),this.lastconversation=!0,this.isHistoryChat=!0,this.toggleVisibility(),this.getLastConversation()}checkClickTime(){const t=sessionStorage.getItem("clickTimeUTC");if(t){const i=new Date(t).getTime(),r=((new Date).getTime()-i)/6e4;this.isWithinTwoMinutes=r<=10,this.log.info(`Time difference in minutes: ${r}`)}else this.isWithinTwoMinutes=!1}errorHandle(){this.isTyping=!1,this.issError=!0}closeModal(){const t=document.getElementById("gems-ai-widget-data-grid-modal");t&&(t.style.display="none")}selectFeature(t,i){this.log.info("Select Feature",t,":",JSON.parse(i)),"screen"==t?this.primarySchema=JSON.parse(i):this.featureSelected=JSON.parse(i)}selectScreen(t,i){this.log.info("Select Screen",t,":",JSON.parse(i)),"screen"==t?this.primarySchema=JSON.parse(i):this.featureSelected=JSON.parse(i)}selectEntity(t,i,s){this.entityObject=t,this.chatId=i,this.conversationId=s,this.isstreaming=!0,this.isTyping=!0}callUserQuery(){setTimeout(()=>{const t=this.clickedMessageIndex;if(t==this.messages.length-2||t==this.messages.length-1){let r;r=this.messages.filter(a=>"status"!==a.type),r.pop(),this.messages=r,this.newMessage=r[r?.length-1].text,this.entityObject=this.entityObject,this.showLoader=!1,this.screenView=!1,this.isEntityMatch=!0,console.log(this.newMessage,"callUserQuery===="),this.addReplyMessage(!0,"")}},100)}setClickedIndex(t){this.clickedMessageIndex=t}clearRegenerateFlags(){this.messages.forEach(t=>t.isRegenerate=!1)}reGenerateQuery(t){this.clearRegenerateFlags(),this.isreRun=!0,this.previousMessage&&""!==this.previousMessage.trim()?(this.newMessage=this.previousMessage,this.addReplyMessage(!1,"")):console.warn("No previous query available to regenerate.")}callUserSuggestionQuery(t){this.newMessage=t,this.entityObject=[],this.primarySchema=[],this.addReplyMessage(!1,"")}callSaveSearchQuery(t){t&&this.log.info("Selected value from radio:",t),this.messages.pop(),this.newMessage=this.messages[this.messages.length-1].text,this.addReplyMessage(!0,t)}handleResponse(t,i=!1){this.statusList=[],this.isMarkDown=!1;const s=this.messages.findIndex(r=>"status"===r.type);s>-1&&this.messages.splice(s,1),setTimeout(()=>{const r=this.messages.findIndex(o=>"status"===o.type);r>-1&&this.messages.splice(r,1)},1e3),this.isShowTooltip=!1,this.isOnlyInfo=!1,this.ShowFeedbackActions=!0,this.hideActios=!1;try{if(200==t?.statusCode){if(t?.data[0]?.assistantMessage?.info?(this.isShowTooltip=!0,this.info=t?.data[0]?.assistantMessage?.info):this.isShowTooltip=!1,1==t?.data?.[0]?.isChargeable||1==t?.data?.isChargeable){const a=(t?.data?.[0]?.tokenAnalytics?.promptTokens||t?.data?.tokenAnalytics?.promptTokens)+(t?.data?.[0]?.tokenAnalytics?.completionTokens||t?.data?.tokenAnalytics?.completionTokens);let l=t?.data?.[0]?.tokenAnalytics?.tokensCost||t?.data?.tokenAnalytics?.tokensCost;const c=t?.data?.[0]?.tokenAnalytics?.documentNames||t?.data?.tokenAnalytics?.documentNames,u=t?.data?.[0]?.tokenAnalytics?.aiTransactionType||t?.data?.tokenAnalytics?.aiTransactionType,d=JSON.parse(sessionStorage.getItem("initializeData")||"{}"),h=d?.userId||"";let f=d?.user_id;const p=window.parent;try{p.$find("GEMSTabManager").UpdateTokenUsageAndAudit(l,c,u,h)}catch(g){console.error("Error while trying to call GEMSTabManager.updateTokenUsage:",g,"Args:",f,a)}}if("document analysis"===t?.data?.[0]?.Category?.toLowerCase()){let r=t?.data?.[0]?.tokenAnalytics?.promptTokens,o=t?.data?.[0]?.tokenAnalytics?.completionTokens,a=t?.data?.[0]?.tokenAnalytics?.tokenCost;const l=r+o,c=JSON.parse(sessionStorage.getItem("widgetcontextdata")||"{}"),u=JSON.parse(sessionStorage.getItem("initializeData")||"{}"),d=c?.ContextData?.selectionAction||"",f=(c?.ContextData?.selectionItems||[]).map(E=>E?.documentName||"").join(", "),p=u?.userId||"";let v=JSON.parse(sessionStorage.getItem("accessWidget")||"{}")?.user_id;const _=window.parent;try{_.$find("GEMSTabManager").UpdateTokenUsageAndAudit(a,f,d,p)}catch(E){console.error("Error while trying to call GEMSTabManager.updateTokenUsage:",E,"Args:",v,l)}}if(t?.data[0]?.assistantMessage?.error?.length>0)this.isInnerError=!0,this.showErrorText="Please login for more info...";else if(t&&t.data&&t.data.length>0){const r=t?.data[0],o=t;let a="";this.questionID=null;const l="id"+Date.now();this.chatId=t?.chatId;let c=t?.category,u=r.assistantMessage;const d=r.assistantMessage?.summary?r.assistantMessage.summary:"";if(this.isMarkDown="Reasoning Bot"==c,"string"==typeof u&&this.isMarkDown&&this.messages.push({user:"GEMS AI",text:u,completionId:t?.data[0]?.completionId?t?.data[0]?.completionId:t?.conversationId,clicked:!1,like:!this.isOnlyInfo,liked:!1,dislike:!this.isOnlyInfo,disliked:!1,saveQuery:"Saved Prompt"!=t?.data[0].category&&!this.isOnlyInfo,savedQuery:"Saved Prompt"==t?.data[0].category,isStreamStarted:!1,copy:!this.isOnlyInfo,clickedTooltip:!1,showTooltip:!!this.isShowTooltip,info:this.info,isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions,markdown:!0}),r?.response?.htmlFormat){let p=r.response.htmlFormat,g=p;this.common.getWidgetContextToken();const T=VT((new DOMParser).parseFromString(p,"text/html").body.innerHTML),V=`expand-btn-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;g=`\n                    <div style="position: relative; padding: 1rem;">\n                      \n                        <div id="${V}" style="position: absolute; top: 0.5rem; right: 0.5rem; cursor: pointer;">\n                          <svg width="19" height="19" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg">\n                            <path d="M13.9221 3.95833H11.0833V2.375H16.625V7.91667H15.0417V5.07792L11.6431 8.47645L10.5235 7.35687L13.9221 3.95833ZM2.375 11.0833H3.95833V13.9221L7.35687 10.5235L8.47645 11.6431L5.07792 15.0417H7.91667V16.625H2.375V11.0833Z" fill="black"/>\n                          </svg>\n                        </div>\n                        \n                      ${p}\n                    </div>\n                  `,setTimeout(()=>{const D=document.getElementById(V);D&&D.addEventListener("click",function(){console.log("Expanded view triggered"),window.parent.$find("GEMSTabManager").expandAiResponse(T)})},0);let M=g;return M=M.replace(/<ul[^>]*>/gi,'<div style="padding-left: 20px;">'),M=M.replace(/<\/ul>/gi,"</div>"),M=M.replace(/<li[^>]*>/gi,"<p>\u2022 "),M=M.replace(/<\/li>/gi,"</p>"),a=this.sanitizer.bypassSecurityTrustHtml(M),sessionStorage.removeItem("widgetcontextdata"),this.isOnlyInfo=!0,this.hideActios=!0,this.ShowFeedbackActions=!0,this.isInnerError=!1,this.isFirstInfo=!1,this.messages.push({user:"GEMS AI",text:a,completionId:t?.data[0]?.completionId?t?.data[0]?.completionId:t?.conversationId,clicked:!1,like:!0,liked:!1,dislike:!0,disliked:!1,saveQuery:!0,savedQuery:!0,isStreamStarted:!1,copy:!0,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:!0,type:"info"}),void this.cdr.detectChanges()}if(o?.response?.htmlFormat){let p=r.response.htmlFormat;return p=p.replace(/<ul[^>]*>/gi,'<div style="padding-left: 20px;">'),p=p.replace(/<\/ul>/gi,"</div>"),p=p.replace(/<li[^>]*>/gi,"<p>\u2022 "),p=p.replace(/<\/li>/gi,"</p>"),a=this.sanitizer.bypassSecurityTrustHtml(p),this.isOnlyInfo=!0,this.hideActios=!0,this.ShowFeedbackActions=!0,this.isInnerError=!1,this.isFirstInfo=!1,this.messages.push({user:"GEMS AI",text:a,completionId:t?.data[0]?.completionId?t?.data[0]?.completionId:t?.conversationId,clicked:!1,like:!0,liked:!1,dislike:!0,disliked:!1,saveQuery:!0,savedQuery:!0,isStreamStarted:!1,copy:!0,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:!0,type:"info"}),void this.cdr.detectChanges()}if("object"==typeof r.assistantMessage)if(r.assistantMessage.message&&(a+=`<div>${r.assistantMessage?.message}</div><br>`),r.assistantMessage?.result)if(this.fullDocSearchResult[l]=r,r.assistantMessage?.result?.length>0){const p=r.assistantMessage?.heading?`<div style="display: flex; margin-bottom: 14px; font-weight: 700; color: #93186C;">${r.assistantMessage?.heading}</div>`:"",g=r.assistantMessage?.warning?x0(r.assistantMessage?.warning):"";if(1==r.assistantMessage?.result?.length&&"EntityMatchView"!==t.screenView){this.hideActios=!1;const _=r.assistantMessage?.result[0];let E=r.assistantMessage?.navigation_links;const b={..._,navlinks:E};a=g+cL(b,"",this.common),this.isShowTooltip=!0}else if(this.hideActios=!1,"SavedView"===t.screenView&&"GroupChart"==r.assistantMessage?.EntityType)a='<div style="display: flex; margin-bottom: 14px; font-weight: 700; color: #93186C;">Saved Group Chart</div>'+dL(r.assistantMessage?.result,this.common),this.isOnlyInfo=!1;else if("SavedView"===t.screenView&&null==r.assistantMessage?.EntityName){const _='<div style="display: flex; margin-bottom: 14px; font-weight: 700; color: #93186C;">Select an option</div>';let E=r.assistantMessage?.result;a=_+((n,e)=>(window.handleSaveSearchList=function(i){const s=i.target.value;i.target.blur(),n(s)},`\n            <div id="radioClick">\n                ${e.map(i=>`\n\n            <label class="radio-button">\n                <input \n                    id="SaveSearchTemplateSelection"\n                    type="radio"\n                    value="${i}" \n                    name="SaveSearchList"\n                     onchange="handleSaveSearchList(event)"\n                >\n                <span class="custom-button">${i}</span>\n            </label>\n               \n            `).join("")}\n            </div>\n        `))(this.callSaveSearchQuery.bind(this),E),this.hideActios=!0,this.isOnlyInfo=!0}else"SavedView"===t.screenView?(a='<div style="display: flex; margin-bottom: 14px; font-weight: 700; color: #93186C;">Saved Search</div>'+lL(r.assistantMessage?.result,this.common),this.isOnlyInfo=!1):"DidYouMeanView"===t.screenView?(a=p+g+Vu(r.assistantMessage,this.common),this.isOnlyInfo=!1):"EntityMatchView"===t.screenView?(a=p+g+((n,e,t,i)=>{console.log("\u{1f7e1} Starting getEntityMatchView with allRecords:",n);const s=n?.isSingleSelect||!1;console.log("Single Select Enabled:",s);const o=(n?.result||[]).flatMap(N=>Object.entries(N).map(([M,D])=>({key:M,records:D})));console.log("\u{1f7e2} Parsed recordGroups:",o);let a=0,l=[],c=[];const u="entity-match-"+Date.now()+"-"+Math.floor(1e3*Math.random()),d=document.createElement("div");d.classList.add("card-wrapper"),d.id=u;const h=document.createElement("p");h.classList.add("mainHeading"),h.textContent="Which Entity/Entities would you like to run this search for?",h.style.marginTop="15px",d.appendChild(h);const f=document.createElement("div");f.classList.add("selected-summary-container"),f.style.display="none",f.style.marginBottom="15px",f.style.padding="10px",f.style.border="1px solid #e0e0e0",f.style.borderRadius="8px",f.style.backgroundColor="#ffffff",d.appendChild(f);const p=document.createElement("p");p.classList.add("selectedHeading"),d.appendChild(p);const g=document.createElement("div");g.classList.add("records-wrapper"),d.appendChild(g);const v=document.createElement("div");v.classList.add("entity-action-wrapper"),v.style.marginTop="15px";const _=document.createElement("button");function E(N){N.innerHTML="",0!==c.length&&c.forEach(M=>{N.style.display="block";const D=document.createElement("div");D.classList.add("group-summary"),D.style.marginBottom="15px";const L=document.createElement("strong");L.textContent=`Entities selected for ${M.groupKey}:`,L.style.display="block",L.style.marginBottom="5px",L.style.color="#333",D.appendChild(L);const ne=document.createElement("div");ne.style.display="flex",ne.style.flexWrap="wrap",ne.style.gap="10px",ne.style.marginBottom="10px",M.selected.forEach(j=>{const X=document.createElement("div");function Ye(Z,K){const re=document.createElement("div");re.style.display="flex",re.style.alignItems="flex-start",re.style.marginBottom="4px",re.style.width="100%";const De=document.createElement("div");De.innerHTML=`<strong style="white-space: nowrap;">${Z}</strong>`,De.style.width="70px",De.style.textAlign="left";const Dt=document.createElement("div");Dt.textContent=":",Dt.style.margin="0 6px";const et=document.createElement("div");return et.textContent=K,et.style.flex="1",et.style.wordBreak="break-word",re.appendChild(De),re.appendChild(Dt),re.appendChild(et),re}X.classList.add("Multiple-record","noLinks","entityMatch"),X.style.flex="1 1 calc(50% - 5px)",X.style.minWidth="200px",X.style.boxSizing="border-box",X.style.border="2px solid #4a90e2",X.style.backgroundColor="#eaf4ff",X.style.borderRadius="4px",X.style.padding="8px";const ot=Ye("Name",j.entityName),Rn=Ye("Entity Type",j.entityType);X.appendChild(ot),X.appendChild(Rn),ne.appendChild(X)}),D.appendChild(ne),N.appendChild(D)})}function b(N,M,D){const L=o[a];console.log("\u{1f504} Rendering group:",L.key,L.records),M.innerHTML="",D.disabled=!0,D.classList.remove("enabled"),D.classList.add("disabled"),N.textContent=`Entities for ${L.key}:`,function V(N){return console.log("\u{1f9e9} Rendering records for group:",N),N.map(M=>{const D=document.createElement("span");return D.classList.add("Multiple-record","noLinks","entityMatch"),i&&(D.classList.remove("hide-section"),D.classList.remove("disabledBtn")),D.style.overflowWrap="break-word",D.style.display="block",D.style.width="100%",D.setAttribute("data-record",JSON.stringify(M)),D.setAttribute("onclick",`window.handleEntityRecordClick('${JSON.stringify(M).replace(/'/g,"\\'")}', this)`),l.some(ne=>ne.entityId===M.entityId)&&D.classList.add("selected-record"),Object.entries(M).slice(0,5).forEach(([ne,j])=>{if(!["primaryentitykeyid","activityId","savedSearchCounter","personId","entityId"].includes(ne)){const X=document.createElement("div");X.style.display="flex",X.style.flexWrap="wrap",X.style.width="100%",X.style.marginBottom="4px",X.style.alignItems="flex-start";const Ye=document.createElement("div");Ye.style.display="flex",Ye.style.alignItems="flex-start",Ye.style.width="90px";const ot=document.createElement("strong");ot.textContent=ne,ot.style.flex="1",ot.style.textAlign="left";const Rn=document.createElement("span");Rn.textContent=":",Rn.style.marginRight="6px",Ye.appendChild(ot),Ye.appendChild(Rn);let Z="string"==typeof j&&j.includes("T00:00:00")?j.split("T")[0]:j;"string"==typeof j&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d+$/.test(j)&&(Z=function T(N){if(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d+$/.test(N)){const M=new Date(N);return`${M.getFullYear()}-${String(M.getMonth()+1).padStart(2,"0")}-${String(M.getDate()).padStart(2,"0")} ${String(M.getHours()).padStart(2,"0")}:${String(M.getMinutes()).padStart(2,"0")}`}return N}(j));const K=document.createElement("div");K.style.flex="1",K.style.minWidth="150px",K.style.wordBreak="break-word",K.textContent=`${Z??""}`,X.appendChild(Ye),X.appendChild(K),D.appendChild(X)}}),D})}(L.records).forEach(j=>M.appendChild(j))}return _.textContent="OK",_.classList.add("entity-ok-button","disabled"),_.disabled=!0,v.appendChild(_),d.appendChild(v),window.handleEntityRecordClick=(N,M)=>{console.log("\u{1f518} Entity clicked:",N);try{const D=JSON.parse(N);if(s){const ne=document.querySelector(`#${u} .records-wrapper`);ne&&ne.querySelectorAll(".selected-record").forEach(j=>{j.classList.remove("selected-record")}),l=[{entityType:D["Entity Type"],entityName:D.Name,entityId:D.entityId}],M.classList.add("selected-record"),console.log("\u2714 Single selected:",D.entityId)}else{const ne=l.findIndex(j=>j.entityId===D.entityId);-1!==ne?(l.splice(ne,1),M.classList.remove("selected-record"),console.log("\u2796 Deselected:",D.entityId)):(l.push({entityType:D["Entity Type"],entityName:D.Name,entityId:D.entityId}),M.classList.add("selected-record"),console.log("\u2795 Selected:",D.entityId))}const L=document.querySelector(`#${u} .entity-ok-button`);L&&(L.disabled=0===l.length,L.classList.toggle("enabled",l.length>0),L.classList.toggle("disabled",0===l.length),L.disabled?(document.querySelector("#SendUserQuery")?.classList.remove("disabledBtn"),sessionStorage.removeItem("multiEntries")):(document.querySelector("#SendUserQuery")?.classList.add("disabledBtn"),sessionStorage.setItem("multiEntries","true")))}catch(D){console.error("\u274c Error parsing record:",D)}},window.handleEntitySelectFromOkButton=()=>{if(console.log("\u{1f7e9} OK button clicked. Current selections:",l),0!==l.length)if(c.push({groupKey:o[a].key,selected:[...l]}),l=[],a+=1,console.log(`\u27a1\ufe0f Moving to group index: ${a}/${o.length}`),a<o.length){const M=document.getElementById(u);if(!M)return void console.error("\u274c Could not find card wrapper in DOM");const D=M.querySelector(".selected-summary-container"),L=M.querySelector(".selectedHeading"),ne=M.querySelector(".records-wrapper"),j=M.querySelector(".entity-ok-button");if(!(D&&L&&ne&&j))return void console.error("\u274c Could not find required elements in DOM");E(D),b(L,ne,j)}else{console.log("\u2705 All groups processed. Selected groups:",c);const M=n?.single_match_list||[],D=c.flatMap(L=>L.selected);M.forEach(L=>{D.some(j=>j.entityId===L.entityId)||D.push({entityType:L["Entity Type"],entityName:L.Name,entityId:L.entityId})}),console.log("\u{1f31f} Final entity selections:",D),e(D,n.chatId,n.completionId),t()}else console.warn("\u26a0\ufe0f OK clicked with no selection in current group")},_.setAttribute("onclick","window.handleEntitySelectFromOkButton()"),b(p,g,_),E(f),console.log("\u2705 EntityMatchView rendering complete"),d.outerHTML})(r.assistantMessage,this.selectEntity,this.callUserQuery,this.screenView),this.isOnlyInfo=!0):"ListView"===t.screenView?(a=p+g+Vu(r.assistantMessage,this.common),this.isOnlyInfo=!1,this.isShowTooltip=!0):(a=g+Vu(r.assistantMessage,this.common),this.isOnlyInfo=!1);const v=t.data[0]?.suggestionQuestions;if(null!=v&&""!==v){const _=Object.values(v);if(console.log("question",_),_.length>0){let E=((n={})=>{const e=document.createElement("div");e.classList.add("questionListContainerMain"),e.style.borderRadius="8px",e.style.padding="10px",e.style.backgroundColor="#f8f9fc";const t=document.createElement("p");t.style.maxHeight="150px",t.textContent="Suggested prompts",e.appendChild(t);const i=document.createElement("div");return i.classList.add("questionListContainer"),i.style.borderRadius="4px",e.appendChild(i),Object.entries(n).forEach(([s,r])=>{const o=document.createElement("div");o.classList.add("questionListItem"),o.style.display="flex",o.style.alignItems="center",o.style.padding="12px 16px",o.style.border="1px solid #E0E0E0",o.style.cursor="pointer",o.style.backgroundColor="#ffffff",o.setAttribute("onclick",`handleQuestionClick('${s}','${r}')`),o.addEventListener("mouseover",()=>{o.style.backgroundColor="#f5f5f5"}),o.addEventListener("mouseout",()=>{o.style.backgroundColor="transparent"});const a=document.createElement("img");a.src="assets/Icons/arrow-right.svg",a.style.marginRight="10px",a.style.width="16px",a.style.height="16px";const l=document.createElement("span");l.textContent=r,l.style.flex="1",o.appendChild(a),o.appendChild(l),i.appendChild(o)}),e.outerHTML})(t?.data[0].suggestionQuestions);a+=E}}this.isFirstInfo=!1}else{const p=r.assistantMessage?.warning?x0(r.assistantMessage?.warning):"";this.isInnerError=!0,this.showErrorText="No data found...!",t?.data[0].noResultFoundMsg?.length>0&&(this.isFirstInfo=!0),a=p+xL(t?.data[0].noResultFoundMsg,t?.screenView?t?.screenView:t?.data[0]?.assistantMessage?.screenView,this.common);let g=t&&t?.data.length>0&&t?.data[0]?.savedSearchList?.length>0?((n=[],e="",t="")=>{const i=document.createElement("div");i.style.borderRadius="8px",document.createElement("p").style.maxHeight="150px";const r=document.createElement("div");return r.classList.add("savedSearchListContainer"),i.appendChild(r),i.outerHTML})(t?.data[0].savedSearchList,t?.data[0].savedSearchNavigation,t?.screenName):"";a+=g,this.hideActios=!1,this.isOnlyInfo=!0}else r.assistantMessage?.activity&&(a+=`<div><b>${r.assistantMessage?.activity}</b></div>`,this.headerName=r.assistantMessage?.activity);else if("string"!=typeof r.assistantMessage||this.isMarkDown)"message"in r?a=r.message:this.isMarkDown||(a="Message not recognized.");else{if(0==i){const p=r?.assistantMessage?.split("<|INSTRUCTIONS-SECTION|>"),g=p[0]?.trim();let v=this.common?.formatMessage(p[0]?.trim()),_=this.common?.formatMessage(p[1]?.trim())||"";v=this.navigation(v,t),_=this.navigation(_,t),_=_?this.common.removeInstructions(_):"";const E=/^[^a-zA-Z0-9\s]+$/.test(g),b=/[^a-zA-Z0-9\s]/.test(g)&&/[a-zA-Z0-9]/.test(g);let V,T="";if(r?.citations&&r?.citations?.length>0){const M=r?.citations.map(D=>null!=D.url&&"null"!=D.url&&""!=D.url&&null!=D.url&&"undefined"!=D.url||null!=D.title&&"null"!=D.title&&""!=D.title&&null!=D.title&&"undefined"!=D.title?`<a id="ExternalLinks" href="javascript:openInMinimizedWindow('${D?.url}')" style="display:block;margin-bottom:5px;"><span>${D?.title}</span></a>`:"").join("");M?.length>0&&(T+=M?.length>0?`<div class="linkText"><br><strong></strong><br>${M}</div>`:"")}const N=this.completionId;b?(V=`\n                  <p>${v}</p>\n\n                  ${_?`\n                    <div class="moreText first">\n                      <p><h6>Instructions</h6></p>\n\n                      <div id="ViewInstructions_${N}" class="showBtn" onclick='toggleInstructions(this,${N})'>\n                        ${"shown"===sessionStorage.getItem(`instructionsState_${N}`)?"Hide":"View"}\n                      </div><div style="display: ${"shown"===sessionStorage.getItem(`instructionsState_${N}`)?"block":"none"};">\n                        <p>${_}</p>\n                      </div>\n                    </div>\n                    `:""}\n                   <div id="storedRefLinksContainer_${N}">\n                    ${T}\n                    </div>\n\n                `,a=V):E?(V=`\n                  <div class="noSummary">\n                  ${_?`\n                    <div class="moreText first">\n                      <p><h6>Instructions</h6></p>\n\n                      <div id="ViewInstructions_${N}" class="showBtn" onclick='toggleInstructions(this,${N})'>\n                        ${"shown"===sessionStorage.getItem(`instructionsState_${N}`)?"Hide":"View"}\n                      </div><div style="display: ${"shown"===sessionStorage.getItem(`instructionsState_${N}`)?"block":"none"};">\n                        <p>${_}</p>\n                      </div>\n                    </div>\n                    `:""}\n                  <div id="storedRefLinksContainer_${N}">\n                  ${T}\n                  </div>\n                  </div>\n                `,a=V):0==v?.length?(V=`\n                  <div class="noSummary">\n                    ${_?`\n                      <div class="moreText first">\n                        <p><h6>Instructions</h6></p>\n                        <div id="ViewInstructions_${N}" class="showBtn" onclick='toggleInstructions(this,${N})'>\n                          ${"shown"===sessionStorage.getItem(`instructionsState_${N}`)?"Hide":"View"}\n                        </div>\n                        <div style="display: ${"shown"===sessionStorage.getItem(`instructionsState_${N}`)?"block":"none"};">\n                          <p>${_}</p>\n                        </div>\n                      </div>\n                      `:""}\n                    <div id="storedRefLinksContainer_${N}">\n                      ${T||""}\n                    </div>\n                    <div>\n                  `,a=V):a=r?.assistantMessage}window.toggleInstructions=function(p,g){const v=p.nextElementSibling,_=`instructionsState_${g}`;"none"===v.style.display?(v.style.display="block",p.innerText="Hide",sessionStorage.setItem(_,"shown")):(v.style.display="none",p.innerText="View",sessionStorage.setItem(_,"hidden"))}}if(r.citations&&r.citations?.length>0){let p=/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi;this.common.videoContainer();const g=r.citations.map((v,_)=>p.test(v.video_urls)?`<div style="position: relative;z-index: 1;cursor:pointer;margin-top:15px;" id="VideoPlay" onclick="openVideo()">\n                <iframe width="100%" height="200" style="position: relative;z-index: -1;" src="${v.video_urls}" controls class="thumbnail-preview" allowfullscreen="true" allowfullscreen="allowfullscreen" webkitallowfullscreen="true" mozallowfullscreen="true" ></iframe>\n                </div>\n                  <div class="video-player-container" style="display:none;">\n                    <div class="video-main">\n                    <div class="video-header">\n                      <h4>${this.openSearchQuery?.charAt(0).toUpperCase()+this.openSearchQuery?.slice(1).toLowerCase()}</h4>\n                      <div class="imgSec">\n                        <img src="assets/Icons/minimize.svg" id=\u201dVideoMinimize\u201d onclick="toggleMiniPlayer()" alt="mimimize" class="minimizeIcon" />\n\n                        <img src="assets/Icons/maximize.svg" id=\u201dVideoMaximize\u201d onclick="toggleMaxPlayer()" alt="maximize" class="maximizeIcon" />\n                        <img src="assets/Icons/Close.svg" id=\u201dVideoClose\u201d onclick="closeVideo()" alt="close" class="closeIcon" />\n                      </div>\n                    </div>\n                    <iframe id="videoPlayer" width="100%" src="${v.video_urls}" controls class="thumbnail-preview" allowfullscreen="true" allowfullscreen="allowfullscreen" webkitallowfullscreen="true" mozallowfullscreen="true" ></iframe>\n                  </div>\n                  </div>\n                `:"").join("");a+=g?.length>0?`<div class="videoCont">${g}</div>`:""}if(i){let p=this.messages.length-1;this.messages[p].completionId=t?.data[0]?.completionId;let g=this.messages[p].text+a;this.messages[p].isStreamStarted=!1,this.messages[p].text=this.sanitizer.bypassSecurityTrustHtml(g),this.messages[p].savedQuery="Saved Prompt"==t?.data[0].category,this.messages[p].saveQuery="Saved Prompt"!=t?.data[0].category&&!this.isOnlyInfo,this.messages[p].like=!0,this.messages[p].dislike=!0}else this.isMarkDown||(this.messages.push({user:"GEMS AI",text:this.sanitizer.bypassSecurityTrustHtml(a),completionId:t?.data[0]?.completionId?t?.data[0]?.completionId:t?.conversationId,clicked:!1,like:!this.isOnlyInfo,liked:!1,dislike:!this.isOnlyInfo,disliked:!1,saveQuery:"Saved Prompt"!=t?.data[0].category&&!this.isOnlyInfo,savedQuery:"Saved Prompt"==t?.data[0].category,isStreamStarted:!1,copy:!this.isOnlyInfo,clickedTooltip:!1,showTooltip:!!this.isShowTooltip,info:this.info,isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions,summary:d}),this.isOnlyInfo=!1,this.chatId=t?.chatId||t?.data?.[0]?.chatId,console.log("chat id 5",this.chatId));this.cdr.detectChanges(),this.log.info(r,"chatResponse"),this.chatId=t?.chatId?t?.chatId:t?.data?.chatId?t?.data?.chatId:t?.data?.[0]?.chatId?t?.data?.[0]?.chatId:this.chatId,this.isSendingMessage=!0,this.shouldScroll=!0,this.scrollSlightlyBelowCurrentPosition(150),document.querySelectorAll(".content-list").forEach(p=>{"undefined"===p.textContent?.trim()&&(p.textContent="")})}else if(t&&t.data){const r=t?.data;let a="";if(this.questionID=null,Date.now(),this.chatId=t?.chatId,"string"==typeof r.assistantMessage&&this.messages.push({user:"GEMS AI",text:this.sanitizer.bypassSecurityTrustHtml(r.assistantMessage),clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:!1,stopApi:!1}),r?.response?.htmlFormat){let c=r.response.htmlFormat,u=c;this.common.getWidgetContextToken();const g=VT((new DOMParser).parseFromString(c,"text/html").body.innerHTML),v=`expand-btn-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;return u=`\n                    <div style="position: relative; padding: 1rem;">\n                      \n                        <div id="${v}" style="position: absolute; top: 0.5rem; right: 0.5rem; cursor: pointer;">\n                          <svg width="19" height="19" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg">\n                            <path d="M13.9221 3.95833H11.0833V2.375H16.625V7.91667H15.0417V5.07792L11.6431 8.47645L10.5235 7.35687L13.9221 3.95833ZM2.375 11.0833H3.95833V13.9221L7.35687 10.5235L8.47645 11.6431L5.07792 15.0417H7.91667V16.625H2.375V11.0833Z" fill="black"/>\n                          </svg>\n                        </div>\n                        \n                      ${c}\n                    </div>\n                  `,setTimeout(()=>{const E=document.getElementById(v);E&&E.addEventListener("click",function(){console.log("Expanded view triggered"),window.parent.$find("GEMSTabManager").expandAiResponse(g)})},0),a=this.sanitizer.bypassSecurityTrustHtml(u),this.isOnlyInfo=!0,this.hideActios=!0,this.ShowFeedbackActions=!0,this.isInnerError=!1,this.isFirstInfo=!1,this.messages.push({user:"GEMS AI",text:a,completionId:t?.data[0]?.completionId?t?.data[0]?.completionId:t?.conversationId,clicked:!1,like:!0,liked:!1,dislike:!0,disliked:!1,saveQuery:!0,savedQuery:!1,isStreamStarted:!1,copy:!0,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:!0,type:"info"}),void this.cdr.detectChanges()}}else{let r="";this.log.info("test",this.featureSelected),this.featureSelected=t.data.selected_features,this.primarySchema=t.data.screens,this.chatId=t.chatId,this.conversationId=t.conversationId,"secondary_screens"in t.data&&(this.secondarySelection=t.data.secondary_screens),r?(r+=(n=>(window.handleSearch=function(e){e.preventDefault(),n()},'\n        <div class="button-container">\n            <span id="SelectScreen" class="search-button" id="search-button" disabled onclick="handleSearch(event)">Submit</span>\n            \n        </div>\n    '))(this.callUserQuery),this.messages.push({user:"GEMS AI",text:this.sanitizer.bypassSecurityTrustHtml(r),clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions})):this.messages.push({user:"GEMS AI",text:t?.data?.assistantMessage,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions})}}else if(500===t?.statusCode||502===t?.statusCode){this.messages.push({user:"GEMS AI",text:this.errorMsg.errorStatus.errors.apiError,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!0,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions}),this.refresh=!0,this.isTyping=!1;const r=this.messages.findIndex(o=>"status"===o.type);r>-1&&this.messages.splice(r,1),setTimeout(()=>{const o=this.messages.findIndex(a=>"status"===a.type);o>-1&&this.messages.splice(o,1)},1e3)}else if(503===t?.statusCode){this.isTyping=!1;const r=this.messages.findIndex(o=>"status"===o.type);r>-1&&this.messages.splice(r,1),setTimeout(()=>{const o=this.messages.findIndex(a=>"status"===a.type);o>-1&&this.messages.splice(o,1)},1e3)}else if(401==t?.statusCode||403==t?.statusCode){this.refreshToken();const r=this.messages.findIndex(o=>"status"===o.type);r>-1&&this.messages.splice(r,1),setTimeout(()=>{const o=this.messages.findIndex(a=>"status"===a.type);o>-1&&this.messages.splice(o,1)},1e3)}if(t?.statusCode>1e4){this.isTyping=!1,this.statusList=[];const r=this.messages.findIndex(c=>"status"===c.type);r>-1&&this.messages.splice(r,1),setTimeout(()=>{const c=this.messages.findIndex(u=>"status"===u.type);c>-1&&this.messages.splice(c,1)},1e3),console.log("status hidden 3"),this.chatId=t?.chatId?t?.chatId:t?.data?.chatId?t?.data?.chatId:this.chatId,this.isShowTooltip=!1,this.errorHandle();const o=this.userRole,a=t?.statusCode;this.log.info("this.userrole",o);const l=this.errorMsg.getErrorMessage(a,o);if(console.log("error code::",t?.statusCode),10403==t?.statusCode||10422==t?.statusCode)return console.log("422 1"),void this.messages.push({user:"GEMS AI",text:l,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions});if(11422==t?.statusCode){let c="";const u=t?.error?.response?.errormessage;return c=TL(this.newchatFunction.bind(this)),this.messages.push({user:"GEMS AI",text:u,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions,reasoningButtons:!0,isContinue:!1,markdown:!0}),this.isSendingMessage=!0,void(this.isReasoningSendingMessage=!0)}if(13204==t?.statusCode){const u=t?.error?.response?.errormessage;return void this.messages.push({user:"GEMS AI",text:u,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions,reasoningButtons:!1,isContinue:!1,markdown:!0})}10401==t?.statusCode?(this.messages.push({user:"GEMS AI",text:this.errorMsg.errorStatus.errors.refreshToken,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!0,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions}),this.cdr.detectChanges(),this.refreshToken()):(this.messages.push({user:"GEMS AI",text:l,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!0,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions}),this.refresh=!0)}}catch{this.errorHandle(),this.messages.push({user:"GEMS AI",text:this.errorMsg.errorStatus.errors.defaultError,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!0,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions}),this.refresh=!0}}refreshToken(){var i,t=this;setTimeout(()=>{this.isTyping=!1,this.isSendingMessage=!0,this.showInitialLoader=!0},10),this.api.refreshToken().subscribe({next:(i=cn(function*(s){t.scrollToBottom(),t.isTyping=!1,t.isSendingMessage=!0;let o={...t.common.getFullAccessToken(),AccessToken:s?.result?.accessToken??"",RefreshToken:s?.result?.refreshToken??""};sessionStorage.setItem("widgetAccessKey",JSON.stringify(o));let a=sessionStorage.getItem("storeUserFeedback");return console.log(a,"storeFeedback"),t.historyTimeOut?(t.initailLoaderOnrefresh=!1,t.showInitialLoader=!1,void t.lastConversation()):a?(t.initailLoaderOnrefresh=!1,t.showInitialLoader=!1,void t.api.sendUserSatisfaction(a).subscribe({next:l=>{t.feedbackSubmit=!1,t.messages[t.currentMessageIndex].dislike=!1,t.messages[t.currentMessageIndex].disliked=!0,t.messages[t.currentMessageIndex].liked=!1,t.messages[t.currentMessageIndex].like=!0,t.cdr.detectChanges(),sessionStorage.removeItem("storeUserFeedback"),t.showToastMessage(t.errorMsg.errorStatus.errors.feedbackMessage,t.currentMsg)},error:l=>{("G202005"==l?.error?.code||"G202005"==l?.code)&&t.refreshToken(),t.isTyping=!1,t.log.error(l,"user satisfaction error")}})):(console.log(t.chatId,"this.chatId inside refresh"),(null==t.chatId||null==t.chatId)&&(yield t.getChatID()),setTimeout(()=>{t.isTyping=!1,t.isSendingMessage=!1},700),void setTimeout(cn(function*(){t.initailLoaderOnrefresh=!1,t.showInitialLoader=!1,t.newMessage=t.previousMessage,t.addNewMessage()}),1100))}),function(r){return i.apply(this,arguments)}),error:i=>{this.isTyping=!1,this.showInitialLoader=!1,this.isSendingMessage=!1;const s=this.errorMsg?.errorStatus?.errors?.refreshTokenError;this.statusList=[];const r=this.messages.findIndex(o=>"status"===o.type);r>-1&&this.messages.splice(r,1),setTimeout(()=>{const o=this.messages.findIndex(a=>"status"===a.type);o>-1&&this.messages.splice(o,1)},1e3),this.messages.push({user:"GEMS AI",text:s,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions}),this.cdr.detectChanges(),this.scrollToBottom()}})}addReplyMessage(t=!1,i){sessionStorage.removeItem("multiEntries"),document.querySelectorAll(".entityMatch").forEach(d=>d.classList.add("hide-section")),document.querySelectorAll(".entity-ok-button").forEach(d=>d.classList.add("disabledBtn"));const o=this.newMessage.trim();this.stopApi=!1,this.refresh=!1,this.isApiCallActive=!0;let a="",l=JSON.parse(sessionStorage.getItem("initializeData")||"{}");this.userRole=l?.userRole?.replace(/ .*/,"");this.statusList=[];const u=this.messages.findIndex(d=>"status"===d.type);if(u>-1&&this.messages.splice(u,1),setTimeout(()=>{const d=this.messages.findIndex(h=>"status"===h.type);d>-1&&this.messages.splice(d,1)},1e3),o){let d=Fo.sanitize(o);if(d=d.replace(/</g,"&lt;").replace(/>/g,"&gt;"),d?.length>0){t||this.messages.push({user:"You",text:d,clicked:!1,like:!0,liked:!1,dislike:!0,disliked:!1,saveQuery:!0,savedQuery:!1,copy:!0,clickedTooltip:!1,showTooltip:!0,info:this.info,isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions}),this.previousMessage=d,this.newMessage="",this.showLoader=!0,this.isTyping=!0,this.cdr.detectChanges(),this.shouldScroll=!0,this.scrollSlightlyBelowCurrentPosition(100),"string"==typeof this.userRole?this.userRole=this.userRole?.replace(/ .*/,""):this.log.info("userRole is not a string");let h=d;const f=sessionStorage.getItem("widgetcontextdata");if(f){let p=null;const g=JSON.parse(f),v=g?.ContextData?.nudgeValue;v&&"string"==typeof v&&v.trim().length>0&&(h=v.trim()),g.ContextData?.contextQuery&&(p=g.ContextData.contextQuery,p&&(g.ContextData.selectionAction="Conversation"),delete g.ContextData.contextQuery),delete g.ContextData.contextQuery,delete g.ContextData.defaultNudge,this.documentAnalysis||(this.documentAnalysis={...g.ContextData})}else this.documentAnalysis||(this.documentAnalysis=null);console.log("Transformed documentData:",this.documentAnalysis),this.payload={chatId:this.chatId,conversationId:this.isreRun?null:this.isEntityMatch&&this.conversationId?this.conversationId:null,prompt:h,questionId:this.isreRun?null:this.questionID?this.questionID:null,featureSelected:this.isreRun?null:this.featureSelected?this.featureSelected:null,primarySchema:this.isreRun?[]:this.primarySchema?this.primarySchema:[],secondarySelection:this.isreRun?[]:this.secondarySelection?this.secondarySelection:[],savedSearchSchema:this.isreRun?null:i||null,entityObject:this.isreRun?null:this.entityObject?this.entityObject:null,documentAnalysis:this.documentAnalysis??null},sessionStorage.removeItem("prompt"),this.log.info("payload::",this.payload),this.payload.documentAnalysis||(this.isSendingMessage=!1,this.cdr.detectChanges()),this.isSendingMessage=!0,this.openSearchQuery=d,this.isreRun=!1;{let v,p="",g=!1;this.isShowTooltip=!1,this.info="",this.conversationId=null,this.statusList=[];const _=this.messages.findIndex(E=>"status"===E.type);_>-1&&this.messages.splice(_,1),setTimeout(()=>{const E=this.messages.findIndex(b=>"status"===b.type);E>-1&&this.messages.splice(E,1)},1e3),setTimeout(()=>{const E={chatId:this.chatId};this.isTyping=!this.stopApi,console.log(this.isTyping,"this.isTyping 2"),this.callExecuteApi||this.stream.statusStream(E).subscribe({next:b=>{const T=b?.status?.value?.toLowerCase?.();if(["timeout","done","error"].some(V=>T?.includes(V)))return console.log("inside done"),_>-1&&this.messages.splice(_,1),void setTimeout(()=>{const V=this.messages.findIndex(N=>"status"===N.type);V>-1&&this.messages.splice(V,1)},1e3);if(this.isstreaming=!0,this.isTyping=!this.stopApi,this.streamStatus=!0,this.ShowFeedbackActions=!0,b?.status){this.isTyping=!1;const V=b.status.value.toLowerCase(),N=this.common.getMappedStatus(V);this.statusList?.length&&(this.statusList[0].completed=!0),this.statusList=[{text:N,completed:!1}];const M=this.messages.length-1;if(0===this.messages.filter(L=>L.completionId===b.status.conversationId).length)M>-1&&"status"===this.messages[M].type?this.messages[M].statusList=[...this.statusList]:this.messages.push({type:"status",statusList:[...this.statusList],ShowFeedbackActions:1==this.ShowFeedbackActions,stopApi:this.stopApi});else{this.statusList=[];const L=this.messages.findIndex(ne=>"status"===ne.type);L>-1&&this.messages.splice(L,1),setTimeout(()=>{const ne=this.messages.findIndex(j=>"status"===j.type);ne>-1&&this.messages.splice(ne,1)},1e3)}this.scrollToBottom(),this.cdr.detectChanges()}},error:b=>{this.streamStatus=!1,this.isTyping=!1,console.log(b,"status error"),this.isTyping=!!b.includes("Status: 422")},complete:()=>{this.streamStatus=!1,this.statusList?.length&&(this.statusList[0].completed=!0)}})},500),this.api.sendStreamMessage(this.payload,this.callExecuteApi,this.executeApiPayload).pipe(aL(()=>this.isApiCallActive),Fn(E=>E.type===$r.DownloadProgress||E instanceof Na),Ve(E=>{this.callExecuteApi=!1,this.executeApiPayload=null,this.reasoningPayload=!1;let b=[];const T=E.partialText;b=T?.replace("data:[DONE]","")?.replace("\n","")?.replace("\n\n","")?.trim()?.split("data:");try{let V=b[1]?.trim();if(V&&V.startsWith("Error:")){V=V.replace("Error: ",""),V=V.replace(/'/g,'"').replace(/None/g,"null");const N=JSON.parse(V);if(10429===N.statusCode){const L=this.errorMsg.getErrorMessage(N.statusCode,this.userRole);this.messages.push({user:"GEMS AI",text:L,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions})}}}catch{}return!!T&&(b=T?.replace("data:[DONE]","")?.replace("\n","")?.replace("\n\n","")?.trim()?.split("data:"),b.map(N=>{let M=N;if(this.common.isJsonString(M)){let D=JSON.parse(M);if("assistantMessage"in D)return g||(this.messages.push({user:"GEMS AI",text:"",clicked:!1,like:!0,liked:!1,dislike:!0,disliked:!1,saveQuery:!0,savedQuery:!1,copy:!0,clickedTooltip:!1,showTooltip:!!this.isShowTooltip,info:this.info,isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions}),g=!0),D.assistantMessage;if("statusCode"in D&&200===D?.statusCode&&D?.data.length>0&&"assistantMessage"in D?.data[0]){sessionStorage.removeItem("widgetcontextdata"),v=D,this.completionId=D?.data[0]?.completionId;let L=D?.data[0].citations;if(L&&L.length>0){const ne=L.map(j=>null!=j.url&&"null"!==j.url&&""!==j.url||null!=j.title&&"null"!==j.title&&""!==j.title?`<a id="ExternalLinks" href="javascript:openInMinimizedWindow('${j.url}')" style="display:block;margin-bottom:5px;">\n                                  <span>${j.title}</span>\n                                </a>`:"").join("");ne.length>0&&(a=`<div class="linkText"><br><strong></strong><br>${ne}</div>`)}}else if(D&&"statusCode"in D&&Array.isArray(D.data)&&"object"==typeof D.data[0]&&null!==D.data[0]&&"message"in D.data[0]&&D.data[0]?.message)v=D,this.completionId=D?.data[0]?.completionId;else if(D?.statusCode>1e4){this.isTyping=!1,this.statusList=[];const L=this.messages.findIndex(ne=>"status"===ne.type);if(L>-1&&this.messages.splice(L,1),setTimeout(()=>{const ne=this.messages.findIndex(j=>"status"===j.type);ne>-1&&this.messages.splice(ne,1)},1e3),console.log("status hidden 7"),this.cdr.detectChanges(),this.chatId=D?.chatId?D?.chatId:D?.data?.chatId?D?.data?.chatId:this.chatId,this.isShowTooltip=!1,g)v=D;else{this.errorHandle();const ne=this.userRole,j=D?.statusCode,X=this.errorMsg.getErrorMessage(j,ne);if(10403==D?.statusCode||10422==D?.statusCode)return console.log("422 4"),void this.messages.push({user:"GEMS AI",text:X,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions});if(11422==D?.statusCode){let Ye="";const ot=D?.error?.response?.errormessage;return Ye=TL(this.newchatFunction.bind(this)),this.messages.push({user:"GEMS AI",text:ot,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions,reasoningButtons:!0,isContinue:!1,markdown:!0}),this.isSendingMessage=!0,void(this.isReasoningSendingMessage=!0)}if(13204==D?.statusCode){const ot=D?.error?.response?.errormessage;return void this.messages.push({user:"GEMS AI",text:ot,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions,reasoningButtons:!1,isContinue:!1,markdown:!0})}10401==D?.statusCode||"G202005"==D?.code?(this.isTyping=!0,this.isSendingMessage=!0,this.messages.push({user:"GEMS AI",text:this.errorMsg.errorStatus.errors.refreshToken,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!0,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions}),this.cdr.detectChanges(),this.refreshToken()):(this.messages.push({user:"GEMS AI",text:X,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!0,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions}),this.refresh=!0,this.cdr.detectChanges())}}else v=D;this.responseData=D}}))})).pipe(As(this.unsubscribe$),aL(()=>this.isApiCallActive)).subscribe({next:E=>{if(this.isEntityMatch=!1,this.ShowFeedbackActions=!0,"EntityMatchView"==v?.screenView&&v?.data[0]?.assistantMessage?.result?.length>0){this.screenView=!0,this.ShowFeedbackActions=!1,this.isTyping=!1,this.statusList=[];const b=this.messages.findIndex(T=>"status"===T.type);console.log("index hidden 5"),b>-1&&this.messages.splice(b,1),setTimeout(()=>{const T=this.messages.findIndex(V=>"status"===V.type);T>-1&&this.messages.splice(T,1)},1e3)}else{this.statusList=[];const b=this.messages.findIndex(T=>"status"===T.type);b>-1&&this.messages.splice(b,1),setTimeout(()=>{const T=this.messages.findIndex(V=>"status"===V.type);T>-1&&this.messages.splice(T,1)},1e3),console.log("status hidden 8"),console.log(v?.screenView,"last event 1"),this.cdr.detectChanges()}if(this.isTyping=!1,this.showLoader=!0,E?.length>0&&g){let b=this.messages.length-1,T=E.join("");const V=T?.split("<|INSTRUCTIONS-SECTION|>"),N=V[0]?.trim();let M=V[1]?.trim();M=M?this.common.removeInstructions(M):"";let D=this.common?.formatMessage(V[0]?.trim()),L=this.common?.formatMessage(M)||"";D=this.navigation(D,this.responseData),L=this.navigation(L,this.responseData);const ne=/^[^a-zA-Z0-9\s]+$/.test(N),j=/[^a-zA-Z0-9\s]/.test(N)&&/[a-zA-Z0-9]/.test(N),X=this.completionId;let Ye;j?(Ye=`\n                    <p>${D}</p>\n\n                    ${L?`\n                      <div class="moreText first">\n                        <p><h6>Instructions</h6></p>\n                        <div id="ViewInstructions_${X}" class="showBtn" onclick='toggleInstructions(this,${X})'>\n                          ${"shown"===sessionStorage.getItem(`instructionsState_${X}`)?"Hide":"View"}\n                        </div>\n                        <div style="display: ${"shown"===sessionStorage.getItem(`instructionsState_${X}`)?"block":"none"};">\n                          <p>${L}</p>\n                        </div>\n                      </div>\n                      `:""}\n                    <div id="storedRefLinksContainer_${X}">\n                      ${a||""}\n                    </div>\n                  `,p=Ye):ne||0==D?.length?(Ye=`\n                    ${L?`\n                        <div class="moreText second">\n                          <p><h6>Instructions</h6></p>\n                          <div id="ViewInstructions_${X}" class="showBtn" onclick='toggleInstructions(this,${X})'>\n                            ${"shown"===sessionStorage.getItem(`instructionsState_${X}`)?"Hide":"View"}\n                          </div>\n                          <div style="display: ${"shown"===sessionStorage.getItem(`instructionsState_${X}`)?"block":"none"};">\n                            <p>${L}</p>\n                          </div>\n                        </div>\n                        `:""}\n                    <div id="storedRefLinksContainer_${X}">\n                      ${a||""}\n                    </div>\n                  `,p=Ye):p=T,window.toggleInstructions=function(ot,Rn){const Z=ot.nextElementSibling,K=`instructionsState_${Rn}`;"none"===Z.style.display?(Z.style.display="block",ot.innerText="Hide",sessionStorage.setItem(K,"shown")):(Z.style.display="none",ot.innerText="View",sessionStorage.setItem(K,"hidden"))},this.messages[b].text=p,this.messages[b].isStreamStarted=!0}},error:E=>{this.log.error("Stream error:",E),this.isEntityMatch=!1,this.isTyping=!1,this.showLoader=!0,this.errorMsg.getErrorMessage(401,this.userRole);const V=this.messages.findIndex(N=>"status"===N.type);if(V>-1&&this.messages.splice(V,1),setTimeout(()=>{const N=this.messages.findIndex(M=>"status"===M.type);N>-1&&this.messages.splice(N,1)},1e3),401==E.status||"G202005"==E?.error?.code||"G202005"==E?.code){console.log(E.status,"err.status"),this.refreshToken();const N=this.messages.findIndex(M=>"status"===M.type);N>-1&&this.messages.splice(N,1),setTimeout(()=>{const M=this.messages.findIndex(D=>"status"===D.type);M>-1&&this.messages.splice(M,1)},1e3)}else if(500===E.status||502===E.status){this.isTyping=!1;const N=this.messages.findIndex(M=>"status"===M.type);if(N>-1&&this.messages.splice(N,1),setTimeout(()=>{const M=this.messages.findIndex(D=>"status"===D.type);M>-1&&this.messages.splice(M,1)},1e3),"EntityMatchView"==v?.screenView&&v?.data[0]?.assistantMessage?.result?.length>0){this.screenView=!0,this.ShowFeedbackActions=!1,this.isTyping=!1,this.statusList=[];const M=this.messages.findIndex(D=>"status"===D.type);M>-1&&this.messages.splice(M,1),setTimeout(()=>{const D=this.messages.findIndex(L=>"status"===L.type);D>-1&&this.messages.splice(D,1)},1e3)}else{this.statusList=[];const M=this.messages.findIndex(D=>"status"===D.type);M>-1&&this.messages.splice(M,1),setTimeout(()=>{const D=this.messages.findIndex(L=>"status"===L.type);D>-1&&this.messages.splice(D,1)},1e3),console.log("status hidden 9")}this.messages.push({user:"GEMS AI",text:this.errorMsg.errorStatus.errors.apiError,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!0,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions}),this.refresh=!0}else if(503===E.status){this.isTyping=!1;const N=this.messages.findIndex(M=>"status"===M.type);N>-1&&this.messages.splice(N,1),setTimeout(()=>{const M=this.messages.findIndex(D=>"status"===D.type);M>-1&&this.messages.splice(M,1)},1e3),this.errorHandle(),this.messages.push({user:"GEMS AI",text:this.errorMsg.errorStatus.errors.defaultError,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!0,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions}),this.refresh=!0}else this.errorHandle(),this.messages.push({user:"GEMS AI",text:this.errorMsg.errorStatus.errors.defaultError,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!0,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions}),this.refresh=!0;this.isSendingMessage=!1},complete:()=>{this.isEntityMatch=!1,this.statusList=[];const E=this.messages.findIndex(b=>"status"===b.type);if(E>-1&&this.messages.splice(E,1),setTimeout(()=>{const b=this.messages.findIndex(T=>"status"===T.type);b>-1&&this.messages.splice(b,1)},1e3),this.ShowFeedbackActions=!0,"EntityMatchView"==v?.screenView&&v?.data[0]?.assistantMessage?.result?.length>0?(this.screenView=!0,this.ShowFeedbackActions=!1,this.isTyping=!1):(console.log("status hidden 1"),console.log(v?.screenView,"lastEvent -------"),this.cdr.detectChanges()),g&&v?.statusCode>1e4){this.isTyping=!1;const b=this.messages.findIndex(M=>"status"===M.type);b>-1&&this.messages.splice(b,1),setTimeout(()=>{const M=this.messages.findIndex(D=>"status"===D.type);M>-1&&this.messages.splice(M,1)},1e3),this.chatId=v?.chatId?v?.chatId:v?.data?.chatId?v?.data?.chatId:this.chatId;let T=this.messages.length-1;this.isShowTooltip=!1;const V=this.userRole,N=this.errorMsg.getErrorMessage(v?.statusCode,V);if(10403==v?.statusCode||10422==v?.statusCode)return console.log("422 five"),void this.messages.push({user:"GEMS AI",text:N,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions});10401==v?.statusCode||"G202005"==v?.code?(this.isTyping=!0,this.showLoader=!0,this.isSendingMessage=!0,this.messages.push({user:"GEMS AI",text:this.errorMsg.errorStatus.errors.refreshToken,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!0,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions}),this.cdr.detectChanges(),this.refreshToken()):(this.messages[T]={user:"GEMS AI",text:N,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!0,isstreaming:!1,status:""},this.refresh=!0)}else this.handleResponse(v,g),this.isSendingMessage=!1,this.cdr.detectChanges();if(this.shouldScroll=!1,this.isSendingMessage=!1,this.ShowFeedbackActions=!0,setTimeout(()=>{requestAnimationFrame(()=>{document.querySelectorAll(".live-agent").forEach(T=>{T.addEventListener("click",this.talktoagent.bind(this))})})},100),"EntityMatchView"==v?.screenView&&v?.data[0]?.assistantMessage?.result?.length>0){this.screenView=!0,this.ShowFeedbackActions=!1,this.isTyping=!1,this.statusList=[];const b=this.messages.findIndex(T=>"status"===T.type);b>-1&&this.messages.splice(b,1),setTimeout(()=>{const T=this.messages.findIndex(V=>"status"===V.type);T>-1&&this.messages.splice(T,1)},1e3)}else{this.statusList=[];const b=this.messages.findIndex(T=>"status"===T.type);b>-1&&this.messages.splice(b,1),setTimeout(()=>{const T=this.messages.findIndex(V=>"status"===V.type);T>-1&&this.messages.splice(T,1)},1e3),this.streamStatus=!1,this.isTyping=!1,console.log("status hidden 2"),this.cdr.detectChanges()}}})}}else this.isSendingMessage=!1,this.toastr.error("You have entered wrong text","Major Error",{timeOut:5e3});this.cdr.detectChanges()}}navigation(t,i){const s=i.data?.[0]?.navigation_links?i.data?.[0]?.navigation_links:i.data?.[0]?.navigationLinks;return s&&Object.keys(s).forEach(r=>{const a=s[r]?.replace(/'/g,"\\'");this.log.info(a,"escapedLink");const l=new RegExp(r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"gi");t=t?.replace(l,`<a id="${r.replace(/\s/g,"")}" href="javascript:void(0);" style="color: #008080;" onclick="handleNavigation('${a}')">${r}</a>`)}),t}historyNavigation(t,i){return i&&Object.keys(i).forEach(s=>{const o=i[s]?.replace(/'/g,"\\'");this.log.info(o,"escapedLink");const a=new RegExp(s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"gi");t=t?.replace(a,`<a id="${s.replace(/\s/g,"")}" href="javascript:void(0);" style="color: #008080;" onclick="handleNavigation('${o}')">${s}</a>`)}),t}scrollToBottom(){try{this.shouldScroll&&(this.myScrollContainer.nativeElement.scrollTop=this.myScrollContainer.nativeElement.scrollHeight)}catch(t){this.log.error(t,"scroll to bottom error")}}scrollSlightlyBelowCurrentPosition(t=100){try{if(this.shouldScroll){const i=this.myScrollContainer.nativeElement;i.scrollTo({top:i.scrollTop+t,behavior:"smooth"})}}catch(i){this.log.error("scroll to bottom error",i)}}copyMessage(t,i,s){const r=s.innerHTML,o=document.createElement("div");o.innerHTML=r,o.querySelectorAll("a").forEach(u=>{let d=u.getAttribute("href");if(d&&d.startsWith("javascript:openInMinimizedWindow")){const h=d.match(/'([^']+)'/);h&&h[1]?u.setAttribute("href",h[1]):u.removeAttribute("href")}}),o.querySelectorAll("#ExternalLinks").forEach(u=>{const d=u,h=document.createElement("p");h.appendChild(d.cloneNode(!0)),d.replaceWith(h),d.style.display="block",d.style.marginBottom="5px"}),document.body.appendChild(o),o.querySelectorAll(".Multiple-record, .Multiple-record.list").forEach(u=>{const d=document.createElement("br");u.appendChild(d)}),navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([o.innerHTML],{type:"text/html"}),"text/plain":new Blob([o.innerText],{type:"text/plain"})})]).then(()=>{this.showToastMessage("Copied!",i)}).catch(u=>{this.log.error("Failed to copy: ",u)}),document.body.removeChild(o)}toggleTooltip(t,i){this.infoIndex=!1;const s=i?.text?.changingThisBreaksApplicationSecurity,a=(new DOMParser).parseFromString(s,"text/html").querySelector(".card-wrapper");this.infoIndex=1==t&&!a,this.shouldScroll=!1,this.messages.forEach((c,u)=>{c.clickedTooltip=!1}),this.messages[t].clickedTooltip=!0}onDocumentClick(t){const i=t.target;!i.closest(".info-icon")&&!i.closest(".tooltip-text")&&this.messages.forEach(s=>s.clickedTooltip=!1)}onCopyClick(t){this.shouldScroll=!1,this.messages[t].clicked=!0,setTimeout(()=>{this.messages[t].clicked=!1},2e3)}showToastMessage(t,i){i.toastMessage=t,i.showToast=!0,this.cdr.detectChanges(),setTimeout(()=>{i.showToast=!1,this.cdr.detectChanges()},2e3)}toggleVisibility(){this.showAvatar=!0,this.showGmsLogo=!1,this.showCoPilotActions=!1}toggleChatFrame(){this.maximize=!this.maximize}onBtnExport(){let t=this.getParams();this.gridApi.exportDataAsCsv(t)}getValue(t){let i=document.querySelector(t).value;switch(i){case"none":return;case"tab":return"\t";default:return i}}getParams(){return{columnSeparator:this.getValue("#columnSeparator")}}getLastConversation(){var i,t=this;this.showInitialLoader=!0,this.ShowFeedbackActions=!0,"string"==typeof this.userRole?this.userRole=this.userRole?.replace(/ .*/,""):this.log.info("userRole is not a string"),this.api.getrecentSearch().subscribe({next:i=>{this.historyTimeOut=!1,this.showInitialLoader=!1,this.historyofMessages=i?.data,this.isHistoryChat&&(this.chatId=i?.chat_id),this.lastQuestion=i?.data?.slice(-1)[0];let s=this.common?.transform(this.lastQuestion?.CreatedAt?.toString()),r=s.endsWith("m ago")&&parseInt(s)<=10;if(this.log.info(r,"last conversation timeago"),this.log.info(this.isWithinTwoMinutes,"recent conversation click time is <= 10 min"),(r||this.isWithinTwoMinutes)&&(this.isHistoryChat=!0,this.chatId=i?.chat_id,"string"==typeof this.userRole?this.userRole=this.userRole?.replace(/ .*/,""):this.log.info("userRole is not a string"),this.toggleVisibility(),this.addReplyMessage(!1,""),this.lastconversation||(this.lastconversation=!0,setTimeout(()=>{this.savedScrollPosition?this.restoreScroll():this.scrollToBottom()},30))),this.lastconversation){if(this.isFirstInfo=this.historyofMessages[0]?.Metadata?.noResultFoundMsg?.length>0,console.log(this.historyofMessages[0]?.Metadata?.noResultFoundMsg?.length>0,"resp length"),i?.chat_doc){const a=i.chat_doc.replace(/'/g,'"');let c=JSON.parse(a)?.ContextData?.selectionType;const u=this.getFormattedMessageForReasoningBot(c);this.messages.push({user:"GEMS AI",text:this.sanitizer.bypassSecurityTrustHtml(u),clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:this.info,isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions})}let o=!0;this.historyofMessages.forEach(a=>{let u,l="",c=a?.Metadata?.AssistantMessage||a?.Metadata?.EntityResults?.assistantMessage,d=null;if(1==a?.IsError){const h=this.userRole,f=a?.Metadata?.statusCode||a?.ErrorCode;let p="";p=11422===f||13204===f?a?.Error:this.errorMsg.getErrorMessage(f,h),u=p;let g=Fo.sanitize(a?.UserPrompt);g=g.replace(/</g,"&lt;").replace(/>/g,"&gt;"),(a?.ErrorCode>1e4||a?.Metadata?.statusCode>1e4)&&(this.isTyping=!1,this.messages.push({user:"You",text:g,completionId:a?.Id,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:!1}),this.messages.push({user:"GEMS AI",text:11422===f||13204===f?u:this.sanitizer.bypassSecurityTrustHtml(this.common.formatMessage(u)),completionId:a?.Id,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:!1,markdown:11422===f||13204===f}))}else if(a?.Metadata?.statusCode>1e4||a?.statusCode>1e4){this.isTyping=!1;const h=this.userRole;u=this.errorMsg.getErrorMessage(a?.Metadata?.statusCode||a?.statusCode,h);let g=Fo.sanitize(a?.UserPrompt);g=g.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.messages.push({user:"You",text:g,completionId:a?.Id,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:!1}),this.messages.push({user:"GEMS AI",text:this.sanitizer.bypassSecurityTrustHtml(this.common.formatMessage(u)),completionId:a?.Id,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:!1})}else if(a?.Category?.includes("Document Analysis")){if(this.isShowTooltip=!1,this.isOnlyInfo=!1,0==a?.IsError)if(a?.Metadata?.statusCode>1e4){this.isTyping=!1,this.chatId=this.chatId,this.isOnlyInfo=!1;const p=this.userRole,g=a?.Metadata?.statusCode,v=this.errorMsg.getErrorMessage(g,p);10404==a?.Metadata?.statusCode&&(u=v)}else if(c)try{let g=JSON.parse(c)?.htmlFormat||c;g=g.replace(/<ul[^>]*>/gi,'<div style="padding-left: 20px;">'),g=g.replace(/<\/ul>/gi,"</div>"),g=g.replace(/<li[^>]*>/gi,"<p>\u2022 "),g=g.replace(/<\/li>/gi,"</p>");const b=VT((new DOMParser).parseFromString(g,"text/html").body.innerHTML),T=`expand-btn-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;u=`\n                        <div style="position: relative; padding: 1rem;">\n                          \n                            <div id="${T}" style="position: absolute; top: 0.5rem; right: 0.5rem; cursor: pointer;">\n                              <svg width="19" height="19" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                <path d="M13.9221 3.95833H11.0833V2.375H16.625V7.91667H15.0417V5.07792L11.6431 8.47645L10.5235 7.35687L13.9221 3.95833ZM2.375 11.0833H3.95833V13.9221L7.35687 10.5235L8.47645 11.6431L5.07792 15.0417H7.91667V16.625H2.375V11.0833Z" fill="black"/>\n                              </svg>\n                            </div>\n                            \n                          ${g}\n                \n                        </div>\n                        `,setTimeout(()=>{const N=document.getElementById(T);N&&N.addEventListener("click",function(){console.log("Expanded view triggered"),window.parent.$find("GEMSTabManager").expandAiResponse(b)})},0)}catch(p){console.log("error:",p),u=c}let h="";const f=a?.Metadata?.documentRequest?.selectionItems;if(Array.isArray(f)&&f.length>0){const p="../../assets/Icons/pdf.png",g="../../assets/Icons/docx.png",v=f.map(_=>{const E=_?.documentName||"";return`\n                    <div style="display: flex; align-items: center; background-color:white; margin-bottom: 8px;">\n                    <img src="${"pdf"===(_?.documentType||"").toLowerCase()?p:g}" alt="Document Icon" style="width: 30px; height: 30px;object-fit:contain; margin-right: 10px;">\n                    <span style="font-size: 15px; color: #222;">${E}</span>\n                    </div>\n                  `}).join("");h=`\n                <div style="margin-bottom: 4px; font-size: 14px; color: #222;">\n                  You have selected the following document${f.length>1?"s":""}:\n                </div>${v}`}if(h&&o){console.log("first response document analysis"),this.messages.unshift({user:"GEMS AI",text:this.sanitizer.bypassSecurityTrustHtml(h),completionId:a?.Id,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:!1}),o=!1;let p=Fo.sanitize(a?.UserPrompt);p=p.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.messages.push({user:"You",text:p,completionId:a?.Id,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:!1});const g=this.sanitizer.bypassSecurityTrustHtml(u);this.messages.push({user:"GEMS AI",text:g,completionId:a?.Id,clicked:!1,like:1!=a?.UserSatisfaction,liked:1==a?.UserSatisfaction,dislike:-1!=a?.UserSatisfaction,disliked:-1==a?.UserSatisfaction,saveQuery:!a?.IsError,savedQuery:!1,isStreamStarted:!1,copy:!a?.IsError,clickedTooltip:!1,showTooltip:!!this.isShowTooltip,info:this.info,isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions})}else if(h){console.log("2nd response document analysis");const p=h+u;let g=Fo.sanitize(a?.UserPrompt);g=g.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.messages.push({user:"You",text:g,completionId:a?.Id,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:!1});const v=this.sanitizer.bypassSecurityTrustHtml(p);this.messages.push({user:"GEMS AI",text:v,completionId:a?.Id,clicked:!1,like:1!=a?.UserSatisfaction,liked:1==a?.UserSatisfaction,dislike:-1!=a?.UserSatisfaction,disliked:-1==a?.UserSatisfaction,saveQuery:!a?.IsError,savedQuery:!1,isStreamStarted:!1,copy:!a?.IsError,clickedTooltip:!1,showTooltip:!!this.isShowTooltip,info:this.info,isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions})}}else if(a?.Category?.includes("Help Bot")){if(this.isShowTooltip=!1,this.isOnlyInfo=!0,0==a?.IsError)if(a?.Metadata?.statusCode>1e4||a?.ErrorCode>1e4){this.isTyping=!1,this.chatId=this.chatId,this.isOnlyInfo=!1;const f=this.userRole,g=this.errorMsg.getErrorMessage(a?.Metadata?.statusCode||a?.ErrorCode,f);(10404==a?.Metadata?.statusCode||10404==a?.ErrorCode)&&(u=g)}else if(c){const f=a?.Metadata?.navigation_links?a?.Metadata?.navigation_links:a?.Metadata?.navigationLinks;this.log.info(f,"navlinks"),f&&Object.keys(f).forEach(N=>{const D=f[N]?.replace(/'/g,"\\'"),L=new RegExp(N.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"gi");c=c?.replace(L,`<a id="${N.replace(/\s/g,"")}" href="javascript:void(0);" style="color: teal" onclick="handleNavigation('${D}')">${N}</a>`)});const p=c?.split("<|INSTRUCTIONS-SECTION|>")||[],g=p[0]?.trim()||"";let v=p[1]?.trim()||"";v=v?this.common.removeInstructions(v):"";let _="";if(a?.Metadata?.citations){a.Metadata.citations=JSON.parse(a?.Metadata?.citations);let N=a?.Metadata?.citations?.map(M=>M?.url||M?.title?`<a id="ExternalLinks" href="javascript:openInMinimizedWindow('${M?.url}')" class="citations"><span>${M?.title}</span></a>`:"").join("")||"";N.length>0&&(_+=`<div><br><strong></strong><br>${N}</div>`)}const E=a?.Id;let b;const T=/^[^a-zA-Z0-9\s]+$/.test(g);/[^a-zA-Z0-9\s]/.test(g)&&/[a-zA-Z0-9]/.test(g)?(b=`\n                        <p>${g}</p>\n\n                        ${v?`\n                          <div class="moreText">\n                            <p><h6>Instructions</h6></p>\n\n                            <div id="ViewInstructions_${E}" class="showBtn" onclick="toggleInstructions(this,${E})">\n                              ${"shown"==sessionStorage.getItem(`instructionsState_${E}`)?"Hide":"View"}\n                            </div><div style="display: ${"shown"==sessionStorage.getItem(`instructionsState_${E}`)?"block":"none"};">\n                              <p>${v}</p>\n                            </div>\n                          </div>\n                          `:""}\n                        ${_}\n                      `,u=b):T||0==g?.length?(b=`\n                      ${v?`\n                        <div class="moreText">\n                          <p><h6>Instructions</h6></p>\n\n                          <div id="ViewInstructions_${E}" class="showBtn" onclick="toggleInstructions(this,${E})">\n                            ${"shown"==sessionStorage.getItem(`instructionsState_${E}`)?"Hide":"View"}\n                          </div><div style="display: ${"shown"==sessionStorage.getItem(`instructionsState_${E}`)?"block":"none"};">\n                            <p>${v}</p>\n                          </div>\n                        </div>\n                        `:""}\n                        ${_}\n                    `,u=b):u=c,window.toggleInstructions=function(N,M){const D=N.nextElementSibling,L=`instructionsState_${M}`;"none"===D.style.display?(D.style.display="block",N.innerText="Hide",sessionStorage.setItem(L,"shown")):(D.style.display="none",N.innerText="View",sessionStorage.setItem(L,"hidden"))}}if("Admin"==this.userRole&&u?.includes("live agent")&&(u=u?.replace(/live agent\./g,'<a id="IntercomChat" class="live-agent">live agent</a>.')),a?.Metadata?.citations){let f=/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi;this.common.videoContainer();const p=a?.Metadata?.citations?.map((g,v)=>f.test(g.video_urls)?`<div style="position: relative;z-index: 1;cursor:pointer;margin-top:15px;" id="VideoPlay" onclick="openVideo()">\n                              <iframe width="100%" height="200" style="position: relative;z-index: -1;" src="${g.video_urls}" controls class="thumbnail-preview" allowfullscreen="true" allowfullscreen="allowfullscreen" webkitallowfullscreen="true" mozallowfullscreen="true" ></iframe>\n                              </div>\n\n                              `:"").join("");l+=p?.length>0?`<div>${p}</div>`:""}d=this.sanitizer.bypassSecurityTrustHtml(this.common.formatMessage(u)+l);let h=Fo.sanitize(a?.UserPrompt);h=h.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.messages.push({user:"You",text:h,completionId:a?.Id,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:!1}),this.messages.push({user:"GEMS AI",text:d,completionId:a?.Id,clicked:!1,like:1!=a?.UserSatisfaction,liked:1==a?.UserSatisfaction,dislike:-1!=a?.UserSatisfaction,disliked:-1==a?.UserSatisfaction,saveQuery:!a?.IsError,savedQuery:!1,isStreamStarted:!1,copy:!a?.IsError&&!!this.isOnlyInfo,clickedTooltip:!1,showTooltip:!!this.isShowTooltip,info:this.info,isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions})}else if(a?.Category?.includes("Entity")||a?.Category?.includes("Saved Prompt")||a?.Category?.includes("Chat")){console.log(a,"resp?.Metadata?.noResultFoundMsg");let h="";if(a?.Metadata?.EntityResults?.info?(this.isShowTooltip=!0,this.info=a?.Metadata?.EntityResults?.info):this.isShowTooltip=!1,a?.Metadata?.EntityResults?.result?.length>0){this.isOnlyInfo=!0;const p=a?.Metadata?.EntityResults?.heading?`<div style="display: flex; margin-bottom: 14px; font-weight: 700; color: #93186C;">${a?.Metadata?.EntityResults?.heading}</div>`:"",g=a?.Metadata?.EntityResults?.warning?x0(a?.Metadata?.EntityResults?.warning):"";if(h=a?.Metadata?.EntityResults?.summary,1==a?.Metadata?.EntityResults?.result?.length){this.hideActios=!1;const v=a?.Metadata?.EntityResults?.result[0];let _=a?.Metadata?.EntityResults?.navigation_links;const E={...v,navlinks:_};this.isOnlyInfo=!1,d=this.sanitizer.bypassSecurityTrustHtml(p+g+cL(E,"",this.common))}else this.hideActios=!1,"DidYouMeanView"===a?.Metadata?.EntityResults?.screenView||"ListView"===a?.Metadata?.EntityResults?.screenView||"EntityMatchView"===a?.Metadata?.EntityResults?.screenView?(this.isOnlyInfo=!1,d=this.sanitizer.bypassSecurityTrustHtml(p+g+Vu(a?.Metadata?.EntityResults,this.common))):(this.isOnlyInfo=!1,d=this.sanitizer.bypassSecurityTrustHtml(g+Vu(a?.Metadata?.EntityResults,this.common)))}else if(a?.Metadata?.EntityResults?.navigationLinks){const p=a?.Metadata?.EntityResults?.assistantMessage;d=this.sanitizer.bypassSecurityTrustHtml(this.historyNavigation(p,a?.Metadata?.navigation_links||a?.Metadata?.EntityResults?.navigationLinks))}else a?.IsError?(this.isInnerError=!0,this.showErrorText="No data found...!",d=this.sanitizer.bypassSecurityTrustHtml(this.errorMsg?.errorStatus?.errors?.entityError),this.hideActios=!0,this.isOnlyInfo=!1):(this.isInnerError=!0,this.showErrorText="No data found...!",d=this.sanitizer.bypassSecurityTrustHtml(xL(a?.Metadata?.noResultFoundMsg?a?.Metadata?.noResultFoundMsg:this.showErrorText,a?.Metadata?.EntityResults?.screenView,this.common)),this.hideActios=!0,this.isOnlyInfo=!0);let f=Fo.sanitize(a?.UserPrompt);f=f.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.messages.push({user:"You",text:f,completionId:a?.Id,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,savedQuery:!1,saveQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions}),this.messages.push({user:"GEMS AI",text:d,completionId:a?.Id,clicked:!1,like:1!=a?.UserSatisfaction,liked:1==a?.UserSatisfaction,dislike:-1!=a?.UserSatisfaction,disliked:-1==a?.UserSatisfaction,savedQuery:!a?.IsError&&"Saved Prompt"==a?.Category,saveQuery:!a?.IsError&&"Saved Prompt"!=a?.Category,isStreamStarted:!1,copy:!a?.IsError&&!this.isOnlyInfo,clickedTooltip:!1,showTooltip:!!this.isShowTooltip,info:this.info,isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions,summary:h})}else if(a?.Category?.includes("SavedSearch")){if(Array.isArray(a?.Metadata?.EntityResults?.data[0]?.assistantMessage?.result)&&"object"==typeof a?.Metadata?.EntityResults?.data[0]?.assistantMessage?.result[0]){if("SavedView"==a?.Metadata?.EntityResults?.screenView&&"GroupChart"==a?.Metadata?.EntityResults?.data[0]?.assistantMessage?.EntityType){const f=`<div style="display: flex; margin-bottom: 14px; font-weight: 700; color: #93186C;">${a?.Metadata?.EntityResults?.data[0]?.assistantMessage?.heading?a?.Metadata?.EntityResults?.data[0]?.assistantMessage?.heading:"Saved Group Chart"}</div>`;this.isOnlyInfo=!1,d=this.sanitizer.bypassSecurityTrustHtml(f+dL(a?.Metadata?.EntityResults?.data[0]?.assistantMessage?.result,this.common))}else if("SavedView"===a?.Metadata?.EntityResults?.screenView&&null!=a?.Metadata?.EntityResults?.data[0]?.assistantMessage?.EntityType){const f=`<div style="display: flex; margin-bottom: 14px; font-weight: 700; color: #93186C;">${a?.Metadata?.EntityResults?.data[0]?.assistantMessage?.heading?a?.Metadata?.EntityResults?.data[0]?.assistantMessage?.heading:"Saved Search"}</div>`;this.isOnlyInfo=!1,d=this.sanitizer.bypassSecurityTrustHtml(f+lL(a?.Metadata?.EntityResults?.data[0]?.assistantMessage?.result,this.common))}let h=Fo.sanitize(a?.UserPrompt);h=h.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.messages.push({user:"You",text:h,completionId:a?.Id,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions}),this.messages.push({user:"GEMS AI",text:d,completionId:a?.Id,clicked:!1,like:1!=a?.UserSatisfaction,liked:1==a?.UserSatisfaction,dislike:-1!=a?.UserSatisfaction,disliked:-1==a?.UserSatisfaction,saveQuery:!a?.IsError,savedQuery:!1,isStreamStarted:!1,copy:!a?.IsError&&!this.isOnlyInfo,clickedTooltip:!1,showTooltip:!!this.isShowTooltip,info:this.info,isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions})}}else if(a?.Category?.includes("Reasoning Bot")){let h=Fo.sanitize(a?.UserPrompt);h=h.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.messages.push({user:"You",text:h,completionId:a?.Id,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions}),this.messages.push({user:"GEMS AI",text:c,completionId:a?.Id,clicked:!1,like:1!=a?.UserSatisfaction,liked:1==a?.UserSatisfaction,dislike:-1!=a?.UserSatisfaction,disliked:-1==a?.UserSatisfaction,saveQuery:!a?.IsError,savedQuery:!1,isStreamStarted:!1,copy:!a?.IsError&&!this.isOnlyInfo,clickedTooltip:!1,showTooltip:!!this.isShowTooltip,info:this.info,isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions,markdown:!0})}}),setTimeout(()=>{requestAnimationFrame(()=>{document.querySelectorAll(".live-agent").forEach(l=>{l.addEventListener("click",this.talktoagent.bind(this))})})},200),setTimeout(()=>{this.savedScrollPosition?this.restoreScroll():this.scrollToBottom()},30)}this.isHistoryChat=!1},complete:(i=cn(function*(){const s=JSON.parse(sessionStorage.getItem("widgetcontextdata")||"{}");if(s&&!t.widgetContextHandled){const o=s?.ContextData;(o&&o.selectionType?.trim()&&o.selectionAction?.trim()&&Array.isArray(o.selectionItems)&&o.selectionItems.length>0||o&&o.defaultNudge&&Object.keys(o.defaultNudge).length>0||o&&o.contextQuery&&o.contextQuery.length>0)&&(t.widgetContextHandled=!0,t.messages=[],"Analyze"==o.selectionAction?yield t.widgetContextList(s):yield t.widgetContextList())}}),function(){return i.apply(this,arguments)}),error:i=>{("G202005"==i?.error?.code||"G202005"==i?.code)&&(this.historyTimeOut=!0,this.refreshToken()),this.showInitialLoader=!1,this.isTyping=!1,this.isHistoryChat=!1,this.log.error("Error fetching static chat query",i),404===i.status&&this.log.error("API URL not found.")}})}addNewMessageChange(t){"true"==sessionStorage.getItem("multiEntries")&&t.target.value.length>0&&document.querySelector("#SendUserQuery")?.classList.remove("disabledBtn")}onFocus(){this.isFocused=!0}onBlur(){this.isFocused=!1,"true"==sessionStorage.getItem("multiEntries")&&(0==this.isFocused&&0==this.newMessage?.length?document.querySelector("#SendUserQuery")?.classList.add("disabledBtn"):document.querySelector("#SendUserQuery")?.classList.remove("disabledBtn"))}getFormattedMessageForReasoningBot(t){let i="dataset";"Advanced Search"===t||"advanced search"===t.toLowerCase()?i="dataset":("SnapShot"===t||"snapshot"===t.toLowerCase())&&(i="Entity Snapshot");let s=`<div style="margin-bottom:10px;">GEMS AI is now ready to assist you with your ${i}.</div>\n<p style="text-align: justify; margin-bottom: 10px">Using the new Analyze feature, GEMS AI applies advanced reasoning to help you ask questions that search alone can't answer, giving you deeper ways to explore your results.</p>\n<p style="text-align:justify; margin-bottom: 10px">Unlike traditional keyword-based tools, a reasoning model understands context, relationships, and patterns within your data. This allows it to deliver more accurate, insightful, and nuanced answers\u2014even for complex or open-ended questions.</p>`;return"dataset"===i?s+=`<div style="margin-bottom:5px">\u2705 You can now ask any question related to this ${i}, and GEMS AI will analyze your request using the full scope of your search.</div>`:"Entity Snapshot"===i&&(s+='<div style="margin-bottom:5px">\u2705 You can now ask any question related to this Snapshot, and GEMS AI will analyze your request using the full scope of the information included within the panels included in the snapshot, including records on additional pages. N.B it will not know about information that does not appear within your Snapshot panels.</div>'),s+='<div style="margin-bottom: 5px">\u{1f504} If you\'ve updated your search criteria, please click Analyze again to refresh the dataset and ensure your questions are based on the latest information.</div>\n<div>\u{1f4ac} For questions unrelated to this dataset, please start a <span class="new-chat-link" style="font-weight:500; text-decoration: underline; cursor:pointer;" onclick="newchatFunction()">new chat</span> or use the icon at the top right of your screen.\n</div> <div style="font-weight:700; margin-top: 20px;">What would you like to know?</div>',s}generateCacheKey(t){try{return JSON.stringify(t,Object.keys(t).sort())}catch(i){return console.warn("Failed to stringify payload for cache key, using fallback",i),`${t?.id||"unknown"}_${Date.now()}`}}cleanupCache(){const t=Date.now();for(const[i,s]of this.apiCallCache.entries())t-s.timestamp>=this.CACHE_DURATION&&this.apiCallCache.delete(i)}getChatID(t=null){if(null!==t){const s=this.generateCacheKey(t),r=Date.now(),o=this.apiCallCache.get(s);if(o&&r-o.timestamp<this.CACHE_DURATION)return console.log("Duplicate API call prevented - returning cached promise"),o.promise}const i=t||null;return new Promise((s,r)=>{let o={chatId:null,documentAttached:i};this.prevChatPayloadAttachment=i,this.showInitialLoader=!0;const a=new Promise((l,c)=>{this.api.getChartID(o).subscribe({next:u=>{if(t)if(sessionStorage.removeItem("widgetcontextdata"),u?.statusCode>1e4){this.errorHandle();const d=this.errorMsg.getErrorMessage(u.statusCode,this.userRole);console.log(d),this.messages.push({user:"GEMS AI",text:d,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!0,isstreaming:!1,isStartingNew:!0,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions})}else if(t&&u?.chatId){const h=this.getFormattedMessageForReasoningBot(t?.ContextData?.selectionType||"");this.messages.push({user:"GEMS AI",text:this.sanitizer.bypassSecurityTrustHtml(h),clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:this.info,isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==this.ShowFeedbackActions})}this.chatId=u?.chatId,this.showInitialLoader=!1,this.isSendingMessage=!1,this.cdr.detectChanges(),l()},error:u=>{("G202005"==u?.error?.code||"G202005"==u?.code)&&(this.refreshToken(),this.initailLoaderOnrefresh=!0,this.showInitialLoader=!0),this.showInitialLoader=!1,this.isSendingMessage=!1,this.cdr.detectChanges(),c(u)},complete:()=>{this.showInitialLoader=!1,this.isSendingMessage=!1,this.cdr.detectChanges(),l()}})});if(null!==i){const l=this.generateCacheKey(i);this.apiCallCache.set(l,{timestamp:Date.now(),promise:a}),this.cleanupCache()}a.then(s).catch(r)})}newchatFunction(){var t=this;return cn(function*(i=!1){1==t.isTyping||t.streamStatus?t.toastr.info("Your prompt is processing, Please wait untill that completes","",{timeOut:5e3}):(sessionStorage.removeItem("widgetcontextdata"),t.chatId=null,yield t.getChatID(),t.showHistory=!1,t.showAvatar=!1,t.showGmsLogo=!0,t.showCoPilotActions=!0,console.log("send that msg::",i),i?(console.log("messgae::",t.messages),t.newMessage=t.messages[t.messages.length-2].text,t.newChat=!1,t.messages=[],t.addNewMessage()):(t.newChat=!0,t.messages=[]),t.showPromptLibrary=!1,t.isSendingMessage=!1,t.isReasoningSendingMessage=!1,t.cdr.detectChanges())}).apply(this,arguments)}widgetContextList(){var t=this;return cn(function*(i=null){t.showHistory=!1,t.messages=[],t.showPromptLibrary=!1,t.showAvatar=!1;const s=window.parent,r=JSON.parse(sessionStorage.getItem("widgetcontextdata")||"{}");let o=r?.ContextData?.selectionItems||[];const a=r?.ContextData?.contextQuery||"",l=r?.ContextData?.defaultNudge?.nudgeValue||"",c=a&&a.trim().length>0,u=o&&o.length>0,d=l&&l.trim().length>0;if(d&&console.log("Token validation skipped for default nudge:",l),!d&&(!c||c&&u))try{const E=yield s.$find("GEMSTabManager").getGEMSTokenValidation();if(!E.HasSufficientTokens){const b=btoa("0");return sessionStorage.setItem("tokenBalance",b),t.messages.push({user:"GEMS AI",text:E.InsufficientTokenError||t.errorMsg.errorStatus.errors.tokenBalanceError,clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:"",isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:!1}),t.showDivider=!0,void t.cdr.detectChanges()}{const b=btoa("1");sessionStorage.setItem("tokenBalance",b)}}catch(_){const E=btoa("1");sessionStorage.setItem("tokenBalance",E),console.error("Error while trying to call GEMSTabManager.getGEMSTokenBalance:",_)}const h=r?.ContextData?.selectionAction||"",f=r?.ContextData?.actionspecificParameters?.targetLanguage||"";let v=[...o];if("Analyze"===h)t.newChat=!0,t.showAvatar=!0,t.showGmsLogo=!1,t.showCoPilotActions=!1,t.reasoningPayload=!0,t.getChatID(i),t.addNewMessage();else{yield t.getChatID(),"summarize"===h||"translate"===h?o.length>0&&(v=[o[0]],o=[o[0]]):"compare"===h&&o.length>1&&(v=o.slice(0,2),o=o.slice(0,2));const _=v.map(b=>{const T=b?.documentName||"";return`\n          <div style="display: flex; align-items: center; margin-left: 10px; background-color:white; margin-bottom: 8px;">\n            <img src="${"pdf"===(b?.documentType||"").toLowerCase()?"../../assets/Icons/pdf.png":"../../assets/Icons/docx.png"}" alt="Document Icon" style="width: 27px; height: 37px;aspect-ratio: 27/37; margin-right: 10px;">\n            <div>${T}</div>\n          </div>`}).join(""),E=`<div>You have selected the following document${v.length>1?"s":""}:</div>${_}`;if(a&&"string"==typeof a&&a.trim().length>0)t.newMessage=a.trim();else if(l&&"string"==typeof l&&l.trim().length>0)t.newMessage=l.trim();else if(h&&"string"==typeof h){const b=h.toLowerCase();"summarize"===b?t.newMessage="Summarize the document":"translate"===b?t.newMessage=`Translate the document to ${f}`:"compare"===b&&(t.newMessage="Compare the documents")}v?.length>0&&t.messages.push({user:"GEMS AI",text:t.sanitizer.bypassSecurityTrustHtml(E),clicked:!1,like:!1,liked:!1,dislike:!1,disliked:!1,saveQuery:!1,savedQuery:!1,isStreamStarted:!1,copy:!1,clickedTooltip:!1,showTooltip:!1,info:t.info,isRegenerate:!1,isstreaming:!1,status:"",ShowFeedbackActions:1==t.ShowFeedbackActions}),t.newMessage&&t.newMessage.trim().length>0&&(yield t.addNewMessage())}}).apply(this,arguments)}static{this.\u0275fac=function(i){return new(i||n)(k(Do),k(Of),k(ry),k(Gf),k(nge),k(Bu),k(Lu),k(rge),k(Ae))}}static{this.\u0275cmp=_i({type:n,selectors:[["app-chat"]],viewQuery:function(i,s){if(1&i&&(hv(Ewe,5),hv(bwe,5)),2&i){let r;wf(r=Ef())&&(s.myScrollContainer=r.first),wf(r=Ef())&&(s.messageInput=r.first)}},hostBindings:function(i,s){1&i&&ce("click",function(o){return s.onDocumentClick(o)},0,J1)},outputs:{closePanel:"closePanel"},decls:19,vars:14,consts:[["scrollMe",""],["textContainer",""],["noSearch",""],["noCriteria",""],["noSorting",""],["messageInput",""],["id","gems-ai-widget-container"],[1,"content"],[1,"contact-profile",3,"ngClass"],[1,"avatar"],[4,"ngIf"],[1,"chat-controls"],["class","newChat",4,"ngIf"],[1,"close-icon-container","tooltip-container"],["alt","Bookmark","id","Bookmark",1,"bookmark-icon",3,"click","src"],[1,"custom-tooltip"],["src","assets/Icons/Close.svg","alt","Close","id","ChatClose","onclick","window.parent.$find('GEMSTabManager').navigateToGemsArea('Bot/Close');",1,"close-icon"],["class","divider",4,"ngIf"],["class","loadingSec",4,"ngIf"],["id","IntercomChat","onclick","window.parent.$find('GEMSTabManager').navigateToGemsArea('intercom/chat'); ",1,"live-chat","tooltip-container"],["src","assets/Icons/liveChat.svg","alt","Live Chat"],[1,"newChat"],[1,"chatIcon",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","25","height","25","viewBox","0 0 25 25","fill","none"],["d","M17.5685 7.05646L20.4015 9.88954L13.7911 16.5H10.958V13.6669L17.5685 7.05646ZM18.5128 6.11211L19.9293 4.69558C20.1902 4.43481 20.6129 4.43481 20.8737 4.69558L22.7624 6.58429C23.0232 6.84506 23.0232 7.26786 22.7624 7.52864L21.3459 8.94517L18.5128 6.11211Z","fill","#93226D"],["d","M14.0796 7.01172H7.08804C6.46394 7.01172 5.95801 7.51765 5.95801 8.14175V18.3764C5.95801 19.0005 6.46394 19.5064 7.08804 19.5064H17.3227C17.9468 19.5064 18.4527 19.0005 18.4527 18.3764V14.5","stroke","#93226D","stroke-width","3"],[1,"divider"],["id","messagesContainer",1,"messages"],["class","gems-intro",4,"ngIf"],[3,"handlePromptSelected","showCoPilotActions"],["class","message-input",4,"ngIf"],[4,"ngFor","ngForOf"],["class","replies",4,"ngIf"],[3,"class","hidden","click",4,"ngIf"],["class","reasoning-buttons-wrapper",4,"ngIf"],[3,"click","hidden"],["class","msgContainer",4,"ngIf"],["class","user-message",4,"ngIf"],[1,"message-display"],[1,"msgContainer"],["alt","","class","user-avatar",3,"src",4,"ngIf"],["class","userName",4,"ngIf"],["alt","",1,"user-avatar",3,"src"],[1,"userName"],[1,"user-message"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"],[1,"status-section"],[2,"margin-left","8px"],["src","../../assets/Icons/loading 1.gif","alt","Analyzing the Data...",1,"loading-dots",2,"width","auto","margin-left","8px"],[1,"message-content"],[1,"content-list",3,"innerHTML"],[3,"assistantMessage",4,"ngIf"],["class","content-list",3,"innerHTML",4,"ngIf"],[3,"assistantMessage"],[1,"reasoning-divider"],[1,"divider-text"],[1,"message-actions-section"],[1,"copy-action","tooltip-container",3,"click"],["src","assets/Icons/copy.svg","alt","Copy","class","copy-icon","id","ContetCopy",3,"click",4,"ngIf"],["src","assets/Icons/copiedIcon.svg","alt","Copy","id","ContetCopy","class","copy-icon feedback",3,"click",4,"ngIf"],["class","copy-action tooltip-container",4,"ngIf"],["class","copy-action tooltip-container infoDefault",4,"ngIf"],["class","disclaimer",4,"ngIf"],["class","disclaimer default",4,"ngIf"],[1,"like-dislike-actions"],["class","bookmark-container",4,"ngIf"],["class","reGen tooltip-container",3,"click",4,"ngIf"],["class","like-tip tooltip-container",4,"ngIf"],["class","liked-tip tooltip-container",4,"ngIf"],["class","Dislike-tip tooltip-container",4,"ngIf"],["class","Disliked-tip tooltip-container",4,"ngIf"],["class","toast-box",4,"ngIf"],["src","assets/Icons/copy.svg","alt","Copy","id","ContetCopy",1,"copy-icon",3,"click"],["src","assets/Icons/copiedIcon.svg","alt","Copy","id","ContetCopy",1,"copy-icon","feedback",3,"click"],[1,"copy-action","tooltip-container"],["src","assets/Icons/information-line.svg","alt","info","Id","\u201dEntityDataInfo\u201d",1,"info-icon","entity",3,"click"],["class","tooltip-text",3,"ngClass",4,"ngIf"],["class","custom-tooltip",4,"ngIf"],[1,"tooltip-text",3,"ngClass"],["role","tablist",1,"nav","nav-pills"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"tab-content"],["class","container tab-pane active",4,"ngIf"],[1,"container","tab-pane","active"],[4,"ngIf","ngIfElse"],[1,"mt-3"],[1,"table","table-bordered"],[1,"no-data"],[1,"copy-action","tooltip-container","infoDefault"],["src","assets/Icons/information-line.svg","alt","info","Id","\u201dEntityDataInfo\u201d",1,"info-icon",3,"click"],[1,"disclaimer"],[1,"disclaimer","default"],[1,"bookmark-container"],[1,"save-query","tooltip-container"],["src","assets/Icons/bookmark-1.svg","alt","Save","class","save-icon","id","QuerySave",3,"click",4,"ngIf"],["class","save-dialog-overlay",4,"ngIf"],[1,"saved-query","tooltip-container"],["src","assets/Icons/clicked-bookmark.svg","alt","Save","id","QuerySave","class","saved-icon save-feedback",4,"ngIf"],["src","assets/Icons/bookmark-1.svg","alt","Save","id","QuerySave",1,"save-icon",3,"click"],[1,"save-dialog-overlay"],[1,"save-dialog-container"],[1,"save-header"],[1,"save-close-button",3,"click"],["src","assets/Icons/Close.svg","alt","Close","id","CloseSavePrompts",1,"save-icon","save-feedback"],[1,"save-label"],[1,"save-radio-group"],["type","radio","value","private",3,"ngModelChange","ngModel"],["type","radio","value","public",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter name...",1,"save-prompt-input",3,"ngModelChange","ngModel"],[1,"save-button-group"],[1,"save-cancel-button",3,"click"],[1,"save-save-button",3,"click"],["class","save-loader","style","display: flex; justify-content: center; margin-top: 16px;",4,"ngIf"],[1,"save-loader",2,"display","flex","justify-content","center","margin-top","16px"],["src","../../assets/Icons/loading 1.gif","alt","Saving...",2,"max-width","32px","max-height","32px","width","auto","height","auto"],["src","assets/Icons/clicked-bookmark.svg","alt","Save","id","QuerySave",1,"saved-icon","save-feedback"],[1,"reGen","tooltip-container",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512 512"],["d","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"],[1,"like-tip","tooltip-container"],["src","assets/Icons/like.svg","alt","Like","class","like-icon","id","PositiveFeedback",3,"click",4,"ngIf"],["src","assets/Icons/like.svg","alt","Like","id","PositiveFeedback",1,"like-icon",3,"click"],[1,"liked-tip","tooltip-container"],["src","assets/Icons/checkedThumbsUp.svg","alt","Liked","class","like-icon feedback",4,"ngIf"],["src","assets/Icons/checkedThumbsUp.svg","alt","Liked",1,"like-icon","feedback"],[1,"Dislike-tip","tooltip-container"],["src","assets/Icons/dislike.svg","alt","Dislike","class","dislike-icon","id","NegativeFeedback",3,"click",4,"ngIf"],["class","feedback-modal-overlay",4,"ngIf"],["src","assets/Icons/dislike.svg","alt","Dislike","id","NegativeFeedback",1,"dislike-icon",3,"click"],[1,"feedback-modal-overlay"],[1,"feedback-modal"],["placeholder","Leave a comment to tell me what went wrong, giving as much detail as you can, but do not include any private or sensitive information","rows","5",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"feedback-modal-actions","mt-4"],[1,"btn","cancel-btn",3,"click"],[1,"btn","submit-btn",3,"click"],[1,"Disliked-tip","tooltip-container"],["src","assets/Icons/checkedThumbsDown.svg","alt","Disliked","class","dislike-icon feedback",4,"ngIf"],["src","assets/Icons/checkedThumbsDown.svg","alt","Disliked",1,"dislike-icon","feedback"],[1,"toast-box"],["src","assets/Icons/Toast-icon.svg","alt","Toast Icon",1,"toast-icon"],[1,"reasoning-buttons-wrapper"],[1,"reasoning-buttons-container"],[1,"reasoning-button",3,"click"],[1,"new-conversation-button",3,"click"],[1,"replies"],[1,"message-display","flex-row"],["src","assets/Icons/chatbot-avatar.png","alt","GEMS AI",1,"user-avatar","loading"],[1,"loading-gif"],["src","../../assets/Icons/loading 1.gif","alt","Analyzing the Data...",1,"loading-dots"],[1,"gems-intro"],[1,"logo"],["src","assets/Icons/logo-new.png","alt","GEMS Logo"],[1,"welcome"],[1,"description"],["class","recentMessages","id","RecentConversation",3,"click",4,"ngIf"],["id","RecentConversation",1,"recentMessages",3,"click"],[1,"icon"],["src","assets/Icons/time.svg","alt","time"],[1,"message"],[1,"arrow"],["src","assets/Icons/arrow.svg","alt","Arrow icon"],[3,"ExecutePromptSelected","toggleBackFromLib"],[1,"message-input"],["style","width: 100%;",4,"ngIf"],[1,"wrap"],["type","text","placeholder","Type a message...","id","AskQuery","onkeydown","if(event.key === 'Enter') event.preventDefault();",3,"ngModel","ngModelChange","keyup.enter","input","focus","blur",4,"ngIf"],["contenteditable","false","class","custom-input","id","CustomMessageBox",4,"ngIf"],["id","MicButton",1,"mic-button","tooltip-container",3,"click"],["alt","Mic",3,"src"],["id","SendUserQuery","class","button","title","Send",3,"disabled","click",4,"ngIf"],["class","button","id","StopUserQuery",4,"ngIf"],["class","button","id","StopUserQuery",3,"click",4,"ngIf"],[1,"chatbot-info"],["id","FindOutMore","href","https://gems.cgshelps.com/en/articles/9939629-about-gems-ai","target","_blank"],[2,"width","100%"],[2,"border-bottom","1px solid black","width","100%"],[1,"context-section"],[1,"context-message",3,"innerHTML"],["class","context-buttons",4,"ngIf"],[1,"context-buttons"],["class","context-nudge-button",3,"disabled","click",4,"ngFor","ngForOf"],[1,"context-nudge-button",3,"click","disabled"],["alt","",1,"button-icon",3,"src"],[1,"button-text"],["type","text","placeholder","Type a message...","id","AskQuery","onkeydown","if(event.key === 'Enter') event.preventDefault();",3,"ngModelChange","keyup.enter","input","focus","blur","ngModel"],["contenteditable","false","id","CustomMessageBox",1,"custom-input"],["contenteditable","true",3,"placeholder","click","dblclick","beforeinput","keydown","blur",4,"ngFor","ngForOf"],["contenteditable","true",3,"click","dblclick","beforeinput","keydown","blur"],["id","SendUserQuery","title","Send",1,"button",3,"click"],[1,"tooltip-container"],["src","assets/Icons/Send.svg","alt","Send"],["id","StopUserQuery",1,"button"],["src","assets/Icons/process.svg","alt","Process"],["id","StopUserQuery",1,"button",3,"click"],[1,"loadingSec"],[1,"loaderBar"]],template:function(i,s){1&i&&(S(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9),se(4,Iwe,2,0,"p",10),x(),S(5,"div",11),se(6,xwe,7,0,"ng-container",10)(7,Twe,7,0,"div",12),S(8,"div",13)(9,"img",14),ce("click",function(){return s.toggleToPromptLib()}),x(),S(10,"div",15),$(11,"Saved Prompts"),x()(),S(12,"div",13),ve(13,"img",16),S(14,"div",15),$(15,"Close"),x()()()(),se(16,Dwe,1,0,"div",17)(17,GEe,9,8,"section",10),x()(),se(18,WEe,2,0,"div",18)),2&i&&(Il("max-height",s.maximize?"100%":"7%")("top",s.maximize?"0":"auto"),A(2),B("ngClass",WC(12,Cwe,s.showDivider)),A(2),B("ngIf",s.showAvatar),A(2),B("ngIf",!s.showCoPilotActions),A(),B("ngIf",s.showAvatar),A(2),B("src",s.showPromptLibrary?"assets/Icons/clicked-bookmark.svg":"assets/Icons/bookmark.svg",yl),A(7),B("ngIf",s.showDivider),A(),B("ngIf",s.maximize),A(),B("ngIf",s.showInitialLoader))},dependencies:[I2,Vv,xa,Hv,r0,JO,s0,hge,G_e,_we,M2,wwe],styles:[".message-content.ai-message .message-text .message-user{color:#000;font-weight:500;margin-bottom:5px}.message-text-content{color:#1c1b1a}.user-avatar{width:40px;height:40px;object-fit:contain;margin:0}.frame.minimized{height:64px;position:fixed;bottom:0;width:32%;background-color:#eacbf4;display:flex;align-items:center;justify-content:space-between;padding:0 10px;box-shadow:0 -1px 5px #0000001a}.minimized-view{display:flex;align-items:center;width:100%}.minimized-view .profile-title{flex:1}.minimized-view .maximize-button,.minimized-view .new-chat-button,.minimized-view .close-icon{margin:0 5px}.bookmark-icon{height:17px!important;width:18px!important}.context-section{padding:10px;background-color:#f8f9fa;border-radius:8px;margin-bottom:10px}.context-message{font-size:14px;color:#666;margin-bottom:10px}.context-buttons{display:flex;flex-direction:column;gap:8px;width:100%}.context-nudge-button{background-color:#fff;color:teal;border:1px solid #008080;border-radius:8px;padding:12px 16px;font-size:14px;font-weight:400;cursor:pointer;transition:all .2s ease;width:100%;display:flex;align-items:center;text-align:left;box-shadow:0 1px 3px #0000001a}.context-nudge-button:hover:not(:disabled){background-color:teal;color:#fff;border-color:teal;box-shadow:0 2px 6px #00808033;transform:translateY(-1px)}.button-icon{margin-right:12px;width:20px;height:20px;display:inline-block;flex-shrink:0;object-fit:contain}.button-text{flex:1}.context-nudge-button:disabled{background-color:#ccc;cursor:not-allowed;opacity:.6}.feedback{height:24px!important;width:24px!important}.video-player-container{background:#0000004d;border:1px solid #ccc;position:fixed;z-index:1060;width:100%;height:100%;overflow-x:hidden;overflow-y:auto;outline:0;inset:0}.video-player-container .video-main{max-width:900px;margin:1.75rem auto}.video-player-container iframe{height:508px}.video-player-container.mini-player{width:400px;height:270px;overflow:hidden;bottom:0;top:auto;cursor:grab;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.video-player-container.mini-player .video-main{margin:0 auto}.video-player-container.mini-player iframe{width:400px;height:220px}.video-player-container.mini-player .video-header h4{font-size:16px}.video-player-container.mini-player .video-header .minimizeIcon{display:none}.video-player-container.mini-player .video-header .maximizeIcon{display:block}.video-header{display:flex;justify-content:space-between;padding:10px 15px;background:#fff;align-items:center}.video-header h4{margin:0;color:#222}.video-header .imgSec{display:flex}.video-header .imgSec .minimizeIcon{width:24px;height:24px;cursor:pointer;margin-left:34px;display:block}.video-header .imgSec .closeIcon{width:24px;height:24px;cursor:pointer;margin-left:10px}.video-header .imgSec .maximizeIcon{width:24px;height:24px;cursor:pointer;margin-left:34px;display:none}video{width:100%;height:auto}.msgContainer{background-color:#c5c5c533;border-radius:50%;padding:5px;display:flex;align-items:center;justify-content:center;width:56px;height:56px;margin:0 10px 0 5px}.sent .msgContainer{margin-top:-10px}.userName{text-transform:uppercase!important}.recentMessages{width:100%;display:flex;justify-content:space-between;gap:10px;border-radius:12px;background:#93186c0a;padding:14px 12px;margin-top:30px;cursor:pointer}.recentMessages .icon{margin-top:4px}.recentMessages .message{flex:1}.recentMessages .message h6{color:var(--Primary-Colors-Deep-Purple, #93186C);font-size:16px;font-style:normal;font-weight:700;line-height:22px;margin-bottom:10px}.recentMessages .message h6 span{color:var(--Primary-Colors-Black-Olive, #454545);font-size:14px;font-style:normal;font-weight:400;line-height:19px;margin-left:10px}.recentMessages .message h6 p{color:var(--Secondary-Colors-Dark-Charcoal, #333);font-size:14px;font-style:normal;font-weight:500;line-height:19px;margin-bottom:0}.recentMessages .arrow{margin-top:4px}.citations{display:block!important;margin-bottom:5px}.defaultRadobutton{float:left;margin:0 5px 0 0;width:100px;height:40px;position:relative}.custom-input{border:1px solid #ccc;padding:8px;min-height:40px;width:100%;background-color:#fff;cursor:text}.placeholder{color:gray;background-color:#f0f0f0;padding:2px 4px;border-radius:3px;cursor:pointer}.placeholder:focus{background-color:#fff}.savedSearchList{padding:10px;border-bottom:1px solid rgb(221,221,221);cursor:pointer;display:flex;align-items:center;background:#fff}.arrowImg{width:14px;height:14px;margin-right:8px}.savedSearchListContainer{max-height:150px;overflow-y:auto}.status-section{overflow:hidden;max-height:1000px;transition:max-height .5s ease-in-out,opacity .5s ease-in-out;opacity:1}.status-section.hidden{max-height:0;opacity:0;pointer-events:none}.status-section{background:#f8f9fd;padding:8px 0 8px 10px;border-radius:6px 6px 0 0;margin-bottom:-8px;width:calc(100% - 10px)}.message-content{padding-left:10px}.disable-clicks{pointer-events:none}.hidelast{display:none!important}.donthide{display:flex!important}.message-actions-section .copy-action img{pointer-events:all!important}.context-divider{border:none;border-top:1.5px solid black;width:100%;margin:0}.context-section{margin-top:6px}.context-message{text-align:center;font-weight:500;color:#333;font-size:14px}\n"],encapsulation:2})}}return n})();function VT(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/\n/g,"\\n").replace(/\r/g,"\\r")}function YEe(n,e){1&n&&(S(0,"div",2),ve(1,"div",3),x())}function XEe(n,e){if(1&n){const t=ht();S(0,"app-chat",4),ce("closePanel",function(){return be(t),Ce(O().closePanel())}),x()}}let ZEe=(()=>{class n{constructor(t,i,s,r){this.common=t,this.api=i,this.toastr=s,this.log=r,this.showPanel=!0,this.showInitialLoader=!1,this.destroy$=new ye,this.inFlightAuthRequest=null,this.initializeAppRequest=null,this.oldAccessToken=null,this.isInitialized=!1,this.initializationAttempted=!1}ngOnInit(){if(this.initializationAttempted)return void this.log.info("Initialization already attempted, skipping...");const t=this.common.getFullAccessToken();this.log.info(t,"Initial Widget Access Key"),console.log("GEMS-AI Bot version : 1.3.3");const i=t?.AccessToken;this.handleAccessTokenChange(i),i&&!this.isInitialized?(this.initializationAttempted=!0,this.showInitialLoader=!0,this.initializeApp()):i||this.log.error("No access token available for initialization")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.inFlightAuthRequest&&(this.inFlightAuthRequest.complete(),this.inFlightAuthRequest=null)}togglePanel(){this.showPanel=!this.showPanel}closePanel(){this.showPanel=!1}handleAccessTokenChange(t){this.oldAccessToken||(this.oldAccessToken=sessionStorage.getItem("oldAccessToken")||null),this.oldAccessToken!==t&&(sessionStorage.removeItem("clickTimeUTC"),this.isInitialized=!1,this.initializationAttempted=!1),this.oldAccessToken=t||null,this.oldAccessToken&&sessionStorage.setItem("oldAccessToken",this.oldAccessToken)}initializeApp(){if(this.initializeAppRequest)return this.log.info("Initialize app request already in progress, waiting for completion..."),void this.initializeAppRequest.pipe(As(this.destroy$)).subscribe({next:t=>this.handleInitializeSuccess(t),error:t=>this.handleInitializeError(t)});this.log.info("Starting app initialization..."),this.initializeAppRequest=this.api.initializeApp().pipe(As(this.destroy$),No(t=>this.handleInitializeError(t,!0)),ps(t=>"RETRY_AFTER_REFRESH"===t?this.api.initializeApp():we(t)),Ou(()=>{this.showInitialLoader=!1,this.initializeAppRequest=null})),this.initializeAppRequest.subscribe({next:t=>this.handleInitializeSuccess(t),error:t=>this.handleInitializeError(t)})}handleInitializeSuccess(t){this.log.info("App initialization successful"),this.isInitialized=!0,this.initializeData=t?.data?.result,this.handleInitializeData(this.initializeData)}handleInitializeError(t,i=!1){if(this.log.error("Initialize app error:",t),i&&(401===t.status||"G202005"===t?.error?.code))return this.handleTokenRefresh();throw this.showInitialLoader=!1,this.initializationAttempted=!1,t}handleTokenRefresh(){return this.inFlightAuthRequest?(this.log.info("Token refresh already in progress..."),this.inFlightAuthRequest.asObservable()):(this.log.info("Starting token refresh..."),this.inFlightAuthRequest=new ye,this.api.refreshToken().pipe(As(this.destroy$),Qn(t=>{const s={...this.common.getFullAccessToken(),AccessToken:t?.result?.accessToken??"",RefreshToken:t?.result?.refreshToken??""};sessionStorage.setItem("widgetAccessKey",JSON.stringify(s)),this.log.info("Token refresh successful"),this.inFlightAuthRequest.next("RETRY_AFTER_REFRESH"),this.inFlightAuthRequest.complete(),this.inFlightAuthRequest=null}),No(t=>{throw this.log.error("Refresh token error:",t),this.inFlightAuthRequest.error(t),this.inFlightAuthRequest=null,this.initializationAttempted=!1,t})).subscribe(),this.inFlightAuthRequest.asObservable())}handleInitializeData(t){sessionStorage.setItem("initializeData",JSON.stringify(t)),this.accessChatBotFeature=t?.accessSupportBotFeature,this.accessApiFeature=t?.accessApiFeature,"false"===this.accessChatBotFeature?.toLowerCase()&&"false"===this.accessApiFeature?.toLowerCase()&&this.toastr.error("You don't have permission to access the GEMS AI","",{timeOut:5e3})}static{this.\u0275fac=function(i){return new(i||n)(k(Gf),k(ry),k(Bu),k(Lu))}}static{this.\u0275cmp=_i({type:n,selectors:[["app-home"]],decls:2,vars:2,consts:[["class","loadingSec",4,"ngIf"],[3,"closePanel",4,"ngIf"],[1,"loadingSec"],[1,"loaderBar"],[3,"closePanel"]],template:function(i,s){1&i&&se(0,YEe,2,0,"div",0)(1,XEe,1,0,"app-chat",1),2&i&&(B("ngIf",s.showInitialLoader),A(),B("ngIf","true"==(null==s.accessChatBotFeature?null:s.accessChatBotFeature.toLowerCase())||"true"==(null==s.accessApiFeature?null:s.accessApiFeature.toLowerCase())))},dependencies:[xa,QEe]})}}return n})(),tH=(()=>{class n{constructor(t){this.log=t}ngOnChanges(t){if(this.log.info("ngOnChanges",this.widgetaccesskey,t),t.widgetaccesskey){if(null==this.widgetaccesskey||"null"==this.widgetaccesskey)return;sessionStorage.setItem("widgetAccessKey",this.widgetaccesskey)}if(t.widgetcontextdata){if(null==this.widgetcontextdata||"null"==this.widgetcontextdata)return;if(this.widgetcontextdata.trim().length>0){let i=this.widgetcontextdata;"string"!=typeof this.widgetcontextdata&&(i=JSON.stringify(i)),sessionStorage.setItem("widgetcontextdata",i),console.log("Received widget context data:",i),"string"==typeof this.widgetcontextdata&&JSON.parse(this.widgetcontextdata)}}}static{this.\u0275fac=function(i){return new(i||n)(k(Lu))}}static{this.\u0275cmp=_i({type:n,selectors:[["gems-ai-widget"]],inputs:{widgetaccesskey:"widgetaccesskey",widgetcontextdata:"widgetcontextdata"},features:[ri],decls:1,vars:0,template:function(i,s){1&i&&ve(0,"app-home")},dependencies:[ZEe]})}}return n})(),KEe=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=en({type:n})}static{this.\u0275inj=Yt({})}}return n})();function nH(n){return new R(3e3,!1)}function nl(n){switch(n.length){case 0:return new Qf;case 1:return n[0];default:return new nL(n)}}function iH(n,e,t=new Map,i=new Map){const s=[],r=[];let o=-1,a=null;if(e.forEach(l=>{const c=l.get("offset"),u=c==o,d=u&&a||new Map;l.forEach((h,f)=>{let p=f,g=h;if("offset"!==f)switch(p=n.normalizePropertyName(p,s),g){case"!":g=t.get(f);break;case Ro:g=i.get(f);break;default:g=n.normalizeStyleValue(f,p,g,s)}d.set(p,g)}),u||r.push(d),a=d,o=c}),s.length)throw function Ebe(n){return new R(3502,!1)}();return r}function $T(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&UT(t,"start",n)));break;case"done":n.onDone(()=>i(t&&UT(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&UT(t,"destroy",n)))}}function UT(n,e,t){const r=jT(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(r._data=o),r}function jT(n,e,t,i,s="",r=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:s,totalTime:r,disabled:!!o}}function Ss(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function sH(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const Rbe=typeof document>"u"?null:document.documentElement;function HT(n){const e=n.parentNode||n.host||null;return e===Rbe?null:e}let _c=null,rH=!1;function oH(n,e){for(;e;){if(e===n)return!0;e=HT(e)}return!1}function aH(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]}let zT=(()=>{class n{validateStyleProperty(t){return function Obe(n){_c||(_c=function Fbe(){return typeof document<"u"?document.body:null}()||{},rH=!!_c.style&&"WebkitAppearance"in _c.style);let e=!0;return _c.style&&!function Pbe(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in _c.style,!e&&rH&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in _c.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return oH(t,i)}getParentElement(t){return HT(t)}query(t,i,s){return aH(t,i,s)}computeStyle(t,i,s){return s||""}animate(t,i,s,r,o,a=[],l){return new Qf(s,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();class qT{static{this.NOOP=new zT}}class GT{}const Bbe=1e3,WT="ng-enter",mw="ng-leave",vw="ng-trigger",yw=".ng-trigger",cH="ng-animating",QT=".ng-animating";function na(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:YT(parseFloat(e[1]),e[2])}function YT(n,e){return"s"===e?n*Bbe:n}function _w(n,e,t){return n.hasOwnProperty("duration")?n:function $be(n,e,t){let s,r=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(nH()),{duration:0,delay:0,easing:""};s=YT(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(r=YT(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else s=n;if(!t){let a=!1,l=e.length;s<0&&(e.push(function JEe(){return new R(3100,!1)}()),a=!0),r<0&&(e.push(function ebe(){return new R(3101,!1)}()),a=!0),a&&e.splice(l,0,nH())}return{duration:s,delay:r,easing:o}}(n,e,t)}function uo(n,e,t){e.forEach((i,s)=>{const r=ZT(s);t&&!t.has(s)&&t.set(s,n.style[r]),n.style[r]=i})}function wc(n,e){e.forEach((t,i)=>{const s=ZT(i);n.style[s]=""})}function Cg(n){return Array.isArray(n)?1==n.length?n[0]:function xte(n,e=null){return{type:xe.Sequence,steps:n,options:e}}(n):n}const XT=new RegExp("{{\\s*(.+?)\\s*}}","g");function dH(n){let e=[];if("string"==typeof n){let t;for(;t=XT.exec(n);)e.push(t[1]);XT.lastIndex=0}return e}function Sg(n,e,t){const i=`${n}`,s=i.replace(XT,(r,o)=>{let a=e[o];return null==a&&(t.push(function nbe(n){return new R(3003,!1)}()),a=""),a.toString()});return s==i?n:s}const Hbe=/-+([a-z0-9])/g;function ZT(n){return n.replace(Hbe,(...e)=>e[1].toUpperCase())}function Is(n,e,t){switch(e.type){case xe.Trigger:return n.visitTrigger(e,t);case xe.State:return n.visitState(e,t);case xe.Transition:return n.visitTransition(e,t);case xe.Sequence:return n.visitSequence(e,t);case xe.Group:return n.visitGroup(e,t);case xe.Animate:return n.visitAnimate(e,t);case xe.Keyframes:return n.visitKeyframes(e,t);case xe.Style:return n.visitStyle(e,t);case xe.Reference:return n.visitReference(e,t);case xe.AnimateChild:return n.visitAnimateChild(e,t);case xe.AnimateRef:return n.visitAnimateRef(e,t);case xe.Query:return n.visitQuery(e,t);case xe.Stagger:return n.visitStagger(e,t);default:throw function ibe(n){return new R(3004,!1)}()}}function KT(n,e){return window.getComputedStyle(n)[e]}const Gbe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class hH extends GT{normalizePropertyName(e,t){return ZT(e)}normalizeStyleValue(e,t,i,s){let r="";const o=i.toString().trim();if(Gbe.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)r="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&s.push(function sbe(n,e){return new R(3005,!1)}())}return o+r}}const ww="*";const Ew=new Set(["true","1"]),bw=new Set(["false","0"]);function fH(n,e){const t=Ew.has(n)||bw.has(n),i=Ew.has(e)||bw.has(e);return(s,r)=>{let o=n==ww||n==s,a=e==ww||e==r;return!o&&t&&"boolean"==typeof s&&(o=s?Ew.has(n):bw.has(n)),!a&&i&&"boolean"==typeof r&&(a=r?Ew.has(e):bw.has(e)),o&&a}}const Xbe=new RegExp("s*:selfs*,?","g");function JT(n,e,t,i){return new Zbe(n).build(e,t,i)}class Zbe{constructor(e){this._driver=e}build(e,t,i){const s=new eCe(t);return this._resetContextStyleTimingState(s),Is(this,Cg(e),s)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,s=t.depCount=0;const r=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function rbe(){return new R(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==xe.State){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,r.push(this.visitState(l,t))}),l.name=c}else if(a.type==xe.Transition){const l=this.visitTransition(a,t);i+=l.queryCount,s+=l.depCount,o.push(l)}else t.errors.push(function obe(){return new R(3007,!1)}())}),{type:xe.Trigger,name:e.name,states:r,transitions:o,queryCount:i,depCount:s,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),s=e.options&&e.options.params||null;if(i.containsDynamicStyles){const r=new Set,o=s||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{dH(l).forEach(c=>{o.hasOwnProperty(c)||r.add(c)})})}),r.size&&t.errors.push(function abe(n,e){return new R(3008,!1)}(0,r.values()))}return{type:xe.State,name:e.name,style:i,options:s?{params:s}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Is(this,Cg(e.animation),t),s=function Wbe(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function Qbe(n,e,t){if(":"==n[0]){const l=function Ybe(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function vbe(n){return new R(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function mbe(n){return new R(3015,!1)}()),e;const s=i[1],r=i[2],o=i[3];e.push(fH(s,o)),"<"==r[0]&&(s!=ww||o!=ww)&&e.push(fH(o,s))}(i,t,e)):t.push(n),t}(e.expr,t.errors);return{type:xe.Transition,matchers:s,animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Ec(e.options)}}visitSequence(e,t){return{type:xe.Sequence,steps:e.steps.map(i=>Is(this,i,t)),options:Ec(e.options)}}visitGroup(e,t){const i=t.currentTime;let s=0;const r=e.steps.map(o=>{t.currentTime=i;const a=Is(this,o,t);return s=Math.max(s,t.currentTime),a});return t.currentTime=s,{type:xe.Group,steps:r,options:Ec(e.options)}}visitAnimate(e,t){const i=function nCe(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return eD(_w(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(r=>"{"==r.charAt(0)&&"{"==r.charAt(1))){const r=eD(0,0,"");return r.dynamic=!0,r.strValue=t,r}const s=_w(t,e);return eD(s.duration,s.delay,s.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let s,r=e.styles?e.styles:Po({});if(r.type==xe.Keyframes)s=this.visitKeyframes(r,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=Po(c)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,s=l}return t.currentAnimateTimings=null,{type:xe.Animate,timings:i,style:s,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],s=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of s)"string"==typeof a?a===Ro?i.push(a):t.errors.push(new R(3002,!1)):i.push(new Map(Object.entries(a)));let r=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!r))for(let l of a.values())if(l.toString().indexOf("{{")>=0){r=!0;break}}),{type:xe.Style,styles:i,easing:o,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let s=t.currentTime,r=t.currentTime;i&&r>0&&(r-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l);let d=!0;u&&(r!=s&&r>=u.startTime&&s<=u.endTime&&(t.errors.push(function cbe(n,e,t,i,s){return new R(3010,!1)}()),d=!1),r=u.startTime),d&&c.set(l,{startTime:r,endTime:s}),t.options&&function jbe(n,e,t){const i=e.params||{},s=dH(n);s.length&&s.forEach(r=>{i.hasOwnProperty(r)||t.push(function tbe(n){return new R(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:xe.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function ube(){return new R(3011,!1)}()),i;let r=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(_=>{const E=this._makeStyleAst(_,t);let b=null!=E.offset?E.offset:function tCe(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(E.styles),T=0;return null!=b&&(r++,T=E.offset=b),l=l||T<0||T>1,a=a||T<c,c=T,o.push(T),E});l&&t.errors.push(function dbe(){return new R(3012,!1)}()),a&&t.errors.push(function hbe(){return new R(3200,!1)}());const d=e.steps.length;let h=0;r>0&&r<d?t.errors.push(function fbe(){return new R(3202,!1)}()):0==r&&(h=1/(d-1));const f=d-1,p=t.currentTime,g=t.currentAnimateTimings,v=g.duration;return u.forEach((_,E)=>{const b=h>0?E==f?1:h*E:o[E],T=b*v;t.currentTime=p+g.delay+T,g.duration=T,this._validateStyleAst(_,t),_.offset=b,i.styles.push(_)}),i}visitReference(e,t){return{type:xe.Reference,animation:Is(this,Cg(e.animation),t),options:Ec(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:xe.AnimateChild,options:Ec(e.options)}}visitAnimateRef(e,t){return{type:xe.AnimateRef,animation:this.visitReference(e.animation,t),options:Ec(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,s=e.options||{};t.queryCount++,t.currentQuery=e;const[r,o]=function Kbe(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Xbe,"")),n=n.replace(/@\*/g,yw).replace(/@\w+/g,t=>yw+"-"+t.slice(1)).replace(/:animating/g,QT),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+r:r,Ss(t.collectedStyles,t.currentQuerySelector,new Map);const a=Is(this,Cg(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:xe.Query,selector:r,limit:s.limit||0,optional:!!s.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Ec(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function pbe(){return new R(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:_w(e.timings,t.errors,!0);return{type:xe.Stagger,animation:Is(this,Cg(e.animation),t),timings:i,options:null}}}class eCe{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ec(n){return n?(n={...n}).params&&(n.params=function Jbe(n){return n?{...n}:null}(n.params)):n={},n}function eD(n,e,t){return{duration:n,delay:e,easing:t}}function tD(n,e,t,i,s,r,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:s,delay:r,totalTime:s+r,easing:o,subTimeline:a}}class Cw{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const rCe=new RegExp(":enter","g"),aCe=new RegExp(":leave","g");function nD(n,e,t,i,s,r=new Map,o=new Map,a,l,c=[]){return(new lCe).buildKeyframes(n,e,t,i,s,r,o,a,l,c)}class lCe{buildKeyframes(e,t,i,s,r,o,a,l,c,u=[]){c=c||new Cw;const d=new iD(e,t,c,s,r,u,[]);d.options=l;const h=l.delay?na(l.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,l),Is(this,i,d);const f=d.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let g=f.length-1;g>=0;g--){const v=f[g];if(v.element===t){p=v;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,l)}return f.length?f.map(p=>p.buildKeyframes()):[tD(t,[],[],[],0,h,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const s=t.createSubContext(e.options),r=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,s,s.options);r!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const s of e){const r=s?.delay;if(r){const o="number"==typeof r?r:na(Sg(r,s?.params??{},t.errors));i.delayNextStep(o)}}}_visitSubInstructions(e,t,i){let r=t.currentTimeline.currentTime;const o=null!=i.duration?na(i.duration):null,a=null!=i.delay?na(i.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);r=Math.max(r,c.duration+c.delay)}),r}visitReference(e,t){t.updateOptions(e.options,!0),Is(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let s=t;const r=e.options;if(r&&(r.params||r.delay)&&(s=t.createSubContext(r),s.transformIntoNewTimeline(),null!=r.delay)){s.previousNode.type==xe.Style&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=Sw);const o=na(r.delay);s.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Is(this,o,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>i&&s.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let s=t.currentTimeline.currentTime;const r=e.options&&e.options.delay?na(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);r&&a.delayNextStep(r),Is(this,o,a),s=Math.max(s,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(s),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return _w(t.params?Sg(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),s=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),s.snapshotCurrentStyles());const r=e.style;r.type==xe.Keyframes?this.visitKeyframes(r,t):(t.incrementTime(i.duration),this.visitStyle(r,t),s.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,s=t.currentAnimateTimings;!s&&i.hasCurrentStyleProperties()&&i.forwardFrame();const r=s&&s.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(r):i.setStyles(e.styles,r,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,s=t.currentTimeline.duration,r=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*r),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(s+r),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,s=e.options||{},r=s.delay?na(s.delay):0;r&&(t.previousNode.type===xe.Style||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Sw);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!s.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,c);r&&d.delayNextStep(r),c===t.element&&(l=d.currentTimeline),Is(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,s=t.currentTimeline,r=e.timings,o=Math.abs(r.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;Is(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=s.currentTime-d+(s.startTime-i.currentTimeline.startTime)}}const Sw={};class iD{constructor(e,t,i,s,r,o,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=s,this._leaveClassName=r,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Sw,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new Iw(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let s=this.options;null!=i.duration&&(s.duration=na(i.duration)),null!=i.delay&&(s.delay=na(i.delay));const r=i.params;if(r){let o=s.params;o||(o=this.options.params={}),Object.keys(r).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Sg(r[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(s=>{i[s]=t[s]})}}return e}createSubContext(e=null,t,i){const s=t||this.element,r=new iD(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,i||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(e),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(e){return this.previousNode=Sw,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const s={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},r=new cCe(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,s,e.stretchStartingKeyframe);return this.timelines.push(r),s}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,s,r,o){let a=[];if(s&&a.push(this.element),e.length>0){e=(e=e.replace(rCe,"."+this._enterClassName)).replace(aCe,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!r&&0==a.length&&o.push(function gbe(n){return new R(3014,!1)}()),a}}class Iw{constructor(e,t,i,s){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=s,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Iw(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Ro),this._currentKeyframe.set(t,Ro);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,s){t&&this._previousKeyframe.set("easing",t);const r=s&&s.params||{},o=function uCe(n,e){const t=new Map;let i;return n.forEach(s=>{if("*"===s){i??=e.keys();for(let r of i)t.set(r,Ro)}else for(let[r,o]of s)t.set(r,o)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=Sg(l,r,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Ro),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const s=this._styleSummary.get(i);(!s||t.time>s.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((a,l)=>{const c=new Map([...this._backFill,...a]);c.forEach((u,d)=>{"!"===u?e.add(d):u===Ro&&t.add(d)}),i||c.set("offset",l/this.duration),s.push(c)});const r=[...e.values()],o=[...t.values()];if(i){const a=s[0],l=new Map(a);a.set("offset",0),l.set("offset",1),s=[a,l]}return tD(this.element,s,r,o,this.duration,this.startTime,this.easing,!1)}}class cCe extends Iw{constructor(e,t,i,s,r,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=s,this.postStyleProps=r,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:s}=this.timings;if(this._stretchStartingKeyframe&&t){const r=[],o=i+t,a=t/o,l=new Map(e[0]);l.set("offset",0),r.push(l);const c=new Map(e[0]);c.set("offset",mH(a)),r.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let h=new Map(e[d]);const f=h.get("offset");h.set("offset",mH((t+f*i)/o)),r.push(h)}i=o,t=0,s="",e=r}return tD(this.element,e,this.preStyleProps,this.postStyleProps,i,t,s,!0)}}function mH(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}function vH(n,e,t,i,s,r,o,a,l,c,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:s,fromState:t,fromStyles:r,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const sD={};class yH{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,s){return function dCe(n,e,t,i,s){return n.some(r=>r(e,t,i,s))}(this.ast.matchers,e,t,i,s)}buildStyles(e,t,i){let s=this._stateStyles.get("*");return void 0!==e&&(s=this._stateStyles.get(e?.toString())||s),s?s.buildStyles(t,i):new Map}build(e,t,i,s,r,o,a,l,c,u){const d=[],h=this.ast.options&&this.ast.options.params||sD,p=this.buildStyles(i,a&&a.params||sD,d),g=l&&l.params||sD,v=this.buildStyles(s,g,d),_=new Set,E=new Map,b=new Map,T="void"===s,V={params:_H(g,h),delay:this.ast.options?.delay},N=u?[]:nD(e,t,this.ast.animation,r,o,p,v,V,c,d);let M=0;return N.forEach(D=>{M=Math.max(D.duration+D.delay,M)}),d.length?vH(t,this._triggerName,i,s,T,p,v,[],[],E,b,M,d):(N.forEach(D=>{const L=D.element,ne=Ss(E,L,new Set);D.preStyleProps.forEach(X=>ne.add(X));const j=Ss(b,L,new Set);D.postStyleProps.forEach(X=>j.add(X)),L!==t&&_.add(L)}),vH(t,this._triggerName,i,s,T,p,v,N,[..._.values()],E,b,M))}}function _H(n,e){const t={...e};return Object.entries(n).forEach(([i,s])=>{null!=s&&(t[i]=s)}),t}class hCe{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,s=_H(e,this.defaultParams);return this.styles.styles.forEach(r=>{"string"!=typeof r&&r.forEach((o,a)=>{o&&(o=Sg(o,s,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),i.set(a,o)})}),i}}class pCe{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(s=>{this.states.set(s.name,new hCe(s.style,s.options&&s.options.params||{},i))}),wH(this.states,"true","1"),wH(this.states,"false","0"),t.transitions.forEach(s=>{this.transitionFactories.push(new yH(e,s,this.states))}),this.fallbackTransition=function gCe(n,e,t){return new yH(n,{type:xe.Transition,animation:{type:xe.Sequence,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,s){return this.transitionFactories.find(o=>o.match(e,t,i,s))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function wH(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const mCe=new Cw;class vCe{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],r=JT(this._driver,t,i,[]);if(i.length)throw function bbe(n){return new R(3503,!1)}();this._animations.set(e,r)}_buildPlayer(e,t,i){const s=e.element,r=iH(this._normalizer,e.keyframes,t,i);return this._driver.animate(s,r,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const s=[],r=this._animations.get(e);let o;const a=new Map;if(r?(o=nD(this._driver,t,r,WT,mw,new Map,new Map,i,mCe,s),o.forEach(u=>{const d=Ss(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(s.push(function Cbe(){return new R(3300,!1)}()),o=[]),s.length)throw function Sbe(n){return new R(3504,!1)}();a.forEach((u,d)=>{u.forEach((h,f)=>{u.set(f,this._driver.computeStyle(d,f,Ro))})});const c=nl(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,new Map,d)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Ibe(n){return new R(3301,!1)}();return t}listen(e,t,i,s){const r=jT(t,"","","");return $T(this._getPlayer(e),i,r,s),()=>{}}command(e,t,i,s){if("register"==i)return void this.register(e,s[0]);if("create"==i)return void this.create(e,t,s[0]||{});const r=this._getPlayer(e);switch(i){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(e)}}}const EH="ng-animate-queued",rD="ng-animate-disabled",bCe=[],bH={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},CCe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Er="__ng_removed";class oD{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function TCe(n){return n??null}(i?e.value:e),i){const{value:r,...o}=e;this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(s=>{null==i[s]&&(i[s]=t[s])})}}}const Ig="void",aD=new oD(Ig);class SCe{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ws(t,this._hostClassName)}listen(e,t,i,s){if(!this._triggers.has(t))throw function xbe(n,e){return new R(3302,!1)}();if(null==i||0==i.length)throw function Tbe(n){return new R(3303,!1)}();if(!function DCe(n){return"start"==n||"done"==n}(i))throw function Dbe(n,e){return new R(3400,!1)}();const r=Ss(this._elementListeners,e,[]),o={name:t,phase:i,callback:s};r.push(o);const a=Ss(this._engine.statesByElement,e,new Map);return a.has(t)||(Ws(e,vw),Ws(e,vw+"-"+t),a.set(t,aD)),()=>{this._engine.afterFlush(()=>{const l=r.indexOf(o);l>=0&&r.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Abe(n){return new R(3401,!1)}();return t}trigger(e,t,i,s=!0){const r=this._getTrigger(t),o=new lD(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Ws(e,vw),Ws(e,vw+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new oD(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=aD),c.value!==Ig&&l.value===c.value){if(!function MCe(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let s=0;s<t.length;s++){const r=t[s];if(!e.hasOwnProperty(r)||n[r]!==e[r])return!1}return!0}(l.params,c.params)){const g=[],v=r.matchStyles(l.value,l.params,g),_=r.matchStyles(c.value,c.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{wc(e,v),uo(e,_)})}return}const h=Ss(this._engine.playersByElement,e,[]);h.forEach(g=>{g.namespaceId==this.id&&g.triggerName==t&&g.queued&&g.destroy()});let f=r.matchTransition(l.value,c.value,e,c.params),p=!1;if(!f){if(!s)return;f=r.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(Ws(e,EH),o.onStart(()=>{Kd(e,EH)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);const v=this._engine.playersByElement.get(e);if(v){let _=v.indexOf(o);_>=0&&v.splice(_,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(s=>s.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,yw,!0);i.forEach(s=>{if(s[Er])return;const r=this._engine.fetchNamespacesByElement(s);r.size?r.forEach(o=>o.triggerLeaveAnimation(s,t,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(e,t,i,s){const r=this._engine.statesByElement.get(e),o=new Map;if(r){const a=[];if(r.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const u=this.trigger(e,c,Ig,s);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&nl(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const s=new Set;t.forEach(r=>{const o=r.name;if(s.has(o))return;s.add(o);const l=this._triggers.get(o).fallbackTransition,c=i.get(o)||aD,u=new oD(Ig),d=new lD(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let s=!1;if(i.totalAnimations){const r=i.players.length?i.playersByQueriedElement.get(e):[];if(r&&r.length)s=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(e),s)i.markElementAsRemoved(this.id,e,!1,t);else{const r=e[Er];(!r||r===bH)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Ws(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const s=i.player;if(s.destroyed)return;const r=i.element,o=this._elementListeners.get(r);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=jT(r,i.triggerName,i.fromState.value,i.toState.value);l._data=e,$T(i.player,a.phase,l,a.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):t.push(i)}),this._queue=[],t.sort((i,s)=>{const r=i.transition.ast.depCount,o=s.transition.ast.depCount;return 0==r||0==o?r-o:this._engine.driver.containsElement(i.element,s.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class ICe{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i,s){this.bodyNode=e,this.driver=t,this._normalizer=i,this.scheduler=s,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new SCe(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,s=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=s.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return s.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let s=this._namespaceLookup[e];s&&s.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);const s=this._namespaceList.indexOf(i);s>=0&&this._namespaceList.splice(s,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let s of i.values())if(s.namespaceId){const r=this._fetchNamespace(s.namespaceId);r&&t.add(r)}return t}trigger(e,t,i,s){if(xw(t)){const r=this._fetchNamespace(e);if(r)return r.trigger(t,i,s),!0}return!1}insertNode(e,t,i,s){if(!xw(t))return;const r=t[Er];if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}s&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ws(e,rD)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Kd(e,rD))}removeNode(e,t,i){if(xw(t)){this.scheduler?.notify();const s=e?this._fetchNamespace(e):null;s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);const r=this.namespacesByHostElement.get(t);r&&r.id!==e&&r.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,s,r){this.collectedLeaveElements.push(t),t[Er]={namespaceId:e,setForRemoval:s,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:r}}listen(e,t,i,s,r){return xw(t)?this._fetchNamespace(e).listen(t,i,s,r):()=>{}}_buildInstruction(e,t,i,s,r){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,s,e.fromState.options,e.toState.options,t,r)}destroyInnerAnimations(e){let t=this.driver.query(e,yw,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,QT,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return nl(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Er];if(t&&t.setForRemoval){if(e[Er]=bH,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(rD)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,s)=>this._balanceNamespaceList(i,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Ws(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let s=0;s<i.length;s++)i[s]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?nl(t).onDone(()=>{i.forEach(s=>s())}):i.forEach(s=>s())}}reportError(e){throw function kbe(n){return new R(3402,!1)}()}_flushAnimations(e,t){const i=new Cw,s=[],r=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(Z=>{u.add(Z);const K=this.driver.query(Z,".ng-animate-queued",!0);for(let re=0;re<K.length;re++)u.add(K[re])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=IH(h,this.collectedEnterElements),p=new Map;let g=0;f.forEach((Z,K)=>{const re=WT+g++;p.set(K,re),Z.forEach(De=>Ws(De,re))});const v=[],_=new Set,E=new Set;for(let Z=0;Z<this.collectedLeaveElements.length;Z++){const K=this.collectedLeaveElements[Z],re=K[Er];re&&re.setForRemoval&&(v.push(K),_.add(K),re.hasAnimation?this.driver.query(K,".ng-star-inserted",!0).forEach(De=>_.add(De)):E.add(K))}const b=new Map,T=IH(h,Array.from(_));T.forEach((Z,K)=>{const re=mw+g++;b.set(K,re),Z.forEach(De=>Ws(De,re))}),e.push(()=>{f.forEach((Z,K)=>{const re=p.get(K);Z.forEach(De=>Kd(De,re))}),T.forEach((Z,K)=>{const re=b.get(K);Z.forEach(De=>Kd(De,re))}),v.forEach(Z=>{this.processLeaveNode(Z)})});const V=[],N=[];for(let Z=this._namespaceList.length-1;Z>=0;Z--)this._namespaceList[Z].drainQueuedTransitions(t).forEach(re=>{const De=re.player,Dt=re.element;if(V.push(De),this.collectedEnterElements.length){const yn=Dt[Er];if(yn&&yn.setForMove){if(yn.previousTriggersValues&&yn.previousTriggersValues.has(re.triggerName)){const ho=yn.previousTriggersValues.get(re.triggerName),mi=this.statesByElement.get(re.element);if(mi&&mi.has(re.triggerName)){const Cc=mi.get(re.triggerName);Cc.value=ho,mi.set(re.triggerName,Cc)}}return void De.destroy()}}const et=!d||!this.driver.containsElement(d,Dt),gi=b.get(Dt),Bt=p.get(Dt),Vt=this._buildInstruction(re,i,Bt,gi,et);if(Vt.errors&&Vt.errors.length)return void N.push(Vt);if(et)return De.onStart(()=>wc(Dt,Vt.fromStyles)),De.onDestroy(()=>uo(Dt,Vt.toStyles)),void s.push(De);if(re.isFallbackTransition)return De.onStart(()=>wc(Dt,Vt.fromStyles)),De.onDestroy(()=>uo(Dt,Vt.toStyles)),void s.push(De);const Wt=[];Vt.timelines.forEach(yn=>{yn.stretchStartingKeyframe=!0,this.disabledNodes.has(yn.element)||Wt.push(yn)}),Vt.timelines=Wt,i.append(Dt,Vt.timelines),o.push({instruction:Vt,player:De,element:Dt}),Vt.queriedElements.forEach(yn=>Ss(a,yn,[]).push(De)),Vt.preStyleProps.forEach((yn,ho)=>{if(yn.size){let mi=l.get(ho);mi||l.set(ho,mi=new Set),yn.forEach((Cc,Jd)=>mi.add(Jd))}}),Vt.postStyleProps.forEach((yn,ho)=>{let mi=c.get(ho);mi||c.set(ho,mi=new Set),yn.forEach((Cc,Jd)=>mi.add(Jd))})});if(N.length){const Z=[];N.forEach(K=>{Z.push(function Mbe(n,e){return new R(3505,!1)}())}),V.forEach(K=>K.destroy()),this.reportError(Z)}const M=new Map,D=new Map;o.forEach(Z=>{const K=Z.element;i.has(K)&&(D.set(K,K),this._beforeAnimationBuild(Z.player.namespaceId,Z.instruction,M))}),s.forEach(Z=>{const K=Z.element;this._getPreviousPlayers(K,!1,Z.namespaceId,Z.triggerName,null).forEach(De=>{Ss(M,K,[]).push(De),De.destroy()})});const L=v.filter(Z=>TH(Z,l,c)),ne=new Map;SH(ne,this.driver,E,c,Ro).forEach(Z=>{TH(Z,l,c)&&L.push(Z)});const X=new Map;f.forEach((Z,K)=>{SH(X,this.driver,new Set(Z),l,"!")}),L.forEach(Z=>{const K=ne.get(Z),re=X.get(Z);ne.set(Z,new Map([...K?.entries()??[],...re?.entries()??[]]))});const Ye=[],ot=[],Rn={};o.forEach(Z=>{const{element:K,player:re,instruction:De}=Z;if(i.has(K)){if(u.has(K))return re.onDestroy(()=>uo(K,De.toStyles)),re.disabled=!0,re.overrideTotalTime(De.totalTime),void s.push(re);let Dt=Rn;if(D.size>1){let gi=K;const Bt=[];for(;gi=gi.parentNode;){const Vt=D.get(gi);if(Vt){Dt=Vt;break}Bt.push(gi)}Bt.forEach(Vt=>D.set(Vt,Dt))}const et=this._buildAnimation(re.namespaceId,De,M,r,X,ne);if(re.setRealPlayer(et),Dt===Rn)Ye.push(re);else{const gi=this.playersByElement.get(Dt);gi&&gi.length&&(re.parentPlayer=nl(gi)),s.push(re)}}else wc(K,De.fromStyles),re.onDestroy(()=>uo(K,De.toStyles)),ot.push(re),u.has(K)&&s.push(re)}),ot.forEach(Z=>{const K=r.get(Z.element);if(K&&K.length){const re=nl(K);Z.setRealPlayer(re)}}),s.forEach(Z=>{Z.parentPlayer?Z.syncPlayerEvents(Z.parentPlayer):Z.destroy()});for(let Z=0;Z<v.length;Z++){const K=v[Z],re=K[Er];if(Kd(K,mw),re&&re.hasAnimation)continue;let De=[];if(a.size){let et=a.get(K);et&&et.length&&De.push(...et);let gi=this.driver.query(K,QT,!0);for(let Bt=0;Bt<gi.length;Bt++){let Vt=a.get(gi[Bt]);Vt&&Vt.length&&De.push(...Vt)}}const Dt=De.filter(et=>!et.destroyed);Dt.length?ACe(this,K,Dt):this.processLeaveNode(K)}return v.length=0,Ye.forEach(Z=>{this.players.push(Z),Z.onDone(()=>{Z.destroy();const K=this.players.indexOf(Z);this.players.splice(K,1)}),Z.play()}),Ye}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,s,r){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!r||r==Ig;a.forEach(c=>{c.queued||!l&&c.triggerName!=s||o.push(c)})}}return(i||s)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||s&&s!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const r=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==r,d=Ss(i,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}wc(r,t.fromStyles)}_buildAnimation(e,t,i,s,r,o){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,h=t.timelines.map(p=>{const g=p.element;u.add(g);const v=g[Er];if(v&&v.removedBeforeQueried)return new Qf(p.duration,p.delay);const _=g!==l,E=function kCe(n){const e=[];return xH(n,e),e}((i.get(g)||bCe).map(M=>M.getRealPlayer())).filter(M=>!!M.element&&M.element===g),b=r.get(g),T=o.get(g),V=iH(this._normalizer,p.keyframes,b,T),N=this._buildPlayer(p,V,E);if(p.subTimeline&&s&&d.add(g),_){const M=new lD(e,a,g);M.setRealPlayer(N),c.push(M)}return N});c.forEach(p=>{Ss(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function xCe(n,e,t){let i=n.get(e);if(i){if(i.length){const s=i.indexOf(t);i.splice(s,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>Ws(p,cH));const f=nl(h);return f.onDestroy(()=>{u.forEach(p=>Kd(p,cH)),uo(l,t.toStyles)}),d.forEach(p=>{Ss(s,p,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Qf(e.duration,e.delay)}}class lD{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new Qf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(s=>$T(e,i,void 0,s))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ss(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function xw(n){return n&&1===n.nodeType}function CH(n,e){const t=n.style.display;return n.style.display=e??"none",t}function SH(n,e,t,i,s){const r=[];t.forEach(l=>r.push(CH(l)));const o=[];i.forEach((l,c)=>{const u=new Map;l.forEach(d=>{const h=e.computeStyle(c,d,s);u.set(d,h),(!h||0==h.length)&&(c[Er]=CCe,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>CH(l,r[a++])),o}function IH(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const s=new Set(e),r=new Map;function o(a){if(!a)return 1;let l=r.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:s.has(c)?1:o(c),r.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function Ws(n,e){n.classList?.add(e)}function Kd(n,e){n.classList?.remove(e)}function ACe(n,e,t){nl(t).onDone(()=>n.processLeaveNode(e))}function xH(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof nL?xH(i.players,e):e.push(i)}}function TH(n,e,t){const i=t.get(n);if(!i)return!1;let s=e.get(n);return s?i.forEach(r=>s.add(r)):e.set(n,i),t.delete(n),!0}class xg{constructor(e,t,i,s){this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new ICe(e.body,t,i,s),this._timelineEngine=new vCe(e.body,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,s,r){const o=e+"-"+s;let a=this._triggerCache[o];if(!a){const l=[],u=JT(this._driver,r,l,[]);if(l.length)throw function wbe(n,e){return new R(3404,!1)}();a=function fCe(n,e,t){return new pCe(n,e,t)}(s,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,s,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,s){this._transitionEngine.insertNode(e,t,i,s)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,s){if("@"==i.charAt(0)){const[r,o]=sH(i);this._timelineEngine.command(r,t,o,s)}else this._transitionEngine.trigger(e,t,i,s)}listen(e,t,i,s,r){if("@"==i.charAt(0)){const[o,a]=sH(i);return this._timelineEngine.listen(o,t,a,r)}return this._transitionEngine.listen(e,t,i,s,r)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}class Tg{static{this.initialStylesByElement=new WeakMap}constructor(e,t,i){this._element=e,this._startStyles=t,this._endStyles=i,this._state=0;let s=Tg.initialStylesByElement.get(e);s||Tg.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&uo(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(uo(this._element,this._initialStyles),this._endStyles&&(uo(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Tg.initialStylesByElement.delete(this._element),this._startStyles&&(wc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(wc(this._element,this._endStyles),this._endStyles=null),uo(this._element,this._initialStyles),this._state=3)}}function cD(n){let e=null;return n.forEach((t,i)=>{(function RCe(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class DH{constructor(e,t,i,s){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,s)=>{"offset"!==s&&e.set(s,this._finished?i:KT(this.element,s))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class AH{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return oH(e,t)}getParentElement(e){return HT(e)}query(e,t,i){return aH(e,t,i)}computeStyle(e,t,i){return KT(e,t)}animate(e,t,i,s,r,o=[]){const l={duration:i,delay:s,fill:0==s?"both":"forwards"};r&&(l.easing=r);const c=new Map,u=o.filter(f=>f instanceof DH);(function zbe(n,e){return 0===n||0===e})(i,s)&&u.forEach(f=>{f.currentSnapshot.forEach((p,g)=>c.set(g,p))});let d=function Ube(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}(t).map(f=>new Map(f));d=function qbe(n,e,t){if(t.size&&e.length){let i=e[0],s=[];if(t.forEach((r,o)=>{i.has(o)||s.push(o),i.set(o,r)}),s.length)for(let r=1;r<e.length;r++){let o=e[r];s.forEach(a=>o.set(a,KT(n,a)))}}return e}(e,d,c);const h=function NCe(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=cD(e[0]),e.length>1&&(i=cD(e[e.length-1]))):e instanceof Map&&(t=cD(e)),t||i?new Tg(n,t,i):null}(e,d);return new DH(e,d,l,h)}}const kH="@.disabled";class MH{constructor(e,t,i,s){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=s,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,s=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,s)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,s){this.delegate.setAttribute(e,t,i,s)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,s){this.delegate.setStyle(e,t,i,s)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==kH?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class PCe extends MH{constructor(e,t,i,s,r){super(t,i,s,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==kH?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const s=function OCe(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let r=t.slice(1),o="";return"@"!=r.charAt(0)&&([r,o]=function FCe(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(r)),this.engine.listen(this.namespaceId,s,r,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}class LCe{constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(s,r)=>{const o=r?.parentNode(s);o&&r.removeChild(o,s)}}createRenderer(e,t){const s=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){const c=this._rendererCache;let u=c.get(s);return u||(u=new MH("",s,this.engine,()=>c.delete(s)),c.set(s,u)),u}const r=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);const a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(r,o,e,c.name,c)};return t.data.animation.forEach(a),new PCe(this,o,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId)return void this._zone.run(()=>t(i));const s=this._animationCallbacksBuffer;0==s.length&&queueMicrotask(()=>{this._zone.run(()=>{s.forEach(r=>{const[o,a]=r;o(a)}),this._animationCallbacksBuffer=[]})}),s.push([t,i])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const NH=[{provide:GT,useFactory:function VCe(){return new hH}},{provide:xg,useClass:(()=>{class n extends xg{constructor(t,i,s){super(t,i,s,H(zm,{optional:!0}))}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(i){return new(i||n)(P(it),P(qT),P(GT))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})()},{provide:Jb,useFactory:function $Ce(n,e,t){return new LCe(n,e,t)},deps:[RS,xg,Ae]}],uD=[{provide:qT,useFactory:()=>new AH},{provide:Ph,useValue:"BrowserAnimations"},...NH],RH=[{provide:qT,useClass:zT},{provide:Ph,useValue:"NoopAnimations"},...NH];let UCe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?RH:uD}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=en({type:n})}static{this.\u0275inj=Yt({providers:uD,imports:[sO]})}}return n})();const Dw={schedule(n,e){const t=setTimeout(n,e);return()=>clearTimeout(t)},scheduleBeforeRender(n){if(typeof window>"u")return Dw.schedule(n,0);if(typeof window.requestAnimationFrame>"u")return Dw.schedule(n,16);const e=window.requestAnimationFrame(n);return()=>window.cancelAnimationFrame(e)}};let dD;function XCe(n,e,t){let i=t;return function HCe(n){return!!n&&n.nodeType===Node.ELEMENT_NODE}(n)&&e.some((s,r)=>!("*"===s||!function qCe(n,e){if(!dD){const t=Element.prototype;dD=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}return n.nodeType===Node.ELEMENT_NODE&&dD.call(n,e)}(n,s)||(i=r,0))),i}class KCe{constructor(e,t){this.componentFactory=t.get(xo).resolveComponentFactory(e)}create(e){return new JCe(this.componentFactory,e)}}class JCe{constructor(e,t){this.componentFactory=e,this.injector=t,this.eventEmitters=new Uj(1),this.events=this.eventEmitters.pipe(ps(i=>$_(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(Ae),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=Dw.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,t,i){this.runInZone(()=>{i&&(t=i.call(this.componentRef?.instance,t)),null!==this.componentRef?function GCe(n,e){return n===e||n!=n&&e!=e}(t,this.getInputValue(e))&&(void 0!==t||!this.unchangedInputs.has(e))||(this.recordInputChange(e,t),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=t,this.scheduleDetectChanges()):this.initialInputValues.set(e,t)})}initializeComponent(e){const t=Zt.create({providers:[],parent:this.injector}),i=function YCe(n,e){const t=n.childNodes,i=e.map(()=>[]);let s=-1;e.some((r,o)=>"*"===r&&(s=o,!0));for(let r=0,o=t.length;r<o;++r){const a=t[r],l=XCe(a,e,s);-1!==l&&i[l].push(a)}return i}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(t,i,e),this.viewChangeDetectorRef=this.componentRef.injector.get(Do),this.implementsOnChanges=function zCe(n){return"function"==typeof n}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(ir).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e,transform:t})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e),t)}),this.initialInputValues.clear()}initializeOutputs(e){const t=this.componentFactory.outputs.map(({propName:i,templateName:s})=>e.instance[i].pipe(Ve(o=>({name:s,value:o}))));this.eventEmitters.next(t)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const t=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(t)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=Dw.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,t){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[e];if(i)return void(i.currentValue=t);const s=this.unchangedInputs.has(e),r=s?void 0:this.getInputValue(e);this.inputChanges[e]=new vA(r,t,s)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class eSe extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}let nSe=(()=>{class n{constructor(t,i){this.injector=t,this.log=i;const s=function tSe(n,e){const t=function QCe(n,e){return e.get(xo).resolveComponentFactory(n).inputs}(n,e.injector),i=e.strategyFactory||new KCe(n,e.injector),s=function WCe(n){const e={};return n.forEach(({propName:t,templateName:i,transform:s})=>{e[function jCe(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(i)]=[t,s]}),e}(t);class r extends eSe{static{this.observedAttributes=Object.keys(s)}get ngElementStrategy(){if(!this._ngElementStrategy){const a=this._ngElementStrategy=i.create(this.injector||e.injector);t.forEach(({propName:l,transform:c})=>{if(!this.hasOwnProperty(l))return;const u=this[l];delete this[l],a.setInputValue(l,u,c)})}return this._ngElementStrategy}constructor(a){super(),this.injector=a}attributeChangedCallback(a,l,c,u){const[d,h]=s[a];this.ngElementStrategy.setInputValue(d,c,h)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{const l=new CustomEvent(a.name,{detail:a.value});this.dispatchEvent(l)})}}return t.forEach(({propName:o,transform:a})=>{Object.defineProperty(r.prototype,o,{get(){return this.ngElementStrategy.getInputValue(o)},set(l){this.ngElementStrategy.setInputValue(o,l,a)},configurable:!0,enumerable:!0})}),r}(tH,{injector:t});customElements.define("gems-ai-widget",s),console.log("GEMS-AI Bot version : 1.3.3")}ngDoBootstrap(){}static{this.\u0275fac=function(i){return new(i||n)(P(Zt),P(Lu))}}static{this.\u0275mod=en({type:n,bootstrap:[tH]})}static{this.\u0275inj=Yt({providers:[rA(Jj.forRoot())],imports:[sO,zee,_te,KEe,UCe,Kte.forRoot(),bve,Jj.forRoot()]})}}return n})();ZK().bootstrapModule(nSe).catch(n=>console.error(n))},190:function(Ic,ah,Mg){var po,cn;!function(lh,tt){"use strict";po=function(){var lh=function(){},tt="undefined",il=typeof window!==tt&&typeof window.navigator!==tt&&/Trident\/|MSIE /.test(window.navigator.userAgent),oa=["trace","debug","info","warn","error"],ei={},de=null;function ch(St,_n){var Be=St[_n];if("function"==typeof Be.bind)return Be.bind(St);try{return Function.prototype.bind.call(Be,St)}catch{return function(){return Function.prototype.apply.apply(Be,[St,arguments])}}}function Fw(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function go(){for(var St=this.getLevel(),_n=0;_n<oa.length;_n++){var Be=oa[_n];this[Be]=_n<St?lh:this.methodFactory(Be,St,this.name)}if(this.log=this.debug,typeof console===tt&&St<this.levels.SILENT)return"No console available for logging"}function uh(St){return function(){typeof console!==tt&&(go.call(this),this[St].apply(this,arguments))}}function Lw(St,_n,Be){return function ED(St){return"debug"===St&&(St="log"),typeof console!==tt&&("trace"===St&&il?Fw:void 0!==console[St]?ch(console,St):void 0!==console.log?ch(console,"log"):lh)}(St)||uh.apply(this,arguments)}function dh(St,_n){var sl,rl,mo,Be=this,Vi="loglevel";function aa(){var $t;if(typeof window!==tt&&Vi){try{$t=window.localStorage[Vi]}catch{}if(typeof $t===tt)try{var Un=window.document.cookie,Tc=encodeURIComponent(Vi),Rg=Un.indexOf(Tc+"=");-1!==Rg&&($t=/^([^;]+)/.exec(Un.slice(Rg+Tc.length+1))[1])}catch{}return void 0===Be.levels[$t]&&($t=void 0),$t}}function ca($t){var Un=$t;if("string"==typeof Un&&void 0!==Be.levels[Un.toUpperCase()]&&(Un=Be.levels[Un.toUpperCase()]),"number"==typeof Un&&Un>=0&&Un<=Be.levels.SILENT)return Un;throw new TypeError("log.setLevel() called with invalid level: "+$t)}"string"==typeof St?Vi+=":"+St:"symbol"==typeof St&&(Vi=void 0),Be.name=St,Be.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},Be.methodFactory=_n||Lw,Be.getLevel=function(){return mo??rl??sl},Be.setLevel=function($t,Un){return mo=ca($t),!1!==Un&&function xc($t){var Un=(oa[$t]||"silent").toUpperCase();if(typeof window!==tt&&Vi){try{return void(window.localStorage[Vi]=Un)}catch{}try{window.document.cookie=encodeURIComponent(Vi)+"="+Un+";"}catch{}}}(mo),go.call(Be)},Be.setDefaultLevel=function($t){rl=ca($t),aa()||Be.setLevel($t,!1)},Be.resetLevel=function(){mo=null,function la(){if(typeof window!==tt&&Vi){try{window.localStorage.removeItem(Vi)}catch{}try{window.document.cookie=encodeURIComponent(Vi)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}(),go.call(Be)},Be.enableAll=function($t){Be.setLevel(Be.levels.TRACE,$t)},Be.disableAll=function($t){Be.setLevel(Be.levels.SILENT,$t)},Be.rebuild=function(){if(de!==Be&&(sl=ca(de.getLevel())),go.call(Be),de===Be)for(var $t in ei)ei[$t].rebuild()},sl=ca(de?de.getLevel():"WARN");var Bw=aa();null!=Bw&&(mo=ca(Bw)),go.call(Be)}(de=new dh).getLogger=function(_n){if("symbol"!=typeof _n&&"string"!=typeof _n||""===_n)throw new TypeError("You must supply a name when creating a logger.");var Be=ei[_n];return Be||(Be=ei[_n]=new dh(_n,de.methodFactory)),Be};var Ng=typeof window!==tt?window.log:void 0;return de.noConflict=function(){return typeof window!==tt&&window.log===de&&(window.log=Ng),de},de.getLoggers=function(){return ei},de.default=de,de},void 0!==(cn=po.call(ah,Mg,ah,Ic))&&(Ic.exports=cn)}()}},Ic=>{Ic(Ic.s=564)}]);
})();

// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
// extracted by mini-css-extract-plugin

})();

/******/ })()
;